{"version":3,"file":"index.js","sources":["../webpack://typescript-action/./lib/main.js","../webpack://typescript-action/./lib/slackMessage.js","../webpack://typescript-action/./lib/takeScreenshot.js","../webpack://typescript-action/./node_modules/@actions/core/lib/command.js","../webpack://typescript-action/./node_modules/@actions/core/lib/core.js","../webpack://typescript-action/./node_modules/@actions/core/lib/file-command.js","../webpack://typescript-action/./node_modules/@actions/core/lib/utils.js","../webpack://typescript-action/./node_modules/@actions/github/lib/context.js","../webpack://typescript-action/./node_modules/@actions/github/lib/github.js","../webpack://typescript-action/./node_modules/@actions/github/lib/internal/utils.js","../webpack://typescript-action/./node_modules/@actions/github/lib/utils.js","../webpack://typescript-action/./node_modules/@actions/http-client/index.js","../webpack://typescript-action/./node_modules/@actions/http-client/proxy.js","../webpack://typescript-action/./node_modules/@octokit/auth-token/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/core/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/endpoint/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/endpoint/node_modules/is-plain-object/dist/is-plain-object.js","../webpack://typescript-action/./node_modules/@octokit/graphql/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/plugin-paginate-rest/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/plugin-rest-endpoint-methods/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/request-error/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/request/dist-node/index.js","../webpack://typescript-action/./node_modules/@octokit/request/node_modules/is-plain-object/dist/is-plain-object.js","../webpack://typescript-action/./node_modules/@slack/webhook/dist/IncomingWebhook.js","../webpack://typescript-action/./node_modules/@slack/webhook/dist/errors.js","../webpack://typescript-action/./node_modules/@slack/webhook/dist/index.js","../webpack://typescript-action/./node_modules/@slack/webhook/dist/instrument.js","../webpack://typescript-action/./node_modules/axios/index.js","../webpack://typescript-action/./node_modules/axios/lib/adapters/http.js","../webpack://typescript-action/./node_modules/axios/lib/adapters/xhr.js","../webpack://typescript-action/./node_modules/axios/lib/axios.js","../webpack://typescript-action/./node_modules/axios/lib/cancel/Cancel.js","../webpack://typescript-action/./node_modules/axios/lib/cancel/CancelToken.js","../webpack://typescript-action/./node_modules/axios/lib/cancel/isCancel.js","../webpack://typescript-action/./node_modules/axios/lib/core/Axios.js","../webpack://typescript-action/./node_modules/axios/lib/core/InterceptorManager.js","../webpack://typescript-action/./node_modules/axios/lib/core/buildFullPath.js","../webpack://typescript-action/./node_modules/axios/lib/core/createError.js","../webpack://typescript-action/./node_modules/axios/lib/core/dispatchRequest.js","../webpack://typescript-action/./node_modules/axios/lib/core/enhanceError.js","../webpack://typescript-action/./node_modules/axios/lib/core/mergeConfig.js","../webpack://typescript-action/./node_modules/axios/lib/core/settle.js","../webpack://typescript-action/./node_modules/axios/lib/core/transformData.js","../webpack://typescript-action/./node_modules/axios/lib/defaults.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/bind.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/buildURL.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/combineURLs.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/cookies.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/isAbsoluteURL.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/isAxiosError.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/isURLSameOrigin.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/normalizeHeaderName.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/parseHeaders.js","../webpack://typescript-action/./node_modules/axios/lib/helpers/spread.js","../webpack://typescript-action/./node_modules/axios/lib/utils.js","../webpack://typescript-action/./node_modules/balanced-match/index.js","../webpack://typescript-action/./node_modules/before-after-hook/index.js","../webpack://typescript-action/./node_modules/before-after-hook/lib/add.js","../webpack://typescript-action/./node_modules/before-after-hook/lib/register.js","../webpack://typescript-action/./node_modules/before-after-hook/lib/remove.js","../webpack://typescript-action/./node_modules/brace-expansion/index.js","../webpack://typescript-action/./node_modules/concat-map/index.js","../webpack://typescript-action/./node_modules/debug/src/browser.js","../webpack://typescript-action/./node_modules/debug/src/common.js","../webpack://typescript-action/./node_modules/debug/src/index.js","../webpack://typescript-action/./node_modules/debug/src/node.js","../webpack://typescript-action/./node_modules/deprecation/dist-node/index.js","../webpack://typescript-action/./node_modules/follow-redirects/debug.js","../webpack://typescript-action/./node_modules/follow-redirects/index.js","../webpack://typescript-action/./node_modules/fs.realpath/index.js","../webpack://typescript-action/./node_modules/fs.realpath/old.js","../webpack://typescript-action/./node_modules/glob/common.js","../webpack://typescript-action/./node_modules/glob/glob.js","../webpack://typescript-action/./node_modules/glob/sync.js","../webpack://typescript-action/./node_modules/has-flag/index.js","../webpack://typescript-action/./node_modules/inflight/inflight.js","../webpack://typescript-action/./node_modules/inherits/inherits.js","../webpack://typescript-action/./node_modules/inherits/inherits_browser.js","../webpack://typescript-action/./node_modules/jpeg-js/index.js","../webpack://typescript-action/./node_modules/jpeg-js/lib/decoder.js","../webpack://typescript-action/./node_modules/jpeg-js/lib/encoder.js","../webpack://typescript-action/./node_modules/mime/Mime.js","../webpack://typescript-action/./node_modules/mime/index.js","../webpack://typescript-action/./node_modules/mime/types/other.js","../webpack://typescript-action/./node_modules/mime/types/standard.js","../webpack://typescript-action/./node_modules/minimatch/minimatch.js","../webpack://typescript-action/./node_modules/ms/index.js","../webpack://typescript-action/./node_modules/node-fetch/lib/index.js","../webpack://typescript-action/./node_modules/once/once.js","../webpack://typescript-action/./node_modules/path-is-absolute/index.js","../webpack://typescript-action/./node_modules/playwright/index.js","../webpack://typescript-action/./node_modules/playwright/lib/browserServerImpl.js","../webpack://typescript-action/./node_modules/playwright/lib/client/accessibility.js","../webpack://typescript-action/./node_modules/playwright/lib/client/android.js","../webpack://typescript-action/./node_modules/playwright/lib/client/browser.js","../webpack://typescript-action/./node_modules/playwright/lib/client/browserContext.js","../webpack://typescript-action/./node_modules/playwright/lib/client/browserType.js","../webpack://typescript-action/./node_modules/playwright/lib/client/cdpSession.js","../webpack://typescript-action/./node_modules/playwright/lib/client/channelOwner.js","../webpack://typescript-action/./node_modules/playwright/lib/client/chromiumBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/client/chromiumBrowserContext.js","../webpack://typescript-action/./node_modules/playwright/lib/client/chromiumCoverage.js","../webpack://typescript-action/./node_modules/playwright/lib/client/clientHelper.js","../webpack://typescript-action/./node_modules/playwright/lib/client/connection.js","../webpack://typescript-action/./node_modules/playwright/lib/client/consoleMessage.js","../webpack://typescript-action/./node_modules/playwright/lib/client/dialog.js","../webpack://typescript-action/./node_modules/playwright/lib/client/download.js","../webpack://typescript-action/./node_modules/playwright/lib/client/electron.js","../webpack://typescript-action/./node_modules/playwright/lib/client/elementHandle.js","../webpack://typescript-action/./node_modules/playwright/lib/client/events.js","../webpack://typescript-action/./node_modules/playwright/lib/client/fileChooser.js","../webpack://typescript-action/./node_modules/playwright/lib/client/firefoxBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/client/frame.js","../webpack://typescript-action/./node_modules/playwright/lib/client/input.js","../webpack://typescript-action/./node_modules/playwright/lib/client/jsHandle.js","../webpack://typescript-action/./node_modules/playwright/lib/client/network.js","../webpack://typescript-action/./node_modules/playwright/lib/client/page.js","../webpack://typescript-action/./node_modules/playwright/lib/client/playwright.js","../webpack://typescript-action/./node_modules/playwright/lib/client/selectors.js","../webpack://typescript-action/./node_modules/playwright/lib/client/stream.js","../webpack://typescript-action/./node_modules/playwright/lib/client/types.js","../webpack://typescript-action/./node_modules/playwright/lib/client/video.js","../webpack://typescript-action/./node_modules/playwright/lib/client/waiter.js","../webpack://typescript-action/./node_modules/playwright/lib/client/webkitBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/client/worker.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/androidDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/browserContextDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/browserDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/browserTypeDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/cdpSessionDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/consoleMessageDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/dialogDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/dispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/downloadDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/electronDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/elementHandlerDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/frameDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/jsHandleDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/networkDispatchers.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/pageDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/playwrightDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/selectorsDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/dispatchers/streamDispatcher.js","../webpack://typescript-action/./node_modules/playwright/lib/generated/consoleApiSource.js","../webpack://typescript-action/./node_modules/playwright/lib/generated/injectedScriptSource.js","../webpack://typescript-action/./node_modules/playwright/lib/generated/recorderSource.js","../webpack://typescript-action/./node_modules/playwright/lib/generated/utilityScriptSource.js","../webpack://typescript-action/./node_modules/playwright/lib/inprocess.js","../webpack://typescript-action/./node_modules/playwright/lib/protocol/serializers.js","../webpack://typescript-action/./node_modules/playwright/lib/protocol/transport.js","../webpack://typescript-action/./node_modules/playwright/lib/protocol/validator.js","../webpack://typescript-action/./node_modules/playwright/lib/protocol/validatorPrimitives.js","../webpack://typescript-action/./node_modules/playwright/lib/server/accessibility.js","../webpack://typescript-action/./node_modules/playwright/lib/server/android/android.js","../webpack://typescript-action/./node_modules/playwright/lib/server/android/backendAdb.js","../webpack://typescript-action/./node_modules/playwright/lib/server/browser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/browserContext.js","../webpack://typescript-action/./node_modules/playwright/lib/server/browserType.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/chromium.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crAccessibility.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crConnection.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crCoverage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crDevTools.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crExecutionContext.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crInput.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crNetworkManager.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crPage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crPdf.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/crProtocolHelper.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/findChromiumChannel.js","../webpack://typescript-action/./node_modules/playwright/lib/server/chromium/videoRecorder.js","../webpack://typescript-action/./node_modules/playwright/lib/server/common/cssParser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/common/cssTokenizer.js","../webpack://typescript-action/./node_modules/playwright/lib/server/common/selectorParser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/common/utilityScriptSerializers.js","../webpack://typescript-action/./node_modules/playwright/lib/server/console.js","../webpack://typescript-action/./node_modules/playwright/lib/server/deviceDescriptors.js","../webpack://typescript-action/./node_modules/playwright/lib/server/dialog.js","../webpack://typescript-action/./node_modules/playwright/lib/server/dom.js","../webpack://typescript-action/./node_modules/playwright/lib/server/download.js","../webpack://typescript-action/./node_modules/playwright/lib/server/electron/electron.js","../webpack://typescript-action/./node_modules/playwright/lib/server/fileChooser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffAccessibility.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffConnection.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffExecutionContext.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffInput.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffNetworkManager.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/ffPage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/firefox/firefox.js","../webpack://typescript-action/./node_modules/playwright/lib/server/frames.js","../webpack://typescript-action/./node_modules/playwright/lib/server/helper.js","../webpack://typescript-action/./node_modules/playwright/lib/server/input.js","../webpack://typescript-action/./node_modules/playwright/lib/server/instrumentation.js","../webpack://typescript-action/./node_modules/playwright/lib/server/javascript.js","../webpack://typescript-action/./node_modules/playwright/lib/server/macEditingCommands.js","../webpack://typescript-action/./node_modules/playwright/lib/server/network.js","../webpack://typescript-action/./node_modules/playwright/lib/server/page.js","../webpack://typescript-action/./node_modules/playwright/lib/server/pipeTransport.js","../webpack://typescript-action/./node_modules/playwright/lib/server/playwright.js","../webpack://typescript-action/./node_modules/playwright/lib/server/processLauncher.js","../webpack://typescript-action/./node_modules/playwright/lib/server/progress.js","../webpack://typescript-action/./node_modules/playwright/lib/server/screenshotter.js","../webpack://typescript-action/./node_modules/playwright/lib/server/selectors.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/inMemorySnapshotter.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/persistentSnapshotter.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/snapshotRenderer.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/snapshotServer.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/snapshotStorage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/snapshotter.js","../webpack://typescript-action/./node_modules/playwright/lib/server/snapshot/snapshotterInjected.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/har/harTracer.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/inspectorController.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/codeGenerator.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/csharp.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/java.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/javascript.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/language.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/python.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/recorderActions.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/recorderApp.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/recorderUtils.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorder/utils.js","../webpack://typescript-action/./node_modules/playwright/lib/server/supplements/recorderSupplement.js","../webpack://typescript-action/./node_modules/playwright/lib/server/trace/recorder/tracer.js","../webpack://typescript-action/./node_modules/playwright/lib/server/transport.js","../webpack://typescript-action/./node_modules/playwright/lib/server/types.js","../webpack://typescript-action/./node_modules/playwright/lib/server/usKeyboardLayout.js","../webpack://typescript-action/./node_modules/playwright/lib/server/validateDependencies.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/webkit.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkAccessibility.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkBrowser.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkConnection.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkExecutionContext.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkInput.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkInterceptableRequest.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkPage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkProvisionalPage.js","../webpack://typescript-action/./node_modules/playwright/lib/server/webkit/wkWorkers.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/binaryPaths.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/debugLogger.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/errors.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/httpServer.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/registry.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/stackTrace.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/timeoutSettings.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/ubuntuVersion.js","../webpack://typescript-action/./node_modules/playwright/lib/utils/utils.js","../webpack://typescript-action/./node_modules/pngjs/lib/bitmapper.js","../webpack://typescript-action/./node_modules/pngjs/lib/bitpacker.js","../webpack://typescript-action/./node_modules/pngjs/lib/chunkstream.js","../webpack://typescript-action/./node_modules/pngjs/lib/constants.js","../webpack://typescript-action/./node_modules/pngjs/lib/crc.js","../webpack://typescript-action/./node_modules/pngjs/lib/filter-pack.js","../webpack://typescript-action/./node_modules/pngjs/lib/filter-parse-async.js","../webpack://typescript-action/./node_modules/pngjs/lib/filter-parse-sync.js","../webpack://typescript-action/./node_modules/pngjs/lib/filter-parse.js","../webpack://typescript-action/./node_modules/pngjs/lib/format-normaliser.js","../webpack://typescript-action/./node_modules/pngjs/lib/interlace.js","../webpack://typescript-action/./node_modules/pngjs/lib/packer-async.js","../webpack://typescript-action/./node_modules/pngjs/lib/packer-sync.js","../webpack://typescript-action/./node_modules/pngjs/lib/packer.js","../webpack://typescript-action/./node_modules/pngjs/lib/paeth-predictor.js","../webpack://typescript-action/./node_modules/pngjs/lib/parser-async.js","../webpack://typescript-action/./node_modules/pngjs/lib/parser-sync.js","../webpack://typescript-action/./node_modules/pngjs/lib/parser.js","../webpack://typescript-action/./node_modules/pngjs/lib/png-sync.js","../webpack://typescript-action/./node_modules/pngjs/lib/png.js","../webpack://typescript-action/./node_modules/pngjs/lib/sync-inflate.js","../webpack://typescript-action/./node_modules/pngjs/lib/sync-reader.js","../webpack://typescript-action/./node_modules/rimraf/rimraf.js","../webpack://typescript-action/./node_modules/stack-utils/index.js","../webpack://typescript-action/./node_modules/stack-utils/node_modules/escape-string-regexp/index.js","../webpack://typescript-action/./node_modules/supports-color/index.js","../webpack://typescript-action/./node_modules/tunnel/index.js","../webpack://typescript-action/./node_modules/tunnel/lib/tunnel.js","../webpack://typescript-action/./node_modules/universal-user-agent/dist-node/index.js","../webpack://typescript-action/./node_modules/wrappy/wrappy.js","../webpack://typescript-action/./node_modules/ws/index.js","../webpack://typescript-action/./node_modules/ws/lib/buffer-util.js","../webpack://typescript-action/./node_modules/ws/lib/constants.js","../webpack://typescript-action/./node_modules/ws/lib/event-target.js","../webpack://typescript-action/./node_modules/ws/lib/extension.js","../webpack://typescript-action/./node_modules/ws/lib/limiter.js","../webpack://typescript-action/./node_modules/ws/lib/permessage-deflate.js","../webpack://typescript-action/./node_modules/ws/lib/receiver.js","../webpack://typescript-action/./node_modules/ws/lib/sender.js","../webpack://typescript-action/./node_modules/ws/lib/stream.js","../webpack://typescript-action/./node_modules/ws/lib/validation.js","../webpack://typescript-action/./node_modules/ws/lib/websocket-server.js","../webpack://typescript-action/./node_modules/ws/lib/websocket.js","../webpack://typescript-action/./node_modules/@vercel/ncc/dist/ncc/@@notfound.js","../webpack://typescript-action/external \"assert\"","../webpack://typescript-action/external \"buffer\"","../webpack://typescript-action/external \"child_process\"","../webpack://typescript-action/external \"crypto\"","../webpack://typescript-action/external \"events\"","../webpack://typescript-action/external \"fs\"","../webpack://typescript-action/external \"http\"","../webpack://typescript-action/external \"https\"","../webpack://typescript-action/external \"module\"","../webpack://typescript-action/external \"net\"","../webpack://typescript-action/external \"os\"","../webpack://typescript-action/external \"path\"","../webpack://typescript-action/external \"querystring\"","../webpack://typescript-action/external \"readline\"","../webpack://typescript-action/external \"stream\"","../webpack://typescript-action/external \"tls\"","../webpack://typescript-action/external \"tty\"","../webpack://typescript-action/external \"url\"","../webpack://typescript-action/external \"util\"","../webpack://typescript-action/external \"zlib\"","../webpack://typescript-action/webpack/bootstrap","../webpack://typescript-action/webpack/runtime/compat","../webpack://typescript-action/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core = __importStar(require(\"@actions/core\"));\nconst github_1 = __importDefault(require(\"@actions/github\"));\nconst slackMessage_1 = __importDefault(require(\"./slackMessage\"));\nconst takeScreenshot_1 = __importDefault(require(\"./takeScreenshot\"));\nfunction run() {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const { owner, repo } = github_1.default.context.repo;\n            const slackWebhook = core.getInput('slackWebhook');\n            const githubToken = core.getInput('githubToken');\n            const url = core.getInput('url');\n            const octokit = github_1.default.getOctokit(githubToken);\n            const latestReleaseScreenshot = yield takeScreenshot_1.default(url);\n            const [latest, previous] = (yield octokit.repos.listReleases({ owner, repo })).data.filter(({ draft, prerelease }) => !draft && !prerelease);\n            const latestReleaseVersion = latest.tag_name.replace('v', '');\n            const previousReleaseVersion = previous.tag_name.replace('v', '');\n            yield octokit.repos.uploadReleaseAsset({\n                owner,\n                repo,\n                release_id: latest.id,\n                name: `screenshot-${url}.png`,\n                data: latestReleaseScreenshot.toString()\n            });\n            yield slackMessage_1.default(slackWebhook, latestReleaseVersion, previousReleaseVersion, `https://github.com/${owner}/${repo}/releases/download/v${latestReleaseVersion}/screenshot-${url}.png`, `https://github.com/${owner}/${repo}/releases/download/v${previousReleaseVersion}/screenshot-${url}.png`);\n        }\n        catch (error) {\n            core.setFailed(error.message);\n        }\n    });\n}\nrun();\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst webhook_1 = require(\"@slack/webhook\");\nfunction slackMessage(slackWebhook, latestReleaseVersion, previousReleaseVersion, latestReleaseScreenshot, previousReleaseScreenshot) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const webhook = new webhook_1.IncomingWebhook(slackWebhook);\n        yield webhook.send({\n            blocks: [\n                {\n                    type: 'section',\n                    text: {\n                        type: 'mrkdwn',\n                        text: '*Visual Comparison*'\n                    }\n                },\n                {\n                    type: 'section',\n                    text: {\n                        type: 'mrkdwn',\n                        text: '*Released Version*'\n                    }\n                },\n                {\n                    type: 'image',\n                    title: {\n                        type: 'plain_text',\n                        text: `v${latestReleaseVersion}`,\n                        emoji: true\n                    },\n                    image_url: latestReleaseScreenshot,\n                    alt_text: `Version ${latestReleaseVersion}`\n                },\n                {\n                    type: 'section',\n                    text: {\n                        type: 'mrkdwn',\n                        text: '*Previous Version*'\n                    }\n                },\n                {\n                    type: 'image',\n                    title: {\n                        type: 'plain_text',\n                        text: `v${previousReleaseVersion}`,\n                        emoji: true\n                    },\n                    image_url: previousReleaseScreenshot,\n                    alt_text: `Version ${previousReleaseVersion}`\n                }\n            ]\n        });\n    });\n}\nexports.default = slackMessage;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst playwright_1 = require(\"playwright\");\nfunction takeScreenshot(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const browser = yield playwright_1.webkit.launch();\n        const page = yield browser.newPage();\n        yield page.goto(url);\n        const content = yield page.screenshot({\n            fullPage: true\n        });\n        yield browser.close();\n        return content;\n    });\n}\nexports.default = takeScreenshot;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst os = __importStar(require(\"os\"));\nconst utils_1 = require(\"./utils\");\n/**\n * Commands\n *\n * Command Format:\n *   ::name key=value,key=value::message\n *\n * Examples:\n *   ::warning::This is the message\n *   ::set-env name=MY_VAR::some value\n */\nfunction issueCommand(command, properties, message) {\n    const cmd = new Command(command, properties, message);\n    process.stdout.write(cmd.toString() + os.EOL);\n}\nexports.issueCommand = issueCommand;\nfunction issue(name, message = '') {\n    issueCommand(name, {}, message);\n}\nexports.issue = issue;\nconst CMD_STRING = '::';\nclass Command {\n    constructor(command, properties, message) {\n        if (!command) {\n            command = 'missing.command';\n        }\n        this.command = command;\n        this.properties = properties;\n        this.message = message;\n    }\n    toString() {\n        let cmdStr = CMD_STRING + this.command;\n        if (this.properties && Object.keys(this.properties).length > 0) {\n            cmdStr += ' ';\n            let first = true;\n            for (const key in this.properties) {\n                if (this.properties.hasOwnProperty(key)) {\n                    const val = this.properties[key];\n                    if (val) {\n                        if (first) {\n                            first = false;\n                        }\n                        else {\n                            cmdStr += ',';\n                        }\n                        cmdStr += `${key}=${escapeProperty(val)}`;\n                    }\n                }\n            }\n        }\n        cmdStr += `${CMD_STRING}${escapeData(this.message)}`;\n        return cmdStr;\n    }\n}\nfunction escapeData(s) {\n    return utils_1.toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A');\n}\nfunction escapeProperty(s) {\n    return utils_1.toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A')\n        .replace(/:/g, '%3A')\n        .replace(/,/g, '%2C');\n}\n//# sourceMappingURL=command.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst command_1 = require(\"./command\");\nconst file_command_1 = require(\"./file-command\");\nconst utils_1 = require(\"./utils\");\nconst os = __importStar(require(\"os\"));\nconst path = __importStar(require(\"path\"));\n/**\n * The code to exit an action\n */\nvar ExitCode;\n(function (ExitCode) {\n    /**\n     * A code indicating that the action was successful\n     */\n    ExitCode[ExitCode[\"Success\"] = 0] = \"Success\";\n    /**\n     * A code indicating that the action was a failure\n     */\n    ExitCode[ExitCode[\"Failure\"] = 1] = \"Failure\";\n})(ExitCode = exports.ExitCode || (exports.ExitCode = {}));\n//-----------------------------------------------------------------------\n// Variables\n//-----------------------------------------------------------------------\n/**\n * Sets env variable for this action and future actions in the job\n * @param name the name of the variable to set\n * @param val the value of the variable. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction exportVariable(name, val) {\n    const convertedVal = utils_1.toCommandValue(val);\n    process.env[name] = convertedVal;\n    const filePath = process.env['GITHUB_ENV'] || '';\n    if (filePath) {\n        const delimiter = '_GitHubActionsFileCommandDelimeter_';\n        const commandValue = `${name}<<${delimiter}${os.EOL}${convertedVal}${os.EOL}${delimiter}`;\n        file_command_1.issueCommand('ENV', commandValue);\n    }\n    else {\n        command_1.issueCommand('set-env', { name }, convertedVal);\n    }\n}\nexports.exportVariable = exportVariable;\n/**\n * Registers a secret which will get masked from logs\n * @param secret value of the secret\n */\nfunction setSecret(secret) {\n    command_1.issueCommand('add-mask', {}, secret);\n}\nexports.setSecret = setSecret;\n/**\n * Prepends inputPath to the PATH (for this action and future actions)\n * @param inputPath\n */\nfunction addPath(inputPath) {\n    const filePath = process.env['GITHUB_PATH'] || '';\n    if (filePath) {\n        file_command_1.issueCommand('PATH', inputPath);\n    }\n    else {\n        command_1.issueCommand('add-path', {}, inputPath);\n    }\n    process.env['PATH'] = `${inputPath}${path.delimiter}${process.env['PATH']}`;\n}\nexports.addPath = addPath;\n/**\n * Gets the value of an input.  The value is also trimmed.\n *\n * @param     name     name of the input to get\n * @param     options  optional. See InputOptions.\n * @returns   string\n */\nfunction getInput(name, options) {\n    const val = process.env[`INPUT_${name.replace(/ /g, '_').toUpperCase()}`] || '';\n    if (options && options.required && !val) {\n        throw new Error(`Input required and not supplied: ${name}`);\n    }\n    return val.trim();\n}\nexports.getInput = getInput;\n/**\n * Sets the value of an output.\n *\n * @param     name     name of the output to set\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setOutput(name, value) {\n    process.stdout.write(os.EOL);\n    command_1.issueCommand('set-output', { name }, value);\n}\nexports.setOutput = setOutput;\n/**\n * Enables or disables the echoing of commands into stdout for the rest of the step.\n * Echoing is disabled by default if ACTIONS_STEP_DEBUG is not set.\n *\n */\nfunction setCommandEcho(enabled) {\n    command_1.issue('echo', enabled ? 'on' : 'off');\n}\nexports.setCommandEcho = setCommandEcho;\n//-----------------------------------------------------------------------\n// Results\n//-----------------------------------------------------------------------\n/**\n * Sets the action status to failed.\n * When the action exits it will be with an exit code of 1\n * @param message add error issue message\n */\nfunction setFailed(message) {\n    process.exitCode = ExitCode.Failure;\n    error(message);\n}\nexports.setFailed = setFailed;\n//-----------------------------------------------------------------------\n// Logging Commands\n//-----------------------------------------------------------------------\n/**\n * Gets whether Actions Step Debug is on or not\n */\nfunction isDebug() {\n    return process.env['RUNNER_DEBUG'] === '1';\n}\nexports.isDebug = isDebug;\n/**\n * Writes debug message to user log\n * @param message debug message\n */\nfunction debug(message) {\n    command_1.issueCommand('debug', {}, message);\n}\nexports.debug = debug;\n/**\n * Adds an error issue\n * @param message error issue message. Errors will be converted to string via toString()\n */\nfunction error(message) {\n    command_1.issue('error', message instanceof Error ? message.toString() : message);\n}\nexports.error = error;\n/**\n * Adds an warning issue\n * @param message warning issue message. Errors will be converted to string via toString()\n */\nfunction warning(message) {\n    command_1.issue('warning', message instanceof Error ? message.toString() : message);\n}\nexports.warning = warning;\n/**\n * Writes info to log with console.log.\n * @param message info message\n */\nfunction info(message) {\n    process.stdout.write(message + os.EOL);\n}\nexports.info = info;\n/**\n * Begin an output group.\n *\n * Output until the next `groupEnd` will be foldable in this group\n *\n * @param name The name of the output group\n */\nfunction startGroup(name) {\n    command_1.issue('group', name);\n}\nexports.startGroup = startGroup;\n/**\n * End an output group.\n */\nfunction endGroup() {\n    command_1.issue('endgroup');\n}\nexports.endGroup = endGroup;\n/**\n * Wrap an asynchronous function call in a group.\n *\n * Returns the same type as the function itself.\n *\n * @param name The name of the group\n * @param fn The function to wrap in the group\n */\nfunction group(name, fn) {\n    return __awaiter(this, void 0, void 0, function* () {\n        startGroup(name);\n        let result;\n        try {\n            result = yield fn();\n        }\n        finally {\n            endGroup();\n        }\n        return result;\n    });\n}\nexports.group = group;\n//-----------------------------------------------------------------------\n// Wrapper action state\n//-----------------------------------------------------------------------\n/**\n * Saves state for current action, the state can only be retrieved by this action's post job execution.\n *\n * @param     name     name of the state to store\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction saveState(name, value) {\n    command_1.issueCommand('save-state', { name }, value);\n}\nexports.saveState = saveState;\n/**\n * Gets the value of an state set by this action's main execution.\n *\n * @param     name     name of the state to get\n * @returns   string\n */\nfunction getState(name) {\n    return process.env[`STATE_${name}`] || '';\n}\nexports.getState = getState;\n//# sourceMappingURL=core.js.map","\"use strict\";\n// For internal use, subject to change.\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// We use any as a valid input type\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst fs = __importStar(require(\"fs\"));\nconst os = __importStar(require(\"os\"));\nconst utils_1 = require(\"./utils\");\nfunction issueCommand(command, message) {\n    const filePath = process.env[`GITHUB_${command}`];\n    if (!filePath) {\n        throw new Error(`Unable to find environment variable for file command ${command}`);\n    }\n    if (!fs.existsSync(filePath)) {\n        throw new Error(`Missing file at path: ${filePath}`);\n    }\n    fs.appendFileSync(filePath, `${utils_1.toCommandValue(message)}${os.EOL}`, {\n        encoding: 'utf8'\n    });\n}\nexports.issueCommand = issueCommand;\n//# sourceMappingURL=file-command.js.map","\"use strict\";\n// We use any as a valid input type\n/* eslint-disable @typescript-eslint/no-explicit-any */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sanitizes an input into a string so it can be passed into issueCommand safely\n * @param input input to sanitize into a string\n */\nfunction toCommandValue(input) {\n    if (input === null || input === undefined) {\n        return '';\n    }\n    else if (typeof input === 'string' || input instanceof String) {\n        return input;\n    }\n    return JSON.stringify(input);\n}\nexports.toCommandValue = toCommandValue;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Context = void 0;\nconst fs_1 = require(\"fs\");\nconst os_1 = require(\"os\");\nclass Context {\n    /**\n     * Hydrate the context from the environment\n     */\n    constructor() {\n        this.payload = {};\n        if (process.env.GITHUB_EVENT_PATH) {\n            if (fs_1.existsSync(process.env.GITHUB_EVENT_PATH)) {\n                this.payload = JSON.parse(fs_1.readFileSync(process.env.GITHUB_EVENT_PATH, { encoding: 'utf8' }));\n            }\n            else {\n                const path = process.env.GITHUB_EVENT_PATH;\n                process.stdout.write(`GITHUB_EVENT_PATH ${path} does not exist${os_1.EOL}`);\n            }\n        }\n        this.eventName = process.env.GITHUB_EVENT_NAME;\n        this.sha = process.env.GITHUB_SHA;\n        this.ref = process.env.GITHUB_REF;\n        this.workflow = process.env.GITHUB_WORKFLOW;\n        this.action = process.env.GITHUB_ACTION;\n        this.actor = process.env.GITHUB_ACTOR;\n        this.job = process.env.GITHUB_JOB;\n        this.runNumber = parseInt(process.env.GITHUB_RUN_NUMBER, 10);\n        this.runId = parseInt(process.env.GITHUB_RUN_ID, 10);\n    }\n    get issue() {\n        const payload = this.payload;\n        return Object.assign(Object.assign({}, this.repo), { number: (payload.issue || payload.pull_request || payload).number });\n    }\n    get repo() {\n        if (process.env.GITHUB_REPOSITORY) {\n            const [owner, repo] = process.env.GITHUB_REPOSITORY.split('/');\n            return { owner, repo };\n        }\n        if (this.payload.repository) {\n            return {\n                owner: this.payload.repository.owner.login,\n                repo: this.payload.repository.name\n            };\n        }\n        throw new Error(\"context.repo requires a GITHUB_REPOSITORY environment variable like 'owner/repo'\");\n    }\n}\nexports.Context = Context;\n//# sourceMappingURL=context.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOctokit = exports.context = void 0;\nconst Context = __importStar(require(\"./context\"));\nconst utils_1 = require(\"./utils\");\nexports.context = new Context.Context();\n/**\n * Returns a hydrated octokit ready to use for GitHub Actions\n *\n * @param     token    the repo PAT or GITHUB_TOKEN\n * @param     options  other options to set\n */\nfunction getOctokit(token, options) {\n    return new utils_1.GitHub(utils_1.getOctokitOptions(token, options));\n}\nexports.getOctokit = getOctokit;\n//# sourceMappingURL=github.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getApiBaseUrl = exports.getProxyAgent = exports.getAuthString = void 0;\nconst httpClient = __importStar(require(\"@actions/http-client\"));\nfunction getAuthString(token, options) {\n    if (!token && !options.auth) {\n        throw new Error('Parameter token or opts.auth is required');\n    }\n    else if (token && options.auth) {\n        throw new Error('Parameters token and opts.auth may not both be specified');\n    }\n    return typeof options.auth === 'string' ? options.auth : `token ${token}`;\n}\nexports.getAuthString = getAuthString;\nfunction getProxyAgent(destinationUrl) {\n    const hc = new httpClient.HttpClient();\n    return hc.getAgent(destinationUrl);\n}\nexports.getProxyAgent = getProxyAgent;\nfunction getApiBaseUrl() {\n    return process.env['GITHUB_API_URL'] || 'https://api.github.com';\n}\nexports.getApiBaseUrl = getApiBaseUrl;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOctokitOptions = exports.GitHub = exports.context = void 0;\nconst Context = __importStar(require(\"./context\"));\nconst Utils = __importStar(require(\"./internal/utils\"));\n// octokit + plugins\nconst core_1 = require(\"@octokit/core\");\nconst plugin_rest_endpoint_methods_1 = require(\"@octokit/plugin-rest-endpoint-methods\");\nconst plugin_paginate_rest_1 = require(\"@octokit/plugin-paginate-rest\");\nexports.context = new Context.Context();\nconst baseUrl = Utils.getApiBaseUrl();\nconst defaults = {\n    baseUrl,\n    request: {\n        agent: Utils.getProxyAgent(baseUrl)\n    }\n};\nexports.GitHub = core_1.Octokit.plugin(plugin_rest_endpoint_methods_1.restEndpointMethods, plugin_paginate_rest_1.paginateRest).defaults(defaults);\n/**\n * Convience function to correctly format Octokit Options to pass into the constructor.\n *\n * @param     token    the repo PAT or GITHUB_TOKEN\n * @param     options  other options to set\n */\nfunction getOctokitOptions(token, options) {\n    const opts = Object.assign({}, options || {}); // Shallow clone - don't mutate the object provided by the caller\n    // Auth\n    const auth = Utils.getAuthString(token, opts);\n    if (auth) {\n        opts.auth = auth;\n    }\n    return opts;\n}\nexports.getOctokitOptions = getOctokitOptions;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst http = require(\"http\");\nconst https = require(\"https\");\nconst pm = require(\"./proxy\");\nlet tunnel;\nvar HttpCodes;\n(function (HttpCodes) {\n    HttpCodes[HttpCodes[\"OK\"] = 200] = \"OK\";\n    HttpCodes[HttpCodes[\"MultipleChoices\"] = 300] = \"MultipleChoices\";\n    HttpCodes[HttpCodes[\"MovedPermanently\"] = 301] = \"MovedPermanently\";\n    HttpCodes[HttpCodes[\"ResourceMoved\"] = 302] = \"ResourceMoved\";\n    HttpCodes[HttpCodes[\"SeeOther\"] = 303] = \"SeeOther\";\n    HttpCodes[HttpCodes[\"NotModified\"] = 304] = \"NotModified\";\n    HttpCodes[HttpCodes[\"UseProxy\"] = 305] = \"UseProxy\";\n    HttpCodes[HttpCodes[\"SwitchProxy\"] = 306] = \"SwitchProxy\";\n    HttpCodes[HttpCodes[\"TemporaryRedirect\"] = 307] = \"TemporaryRedirect\";\n    HttpCodes[HttpCodes[\"PermanentRedirect\"] = 308] = \"PermanentRedirect\";\n    HttpCodes[HttpCodes[\"BadRequest\"] = 400] = \"BadRequest\";\n    HttpCodes[HttpCodes[\"Unauthorized\"] = 401] = \"Unauthorized\";\n    HttpCodes[HttpCodes[\"PaymentRequired\"] = 402] = \"PaymentRequired\";\n    HttpCodes[HttpCodes[\"Forbidden\"] = 403] = \"Forbidden\";\n    HttpCodes[HttpCodes[\"NotFound\"] = 404] = \"NotFound\";\n    HttpCodes[HttpCodes[\"MethodNotAllowed\"] = 405] = \"MethodNotAllowed\";\n    HttpCodes[HttpCodes[\"NotAcceptable\"] = 406] = \"NotAcceptable\";\n    HttpCodes[HttpCodes[\"ProxyAuthenticationRequired\"] = 407] = \"ProxyAuthenticationRequired\";\n    HttpCodes[HttpCodes[\"RequestTimeout\"] = 408] = \"RequestTimeout\";\n    HttpCodes[HttpCodes[\"Conflict\"] = 409] = \"Conflict\";\n    HttpCodes[HttpCodes[\"Gone\"] = 410] = \"Gone\";\n    HttpCodes[HttpCodes[\"TooManyRequests\"] = 429] = \"TooManyRequests\";\n    HttpCodes[HttpCodes[\"InternalServerError\"] = 500] = \"InternalServerError\";\n    HttpCodes[HttpCodes[\"NotImplemented\"] = 501] = \"NotImplemented\";\n    HttpCodes[HttpCodes[\"BadGateway\"] = 502] = \"BadGateway\";\n    HttpCodes[HttpCodes[\"ServiceUnavailable\"] = 503] = \"ServiceUnavailable\";\n    HttpCodes[HttpCodes[\"GatewayTimeout\"] = 504] = \"GatewayTimeout\";\n})(HttpCodes = exports.HttpCodes || (exports.HttpCodes = {}));\nvar Headers;\n(function (Headers) {\n    Headers[\"Accept\"] = \"accept\";\n    Headers[\"ContentType\"] = \"content-type\";\n})(Headers = exports.Headers || (exports.Headers = {}));\nvar MediaTypes;\n(function (MediaTypes) {\n    MediaTypes[\"ApplicationJson\"] = \"application/json\";\n})(MediaTypes = exports.MediaTypes || (exports.MediaTypes = {}));\n/**\n * Returns the proxy URL, depending upon the supplied url and proxy environment variables.\n * @param serverUrl  The server URL where the request will be sent. For example, https://api.github.com\n */\nfunction getProxyUrl(serverUrl) {\n    let proxyUrl = pm.getProxyUrl(new URL(serverUrl));\n    return proxyUrl ? proxyUrl.href : '';\n}\nexports.getProxyUrl = getProxyUrl;\nconst HttpRedirectCodes = [\n    HttpCodes.MovedPermanently,\n    HttpCodes.ResourceMoved,\n    HttpCodes.SeeOther,\n    HttpCodes.TemporaryRedirect,\n    HttpCodes.PermanentRedirect\n];\nconst HttpResponseRetryCodes = [\n    HttpCodes.BadGateway,\n    HttpCodes.ServiceUnavailable,\n    HttpCodes.GatewayTimeout\n];\nconst RetryableHttpVerbs = ['OPTIONS', 'GET', 'DELETE', 'HEAD'];\nconst ExponentialBackoffCeiling = 10;\nconst ExponentialBackoffTimeSlice = 5;\nclass HttpClientError extends Error {\n    constructor(message, statusCode) {\n        super(message);\n        this.name = 'HttpClientError';\n        this.statusCode = statusCode;\n        Object.setPrototypeOf(this, HttpClientError.prototype);\n    }\n}\nexports.HttpClientError = HttpClientError;\nclass HttpClientResponse {\n    constructor(message) {\n        this.message = message;\n    }\n    readBody() {\n        return new Promise(async (resolve, reject) => {\n            let output = Buffer.alloc(0);\n            this.message.on('data', (chunk) => {\n                output = Buffer.concat([output, chunk]);\n            });\n            this.message.on('end', () => {\n                resolve(output.toString());\n            });\n        });\n    }\n}\nexports.HttpClientResponse = HttpClientResponse;\nfunction isHttps(requestUrl) {\n    let parsedUrl = new URL(requestUrl);\n    return parsedUrl.protocol === 'https:';\n}\nexports.isHttps = isHttps;\nclass HttpClient {\n    constructor(userAgent, handlers, requestOptions) {\n        this._ignoreSslError = false;\n        this._allowRedirects = true;\n        this._allowRedirectDowngrade = false;\n        this._maxRedirects = 50;\n        this._allowRetries = false;\n        this._maxRetries = 1;\n        this._keepAlive = false;\n        this._disposed = false;\n        this.userAgent = userAgent;\n        this.handlers = handlers || [];\n        this.requestOptions = requestOptions;\n        if (requestOptions) {\n            if (requestOptions.ignoreSslError != null) {\n                this._ignoreSslError = requestOptions.ignoreSslError;\n            }\n            this._socketTimeout = requestOptions.socketTimeout;\n            if (requestOptions.allowRedirects != null) {\n                this._allowRedirects = requestOptions.allowRedirects;\n            }\n            if (requestOptions.allowRedirectDowngrade != null) {\n                this._allowRedirectDowngrade = requestOptions.allowRedirectDowngrade;\n            }\n            if (requestOptions.maxRedirects != null) {\n                this._maxRedirects = Math.max(requestOptions.maxRedirects, 0);\n            }\n            if (requestOptions.keepAlive != null) {\n                this._keepAlive = requestOptions.keepAlive;\n            }\n            if (requestOptions.allowRetries != null) {\n                this._allowRetries = requestOptions.allowRetries;\n            }\n            if (requestOptions.maxRetries != null) {\n                this._maxRetries = requestOptions.maxRetries;\n            }\n        }\n    }\n    options(requestUrl, additionalHeaders) {\n        return this.request('OPTIONS', requestUrl, null, additionalHeaders || {});\n    }\n    get(requestUrl, additionalHeaders) {\n        return this.request('GET', requestUrl, null, additionalHeaders || {});\n    }\n    del(requestUrl, additionalHeaders) {\n        return this.request('DELETE', requestUrl, null, additionalHeaders || {});\n    }\n    post(requestUrl, data, additionalHeaders) {\n        return this.request('POST', requestUrl, data, additionalHeaders || {});\n    }\n    patch(requestUrl, data, additionalHeaders) {\n        return this.request('PATCH', requestUrl, data, additionalHeaders || {});\n    }\n    put(requestUrl, data, additionalHeaders) {\n        return this.request('PUT', requestUrl, data, additionalHeaders || {});\n    }\n    head(requestUrl, additionalHeaders) {\n        return this.request('HEAD', requestUrl, null, additionalHeaders || {});\n    }\n    sendStream(verb, requestUrl, stream, additionalHeaders) {\n        return this.request(verb, requestUrl, stream, additionalHeaders);\n    }\n    /**\n     * Gets a typed object from an endpoint\n     * Be aware that not found returns a null.  Other errors (4xx, 5xx) reject the promise\n     */\n    async getJson(requestUrl, additionalHeaders = {}) {\n        additionalHeaders[Headers.Accept] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.Accept, MediaTypes.ApplicationJson);\n        let res = await this.get(requestUrl, additionalHeaders);\n        return this._processResponse(res, this.requestOptions);\n    }\n    async postJson(requestUrl, obj, additionalHeaders = {}) {\n        let data = JSON.stringify(obj, null, 2);\n        additionalHeaders[Headers.Accept] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.Accept, MediaTypes.ApplicationJson);\n        additionalHeaders[Headers.ContentType] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.ContentType, MediaTypes.ApplicationJson);\n        let res = await this.post(requestUrl, data, additionalHeaders);\n        return this._processResponse(res, this.requestOptions);\n    }\n    async putJson(requestUrl, obj, additionalHeaders = {}) {\n        let data = JSON.stringify(obj, null, 2);\n        additionalHeaders[Headers.Accept] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.Accept, MediaTypes.ApplicationJson);\n        additionalHeaders[Headers.ContentType] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.ContentType, MediaTypes.ApplicationJson);\n        let res = await this.put(requestUrl, data, additionalHeaders);\n        return this._processResponse(res, this.requestOptions);\n    }\n    async patchJson(requestUrl, obj, additionalHeaders = {}) {\n        let data = JSON.stringify(obj, null, 2);\n        additionalHeaders[Headers.Accept] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.Accept, MediaTypes.ApplicationJson);\n        additionalHeaders[Headers.ContentType] = this._getExistingOrDefaultHeader(additionalHeaders, Headers.ContentType, MediaTypes.ApplicationJson);\n        let res = await this.patch(requestUrl, data, additionalHeaders);\n        return this._processResponse(res, this.requestOptions);\n    }\n    /**\n     * Makes a raw http request.\n     * All other methods such as get, post, patch, and request ultimately call this.\n     * Prefer get, del, post and patch\n     */\n    async request(verb, requestUrl, data, headers) {\n        if (this._disposed) {\n            throw new Error('Client has already been disposed.');\n        }\n        let parsedUrl = new URL(requestUrl);\n        let info = this._prepareRequest(verb, parsedUrl, headers);\n        // Only perform retries on reads since writes may not be idempotent.\n        let maxTries = this._allowRetries && RetryableHttpVerbs.indexOf(verb) != -1\n            ? this._maxRetries + 1\n            : 1;\n        let numTries = 0;\n        let response;\n        while (numTries < maxTries) {\n            response = await this.requestRaw(info, data);\n            // Check if it's an authentication challenge\n            if (response &&\n                response.message &&\n                response.message.statusCode === HttpCodes.Unauthorized) {\n                let authenticationHandler;\n                for (let i = 0; i < this.handlers.length; i++) {\n                    if (this.handlers[i].canHandleAuthentication(response)) {\n                        authenticationHandler = this.handlers[i];\n                        break;\n                    }\n                }\n                if (authenticationHandler) {\n                    return authenticationHandler.handleAuthentication(this, info, data);\n                }\n                else {\n                    // We have received an unauthorized response but have no handlers to handle it.\n                    // Let the response return to the caller.\n                    return response;\n                }\n            }\n            let redirectsRemaining = this._maxRedirects;\n            while (HttpRedirectCodes.indexOf(response.message.statusCode) != -1 &&\n                this._allowRedirects &&\n                redirectsRemaining > 0) {\n                const redirectUrl = response.message.headers['location'];\n                if (!redirectUrl) {\n                    // if there's no location to redirect to, we won't\n                    break;\n                }\n                let parsedRedirectUrl = new URL(redirectUrl);\n                if (parsedUrl.protocol == 'https:' &&\n                    parsedUrl.protocol != parsedRedirectUrl.protocol &&\n                    !this._allowRedirectDowngrade) {\n                    throw new Error('Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.');\n                }\n                // we need to finish reading the response before reassigning response\n                // which will leak the open socket.\n                await response.readBody();\n                // strip authorization header if redirected to a different hostname\n                if (parsedRedirectUrl.hostname !== parsedUrl.hostname) {\n                    for (let header in headers) {\n                        // header names are case insensitive\n                        if (header.toLowerCase() === 'authorization') {\n                            delete headers[header];\n                        }\n                    }\n                }\n                // let's make the request with the new redirectUrl\n                info = this._prepareRequest(verb, parsedRedirectUrl, headers);\n                response = await this.requestRaw(info, data);\n                redirectsRemaining--;\n            }\n            if (HttpResponseRetryCodes.indexOf(response.message.statusCode) == -1) {\n                // If not a retry code, return immediately instead of retrying\n                return response;\n            }\n            numTries += 1;\n            if (numTries < maxTries) {\n                await response.readBody();\n                await this._performExponentialBackoff(numTries);\n            }\n        }\n        return response;\n    }\n    /**\n     * Needs to be called if keepAlive is set to true in request options.\n     */\n    dispose() {\n        if (this._agent) {\n            this._agent.destroy();\n        }\n        this._disposed = true;\n    }\n    /**\n     * Raw request.\n     * @param info\n     * @param data\n     */\n    requestRaw(info, data) {\n        return new Promise((resolve, reject) => {\n            let callbackForResult = function (err, res) {\n                if (err) {\n                    reject(err);\n                }\n                resolve(res);\n            };\n            this.requestRawWithCallback(info, data, callbackForResult);\n        });\n    }\n    /**\n     * Raw request with callback.\n     * @param info\n     * @param data\n     * @param onResult\n     */\n    requestRawWithCallback(info, data, onResult) {\n        let socket;\n        if (typeof data === 'string') {\n            info.options.headers['Content-Length'] = Buffer.byteLength(data, 'utf8');\n        }\n        let callbackCalled = false;\n        let handleResult = (err, res) => {\n            if (!callbackCalled) {\n                callbackCalled = true;\n                onResult(err, res);\n            }\n        };\n        let req = info.httpModule.request(info.options, (msg) => {\n            let res = new HttpClientResponse(msg);\n            handleResult(null, res);\n        });\n        req.on('socket', sock => {\n            socket = sock;\n        });\n        // If we ever get disconnected, we want the socket to timeout eventually\n        req.setTimeout(this._socketTimeout || 3 * 60000, () => {\n            if (socket) {\n                socket.end();\n            }\n            handleResult(new Error('Request timeout: ' + info.options.path), null);\n        });\n        req.on('error', function (err) {\n            // err has statusCode property\n            // res should have headers\n            handleResult(err, null);\n        });\n        if (data && typeof data === 'string') {\n            req.write(data, 'utf8');\n        }\n        if (data && typeof data !== 'string') {\n            data.on('close', function () {\n                req.end();\n            });\n            data.pipe(req);\n        }\n        else {\n            req.end();\n        }\n    }\n    /**\n     * Gets an http agent. This function is useful when you need an http agent that handles\n     * routing through a proxy server - depending upon the url and proxy environment variables.\n     * @param serverUrl  The server URL where the request will be sent. For example, https://api.github.com\n     */\n    getAgent(serverUrl) {\n        let parsedUrl = new URL(serverUrl);\n        return this._getAgent(parsedUrl);\n    }\n    _prepareRequest(method, requestUrl, headers) {\n        const info = {};\n        info.parsedUrl = requestUrl;\n        const usingSsl = info.parsedUrl.protocol === 'https:';\n        info.httpModule = usingSsl ? https : http;\n        const defaultPort = usingSsl ? 443 : 80;\n        info.options = {};\n        info.options.host = info.parsedUrl.hostname;\n        info.options.port = info.parsedUrl.port\n            ? parseInt(info.parsedUrl.port)\n            : defaultPort;\n        info.options.path =\n            (info.parsedUrl.pathname || '') + (info.parsedUrl.search || '');\n        info.options.method = method;\n        info.options.headers = this._mergeHeaders(headers);\n        if (this.userAgent != null) {\n            info.options.headers['user-agent'] = this.userAgent;\n        }\n        info.options.agent = this._getAgent(info.parsedUrl);\n        // gives handlers an opportunity to participate\n        if (this.handlers) {\n            this.handlers.forEach(handler => {\n                handler.prepareRequest(info.options);\n            });\n        }\n        return info;\n    }\n    _mergeHeaders(headers) {\n        const lowercaseKeys = obj => Object.keys(obj).reduce((c, k) => ((c[k.toLowerCase()] = obj[k]), c), {});\n        if (this.requestOptions && this.requestOptions.headers) {\n            return Object.assign({}, lowercaseKeys(this.requestOptions.headers), lowercaseKeys(headers));\n        }\n        return lowercaseKeys(headers || {});\n    }\n    _getExistingOrDefaultHeader(additionalHeaders, header, _default) {\n        const lowercaseKeys = obj => Object.keys(obj).reduce((c, k) => ((c[k.toLowerCase()] = obj[k]), c), {});\n        let clientHeader;\n        if (this.requestOptions && this.requestOptions.headers) {\n            clientHeader = lowercaseKeys(this.requestOptions.headers)[header];\n        }\n        return additionalHeaders[header] || clientHeader || _default;\n    }\n    _getAgent(parsedUrl) {\n        let agent;\n        let proxyUrl = pm.getProxyUrl(parsedUrl);\n        let useProxy = proxyUrl && proxyUrl.hostname;\n        if (this._keepAlive && useProxy) {\n            agent = this._proxyAgent;\n        }\n        if (this._keepAlive && !useProxy) {\n            agent = this._agent;\n        }\n        // if agent is already assigned use that agent.\n        if (!!agent) {\n            return agent;\n        }\n        const usingSsl = parsedUrl.protocol === 'https:';\n        let maxSockets = 100;\n        if (!!this.requestOptions) {\n            maxSockets = this.requestOptions.maxSockets || http.globalAgent.maxSockets;\n        }\n        if (useProxy) {\n            // If using proxy, need tunnel\n            if (!tunnel) {\n                tunnel = require('tunnel');\n            }\n            const agentOptions = {\n                maxSockets: maxSockets,\n                keepAlive: this._keepAlive,\n                proxy: {\n                    ...((proxyUrl.username || proxyUrl.password) && {\n                        proxyAuth: `${proxyUrl.username}:${proxyUrl.password}`\n                    }),\n                    host: proxyUrl.hostname,\n                    port: proxyUrl.port\n                }\n            };\n            let tunnelAgent;\n            const overHttps = proxyUrl.protocol === 'https:';\n            if (usingSsl) {\n                tunnelAgent = overHttps ? tunnel.httpsOverHttps : tunnel.httpsOverHttp;\n            }\n            else {\n                tunnelAgent = overHttps ? tunnel.httpOverHttps : tunnel.httpOverHttp;\n            }\n            agent = tunnelAgent(agentOptions);\n            this._proxyAgent = agent;\n        }\n        // if reusing agent across request and tunneling agent isn't assigned create a new agent\n        if (this._keepAlive && !agent) {\n            const options = { keepAlive: this._keepAlive, maxSockets: maxSockets };\n            agent = usingSsl ? new https.Agent(options) : new http.Agent(options);\n            this._agent = agent;\n        }\n        // if not using private agent and tunnel agent isn't setup then use global agent\n        if (!agent) {\n            agent = usingSsl ? https.globalAgent : http.globalAgent;\n        }\n        if (usingSsl && this._ignoreSslError) {\n            // we don't want to set NODE_TLS_REJECT_UNAUTHORIZED=0 since that will affect request for entire process\n            // http.RequestOptions doesn't expose a way to modify RequestOptions.agent.options\n            // we have to cast it to any and change it directly\n            agent.options = Object.assign(agent.options || {}, {\n                rejectUnauthorized: false\n            });\n        }\n        return agent;\n    }\n    _performExponentialBackoff(retryNumber) {\n        retryNumber = Math.min(ExponentialBackoffCeiling, retryNumber);\n        const ms = ExponentialBackoffTimeSlice * Math.pow(2, retryNumber);\n        return new Promise(resolve => setTimeout(() => resolve(), ms));\n    }\n    static dateTimeDeserializer(key, value) {\n        if (typeof value === 'string') {\n            let a = new Date(value);\n            if (!isNaN(a.valueOf())) {\n                return a;\n            }\n        }\n        return value;\n    }\n    async _processResponse(res, options) {\n        return new Promise(async (resolve, reject) => {\n            const statusCode = res.message.statusCode;\n            const response = {\n                statusCode: statusCode,\n                result: null,\n                headers: {}\n            };\n            // not found leads to null obj returned\n            if (statusCode == HttpCodes.NotFound) {\n                resolve(response);\n            }\n            let obj;\n            let contents;\n            // get the result from the body\n            try {\n                contents = await res.readBody();\n                if (contents && contents.length > 0) {\n                    if (options && options.deserializeDates) {\n                        obj = JSON.parse(contents, HttpClient.dateTimeDeserializer);\n                    }\n                    else {\n                        obj = JSON.parse(contents);\n                    }\n                    response.result = obj;\n                }\n                response.headers = res.message.headers;\n            }\n            catch (err) {\n                // Invalid resource (contents not json);  leaving result obj null\n            }\n            // note that 3xx redirects are handled by the http layer.\n            if (statusCode > 299) {\n                let msg;\n                // if exception/error in body, attempt to get better error\n                if (obj && obj.message) {\n                    msg = obj.message;\n                }\n                else if (contents && contents.length > 0) {\n                    // it may be the case that the exception is in the body message as string\n                    msg = contents;\n                }\n                else {\n                    msg = 'Failed request: (' + statusCode + ')';\n                }\n                let err = new HttpClientError(msg, statusCode);\n                err.result = response.result;\n                reject(err);\n            }\n            else {\n                resolve(response);\n            }\n        });\n    }\n}\nexports.HttpClient = HttpClient;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getProxyUrl(reqUrl) {\n    let usingSsl = reqUrl.protocol === 'https:';\n    let proxyUrl;\n    if (checkBypass(reqUrl)) {\n        return proxyUrl;\n    }\n    let proxyVar;\n    if (usingSsl) {\n        proxyVar = process.env['https_proxy'] || process.env['HTTPS_PROXY'];\n    }\n    else {\n        proxyVar = process.env['http_proxy'] || process.env['HTTP_PROXY'];\n    }\n    if (proxyVar) {\n        proxyUrl = new URL(proxyVar);\n    }\n    return proxyUrl;\n}\nexports.getProxyUrl = getProxyUrl;\nfunction checkBypass(reqUrl) {\n    if (!reqUrl.hostname) {\n        return false;\n    }\n    let noProxy = process.env['no_proxy'] || process.env['NO_PROXY'] || '';\n    if (!noProxy) {\n        return false;\n    }\n    // Determine the request port\n    let reqPort;\n    if (reqUrl.port) {\n        reqPort = Number(reqUrl.port);\n    }\n    else if (reqUrl.protocol === 'http:') {\n        reqPort = 80;\n    }\n    else if (reqUrl.protocol === 'https:') {\n        reqPort = 443;\n    }\n    // Format the request hostname and hostname with port\n    let upperReqHosts = [reqUrl.hostname.toUpperCase()];\n    if (typeof reqPort === 'number') {\n        upperReqHosts.push(`${upperReqHosts[0]}:${reqPort}`);\n    }\n    // Compare request host against noproxy\n    for (let upperNoProxyItem of noProxy\n        .split(',')\n        .map(x => x.trim().toUpperCase())\n        .filter(x => x)) {\n        if (upperReqHosts.some(x => x === upperNoProxyItem)) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.checkBypass = checkBypass;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nasync function auth(token) {\n  const tokenType = token.split(/\\./).length === 3 ? \"app\" : /^v\\d+\\./.test(token) ? \"installation\" : \"oauth\";\n  return {\n    type: \"token\",\n    token: token,\n    tokenType\n  };\n}\n\n/**\n * Prefix token for usage in the Authorization header\n *\n * @param token OAuth token or JSON Web Token\n */\nfunction withAuthorizationPrefix(token) {\n  if (token.split(/\\./).length === 3) {\n    return `bearer ${token}`;\n  }\n\n  return `token ${token}`;\n}\n\nasync function hook(token, request, route, parameters) {\n  const endpoint = request.endpoint.merge(route, parameters);\n  endpoint.headers.authorization = withAuthorizationPrefix(token);\n  return request(endpoint);\n}\n\nconst createTokenAuth = function createTokenAuth(token) {\n  if (!token) {\n    throw new Error(\"[@octokit/auth-token] No token passed to createTokenAuth\");\n  }\n\n  if (typeof token !== \"string\") {\n    throw new Error(\"[@octokit/auth-token] Token passed to createTokenAuth is not a string\");\n  }\n\n  token = token.replace(/^(token|bearer) +/i, \"\");\n  return Object.assign(auth.bind(null, token), {\n    hook: hook.bind(null, token)\n  });\n};\n\nexports.createTokenAuth = createTokenAuth;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar universalUserAgent = require('universal-user-agent');\nvar beforeAfterHook = require('before-after-hook');\nvar request = require('@octokit/request');\nvar graphql = require('@octokit/graphql');\nvar authToken = require('@octokit/auth-token');\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nconst VERSION = \"3.4.0\";\n\nclass Octokit {\n  constructor(options = {}) {\n    const hook = new beforeAfterHook.Collection();\n    const requestDefaults = {\n      baseUrl: request.request.endpoint.DEFAULTS.baseUrl,\n      headers: {},\n      request: Object.assign({}, options.request, {\n        // @ts-ignore internal usage only, no need to type\n        hook: hook.bind(null, \"request\")\n      }),\n      mediaType: {\n        previews: [],\n        format: \"\"\n      }\n    }; // prepend default user agent with `options.userAgent` if set\n\n    requestDefaults.headers[\"user-agent\"] = [options.userAgent, `octokit-core.js/${VERSION} ${universalUserAgent.getUserAgent()}`].filter(Boolean).join(\" \");\n\n    if (options.baseUrl) {\n      requestDefaults.baseUrl = options.baseUrl;\n    }\n\n    if (options.previews) {\n      requestDefaults.mediaType.previews = options.previews;\n    }\n\n    if (options.timeZone) {\n      requestDefaults.headers[\"time-zone\"] = options.timeZone;\n    }\n\n    this.request = request.request.defaults(requestDefaults);\n    this.graphql = graphql.withCustomRequest(this.request).defaults(requestDefaults);\n    this.log = Object.assign({\n      debug: () => {},\n      info: () => {},\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    }, options.log);\n    this.hook = hook; // (1) If neither `options.authStrategy` nor `options.auth` are set, the `octokit` instance\n    //     is unauthenticated. The `this.auth()` method is a no-op and no request hook is registered.\n    // (2) If only `options.auth` is set, use the default token authentication strategy.\n    // (3) If `options.authStrategy` is set then use it and pass in `options.auth`. Always pass own request as many strategies accept a custom request instance.\n    // TODO: type `options.auth` based on `options.authStrategy`.\n\n    if (!options.authStrategy) {\n      if (!options.auth) {\n        // (1)\n        this.auth = async () => ({\n          type: \"unauthenticated\"\n        });\n      } else {\n        // (2)\n        const auth = authToken.createTokenAuth(options.auth); // @ts-ignore  \\_()_/\n\n        hook.wrap(\"request\", auth.hook);\n        this.auth = auth;\n      }\n    } else {\n      const {\n        authStrategy\n      } = options,\n            otherOptions = _objectWithoutProperties(options, [\"authStrategy\"]);\n\n      const auth = authStrategy(Object.assign({\n        request: this.request,\n        log: this.log,\n        // we pass the current octokit instance as well as its constructor options\n        // to allow for authentication strategies that return a new octokit instance\n        // that shares the same internal state as the current one. The original\n        // requirement for this was the \"event-octokit\" authentication strategy\n        // of https://github.com/probot/octokit-auth-probot.\n        octokit: this,\n        octokitOptions: otherOptions\n      }, options.auth)); // @ts-ignore  \\_()_/\n\n      hook.wrap(\"request\", auth.hook);\n      this.auth = auth;\n    } // apply plugins\n    // https://stackoverflow.com/a/16345172\n\n\n    const classConstructor = this.constructor;\n    classConstructor.plugins.forEach(plugin => {\n      Object.assign(this, plugin(this, options));\n    });\n  }\n\n  static defaults(defaults) {\n    const OctokitWithDefaults = class extends this {\n      constructor(...args) {\n        const options = args[0] || {};\n\n        if (typeof defaults === \"function\") {\n          super(defaults(options));\n          return;\n        }\n\n        super(Object.assign({}, defaults, options, options.userAgent && defaults.userAgent ? {\n          userAgent: `${options.userAgent} ${defaults.userAgent}`\n        } : null));\n      }\n\n    };\n    return OctokitWithDefaults;\n  }\n  /**\n   * Attach a plugin (or many) to your Octokit instance.\n   *\n   * @example\n   * const API = Octokit.plugin(plugin1, plugin2, plugin3, ...)\n   */\n\n\n  static plugin(...newPlugins) {\n    var _a;\n\n    const currentPlugins = this.plugins;\n    const NewOctokit = (_a = class extends this {}, _a.plugins = currentPlugins.concat(newPlugins.filter(plugin => !currentPlugins.includes(plugin))), _a);\n    return NewOctokit;\n  }\n\n}\nOctokit.VERSION = VERSION;\nOctokit.plugins = [];\n\nexports.Octokit = Octokit;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar isPlainObject = require('is-plain-object');\nvar universalUserAgent = require('universal-user-agent');\n\nfunction lowercaseKeys(object) {\n  if (!object) {\n    return {};\n  }\n\n  return Object.keys(object).reduce((newObj, key) => {\n    newObj[key.toLowerCase()] = object[key];\n    return newObj;\n  }, {});\n}\n\nfunction mergeDeep(defaults, options) {\n  const result = Object.assign({}, defaults);\n  Object.keys(options).forEach(key => {\n    if (isPlainObject.isPlainObject(options[key])) {\n      if (!(key in defaults)) Object.assign(result, {\n        [key]: options[key]\n      });else result[key] = mergeDeep(defaults[key], options[key]);\n    } else {\n      Object.assign(result, {\n        [key]: options[key]\n      });\n    }\n  });\n  return result;\n}\n\nfunction removeUndefinedProperties(obj) {\n  for (const key in obj) {\n    if (obj[key] === undefined) {\n      delete obj[key];\n    }\n  }\n\n  return obj;\n}\n\nfunction merge(defaults, route, options) {\n  if (typeof route === \"string\") {\n    let [method, url] = route.split(\" \");\n    options = Object.assign(url ? {\n      method,\n      url\n    } : {\n      url: method\n    }, options);\n  } else {\n    options = Object.assign({}, route);\n  } // lowercase header names before merging with defaults to avoid duplicates\n\n\n  options.headers = lowercaseKeys(options.headers); // remove properties with undefined values before merging\n\n  removeUndefinedProperties(options);\n  removeUndefinedProperties(options.headers);\n  const mergedOptions = mergeDeep(defaults || {}, options); // mediaType.previews arrays are merged, instead of overwritten\n\n  if (defaults && defaults.mediaType.previews.length) {\n    mergedOptions.mediaType.previews = defaults.mediaType.previews.filter(preview => !mergedOptions.mediaType.previews.includes(preview)).concat(mergedOptions.mediaType.previews);\n  }\n\n  mergedOptions.mediaType.previews = mergedOptions.mediaType.previews.map(preview => preview.replace(/-preview/, \"\"));\n  return mergedOptions;\n}\n\nfunction addQueryParameters(url, parameters) {\n  const separator = /\\?/.test(url) ? \"&\" : \"?\";\n  const names = Object.keys(parameters);\n\n  if (names.length === 0) {\n    return url;\n  }\n\n  return url + separator + names.map(name => {\n    if (name === \"q\") {\n      return \"q=\" + parameters.q.split(\"+\").map(encodeURIComponent).join(\"+\");\n    }\n\n    return `${name}=${encodeURIComponent(parameters[name])}`;\n  }).join(\"&\");\n}\n\nconst urlVariableRegex = /\\{[^}]+\\}/g;\n\nfunction removeNonChars(variableName) {\n  return variableName.replace(/^\\W+|\\W+$/g, \"\").split(/,/);\n}\n\nfunction extractUrlVariableNames(url) {\n  const matches = url.match(urlVariableRegex);\n\n  if (!matches) {\n    return [];\n  }\n\n  return matches.map(removeNonChars).reduce((a, b) => a.concat(b), []);\n}\n\nfunction omit(object, keysToOmit) {\n  return Object.keys(object).filter(option => !keysToOmit.includes(option)).reduce((obj, key) => {\n    obj[key] = object[key];\n    return obj;\n  }, {});\n}\n\n// Based on https://github.com/bramstein/url-template, licensed under BSD\n// TODO: create separate package.\n//\n// Copyright (c) 2012-2014, Bram Stein\n// All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  1. Redistributions of source code must retain the above copyright\n//     notice, this list of conditions and the following disclaimer.\n//  2. Redistributions in binary form must reproduce the above copyright\n//     notice, this list of conditions and the following disclaimer in the\n//     documentation and/or other materials provided with the distribution.\n//  3. The name of the author may not be used to endorse or promote products\n//     derived from this software without specific prior written permission.\n// THIS SOFTWARE IS PROVIDED BY THE AUTHOR \"AS IS\" AND ANY EXPRESS OR IMPLIED\n// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n// EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n// INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n// BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n// NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n// EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n/* istanbul ignore file */\nfunction encodeReserved(str) {\n  return str.split(/(%[0-9A-Fa-f]{2})/g).map(function (part) {\n    if (!/%[0-9A-Fa-f]/.test(part)) {\n      part = encodeURI(part).replace(/%5B/g, \"[\").replace(/%5D/g, \"]\");\n    }\n\n    return part;\n  }).join(\"\");\n}\n\nfunction encodeUnreserved(str) {\n  return encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n    return \"%\" + c.charCodeAt(0).toString(16).toUpperCase();\n  });\n}\n\nfunction encodeValue(operator, value, key) {\n  value = operator === \"+\" || operator === \"#\" ? encodeReserved(value) : encodeUnreserved(value);\n\n  if (key) {\n    return encodeUnreserved(key) + \"=\" + value;\n  } else {\n    return value;\n  }\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null;\n}\n\nfunction isKeyOperator(operator) {\n  return operator === \";\" || operator === \"&\" || operator === \"?\";\n}\n\nfunction getValues(context, operator, key, modifier) {\n  var value = context[key],\n      result = [];\n\n  if (isDefined(value) && value !== \"\") {\n    if (typeof value === \"string\" || typeof value === \"number\" || typeof value === \"boolean\") {\n      value = value.toString();\n\n      if (modifier && modifier !== \"*\") {\n        value = value.substring(0, parseInt(modifier, 10));\n      }\n\n      result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n    } else {\n      if (modifier === \"*\") {\n        if (Array.isArray(value)) {\n          value.filter(isDefined).forEach(function (value) {\n            result.push(encodeValue(operator, value, isKeyOperator(operator) ? key : \"\"));\n          });\n        } else {\n          Object.keys(value).forEach(function (k) {\n            if (isDefined(value[k])) {\n              result.push(encodeValue(operator, value[k], k));\n            }\n          });\n        }\n      } else {\n        const tmp = [];\n\n        if (Array.isArray(value)) {\n          value.filter(isDefined).forEach(function (value) {\n            tmp.push(encodeValue(operator, value));\n          });\n        } else {\n          Object.keys(value).forEach(function (k) {\n            if (isDefined(value[k])) {\n              tmp.push(encodeUnreserved(k));\n              tmp.push(encodeValue(operator, value[k].toString()));\n            }\n          });\n        }\n\n        if (isKeyOperator(operator)) {\n          result.push(encodeUnreserved(key) + \"=\" + tmp.join(\",\"));\n        } else if (tmp.length !== 0) {\n          result.push(tmp.join(\",\"));\n        }\n      }\n    }\n  } else {\n    if (operator === \";\") {\n      if (isDefined(value)) {\n        result.push(encodeUnreserved(key));\n      }\n    } else if (value === \"\" && (operator === \"&\" || operator === \"?\")) {\n      result.push(encodeUnreserved(key) + \"=\");\n    } else if (value === \"\") {\n      result.push(\"\");\n    }\n  }\n\n  return result;\n}\n\nfunction parseUrl(template) {\n  return {\n    expand: expand.bind(null, template)\n  };\n}\n\nfunction expand(template, context) {\n  var operators = [\"+\", \"#\", \".\", \"/\", \";\", \"?\", \"&\"];\n  return template.replace(/\\{([^\\{\\}]+)\\}|([^\\{\\}]+)/g, function (_, expression, literal) {\n    if (expression) {\n      let operator = \"\";\n      const values = [];\n\n      if (operators.indexOf(expression.charAt(0)) !== -1) {\n        operator = expression.charAt(0);\n        expression = expression.substr(1);\n      }\n\n      expression.split(/,/g).forEach(function (variable) {\n        var tmp = /([^:\\*]*)(?::(\\d+)|(\\*))?/.exec(variable);\n        values.push(getValues(context, operator, tmp[1], tmp[2] || tmp[3]));\n      });\n\n      if (operator && operator !== \"+\") {\n        var separator = \",\";\n\n        if (operator === \"?\") {\n          separator = \"&\";\n        } else if (operator !== \"#\") {\n          separator = operator;\n        }\n\n        return (values.length !== 0 ? operator : \"\") + values.join(separator);\n      } else {\n        return values.join(\",\");\n      }\n    } else {\n      return encodeReserved(literal);\n    }\n  });\n}\n\nfunction parse(options) {\n  // https://fetch.spec.whatwg.org/#methods\n  let method = options.method.toUpperCase(); // replace :varname with {varname} to make it RFC 6570 compatible\n\n  let url = (options.url || \"/\").replace(/:([a-z]\\w+)/g, \"{$1}\");\n  let headers = Object.assign({}, options.headers);\n  let body;\n  let parameters = omit(options, [\"method\", \"baseUrl\", \"url\", \"headers\", \"request\", \"mediaType\"]); // extract variable names from URL to calculate remaining variables later\n\n  const urlVariableNames = extractUrlVariableNames(url);\n  url = parseUrl(url).expand(parameters);\n\n  if (!/^http/.test(url)) {\n    url = options.baseUrl + url;\n  }\n\n  const omittedParameters = Object.keys(options).filter(option => urlVariableNames.includes(option)).concat(\"baseUrl\");\n  const remainingParameters = omit(parameters, omittedParameters);\n  const isBinaryRequest = /application\\/octet-stream/i.test(headers.accept);\n\n  if (!isBinaryRequest) {\n    if (options.mediaType.format) {\n      // e.g. application/vnd.github.v3+json => application/vnd.github.v3.raw\n      headers.accept = headers.accept.split(/,/).map(preview => preview.replace(/application\\/vnd(\\.\\w+)(\\.v3)?(\\.\\w+)?(\\+json)?$/, `application/vnd$1$2.${options.mediaType.format}`)).join(\",\");\n    }\n\n    if (options.mediaType.previews.length) {\n      const previewsFromAcceptHeader = headers.accept.match(/[\\w-]+(?=-preview)/g) || [];\n      headers.accept = previewsFromAcceptHeader.concat(options.mediaType.previews).map(preview => {\n        const format = options.mediaType.format ? `.${options.mediaType.format}` : \"+json\";\n        return `application/vnd.github.${preview}-preview${format}`;\n      }).join(\",\");\n    }\n  } // for GET/HEAD requests, set URL query parameters from remaining parameters\n  // for PATCH/POST/PUT/DELETE requests, set request body from remaining parameters\n\n\n  if ([\"GET\", \"HEAD\"].includes(method)) {\n    url = addQueryParameters(url, remainingParameters);\n  } else {\n    if (\"data\" in remainingParameters) {\n      body = remainingParameters.data;\n    } else {\n      if (Object.keys(remainingParameters).length) {\n        body = remainingParameters;\n      } else {\n        headers[\"content-length\"] = 0;\n      }\n    }\n  } // default content-type for JSON if body is set\n\n\n  if (!headers[\"content-type\"] && typeof body !== \"undefined\") {\n    headers[\"content-type\"] = \"application/json; charset=utf-8\";\n  } // GitHub expects 'content-length: 0' header for PUT/PATCH requests without body.\n  // fetch does not allow to set `content-length` header, but we can set body to an empty string\n\n\n  if ([\"PATCH\", \"PUT\"].includes(method) && typeof body === \"undefined\") {\n    body = \"\";\n  } // Only return body/request keys if present\n\n\n  return Object.assign({\n    method,\n    url,\n    headers\n  }, typeof body !== \"undefined\" ? {\n    body\n  } : null, options.request ? {\n    request: options.request\n  } : null);\n}\n\nfunction endpointWithDefaults(defaults, route, options) {\n  return parse(merge(defaults, route, options));\n}\n\nfunction withDefaults(oldDefaults, newDefaults) {\n  const DEFAULTS = merge(oldDefaults, newDefaults);\n  const endpoint = endpointWithDefaults.bind(null, DEFAULTS);\n  return Object.assign(endpoint, {\n    DEFAULTS,\n    defaults: withDefaults.bind(null, DEFAULTS),\n    merge: merge.bind(null, DEFAULTS),\n    parse\n  });\n}\n\nconst VERSION = \"6.0.11\";\n\nconst userAgent = `octokit-endpoint.js/${VERSION} ${universalUserAgent.getUserAgent()}`; // DEFAULTS has all properties set that EndpointOptions has, except url.\n// So we use RequestParameters and add method as additional required property.\n\nconst DEFAULTS = {\n  method: \"GET\",\n  baseUrl: \"https://api.github.com\",\n  headers: {\n    accept: \"application/vnd.github.v3+json\",\n    \"user-agent\": userAgent\n  },\n  mediaType: {\n    format: \"\",\n    previews: []\n  }\n};\n\nconst endpoint = withDefaults(null, DEFAULTS);\n\nexports.endpoint = endpoint;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexports.isPlainObject = isPlainObject;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar request = require('@octokit/request');\nvar universalUserAgent = require('universal-user-agent');\n\nconst VERSION = \"4.6.1\";\n\nclass GraphqlError extends Error {\n  constructor(request, response) {\n    const message = response.data.errors[0].message;\n    super(message);\n    Object.assign(this, response.data);\n    Object.assign(this, {\n      headers: response.headers\n    });\n    this.name = \"GraphqlError\";\n    this.request = request; // Maintains proper stack trace (only available on V8)\n\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n\n}\n\nconst NON_VARIABLE_OPTIONS = [\"method\", \"baseUrl\", \"url\", \"headers\", \"request\", \"query\", \"mediaType\"];\nconst FORBIDDEN_VARIABLE_OPTIONS = [\"query\", \"method\", \"url\"];\nconst GHES_V3_SUFFIX_REGEX = /\\/api\\/v3\\/?$/;\nfunction graphql(request, query, options) {\n  if (options) {\n    if (typeof query === \"string\" && \"query\" in options) {\n      return Promise.reject(new Error(`[@octokit/graphql] \"query\" cannot be used as variable name`));\n    }\n\n    for (const key in options) {\n      if (!FORBIDDEN_VARIABLE_OPTIONS.includes(key)) continue;\n      return Promise.reject(new Error(`[@octokit/graphql] \"${key}\" cannot be used as variable name`));\n    }\n  }\n\n  const parsedOptions = typeof query === \"string\" ? Object.assign({\n    query\n  }, options) : query;\n  const requestOptions = Object.keys(parsedOptions).reduce((result, key) => {\n    if (NON_VARIABLE_OPTIONS.includes(key)) {\n      result[key] = parsedOptions[key];\n      return result;\n    }\n\n    if (!result.variables) {\n      result.variables = {};\n    }\n\n    result.variables[key] = parsedOptions[key];\n    return result;\n  }, {}); // workaround for GitHub Enterprise baseUrl set with /api/v3 suffix\n  // https://github.com/octokit/auth-app.js/issues/111#issuecomment-657610451\n\n  const baseUrl = parsedOptions.baseUrl || request.endpoint.DEFAULTS.baseUrl;\n\n  if (GHES_V3_SUFFIX_REGEX.test(baseUrl)) {\n    requestOptions.url = baseUrl.replace(GHES_V3_SUFFIX_REGEX, \"/api/graphql\");\n  }\n\n  return request(requestOptions).then(response => {\n    if (response.data.errors) {\n      const headers = {};\n\n      for (const key of Object.keys(response.headers)) {\n        headers[key] = response.headers[key];\n      }\n\n      throw new GraphqlError(requestOptions, {\n        headers,\n        data: response.data\n      });\n    }\n\n    return response.data.data;\n  });\n}\n\nfunction withDefaults(request$1, newDefaults) {\n  const newRequest = request$1.defaults(newDefaults);\n\n  const newApi = (query, options) => {\n    return graphql(newRequest, query, options);\n  };\n\n  return Object.assign(newApi, {\n    defaults: withDefaults.bind(null, newRequest),\n    endpoint: request.request.endpoint\n  });\n}\n\nconst graphql$1 = withDefaults(request.request, {\n  headers: {\n    \"user-agent\": `octokit-graphql.js/${VERSION} ${universalUserAgent.getUserAgent()}`\n  },\n  method: \"POST\",\n  url: \"/graphql\"\n});\nfunction withCustomRequest(customRequest) {\n  return withDefaults(customRequest, {\n    method: \"POST\",\n    url: \"/graphql\"\n  });\n}\n\nexports.graphql = graphql$1;\nexports.withCustomRequest = withCustomRequest;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nconst VERSION = \"2.13.3\";\n\n/**\n * Some list response that can be paginated have a different response structure\n *\n * They have a `total_count` key in the response (search also has `incomplete_results`,\n * /installation/repositories also has `repository_selection`), as well as a key with\n * the list of the items which name varies from endpoint to endpoint.\n *\n * Octokit normalizes these responses so that paginated results are always returned following\n * the same structure. One challenge is that if the list response has only one page, no Link\n * header is provided, so this header alone is not sufficient to check wether a response is\n * paginated or not.\n *\n * We check if a \"total_count\" key is present in the response data, but also make sure that\n * a \"url\" property is not, as the \"Get the combined status for a specific ref\" endpoint would\n * otherwise match: https://developer.github.com/v3/repos/statuses/#get-the-combined-status-for-a-specific-ref\n */\nfunction normalizePaginatedListResponse(response) {\n  const responseNeedsNormalization = \"total_count\" in response.data && !(\"url\" in response.data);\n  if (!responseNeedsNormalization) return response; // keep the additional properties intact as there is currently no other way\n  // to retrieve the same information.\n\n  const incompleteResults = response.data.incomplete_results;\n  const repositorySelection = response.data.repository_selection;\n  const totalCount = response.data.total_count;\n  delete response.data.incomplete_results;\n  delete response.data.repository_selection;\n  delete response.data.total_count;\n  const namespaceKey = Object.keys(response.data)[0];\n  const data = response.data[namespaceKey];\n  response.data = data;\n\n  if (typeof incompleteResults !== \"undefined\") {\n    response.data.incomplete_results = incompleteResults;\n  }\n\n  if (typeof repositorySelection !== \"undefined\") {\n    response.data.repository_selection = repositorySelection;\n  }\n\n  response.data.total_count = totalCount;\n  return response;\n}\n\nfunction iterator(octokit, route, parameters) {\n  const options = typeof route === \"function\" ? route.endpoint(parameters) : octokit.request.endpoint(route, parameters);\n  const requestMethod = typeof route === \"function\" ? route : octokit.request;\n  const method = options.method;\n  const headers = options.headers;\n  let url = options.url;\n  return {\n    [Symbol.asyncIterator]: () => ({\n      async next() {\n        if (!url) return {\n          done: true\n        };\n        const response = await requestMethod({\n          method,\n          url,\n          headers\n        });\n        const normalizedResponse = normalizePaginatedListResponse(response); // `response.headers.link` format:\n        // '<https://api.github.com/users/aseemk/followers?page=2>; rel=\"next\", <https://api.github.com/users/aseemk/followers?page=2>; rel=\"last\"'\n        // sets `url` to undefined if \"next\" URL is not present or `link` header is not set\n\n        url = ((normalizedResponse.headers.link || \"\").match(/<([^>]+)>;\\s*rel=\"next\"/) || [])[1];\n        return {\n          value: normalizedResponse\n        };\n      }\n\n    })\n  };\n}\n\nfunction paginate(octokit, route, parameters, mapFn) {\n  if (typeof parameters === \"function\") {\n    mapFn = parameters;\n    parameters = undefined;\n  }\n\n  return gather(octokit, [], iterator(octokit, route, parameters)[Symbol.asyncIterator](), mapFn);\n}\n\nfunction gather(octokit, results, iterator, mapFn) {\n  return iterator.next().then(result => {\n    if (result.done) {\n      return results;\n    }\n\n    let earlyExit = false;\n\n    function done() {\n      earlyExit = true;\n    }\n\n    results = results.concat(mapFn ? mapFn(result.value, done) : result.value.data);\n\n    if (earlyExit) {\n      return results;\n    }\n\n    return gather(octokit, results, iterator, mapFn);\n  });\n}\n\nconst composePaginateRest = Object.assign(paginate, {\n  iterator\n});\n\nconst paginatingEndpoints = [\"GET /app/installations\", \"GET /applications/grants\", \"GET /authorizations\", \"GET /enterprises/{enterprise}/actions/permissions/organizations\", \"GET /enterprises/{enterprise}/actions/runner-groups\", \"GET /enterprises/{enterprise}/actions/runner-groups/{runner_group_id}/organizations\", \"GET /enterprises/{enterprise}/actions/runner-groups/{runner_group_id}/runners\", \"GET /enterprises/{enterprise}/actions/runners\", \"GET /enterprises/{enterprise}/actions/runners/downloads\", \"GET /events\", \"GET /gists\", \"GET /gists/public\", \"GET /gists/starred\", \"GET /gists/{gist_id}/comments\", \"GET /gists/{gist_id}/commits\", \"GET /gists/{gist_id}/forks\", \"GET /installation/repositories\", \"GET /issues\", \"GET /marketplace_listing/plans\", \"GET /marketplace_listing/plans/{plan_id}/accounts\", \"GET /marketplace_listing/stubbed/plans\", \"GET /marketplace_listing/stubbed/plans/{plan_id}/accounts\", \"GET /networks/{owner}/{repo}/events\", \"GET /notifications\", \"GET /organizations\", \"GET /orgs/{org}/actions/permissions/repositories\", \"GET /orgs/{org}/actions/runner-groups\", \"GET /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories\", \"GET /orgs/{org}/actions/runner-groups/{runner_group_id}/runners\", \"GET /orgs/{org}/actions/runners\", \"GET /orgs/{org}/actions/runners/downloads\", \"GET /orgs/{org}/actions/secrets\", \"GET /orgs/{org}/actions/secrets/{secret_name}/repositories\", \"GET /orgs/{org}/blocks\", \"GET /orgs/{org}/credential-authorizations\", \"GET /orgs/{org}/events\", \"GET /orgs/{org}/failed_invitations\", \"GET /orgs/{org}/hooks\", \"GET /orgs/{org}/installations\", \"GET /orgs/{org}/invitations\", \"GET /orgs/{org}/invitations/{invitation_id}/teams\", \"GET /orgs/{org}/issues\", \"GET /orgs/{org}/members\", \"GET /orgs/{org}/migrations\", \"GET /orgs/{org}/migrations/{migration_id}/repositories\", \"GET /orgs/{org}/outside_collaborators\", \"GET /orgs/{org}/projects\", \"GET /orgs/{org}/public_members\", \"GET /orgs/{org}/repos\", \"GET /orgs/{org}/team-sync/groups\", \"GET /orgs/{org}/teams\", \"GET /orgs/{org}/teams/{team_slug}/discussions\", \"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments\", \"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions\", \"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions\", \"GET /orgs/{org}/teams/{team_slug}/invitations\", \"GET /orgs/{org}/teams/{team_slug}/members\", \"GET /orgs/{org}/teams/{team_slug}/projects\", \"GET /orgs/{org}/teams/{team_slug}/repos\", \"GET /orgs/{org}/teams/{team_slug}/team-sync/group-mappings\", \"GET /orgs/{org}/teams/{team_slug}/teams\", \"GET /projects/columns/{column_id}/cards\", \"GET /projects/{project_id}/collaborators\", \"GET /projects/{project_id}/columns\", \"GET /repos/{owner}/{repo}/actions/artifacts\", \"GET /repos/{owner}/{repo}/actions/runners\", \"GET /repos/{owner}/{repo}/actions/runners/downloads\", \"GET /repos/{owner}/{repo}/actions/runs\", \"GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts\", \"GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs\", \"GET /repos/{owner}/{repo}/actions/secrets\", \"GET /repos/{owner}/{repo}/actions/workflows\", \"GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs\", \"GET /repos/{owner}/{repo}/assignees\", \"GET /repos/{owner}/{repo}/branches\", \"GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations\", \"GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs\", \"GET /repos/{owner}/{repo}/code-scanning/alerts\", \"GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances\", \"GET /repos/{owner}/{repo}/code-scanning/analyses\", \"GET /repos/{owner}/{repo}/collaborators\", \"GET /repos/{owner}/{repo}/comments\", \"GET /repos/{owner}/{repo}/comments/{comment_id}/reactions\", \"GET /repos/{owner}/{repo}/commits\", \"GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head\", \"GET /repos/{owner}/{repo}/commits/{commit_sha}/comments\", \"GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls\", \"GET /repos/{owner}/{repo}/commits/{ref}/check-runs\", \"GET /repos/{owner}/{repo}/commits/{ref}/check-suites\", \"GET /repos/{owner}/{repo}/commits/{ref}/statuses\", \"GET /repos/{owner}/{repo}/contributors\", \"GET /repos/{owner}/{repo}/deployments\", \"GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses\", \"GET /repos/{owner}/{repo}/events\", \"GET /repos/{owner}/{repo}/forks\", \"GET /repos/{owner}/{repo}/git/matching-refs/{ref}\", \"GET /repos/{owner}/{repo}/hooks\", \"GET /repos/{owner}/{repo}/invitations\", \"GET /repos/{owner}/{repo}/issues\", \"GET /repos/{owner}/{repo}/issues/comments\", \"GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions\", \"GET /repos/{owner}/{repo}/issues/events\", \"GET /repos/{owner}/{repo}/issues/{issue_number}/comments\", \"GET /repos/{owner}/{repo}/issues/{issue_number}/events\", \"GET /repos/{owner}/{repo}/issues/{issue_number}/labels\", \"GET /repos/{owner}/{repo}/issues/{issue_number}/reactions\", \"GET /repos/{owner}/{repo}/issues/{issue_number}/timeline\", \"GET /repos/{owner}/{repo}/keys\", \"GET /repos/{owner}/{repo}/labels\", \"GET /repos/{owner}/{repo}/milestones\", \"GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels\", \"GET /repos/{owner}/{repo}/notifications\", \"GET /repos/{owner}/{repo}/pages/builds\", \"GET /repos/{owner}/{repo}/projects\", \"GET /repos/{owner}/{repo}/pulls\", \"GET /repos/{owner}/{repo}/pulls/comments\", \"GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/comments\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/commits\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/files\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews\", \"GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments\", \"GET /repos/{owner}/{repo}/releases\", \"GET /repos/{owner}/{repo}/releases/{release_id}/assets\", \"GET /repos/{owner}/{repo}/secret-scanning/alerts\", \"GET /repos/{owner}/{repo}/stargazers\", \"GET /repos/{owner}/{repo}/subscribers\", \"GET /repos/{owner}/{repo}/tags\", \"GET /repos/{owner}/{repo}/teams\", \"GET /repositories\", \"GET /repositories/{repository_id}/environments/{environment_name}/secrets\", \"GET /scim/v2/enterprises/{enterprise}/Groups\", \"GET /scim/v2/enterprises/{enterprise}/Users\", \"GET /scim/v2/organizations/{org}/Users\", \"GET /search/code\", \"GET /search/commits\", \"GET /search/issues\", \"GET /search/labels\", \"GET /search/repositories\", \"GET /search/topics\", \"GET /search/users\", \"GET /teams/{team_id}/discussions\", \"GET /teams/{team_id}/discussions/{discussion_number}/comments\", \"GET /teams/{team_id}/discussions/{discussion_number}/comments/{comment_number}/reactions\", \"GET /teams/{team_id}/discussions/{discussion_number}/reactions\", \"GET /teams/{team_id}/invitations\", \"GET /teams/{team_id}/members\", \"GET /teams/{team_id}/projects\", \"GET /teams/{team_id}/repos\", \"GET /teams/{team_id}/team-sync/group-mappings\", \"GET /teams/{team_id}/teams\", \"GET /user/blocks\", \"GET /user/emails\", \"GET /user/followers\", \"GET /user/following\", \"GET /user/gpg_keys\", \"GET /user/installations\", \"GET /user/installations/{installation_id}/repositories\", \"GET /user/issues\", \"GET /user/keys\", \"GET /user/marketplace_purchases\", \"GET /user/marketplace_purchases/stubbed\", \"GET /user/memberships/orgs\", \"GET /user/migrations\", \"GET /user/migrations/{migration_id}/repositories\", \"GET /user/orgs\", \"GET /user/public_emails\", \"GET /user/repos\", \"GET /user/repository_invitations\", \"GET /user/starred\", \"GET /user/subscriptions\", \"GET /user/teams\", \"GET /users\", \"GET /users/{username}/events\", \"GET /users/{username}/events/orgs/{org}\", \"GET /users/{username}/events/public\", \"GET /users/{username}/followers\", \"GET /users/{username}/following\", \"GET /users/{username}/gists\", \"GET /users/{username}/gpg_keys\", \"GET /users/{username}/keys\", \"GET /users/{username}/orgs\", \"GET /users/{username}/projects\", \"GET /users/{username}/received_events\", \"GET /users/{username}/received_events/public\", \"GET /users/{username}/repos\", \"GET /users/{username}/starred\", \"GET /users/{username}/subscriptions\"];\n\nfunction isPaginatingEndpoint(arg) {\n  if (typeof arg === \"string\") {\n    return paginatingEndpoints.includes(arg);\n  } else {\n    return false;\n  }\n}\n\n/**\n * @param octokit Octokit instance\n * @param options Options passed to Octokit constructor\n */\n\nfunction paginateRest(octokit) {\n  return {\n    paginate: Object.assign(paginate.bind(null, octokit), {\n      iterator: iterator.bind(null, octokit)\n    })\n  };\n}\npaginateRest.VERSION = VERSION;\n\nexports.composePaginateRest = composePaginateRest;\nexports.isPaginatingEndpoint = isPaginatingEndpoint;\nexports.paginateRest = paginateRest;\nexports.paginatingEndpoints = paginatingEndpoints;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nconst Endpoints = {\n  actions: {\n    addSelectedRepoToOrgSecret: [\"PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}\"],\n    cancelWorkflowRun: [\"POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel\"],\n    createOrUpdateEnvironmentSecret: [\"PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}\"],\n    createOrUpdateOrgSecret: [\"PUT /orgs/{org}/actions/secrets/{secret_name}\"],\n    createOrUpdateRepoSecret: [\"PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}\"],\n    createRegistrationTokenForOrg: [\"POST /orgs/{org}/actions/runners/registration-token\"],\n    createRegistrationTokenForRepo: [\"POST /repos/{owner}/{repo}/actions/runners/registration-token\"],\n    createRemoveTokenForOrg: [\"POST /orgs/{org}/actions/runners/remove-token\"],\n    createRemoveTokenForRepo: [\"POST /repos/{owner}/{repo}/actions/runners/remove-token\"],\n    createWorkflowDispatch: [\"POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches\"],\n    deleteArtifact: [\"DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}\"],\n    deleteEnvironmentSecret: [\"DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}\"],\n    deleteOrgSecret: [\"DELETE /orgs/{org}/actions/secrets/{secret_name}\"],\n    deleteRepoSecret: [\"DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}\"],\n    deleteSelfHostedRunnerFromOrg: [\"DELETE /orgs/{org}/actions/runners/{runner_id}\"],\n    deleteSelfHostedRunnerFromRepo: [\"DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}\"],\n    deleteWorkflowRun: [\"DELETE /repos/{owner}/{repo}/actions/runs/{run_id}\"],\n    deleteWorkflowRunLogs: [\"DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs\"],\n    disableSelectedRepositoryGithubActionsOrganization: [\"DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}\"],\n    disableWorkflow: [\"PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable\"],\n    downloadArtifact: [\"GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}\"],\n    downloadJobLogsForWorkflowRun: [\"GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs\"],\n    downloadWorkflowRunLogs: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs\"],\n    enableSelectedRepositoryGithubActionsOrganization: [\"PUT /orgs/{org}/actions/permissions/repositories/{repository_id}\"],\n    enableWorkflow: [\"PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable\"],\n    getAllowedActionsOrganization: [\"GET /orgs/{org}/actions/permissions/selected-actions\"],\n    getAllowedActionsRepository: [\"GET /repos/{owner}/{repo}/actions/permissions/selected-actions\"],\n    getArtifact: [\"GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}\"],\n    getEnvironmentPublicKey: [\"GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key\"],\n    getEnvironmentSecret: [\"GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}\"],\n    getGithubActionsPermissionsOrganization: [\"GET /orgs/{org}/actions/permissions\"],\n    getGithubActionsPermissionsRepository: [\"GET /repos/{owner}/{repo}/actions/permissions\"],\n    getJobForWorkflowRun: [\"GET /repos/{owner}/{repo}/actions/jobs/{job_id}\"],\n    getOrgPublicKey: [\"GET /orgs/{org}/actions/secrets/public-key\"],\n    getOrgSecret: [\"GET /orgs/{org}/actions/secrets/{secret_name}\"],\n    getPendingDeploymentsForRun: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments\"],\n    getRepoPermissions: [\"GET /repos/{owner}/{repo}/actions/permissions\", {}, {\n      renamed: [\"actions\", \"getGithubActionsPermissionsRepository\"]\n    }],\n    getRepoPublicKey: [\"GET /repos/{owner}/{repo}/actions/secrets/public-key\"],\n    getRepoSecret: [\"GET /repos/{owner}/{repo}/actions/secrets/{secret_name}\"],\n    getReviewsForRun: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals\"],\n    getSelfHostedRunnerForOrg: [\"GET /orgs/{org}/actions/runners/{runner_id}\"],\n    getSelfHostedRunnerForRepo: [\"GET /repos/{owner}/{repo}/actions/runners/{runner_id}\"],\n    getWorkflow: [\"GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}\"],\n    getWorkflowRun: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}\"],\n    getWorkflowRunUsage: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing\"],\n    getWorkflowUsage: [\"GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing\"],\n    listArtifactsForRepo: [\"GET /repos/{owner}/{repo}/actions/artifacts\"],\n    listEnvironmentSecrets: [\"GET /repositories/{repository_id}/environments/{environment_name}/secrets\"],\n    listJobsForWorkflowRun: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs\"],\n    listOrgSecrets: [\"GET /orgs/{org}/actions/secrets\"],\n    listRepoSecrets: [\"GET /repos/{owner}/{repo}/actions/secrets\"],\n    listRepoWorkflows: [\"GET /repos/{owner}/{repo}/actions/workflows\"],\n    listRunnerApplicationsForOrg: [\"GET /orgs/{org}/actions/runners/downloads\"],\n    listRunnerApplicationsForRepo: [\"GET /repos/{owner}/{repo}/actions/runners/downloads\"],\n    listSelectedReposForOrgSecret: [\"GET /orgs/{org}/actions/secrets/{secret_name}/repositories\"],\n    listSelectedRepositoriesEnabledGithubActionsOrganization: [\"GET /orgs/{org}/actions/permissions/repositories\"],\n    listSelfHostedRunnersForOrg: [\"GET /orgs/{org}/actions/runners\"],\n    listSelfHostedRunnersForRepo: [\"GET /repos/{owner}/{repo}/actions/runners\"],\n    listWorkflowRunArtifacts: [\"GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts\"],\n    listWorkflowRuns: [\"GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs\"],\n    listWorkflowRunsForRepo: [\"GET /repos/{owner}/{repo}/actions/runs\"],\n    reRunWorkflow: [\"POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun\"],\n    removeSelectedRepoFromOrgSecret: [\"DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}\"],\n    reviewPendingDeploymentsForRun: [\"POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments\"],\n    setAllowedActionsOrganization: [\"PUT /orgs/{org}/actions/permissions/selected-actions\"],\n    setAllowedActionsRepository: [\"PUT /repos/{owner}/{repo}/actions/permissions/selected-actions\"],\n    setGithubActionsPermissionsOrganization: [\"PUT /orgs/{org}/actions/permissions\"],\n    setGithubActionsPermissionsRepository: [\"PUT /repos/{owner}/{repo}/actions/permissions\"],\n    setSelectedReposForOrgSecret: [\"PUT /orgs/{org}/actions/secrets/{secret_name}/repositories\"],\n    setSelectedRepositoriesEnabledGithubActionsOrganization: [\"PUT /orgs/{org}/actions/permissions/repositories\"]\n  },\n  activity: {\n    checkRepoIsStarredByAuthenticatedUser: [\"GET /user/starred/{owner}/{repo}\"],\n    deleteRepoSubscription: [\"DELETE /repos/{owner}/{repo}/subscription\"],\n    deleteThreadSubscription: [\"DELETE /notifications/threads/{thread_id}/subscription\"],\n    getFeeds: [\"GET /feeds\"],\n    getRepoSubscription: [\"GET /repos/{owner}/{repo}/subscription\"],\n    getThread: [\"GET /notifications/threads/{thread_id}\"],\n    getThreadSubscriptionForAuthenticatedUser: [\"GET /notifications/threads/{thread_id}/subscription\"],\n    listEventsForAuthenticatedUser: [\"GET /users/{username}/events\"],\n    listNotificationsForAuthenticatedUser: [\"GET /notifications\"],\n    listOrgEventsForAuthenticatedUser: [\"GET /users/{username}/events/orgs/{org}\"],\n    listPublicEvents: [\"GET /events\"],\n    listPublicEventsForRepoNetwork: [\"GET /networks/{owner}/{repo}/events\"],\n    listPublicEventsForUser: [\"GET /users/{username}/events/public\"],\n    listPublicOrgEvents: [\"GET /orgs/{org}/events\"],\n    listReceivedEventsForUser: [\"GET /users/{username}/received_events\"],\n    listReceivedPublicEventsForUser: [\"GET /users/{username}/received_events/public\"],\n    listRepoEvents: [\"GET /repos/{owner}/{repo}/events\"],\n    listRepoNotificationsForAuthenticatedUser: [\"GET /repos/{owner}/{repo}/notifications\"],\n    listReposStarredByAuthenticatedUser: [\"GET /user/starred\"],\n    listReposStarredByUser: [\"GET /users/{username}/starred\"],\n    listReposWatchedByUser: [\"GET /users/{username}/subscriptions\"],\n    listStargazersForRepo: [\"GET /repos/{owner}/{repo}/stargazers\"],\n    listWatchedReposForAuthenticatedUser: [\"GET /user/subscriptions\"],\n    listWatchersForRepo: [\"GET /repos/{owner}/{repo}/subscribers\"],\n    markNotificationsAsRead: [\"PUT /notifications\"],\n    markRepoNotificationsAsRead: [\"PUT /repos/{owner}/{repo}/notifications\"],\n    markThreadAsRead: [\"PATCH /notifications/threads/{thread_id}\"],\n    setRepoSubscription: [\"PUT /repos/{owner}/{repo}/subscription\"],\n    setThreadSubscription: [\"PUT /notifications/threads/{thread_id}/subscription\"],\n    starRepoForAuthenticatedUser: [\"PUT /user/starred/{owner}/{repo}\"],\n    unstarRepoForAuthenticatedUser: [\"DELETE /user/starred/{owner}/{repo}\"]\n  },\n  apps: {\n    addRepoToInstallation: [\"PUT /user/installations/{installation_id}/repositories/{repository_id}\"],\n    checkToken: [\"POST /applications/{client_id}/token\"],\n    createContentAttachment: [\"POST /content_references/{content_reference_id}/attachments\", {\n      mediaType: {\n        previews: [\"corsair\"]\n      }\n    }],\n    createFromManifest: [\"POST /app-manifests/{code}/conversions\"],\n    createInstallationAccessToken: [\"POST /app/installations/{installation_id}/access_tokens\"],\n    deleteAuthorization: [\"DELETE /applications/{client_id}/grant\"],\n    deleteInstallation: [\"DELETE /app/installations/{installation_id}\"],\n    deleteToken: [\"DELETE /applications/{client_id}/token\"],\n    getAuthenticated: [\"GET /app\"],\n    getBySlug: [\"GET /apps/{app_slug}\"],\n    getInstallation: [\"GET /app/installations/{installation_id}\"],\n    getOrgInstallation: [\"GET /orgs/{org}/installation\"],\n    getRepoInstallation: [\"GET /repos/{owner}/{repo}/installation\"],\n    getSubscriptionPlanForAccount: [\"GET /marketplace_listing/accounts/{account_id}\"],\n    getSubscriptionPlanForAccountStubbed: [\"GET /marketplace_listing/stubbed/accounts/{account_id}\"],\n    getUserInstallation: [\"GET /users/{username}/installation\"],\n    getWebhookConfigForApp: [\"GET /app/hook/config\"],\n    listAccountsForPlan: [\"GET /marketplace_listing/plans/{plan_id}/accounts\"],\n    listAccountsForPlanStubbed: [\"GET /marketplace_listing/stubbed/plans/{plan_id}/accounts\"],\n    listInstallationReposForAuthenticatedUser: [\"GET /user/installations/{installation_id}/repositories\"],\n    listInstallations: [\"GET /app/installations\"],\n    listInstallationsForAuthenticatedUser: [\"GET /user/installations\"],\n    listPlans: [\"GET /marketplace_listing/plans\"],\n    listPlansStubbed: [\"GET /marketplace_listing/stubbed/plans\"],\n    listReposAccessibleToInstallation: [\"GET /installation/repositories\"],\n    listSubscriptionsForAuthenticatedUser: [\"GET /user/marketplace_purchases\"],\n    listSubscriptionsForAuthenticatedUserStubbed: [\"GET /user/marketplace_purchases/stubbed\"],\n    removeRepoFromInstallation: [\"DELETE /user/installations/{installation_id}/repositories/{repository_id}\"],\n    resetToken: [\"PATCH /applications/{client_id}/token\"],\n    revokeInstallationAccessToken: [\"DELETE /installation/token\"],\n    scopeToken: [\"POST /applications/{client_id}/token/scoped\"],\n    suspendInstallation: [\"PUT /app/installations/{installation_id}/suspended\"],\n    unsuspendInstallation: [\"DELETE /app/installations/{installation_id}/suspended\"],\n    updateWebhookConfigForApp: [\"PATCH /app/hook/config\"]\n  },\n  billing: {\n    getGithubActionsBillingOrg: [\"GET /orgs/{org}/settings/billing/actions\"],\n    getGithubActionsBillingUser: [\"GET /users/{username}/settings/billing/actions\"],\n    getGithubPackagesBillingOrg: [\"GET /orgs/{org}/settings/billing/packages\"],\n    getGithubPackagesBillingUser: [\"GET /users/{username}/settings/billing/packages\"],\n    getSharedStorageBillingOrg: [\"GET /orgs/{org}/settings/billing/shared-storage\"],\n    getSharedStorageBillingUser: [\"GET /users/{username}/settings/billing/shared-storage\"]\n  },\n  checks: {\n    create: [\"POST /repos/{owner}/{repo}/check-runs\"],\n    createSuite: [\"POST /repos/{owner}/{repo}/check-suites\"],\n    get: [\"GET /repos/{owner}/{repo}/check-runs/{check_run_id}\"],\n    getSuite: [\"GET /repos/{owner}/{repo}/check-suites/{check_suite_id}\"],\n    listAnnotations: [\"GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations\"],\n    listForRef: [\"GET /repos/{owner}/{repo}/commits/{ref}/check-runs\"],\n    listForSuite: [\"GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs\"],\n    listSuitesForRef: [\"GET /repos/{owner}/{repo}/commits/{ref}/check-suites\"],\n    rerequestSuite: [\"POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest\"],\n    setSuitesPreferences: [\"PATCH /repos/{owner}/{repo}/check-suites/preferences\"],\n    update: [\"PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}\"]\n  },\n  codeScanning: {\n    deleteAnalysis: [\"DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}\"],\n    getAlert: [\"GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}\", {}, {\n      renamedParameters: {\n        alert_id: \"alert_number\"\n      }\n    }],\n    getAnalysis: [\"GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}\"],\n    getSarif: [\"GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}\"],\n    listAlertsForRepo: [\"GET /repos/{owner}/{repo}/code-scanning/alerts\"],\n    listAlertsInstances: [\"GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances\"],\n    listRecentAnalyses: [\"GET /repos/{owner}/{repo}/code-scanning/analyses\"],\n    updateAlert: [\"PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}\"],\n    uploadSarif: [\"POST /repos/{owner}/{repo}/code-scanning/sarifs\"]\n  },\n  codesOfConduct: {\n    getAllCodesOfConduct: [\"GET /codes_of_conduct\", {\n      mediaType: {\n        previews: [\"scarlet-witch\"]\n      }\n    }],\n    getConductCode: [\"GET /codes_of_conduct/{key}\", {\n      mediaType: {\n        previews: [\"scarlet-witch\"]\n      }\n    }],\n    getForRepo: [\"GET /repos/{owner}/{repo}/community/code_of_conduct\", {\n      mediaType: {\n        previews: [\"scarlet-witch\"]\n      }\n    }]\n  },\n  emojis: {\n    get: [\"GET /emojis\"]\n  },\n  enterpriseAdmin: {\n    disableSelectedOrganizationGithubActionsEnterprise: [\"DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}\"],\n    enableSelectedOrganizationGithubActionsEnterprise: [\"PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}\"],\n    getAllowedActionsEnterprise: [\"GET /enterprises/{enterprise}/actions/permissions/selected-actions\"],\n    getGithubActionsPermissionsEnterprise: [\"GET /enterprises/{enterprise}/actions/permissions\"],\n    listSelectedOrganizationsEnabledGithubActionsEnterprise: [\"GET /enterprises/{enterprise}/actions/permissions/organizations\"],\n    setAllowedActionsEnterprise: [\"PUT /enterprises/{enterprise}/actions/permissions/selected-actions\"],\n    setGithubActionsPermissionsEnterprise: [\"PUT /enterprises/{enterprise}/actions/permissions\"],\n    setSelectedOrganizationsEnabledGithubActionsEnterprise: [\"PUT /enterprises/{enterprise}/actions/permissions/organizations\"]\n  },\n  gists: {\n    checkIsStarred: [\"GET /gists/{gist_id}/star\"],\n    create: [\"POST /gists\"],\n    createComment: [\"POST /gists/{gist_id}/comments\"],\n    delete: [\"DELETE /gists/{gist_id}\"],\n    deleteComment: [\"DELETE /gists/{gist_id}/comments/{comment_id}\"],\n    fork: [\"POST /gists/{gist_id}/forks\"],\n    get: [\"GET /gists/{gist_id}\"],\n    getComment: [\"GET /gists/{gist_id}/comments/{comment_id}\"],\n    getRevision: [\"GET /gists/{gist_id}/{sha}\"],\n    list: [\"GET /gists\"],\n    listComments: [\"GET /gists/{gist_id}/comments\"],\n    listCommits: [\"GET /gists/{gist_id}/commits\"],\n    listForUser: [\"GET /users/{username}/gists\"],\n    listForks: [\"GET /gists/{gist_id}/forks\"],\n    listPublic: [\"GET /gists/public\"],\n    listStarred: [\"GET /gists/starred\"],\n    star: [\"PUT /gists/{gist_id}/star\"],\n    unstar: [\"DELETE /gists/{gist_id}/star\"],\n    update: [\"PATCH /gists/{gist_id}\"],\n    updateComment: [\"PATCH /gists/{gist_id}/comments/{comment_id}\"]\n  },\n  git: {\n    createBlob: [\"POST /repos/{owner}/{repo}/git/blobs\"],\n    createCommit: [\"POST /repos/{owner}/{repo}/git/commits\"],\n    createRef: [\"POST /repos/{owner}/{repo}/git/refs\"],\n    createTag: [\"POST /repos/{owner}/{repo}/git/tags\"],\n    createTree: [\"POST /repos/{owner}/{repo}/git/trees\"],\n    deleteRef: [\"DELETE /repos/{owner}/{repo}/git/refs/{ref}\"],\n    getBlob: [\"GET /repos/{owner}/{repo}/git/blobs/{file_sha}\"],\n    getCommit: [\"GET /repos/{owner}/{repo}/git/commits/{commit_sha}\"],\n    getRef: [\"GET /repos/{owner}/{repo}/git/ref/{ref}\"],\n    getTag: [\"GET /repos/{owner}/{repo}/git/tags/{tag_sha}\"],\n    getTree: [\"GET /repos/{owner}/{repo}/git/trees/{tree_sha}\"],\n    listMatchingRefs: [\"GET /repos/{owner}/{repo}/git/matching-refs/{ref}\"],\n    updateRef: [\"PATCH /repos/{owner}/{repo}/git/refs/{ref}\"]\n  },\n  gitignore: {\n    getAllTemplates: [\"GET /gitignore/templates\"],\n    getTemplate: [\"GET /gitignore/templates/{name}\"]\n  },\n  interactions: {\n    getRestrictionsForAuthenticatedUser: [\"GET /user/interaction-limits\"],\n    getRestrictionsForOrg: [\"GET /orgs/{org}/interaction-limits\"],\n    getRestrictionsForRepo: [\"GET /repos/{owner}/{repo}/interaction-limits\"],\n    getRestrictionsForYourPublicRepos: [\"GET /user/interaction-limits\", {}, {\n      renamed: [\"interactions\", \"getRestrictionsForAuthenticatedUser\"]\n    }],\n    removeRestrictionsForAuthenticatedUser: [\"DELETE /user/interaction-limits\"],\n    removeRestrictionsForOrg: [\"DELETE /orgs/{org}/interaction-limits\"],\n    removeRestrictionsForRepo: [\"DELETE /repos/{owner}/{repo}/interaction-limits\"],\n    removeRestrictionsForYourPublicRepos: [\"DELETE /user/interaction-limits\", {}, {\n      renamed: [\"interactions\", \"removeRestrictionsForAuthenticatedUser\"]\n    }],\n    setRestrictionsForAuthenticatedUser: [\"PUT /user/interaction-limits\"],\n    setRestrictionsForOrg: [\"PUT /orgs/{org}/interaction-limits\"],\n    setRestrictionsForRepo: [\"PUT /repos/{owner}/{repo}/interaction-limits\"],\n    setRestrictionsForYourPublicRepos: [\"PUT /user/interaction-limits\", {}, {\n      renamed: [\"interactions\", \"setRestrictionsForAuthenticatedUser\"]\n    }]\n  },\n  issues: {\n    addAssignees: [\"POST /repos/{owner}/{repo}/issues/{issue_number}/assignees\"],\n    addLabels: [\"POST /repos/{owner}/{repo}/issues/{issue_number}/labels\"],\n    checkUserCanBeAssigned: [\"GET /repos/{owner}/{repo}/assignees/{assignee}\"],\n    create: [\"POST /repos/{owner}/{repo}/issues\"],\n    createComment: [\"POST /repos/{owner}/{repo}/issues/{issue_number}/comments\"],\n    createLabel: [\"POST /repos/{owner}/{repo}/labels\"],\n    createMilestone: [\"POST /repos/{owner}/{repo}/milestones\"],\n    deleteComment: [\"DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}\"],\n    deleteLabel: [\"DELETE /repos/{owner}/{repo}/labels/{name}\"],\n    deleteMilestone: [\"DELETE /repos/{owner}/{repo}/milestones/{milestone_number}\"],\n    get: [\"GET /repos/{owner}/{repo}/issues/{issue_number}\"],\n    getComment: [\"GET /repos/{owner}/{repo}/issues/comments/{comment_id}\"],\n    getEvent: [\"GET /repos/{owner}/{repo}/issues/events/{event_id}\"],\n    getLabel: [\"GET /repos/{owner}/{repo}/labels/{name}\"],\n    getMilestone: [\"GET /repos/{owner}/{repo}/milestones/{milestone_number}\"],\n    list: [\"GET /issues\"],\n    listAssignees: [\"GET /repos/{owner}/{repo}/assignees\"],\n    listComments: [\"GET /repos/{owner}/{repo}/issues/{issue_number}/comments\"],\n    listCommentsForRepo: [\"GET /repos/{owner}/{repo}/issues/comments\"],\n    listEvents: [\"GET /repos/{owner}/{repo}/issues/{issue_number}/events\"],\n    listEventsForRepo: [\"GET /repos/{owner}/{repo}/issues/events\"],\n    listEventsForTimeline: [\"GET /repos/{owner}/{repo}/issues/{issue_number}/timeline\", {\n      mediaType: {\n        previews: [\"mockingbird\"]\n      }\n    }],\n    listForAuthenticatedUser: [\"GET /user/issues\"],\n    listForOrg: [\"GET /orgs/{org}/issues\"],\n    listForRepo: [\"GET /repos/{owner}/{repo}/issues\"],\n    listLabelsForMilestone: [\"GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels\"],\n    listLabelsForRepo: [\"GET /repos/{owner}/{repo}/labels\"],\n    listLabelsOnIssue: [\"GET /repos/{owner}/{repo}/issues/{issue_number}/labels\"],\n    listMilestones: [\"GET /repos/{owner}/{repo}/milestones\"],\n    lock: [\"PUT /repos/{owner}/{repo}/issues/{issue_number}/lock\"],\n    removeAllLabels: [\"DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels\"],\n    removeAssignees: [\"DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees\"],\n    removeLabel: [\"DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}\"],\n    setLabels: [\"PUT /repos/{owner}/{repo}/issues/{issue_number}/labels\"],\n    unlock: [\"DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock\"],\n    update: [\"PATCH /repos/{owner}/{repo}/issues/{issue_number}\"],\n    updateComment: [\"PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}\"],\n    updateLabel: [\"PATCH /repos/{owner}/{repo}/labels/{name}\"],\n    updateMilestone: [\"PATCH /repos/{owner}/{repo}/milestones/{milestone_number}\"]\n  },\n  licenses: {\n    get: [\"GET /licenses/{license}\"],\n    getAllCommonlyUsed: [\"GET /licenses\"],\n    getForRepo: [\"GET /repos/{owner}/{repo}/license\"]\n  },\n  markdown: {\n    render: [\"POST /markdown\"],\n    renderRaw: [\"POST /markdown/raw\", {\n      headers: {\n        \"content-type\": \"text/plain; charset=utf-8\"\n      }\n    }]\n  },\n  meta: {\n    get: [\"GET /meta\"],\n    getOctocat: [\"GET /octocat\"],\n    getZen: [\"GET /zen\"],\n    root: [\"GET /\"]\n  },\n  migrations: {\n    cancelImport: [\"DELETE /repos/{owner}/{repo}/import\"],\n    deleteArchiveForAuthenticatedUser: [\"DELETE /user/migrations/{migration_id}/archive\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    deleteArchiveForOrg: [\"DELETE /orgs/{org}/migrations/{migration_id}/archive\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    downloadArchiveForOrg: [\"GET /orgs/{org}/migrations/{migration_id}/archive\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    getArchiveForAuthenticatedUser: [\"GET /user/migrations/{migration_id}/archive\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    getCommitAuthors: [\"GET /repos/{owner}/{repo}/import/authors\"],\n    getImportStatus: [\"GET /repos/{owner}/{repo}/import\"],\n    getLargeFiles: [\"GET /repos/{owner}/{repo}/import/large_files\"],\n    getStatusForAuthenticatedUser: [\"GET /user/migrations/{migration_id}\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    getStatusForOrg: [\"GET /orgs/{org}/migrations/{migration_id}\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    listForAuthenticatedUser: [\"GET /user/migrations\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    listForOrg: [\"GET /orgs/{org}/migrations\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    listReposForOrg: [\"GET /orgs/{org}/migrations/{migration_id}/repositories\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    listReposForUser: [\"GET /user/migrations/{migration_id}/repositories\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    mapCommitAuthor: [\"PATCH /repos/{owner}/{repo}/import/authors/{author_id}\"],\n    setLfsPreference: [\"PATCH /repos/{owner}/{repo}/import/lfs\"],\n    startForAuthenticatedUser: [\"POST /user/migrations\"],\n    startForOrg: [\"POST /orgs/{org}/migrations\"],\n    startImport: [\"PUT /repos/{owner}/{repo}/import\"],\n    unlockRepoForAuthenticatedUser: [\"DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    unlockRepoForOrg: [\"DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock\", {\n      mediaType: {\n        previews: [\"wyandotte\"]\n      }\n    }],\n    updateImport: [\"PATCH /repos/{owner}/{repo}/import\"]\n  },\n  orgs: {\n    blockUser: [\"PUT /orgs/{org}/blocks/{username}\"],\n    cancelInvitation: [\"DELETE /orgs/{org}/invitations/{invitation_id}\"],\n    checkBlockedUser: [\"GET /orgs/{org}/blocks/{username}\"],\n    checkMembershipForUser: [\"GET /orgs/{org}/members/{username}\"],\n    checkPublicMembershipForUser: [\"GET /orgs/{org}/public_members/{username}\"],\n    convertMemberToOutsideCollaborator: [\"PUT /orgs/{org}/outside_collaborators/{username}\"],\n    createInvitation: [\"POST /orgs/{org}/invitations\"],\n    createWebhook: [\"POST /orgs/{org}/hooks\"],\n    deleteWebhook: [\"DELETE /orgs/{org}/hooks/{hook_id}\"],\n    get: [\"GET /orgs/{org}\"],\n    getMembershipForAuthenticatedUser: [\"GET /user/memberships/orgs/{org}\"],\n    getMembershipForUser: [\"GET /orgs/{org}/memberships/{username}\"],\n    getWebhook: [\"GET /orgs/{org}/hooks/{hook_id}\"],\n    getWebhookConfigForOrg: [\"GET /orgs/{org}/hooks/{hook_id}/config\"],\n    list: [\"GET /organizations\"],\n    listAppInstallations: [\"GET /orgs/{org}/installations\"],\n    listBlockedUsers: [\"GET /orgs/{org}/blocks\"],\n    listFailedInvitations: [\"GET /orgs/{org}/failed_invitations\"],\n    listForAuthenticatedUser: [\"GET /user/orgs\"],\n    listForUser: [\"GET /users/{username}/orgs\"],\n    listInvitationTeams: [\"GET /orgs/{org}/invitations/{invitation_id}/teams\"],\n    listMembers: [\"GET /orgs/{org}/members\"],\n    listMembershipsForAuthenticatedUser: [\"GET /user/memberships/orgs\"],\n    listOutsideCollaborators: [\"GET /orgs/{org}/outside_collaborators\"],\n    listPendingInvitations: [\"GET /orgs/{org}/invitations\"],\n    listPublicMembers: [\"GET /orgs/{org}/public_members\"],\n    listWebhooks: [\"GET /orgs/{org}/hooks\"],\n    pingWebhook: [\"POST /orgs/{org}/hooks/{hook_id}/pings\"],\n    removeMember: [\"DELETE /orgs/{org}/members/{username}\"],\n    removeMembershipForUser: [\"DELETE /orgs/{org}/memberships/{username}\"],\n    removeOutsideCollaborator: [\"DELETE /orgs/{org}/outside_collaborators/{username}\"],\n    removePublicMembershipForAuthenticatedUser: [\"DELETE /orgs/{org}/public_members/{username}\"],\n    setMembershipForUser: [\"PUT /orgs/{org}/memberships/{username}\"],\n    setPublicMembershipForAuthenticatedUser: [\"PUT /orgs/{org}/public_members/{username}\"],\n    unblockUser: [\"DELETE /orgs/{org}/blocks/{username}\"],\n    update: [\"PATCH /orgs/{org}\"],\n    updateMembershipForAuthenticatedUser: [\"PATCH /user/memberships/orgs/{org}\"],\n    updateWebhook: [\"PATCH /orgs/{org}/hooks/{hook_id}\"],\n    updateWebhookConfigForOrg: [\"PATCH /orgs/{org}/hooks/{hook_id}/config\"]\n  },\n  packages: {\n    deletePackageForAuthenticatedUser: [\"DELETE /user/packages/{package_type}/{package_name}\"],\n    deletePackageForOrg: [\"DELETE /orgs/{org}/packages/{package_type}/{package_name}\"],\n    deletePackageVersionForAuthenticatedUser: [\"DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}\"],\n    deletePackageVersionForOrg: [\"DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}\"],\n    getAllPackageVersionsForAPackageOwnedByAnOrg: [\"GET /orgs/{org}/packages/{package_type}/{package_name}/versions\", {}, {\n      renamed: [\"packages\", \"getAllPackageVersionsForPackageOwnedByOrg\"]\n    }],\n    getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser: [\"GET /user/packages/{package_type}/{package_name}/versions\", {}, {\n      renamed: [\"packages\", \"getAllPackageVersionsForPackageOwnedByAuthenticatedUser\"]\n    }],\n    getAllPackageVersionsForPackageOwnedByAuthenticatedUser: [\"GET /user/packages/{package_type}/{package_name}/versions\"],\n    getAllPackageVersionsForPackageOwnedByOrg: [\"GET /orgs/{org}/packages/{package_type}/{package_name}/versions\"],\n    getAllPackageVersionsForPackageOwnedByUser: [\"GET /users/{username}/packages/{package_type}/{package_name}/versions\"],\n    getPackageForAuthenticatedUser: [\"GET /user/packages/{package_type}/{package_name}\"],\n    getPackageForOrganization: [\"GET /orgs/{org}/packages/{package_type}/{package_name}\"],\n    getPackageForUser: [\"GET /users/{username}/packages/{package_type}/{package_name}\"],\n    getPackageVersionForAuthenticatedUser: [\"GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}\"],\n    getPackageVersionForOrganization: [\"GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}\"],\n    getPackageVersionForUser: [\"GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}\"],\n    restorePackageForAuthenticatedUser: [\"POST /user/packages/{package_type}/{package_name}/restore{?token}\"],\n    restorePackageForOrg: [\"POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}\"],\n    restorePackageVersionForAuthenticatedUser: [\"POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore\"],\n    restorePackageVersionForOrg: [\"POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore\"]\n  },\n  projects: {\n    addCollaborator: [\"PUT /projects/{project_id}/collaborators/{username}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    createCard: [\"POST /projects/columns/{column_id}/cards\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    createColumn: [\"POST /projects/{project_id}/columns\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    createForAuthenticatedUser: [\"POST /user/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    createForOrg: [\"POST /orgs/{org}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    createForRepo: [\"POST /repos/{owner}/{repo}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    delete: [\"DELETE /projects/{project_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    deleteCard: [\"DELETE /projects/columns/cards/{card_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    deleteColumn: [\"DELETE /projects/columns/{column_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    get: [\"GET /projects/{project_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    getCard: [\"GET /projects/columns/cards/{card_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    getColumn: [\"GET /projects/columns/{column_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    getPermissionForUser: [\"GET /projects/{project_id}/collaborators/{username}/permission\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listCards: [\"GET /projects/columns/{column_id}/cards\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listCollaborators: [\"GET /projects/{project_id}/collaborators\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listColumns: [\"GET /projects/{project_id}/columns\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listForOrg: [\"GET /orgs/{org}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listForRepo: [\"GET /repos/{owner}/{repo}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listForUser: [\"GET /users/{username}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    moveCard: [\"POST /projects/columns/cards/{card_id}/moves\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    moveColumn: [\"POST /projects/columns/{column_id}/moves\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    removeCollaborator: [\"DELETE /projects/{project_id}/collaborators/{username}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    update: [\"PATCH /projects/{project_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    updateCard: [\"PATCH /projects/columns/cards/{card_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    updateColumn: [\"PATCH /projects/columns/{column_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }]\n  },\n  pulls: {\n    checkIfMerged: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/merge\"],\n    create: [\"POST /repos/{owner}/{repo}/pulls\"],\n    createReplyForReviewComment: [\"POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies\"],\n    createReview: [\"POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews\"],\n    createReviewComment: [\"POST /repos/{owner}/{repo}/pulls/{pull_number}/comments\"],\n    deletePendingReview: [\"DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}\"],\n    deleteReviewComment: [\"DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}\"],\n    dismissReview: [\"PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals\"],\n    get: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}\"],\n    getReview: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}\"],\n    getReviewComment: [\"GET /repos/{owner}/{repo}/pulls/comments/{comment_id}\"],\n    list: [\"GET /repos/{owner}/{repo}/pulls\"],\n    listCommentsForReview: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments\"],\n    listCommits: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/commits\"],\n    listFiles: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/files\"],\n    listRequestedReviewers: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers\"],\n    listReviewComments: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/comments\"],\n    listReviewCommentsForRepo: [\"GET /repos/{owner}/{repo}/pulls/comments\"],\n    listReviews: [\"GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews\"],\n    merge: [\"PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge\"],\n    removeRequestedReviewers: [\"DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers\"],\n    requestReviewers: [\"POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers\"],\n    submitReview: [\"POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events\"],\n    update: [\"PATCH /repos/{owner}/{repo}/pulls/{pull_number}\"],\n    updateBranch: [\"PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch\", {\n      mediaType: {\n        previews: [\"lydian\"]\n      }\n    }],\n    updateReview: [\"PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}\"],\n    updateReviewComment: [\"PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}\"]\n  },\n  rateLimit: {\n    get: [\"GET /rate_limit\"]\n  },\n  reactions: {\n    createForCommitComment: [\"POST /repos/{owner}/{repo}/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    createForIssue: [\"POST /repos/{owner}/{repo}/issues/{issue_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    createForIssueComment: [\"POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    createForPullRequestReviewComment: [\"POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    createForTeamDiscussionCommentInOrg: [\"POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    createForTeamDiscussionInOrg: [\"POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForCommitComment: [\"DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForIssue: [\"DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForIssueComment: [\"DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForPullRequestComment: [\"DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForTeamDiscussion: [\"DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteForTeamDiscussionComment: [\"DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    deleteLegacy: [\"DELETE /reactions/{reaction_id}\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }, {\n      deprecated: \"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/rest/reference/reactions/#delete-a-reaction-legacy\"\n    }],\n    listForCommitComment: [\"GET /repos/{owner}/{repo}/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    listForIssue: [\"GET /repos/{owner}/{repo}/issues/{issue_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    listForIssueComment: [\"GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    listForPullRequestReviewComment: [\"GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    listForTeamDiscussionCommentInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }],\n    listForTeamDiscussionInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions\", {\n      mediaType: {\n        previews: [\"squirrel-girl\"]\n      }\n    }]\n  },\n  repos: {\n    acceptInvitation: [\"PATCH /user/repository_invitations/{invitation_id}\"],\n    addAppAccessRestrictions: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps\", {}, {\n      mapToData: \"apps\"\n    }],\n    addCollaborator: [\"PUT /repos/{owner}/{repo}/collaborators/{username}\"],\n    addStatusCheckContexts: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts\", {}, {\n      mapToData: \"contexts\"\n    }],\n    addTeamAccessRestrictions: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams\", {}, {\n      mapToData: \"teams\"\n    }],\n    addUserAccessRestrictions: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users\", {}, {\n      mapToData: \"users\"\n    }],\n    checkCollaborator: [\"GET /repos/{owner}/{repo}/collaborators/{username}\"],\n    checkVulnerabilityAlerts: [\"GET /repos/{owner}/{repo}/vulnerability-alerts\", {\n      mediaType: {\n        previews: [\"dorian\"]\n      }\n    }],\n    compareCommits: [\"GET /repos/{owner}/{repo}/compare/{base}...{head}\"],\n    createCommitComment: [\"POST /repos/{owner}/{repo}/commits/{commit_sha}/comments\"],\n    createCommitSignatureProtection: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures\", {\n      mediaType: {\n        previews: [\"zzzax\"]\n      }\n    }],\n    createCommitStatus: [\"POST /repos/{owner}/{repo}/statuses/{sha}\"],\n    createDeployKey: [\"POST /repos/{owner}/{repo}/keys\"],\n    createDeployment: [\"POST /repos/{owner}/{repo}/deployments\"],\n    createDeploymentStatus: [\"POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses\"],\n    createDispatchEvent: [\"POST /repos/{owner}/{repo}/dispatches\"],\n    createForAuthenticatedUser: [\"POST /user/repos\"],\n    createFork: [\"POST /repos/{owner}/{repo}/forks{?org,organization}\"],\n    createInOrg: [\"POST /orgs/{org}/repos\"],\n    createOrUpdateEnvironment: [\"PUT /repos/{owner}/{repo}/environments/{environment_name}\"],\n    createOrUpdateFileContents: [\"PUT /repos/{owner}/{repo}/contents/{path}\"],\n    createPagesSite: [\"POST /repos/{owner}/{repo}/pages\", {\n      mediaType: {\n        previews: [\"switcheroo\"]\n      }\n    }],\n    createRelease: [\"POST /repos/{owner}/{repo}/releases\"],\n    createUsingTemplate: [\"POST /repos/{template_owner}/{template_repo}/generate\", {\n      mediaType: {\n        previews: [\"baptiste\"]\n      }\n    }],\n    createWebhook: [\"POST /repos/{owner}/{repo}/hooks\"],\n    declineInvitation: [\"DELETE /user/repository_invitations/{invitation_id}\"],\n    delete: [\"DELETE /repos/{owner}/{repo}\"],\n    deleteAccessRestrictions: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions\"],\n    deleteAdminBranchProtection: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins\"],\n    deleteAnEnvironment: [\"DELETE /repos/{owner}/{repo}/environments/{environment_name}\"],\n    deleteBranchProtection: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection\"],\n    deleteCommitComment: [\"DELETE /repos/{owner}/{repo}/comments/{comment_id}\"],\n    deleteCommitSignatureProtection: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures\", {\n      mediaType: {\n        previews: [\"zzzax\"]\n      }\n    }],\n    deleteDeployKey: [\"DELETE /repos/{owner}/{repo}/keys/{key_id}\"],\n    deleteDeployment: [\"DELETE /repos/{owner}/{repo}/deployments/{deployment_id}\"],\n    deleteFile: [\"DELETE /repos/{owner}/{repo}/contents/{path}\"],\n    deleteInvitation: [\"DELETE /repos/{owner}/{repo}/invitations/{invitation_id}\"],\n    deletePagesSite: [\"DELETE /repos/{owner}/{repo}/pages\", {\n      mediaType: {\n        previews: [\"switcheroo\"]\n      }\n    }],\n    deletePullRequestReviewProtection: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews\"],\n    deleteRelease: [\"DELETE /repos/{owner}/{repo}/releases/{release_id}\"],\n    deleteReleaseAsset: [\"DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}\"],\n    deleteWebhook: [\"DELETE /repos/{owner}/{repo}/hooks/{hook_id}\"],\n    disableAutomatedSecurityFixes: [\"DELETE /repos/{owner}/{repo}/automated-security-fixes\", {\n      mediaType: {\n        previews: [\"london\"]\n      }\n    }],\n    disableVulnerabilityAlerts: [\"DELETE /repos/{owner}/{repo}/vulnerability-alerts\", {\n      mediaType: {\n        previews: [\"dorian\"]\n      }\n    }],\n    downloadArchive: [\"GET /repos/{owner}/{repo}/zipball/{ref}\", {}, {\n      renamed: [\"repos\", \"downloadZipballArchive\"]\n    }],\n    downloadTarballArchive: [\"GET /repos/{owner}/{repo}/tarball/{ref}\"],\n    downloadZipballArchive: [\"GET /repos/{owner}/{repo}/zipball/{ref}\"],\n    enableAutomatedSecurityFixes: [\"PUT /repos/{owner}/{repo}/automated-security-fixes\", {\n      mediaType: {\n        previews: [\"london\"]\n      }\n    }],\n    enableVulnerabilityAlerts: [\"PUT /repos/{owner}/{repo}/vulnerability-alerts\", {\n      mediaType: {\n        previews: [\"dorian\"]\n      }\n    }],\n    get: [\"GET /repos/{owner}/{repo}\"],\n    getAccessRestrictions: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions\"],\n    getAdminBranchProtection: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins\"],\n    getAllEnvironments: [\"GET /repos/{owner}/{repo}/environments\"],\n    getAllStatusCheckContexts: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts\"],\n    getAllTopics: [\"GET /repos/{owner}/{repo}/topics\", {\n      mediaType: {\n        previews: [\"mercy\"]\n      }\n    }],\n    getAppsWithAccessToProtectedBranch: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps\"],\n    getBranch: [\"GET /repos/{owner}/{repo}/branches/{branch}\"],\n    getBranchProtection: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection\"],\n    getClones: [\"GET /repos/{owner}/{repo}/traffic/clones\"],\n    getCodeFrequencyStats: [\"GET /repos/{owner}/{repo}/stats/code_frequency\"],\n    getCollaboratorPermissionLevel: [\"GET /repos/{owner}/{repo}/collaborators/{username}/permission\"],\n    getCombinedStatusForRef: [\"GET /repos/{owner}/{repo}/commits/{ref}/status\"],\n    getCommit: [\"GET /repos/{owner}/{repo}/commits/{ref}\"],\n    getCommitActivityStats: [\"GET /repos/{owner}/{repo}/stats/commit_activity\"],\n    getCommitComment: [\"GET /repos/{owner}/{repo}/comments/{comment_id}\"],\n    getCommitSignatureProtection: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures\", {\n      mediaType: {\n        previews: [\"zzzax\"]\n      }\n    }],\n    getCommunityProfileMetrics: [\"GET /repos/{owner}/{repo}/community/profile\"],\n    getContent: [\"GET /repos/{owner}/{repo}/contents/{path}\"],\n    getContributorsStats: [\"GET /repos/{owner}/{repo}/stats/contributors\"],\n    getDeployKey: [\"GET /repos/{owner}/{repo}/keys/{key_id}\"],\n    getDeployment: [\"GET /repos/{owner}/{repo}/deployments/{deployment_id}\"],\n    getDeploymentStatus: [\"GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}\"],\n    getEnvironment: [\"GET /repos/{owner}/{repo}/environments/{environment_name}\"],\n    getLatestPagesBuild: [\"GET /repos/{owner}/{repo}/pages/builds/latest\"],\n    getLatestRelease: [\"GET /repos/{owner}/{repo}/releases/latest\"],\n    getPages: [\"GET /repos/{owner}/{repo}/pages\"],\n    getPagesBuild: [\"GET /repos/{owner}/{repo}/pages/builds/{build_id}\"],\n    getParticipationStats: [\"GET /repos/{owner}/{repo}/stats/participation\"],\n    getPullRequestReviewProtection: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews\"],\n    getPunchCardStats: [\"GET /repos/{owner}/{repo}/stats/punch_card\"],\n    getReadme: [\"GET /repos/{owner}/{repo}/readme\"],\n    getReadmeInDirectory: [\"GET /repos/{owner}/{repo}/readme/{dir}\"],\n    getRelease: [\"GET /repos/{owner}/{repo}/releases/{release_id}\"],\n    getReleaseAsset: [\"GET /repos/{owner}/{repo}/releases/assets/{asset_id}\"],\n    getReleaseByTag: [\"GET /repos/{owner}/{repo}/releases/tags/{tag}\"],\n    getStatusChecksProtection: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks\"],\n    getTeamsWithAccessToProtectedBranch: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams\"],\n    getTopPaths: [\"GET /repos/{owner}/{repo}/traffic/popular/paths\"],\n    getTopReferrers: [\"GET /repos/{owner}/{repo}/traffic/popular/referrers\"],\n    getUsersWithAccessToProtectedBranch: [\"GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users\"],\n    getViews: [\"GET /repos/{owner}/{repo}/traffic/views\"],\n    getWebhook: [\"GET /repos/{owner}/{repo}/hooks/{hook_id}\"],\n    getWebhookConfigForRepo: [\"GET /repos/{owner}/{repo}/hooks/{hook_id}/config\"],\n    listBranches: [\"GET /repos/{owner}/{repo}/branches\"],\n    listBranchesForHeadCommit: [\"GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head\", {\n      mediaType: {\n        previews: [\"groot\"]\n      }\n    }],\n    listCollaborators: [\"GET /repos/{owner}/{repo}/collaborators\"],\n    listCommentsForCommit: [\"GET /repos/{owner}/{repo}/commits/{commit_sha}/comments\"],\n    listCommitCommentsForRepo: [\"GET /repos/{owner}/{repo}/comments\"],\n    listCommitStatusesForRef: [\"GET /repos/{owner}/{repo}/commits/{ref}/statuses\"],\n    listCommits: [\"GET /repos/{owner}/{repo}/commits\"],\n    listContributors: [\"GET /repos/{owner}/{repo}/contributors\"],\n    listDeployKeys: [\"GET /repos/{owner}/{repo}/keys\"],\n    listDeploymentStatuses: [\"GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses\"],\n    listDeployments: [\"GET /repos/{owner}/{repo}/deployments\"],\n    listForAuthenticatedUser: [\"GET /user/repos\"],\n    listForOrg: [\"GET /orgs/{org}/repos\"],\n    listForUser: [\"GET /users/{username}/repos\"],\n    listForks: [\"GET /repos/{owner}/{repo}/forks\"],\n    listInvitations: [\"GET /repos/{owner}/{repo}/invitations\"],\n    listInvitationsForAuthenticatedUser: [\"GET /user/repository_invitations\"],\n    listLanguages: [\"GET /repos/{owner}/{repo}/languages\"],\n    listPagesBuilds: [\"GET /repos/{owner}/{repo}/pages/builds\"],\n    listPublic: [\"GET /repositories\"],\n    listPullRequestsAssociatedWithCommit: [\"GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls\", {\n      mediaType: {\n        previews: [\"groot\"]\n      }\n    }],\n    listReleaseAssets: [\"GET /repos/{owner}/{repo}/releases/{release_id}/assets\"],\n    listReleases: [\"GET /repos/{owner}/{repo}/releases\"],\n    listTags: [\"GET /repos/{owner}/{repo}/tags\"],\n    listTeams: [\"GET /repos/{owner}/{repo}/teams\"],\n    listWebhooks: [\"GET /repos/{owner}/{repo}/hooks\"],\n    merge: [\"POST /repos/{owner}/{repo}/merges\"],\n    pingWebhook: [\"POST /repos/{owner}/{repo}/hooks/{hook_id}/pings\"],\n    removeAppAccessRestrictions: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps\", {}, {\n      mapToData: \"apps\"\n    }],\n    removeCollaborator: [\"DELETE /repos/{owner}/{repo}/collaborators/{username}\"],\n    removeStatusCheckContexts: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts\", {}, {\n      mapToData: \"contexts\"\n    }],\n    removeStatusCheckProtection: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks\"],\n    removeTeamAccessRestrictions: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams\", {}, {\n      mapToData: \"teams\"\n    }],\n    removeUserAccessRestrictions: [\"DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users\", {}, {\n      mapToData: \"users\"\n    }],\n    renameBranch: [\"POST /repos/{owner}/{repo}/branches/{branch}/rename\"],\n    replaceAllTopics: [\"PUT /repos/{owner}/{repo}/topics\", {\n      mediaType: {\n        previews: [\"mercy\"]\n      }\n    }],\n    requestPagesBuild: [\"POST /repos/{owner}/{repo}/pages/builds\"],\n    setAdminBranchProtection: [\"POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins\"],\n    setAppAccessRestrictions: [\"PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps\", {}, {\n      mapToData: \"apps\"\n    }],\n    setStatusCheckContexts: [\"PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts\", {}, {\n      mapToData: \"contexts\"\n    }],\n    setTeamAccessRestrictions: [\"PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams\", {}, {\n      mapToData: \"teams\"\n    }],\n    setUserAccessRestrictions: [\"PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users\", {}, {\n      mapToData: \"users\"\n    }],\n    testPushWebhook: [\"POST /repos/{owner}/{repo}/hooks/{hook_id}/tests\"],\n    transfer: [\"POST /repos/{owner}/{repo}/transfer\"],\n    update: [\"PATCH /repos/{owner}/{repo}\"],\n    updateBranchProtection: [\"PUT /repos/{owner}/{repo}/branches/{branch}/protection\"],\n    updateCommitComment: [\"PATCH /repos/{owner}/{repo}/comments/{comment_id}\"],\n    updateInformationAboutPagesSite: [\"PUT /repos/{owner}/{repo}/pages\"],\n    updateInvitation: [\"PATCH /repos/{owner}/{repo}/invitations/{invitation_id}\"],\n    updatePullRequestReviewProtection: [\"PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews\"],\n    updateRelease: [\"PATCH /repos/{owner}/{repo}/releases/{release_id}\"],\n    updateReleaseAsset: [\"PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}\"],\n    updateStatusCheckPotection: [\"PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks\", {}, {\n      renamed: [\"repos\", \"updateStatusCheckProtection\"]\n    }],\n    updateStatusCheckProtection: [\"PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks\"],\n    updateWebhook: [\"PATCH /repos/{owner}/{repo}/hooks/{hook_id}\"],\n    updateWebhookConfigForRepo: [\"PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config\"],\n    uploadReleaseAsset: [\"POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}\", {\n      baseUrl: \"https://uploads.github.com\"\n    }]\n  },\n  search: {\n    code: [\"GET /search/code\"],\n    commits: [\"GET /search/commits\", {\n      mediaType: {\n        previews: [\"cloak\"]\n      }\n    }],\n    issuesAndPullRequests: [\"GET /search/issues\"],\n    labels: [\"GET /search/labels\"],\n    repos: [\"GET /search/repositories\"],\n    topics: [\"GET /search/topics\", {\n      mediaType: {\n        previews: [\"mercy\"]\n      }\n    }],\n    users: [\"GET /search/users\"]\n  },\n  secretScanning: {\n    getAlert: [\"GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}\"],\n    listAlertsForRepo: [\"GET /repos/{owner}/{repo}/secret-scanning/alerts\"],\n    updateAlert: [\"PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}\"]\n  },\n  teams: {\n    addOrUpdateMembershipForUserInOrg: [\"PUT /orgs/{org}/teams/{team_slug}/memberships/{username}\"],\n    addOrUpdateProjectPermissionsInOrg: [\"PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    addOrUpdateRepoPermissionsInOrg: [\"PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}\"],\n    checkPermissionsForProjectInOrg: [\"GET /orgs/{org}/teams/{team_slug}/projects/{project_id}\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    checkPermissionsForRepoInOrg: [\"GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}\"],\n    create: [\"POST /orgs/{org}/teams\"],\n    createDiscussionCommentInOrg: [\"POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments\"],\n    createDiscussionInOrg: [\"POST /orgs/{org}/teams/{team_slug}/discussions\"],\n    deleteDiscussionCommentInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}\"],\n    deleteDiscussionInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}\"],\n    deleteInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}\"],\n    getByName: [\"GET /orgs/{org}/teams/{team_slug}\"],\n    getDiscussionCommentInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}\"],\n    getDiscussionInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}\"],\n    getMembershipForUserInOrg: [\"GET /orgs/{org}/teams/{team_slug}/memberships/{username}\"],\n    list: [\"GET /orgs/{org}/teams\"],\n    listChildInOrg: [\"GET /orgs/{org}/teams/{team_slug}/teams\"],\n    listDiscussionCommentsInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments\"],\n    listDiscussionsInOrg: [\"GET /orgs/{org}/teams/{team_slug}/discussions\"],\n    listForAuthenticatedUser: [\"GET /user/teams\"],\n    listMembersInOrg: [\"GET /orgs/{org}/teams/{team_slug}/members\"],\n    listPendingInvitationsInOrg: [\"GET /orgs/{org}/teams/{team_slug}/invitations\"],\n    listProjectsInOrg: [\"GET /orgs/{org}/teams/{team_slug}/projects\", {\n      mediaType: {\n        previews: [\"inertia\"]\n      }\n    }],\n    listReposInOrg: [\"GET /orgs/{org}/teams/{team_slug}/repos\"],\n    removeMembershipForUserInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}\"],\n    removeProjectInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}\"],\n    removeRepoInOrg: [\"DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}\"],\n    updateDiscussionCommentInOrg: [\"PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}\"],\n    updateDiscussionInOrg: [\"PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}\"],\n    updateInOrg: [\"PATCH /orgs/{org}/teams/{team_slug}\"]\n  },\n  users: {\n    addEmailForAuthenticated: [\"POST /user/emails\"],\n    block: [\"PUT /user/blocks/{username}\"],\n    checkBlocked: [\"GET /user/blocks/{username}\"],\n    checkFollowingForUser: [\"GET /users/{username}/following/{target_user}\"],\n    checkPersonIsFollowedByAuthenticated: [\"GET /user/following/{username}\"],\n    createGpgKeyForAuthenticated: [\"POST /user/gpg_keys\"],\n    createPublicSshKeyForAuthenticated: [\"POST /user/keys\"],\n    deleteEmailForAuthenticated: [\"DELETE /user/emails\"],\n    deleteGpgKeyForAuthenticated: [\"DELETE /user/gpg_keys/{gpg_key_id}\"],\n    deletePublicSshKeyForAuthenticated: [\"DELETE /user/keys/{key_id}\"],\n    follow: [\"PUT /user/following/{username}\"],\n    getAuthenticated: [\"GET /user\"],\n    getByUsername: [\"GET /users/{username}\"],\n    getContextForUser: [\"GET /users/{username}/hovercard\"],\n    getGpgKeyForAuthenticated: [\"GET /user/gpg_keys/{gpg_key_id}\"],\n    getPublicSshKeyForAuthenticated: [\"GET /user/keys/{key_id}\"],\n    list: [\"GET /users\"],\n    listBlockedByAuthenticated: [\"GET /user/blocks\"],\n    listEmailsForAuthenticated: [\"GET /user/emails\"],\n    listFollowedByAuthenticated: [\"GET /user/following\"],\n    listFollowersForAuthenticatedUser: [\"GET /user/followers\"],\n    listFollowersForUser: [\"GET /users/{username}/followers\"],\n    listFollowingForUser: [\"GET /users/{username}/following\"],\n    listGpgKeysForAuthenticated: [\"GET /user/gpg_keys\"],\n    listGpgKeysForUser: [\"GET /users/{username}/gpg_keys\"],\n    listPublicEmailsForAuthenticated: [\"GET /user/public_emails\"],\n    listPublicKeysForUser: [\"GET /users/{username}/keys\"],\n    listPublicSshKeysForAuthenticated: [\"GET /user/keys\"],\n    setPrimaryEmailVisibilityForAuthenticated: [\"PATCH /user/email/visibility\"],\n    unblock: [\"DELETE /user/blocks/{username}\"],\n    unfollow: [\"DELETE /user/following/{username}\"],\n    updateAuthenticated: [\"PATCH /user\"]\n  }\n};\n\nconst VERSION = \"4.15.0\";\n\nfunction endpointsToMethods(octokit, endpointsMap) {\n  const newMethods = {};\n\n  for (const [scope, endpoints] of Object.entries(endpointsMap)) {\n    for (const [methodName, endpoint] of Object.entries(endpoints)) {\n      const [route, defaults, decorations] = endpoint;\n      const [method, url] = route.split(/ /);\n      const endpointDefaults = Object.assign({\n        method,\n        url\n      }, defaults);\n\n      if (!newMethods[scope]) {\n        newMethods[scope] = {};\n      }\n\n      const scopeMethods = newMethods[scope];\n\n      if (decorations) {\n        scopeMethods[methodName] = decorate(octokit, scope, methodName, endpointDefaults, decorations);\n        continue;\n      }\n\n      scopeMethods[methodName] = octokit.request.defaults(endpointDefaults);\n    }\n  }\n\n  return newMethods;\n}\n\nfunction decorate(octokit, scope, methodName, defaults, decorations) {\n  const requestWithDefaults = octokit.request.defaults(defaults);\n  /* istanbul ignore next */\n\n  function withDecorations(...args) {\n    // @ts-ignore https://github.com/microsoft/TypeScript/issues/25488\n    let options = requestWithDefaults.endpoint.merge(...args); // There are currently no other decorations than `.mapToData`\n\n    if (decorations.mapToData) {\n      options = Object.assign({}, options, {\n        data: options[decorations.mapToData],\n        [decorations.mapToData]: undefined\n      });\n      return requestWithDefaults(options);\n    }\n\n    if (decorations.renamed) {\n      const [newScope, newMethodName] = decorations.renamed;\n      octokit.log.warn(`octokit.${scope}.${methodName}() has been renamed to octokit.${newScope}.${newMethodName}()`);\n    }\n\n    if (decorations.deprecated) {\n      octokit.log.warn(decorations.deprecated);\n    }\n\n    if (decorations.renamedParameters) {\n      // @ts-ignore https://github.com/microsoft/TypeScript/issues/25488\n      const options = requestWithDefaults.endpoint.merge(...args);\n\n      for (const [name, alias] of Object.entries(decorations.renamedParameters)) {\n        if (name in options) {\n          octokit.log.warn(`\"${name}\" parameter is deprecated for \"octokit.${scope}.${methodName}()\". Use \"${alias}\" instead`);\n\n          if (!(alias in options)) {\n            options[alias] = options[name];\n          }\n\n          delete options[name];\n        }\n      }\n\n      return requestWithDefaults(options);\n    } // @ts-ignore https://github.com/microsoft/TypeScript/issues/25488\n\n\n    return requestWithDefaults(...args);\n  }\n\n  return Object.assign(withDecorations, requestWithDefaults);\n}\n\nfunction restEndpointMethods(octokit) {\n  const api = endpointsToMethods(octokit, Endpoints);\n  return _objectSpread2(_objectSpread2({}, api), {}, {\n    rest: api\n  });\n}\nrestEndpointMethods.VERSION = VERSION;\n\nexports.restEndpointMethods = restEndpointMethods;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar deprecation = require('deprecation');\nvar once = _interopDefault(require('once'));\n\nconst logOnce = once(deprecation => console.warn(deprecation));\n/**\n * Error with extra properties to help with debugging\n */\n\nclass RequestError extends Error {\n  constructor(message, statusCode, options) {\n    super(message); // Maintains proper stack trace (only available on V8)\n\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    this.name = \"HttpError\";\n    this.status = statusCode;\n    Object.defineProperty(this, \"code\", {\n      get() {\n        logOnce(new deprecation.Deprecation(\"[@octokit/request-error] `error.code` is deprecated, use `error.status`.\"));\n        return statusCode;\n      }\n\n    });\n    this.headers = options.headers || {}; // redact request credentials without mutating original request options\n\n    const requestCopy = Object.assign({}, options.request);\n\n    if (options.request.headers.authorization) {\n      requestCopy.headers = Object.assign({}, options.request.headers, {\n        authorization: options.request.headers.authorization.replace(/ .*$/, \" [REDACTED]\")\n      });\n    }\n\n    requestCopy.url = requestCopy.url // client_id & client_secret can be passed as URL query parameters to increase rate limit\n    // see https://developer.github.com/v3/#increasing-the-unauthenticated-rate-limit-for-oauth-applications\n    .replace(/\\bclient_secret=\\w+/g, \"client_secret=[REDACTED]\") // OAuth tokens can be passed as URL query parameters, although it is not recommended\n    // see https://developer.github.com/v3/#oauth2-token-sent-in-a-header\n    .replace(/\\baccess_token=\\w+/g, \"access_token=[REDACTED]\");\n    this.request = requestCopy;\n  }\n\n}\n\nexports.RequestError = RequestError;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar endpoint = require('@octokit/endpoint');\nvar universalUserAgent = require('universal-user-agent');\nvar isPlainObject = require('is-plain-object');\nvar nodeFetch = _interopDefault(require('node-fetch'));\nvar requestError = require('@octokit/request-error');\n\nconst VERSION = \"5.4.15\";\n\nfunction getBufferResponse(response) {\n  return response.arrayBuffer();\n}\n\nfunction fetchWrapper(requestOptions) {\n  if (isPlainObject.isPlainObject(requestOptions.body) || Array.isArray(requestOptions.body)) {\n    requestOptions.body = JSON.stringify(requestOptions.body);\n  }\n\n  let headers = {};\n  let status;\n  let url;\n  const fetch = requestOptions.request && requestOptions.request.fetch || nodeFetch;\n  return fetch(requestOptions.url, Object.assign({\n    method: requestOptions.method,\n    body: requestOptions.body,\n    headers: requestOptions.headers,\n    redirect: requestOptions.redirect\n  }, // `requestOptions.request.agent` type is incompatible\n  // see https://github.com/octokit/types.ts/pull/264\n  requestOptions.request)).then(response => {\n    url = response.url;\n    status = response.status;\n\n    for (const keyAndValue of response.headers) {\n      headers[keyAndValue[0]] = keyAndValue[1];\n    }\n\n    if (status === 204 || status === 205) {\n      return;\n    } // GitHub API returns 200 for HEAD requests\n\n\n    if (requestOptions.method === \"HEAD\") {\n      if (status < 400) {\n        return;\n      }\n\n      throw new requestError.RequestError(response.statusText, status, {\n        headers,\n        request: requestOptions\n      });\n    }\n\n    if (status === 304) {\n      throw new requestError.RequestError(\"Not modified\", status, {\n        headers,\n        request: requestOptions\n      });\n    }\n\n    if (status >= 400) {\n      return response.text().then(message => {\n        const error = new requestError.RequestError(message, status, {\n          headers,\n          request: requestOptions\n        });\n\n        try {\n          let responseBody = JSON.parse(error.message);\n          Object.assign(error, responseBody);\n          let errors = responseBody.errors; // Assumption `errors` would always be in Array format\n\n          error.message = error.message + \": \" + errors.map(JSON.stringify).join(\", \");\n        } catch (e) {// ignore, see octokit/rest.js#684\n        }\n\n        throw error;\n      });\n    }\n\n    const contentType = response.headers.get(\"content-type\");\n\n    if (/application\\/json/.test(contentType)) {\n      return response.json();\n    }\n\n    if (!contentType || /^text\\/|charset=utf-8$/.test(contentType)) {\n      return response.text();\n    }\n\n    return getBufferResponse(response);\n  }).then(data => {\n    return {\n      status,\n      url,\n      headers,\n      data\n    };\n  }).catch(error => {\n    if (error instanceof requestError.RequestError) {\n      throw error;\n    }\n\n    throw new requestError.RequestError(error.message, 500, {\n      headers,\n      request: requestOptions\n    });\n  });\n}\n\nfunction withDefaults(oldEndpoint, newDefaults) {\n  const endpoint = oldEndpoint.defaults(newDefaults);\n\n  const newApi = function (route, parameters) {\n    const endpointOptions = endpoint.merge(route, parameters);\n\n    if (!endpointOptions.request || !endpointOptions.request.hook) {\n      return fetchWrapper(endpoint.parse(endpointOptions));\n    }\n\n    const request = (route, parameters) => {\n      return fetchWrapper(endpoint.parse(endpoint.merge(route, parameters)));\n    };\n\n    Object.assign(request, {\n      endpoint,\n      defaults: withDefaults.bind(null, endpoint)\n    });\n    return endpointOptions.request.hook(request, endpointOptions);\n  };\n\n  return Object.assign(newApi, {\n    endpoint,\n    defaults: withDefaults.bind(null, endpoint)\n  });\n}\n\nconst request = withDefaults(endpoint.endpoint, {\n  headers: {\n    \"user-agent\": `octokit-request.js/${VERSION} ${universalUserAgent.getUserAgent()}`\n  }\n});\n\nexports.request = request;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexports.isPlainObject = isPlainObject;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IncomingWebhook = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst errors_1 = require(\"./errors\");\nconst instrument_1 = require(\"./instrument\");\n/**\n * A client for Slack's Incoming Webhooks\n */\nclass IncomingWebhook {\n    constructor(url, defaults = {}) {\n        if (url === undefined) {\n            throw new Error('Incoming webhook URL is required');\n        }\n        this.url = url;\n        this.defaults = defaults;\n        this.axios = axios_1.default.create({\n            baseURL: url,\n            httpAgent: defaults.agent,\n            httpsAgent: defaults.agent,\n            maxRedirects: 0,\n            proxy: false,\n            headers: {\n                'User-Agent': instrument_1.getUserAgent(),\n            },\n        });\n        delete this.defaults.agent;\n    }\n    /**\n     * Send a notification to a conversation\n     * @param message - the message (a simple string, or an object describing the message)\n     */\n    async send(message) {\n        // NOTE: no support for TLS config\n        let payload = Object.assign({}, this.defaults);\n        if (typeof message === 'string') {\n            payload.text = message;\n        }\n        else {\n            payload = Object.assign(payload, message);\n        }\n        try {\n            const response = await this.axios.post(this.url, payload);\n            return this.buildResult(response);\n        }\n        catch (error) {\n            // Wrap errors in this packages own error types (abstract the implementation details' types)\n            if (error.response !== undefined) {\n                throw errors_1.httpErrorWithOriginal(error);\n            }\n            else if (error.request !== undefined) {\n                throw errors_1.requestErrorWithOriginal(error);\n            }\n            else {\n                throw error;\n            }\n        }\n    }\n    /**\n     * Processes an HTTP response into an IncomingWebhookResult.\n     */\n    buildResult(response) {\n        return {\n            text: response.data,\n        };\n    }\n}\nexports.IncomingWebhook = IncomingWebhook;\n//# sourceMappingURL=IncomingWebhook.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.httpErrorWithOriginal = exports.requestErrorWithOriginal = exports.ErrorCode = void 0;\n/**\n * A dictionary of codes for errors produced by this package\n */\nvar ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[\"RequestError\"] = \"slack_webhook_request_error\";\n    ErrorCode[\"HTTPError\"] = \"slack_webhook_http_error\";\n})(ErrorCode = exports.ErrorCode || (exports.ErrorCode = {}));\n/**\n * Factory for producing a {@link CodedError} from a generic error\n */\nfunction errorWithCode(error, code) {\n    // NOTE: might be able to return something more specific than a CodedError with conditional typing\n    const codedError = error;\n    codedError.code = code;\n    return codedError;\n}\n/**\n * A factory to create IncomingWebhookRequestError objects\n * @param original The original error\n */\nfunction requestErrorWithOriginal(original) {\n    const error = errorWithCode(new Error(`A request error occurred: ${original.message}`), ErrorCode.RequestError);\n    error.original = original;\n    return error;\n}\nexports.requestErrorWithOriginal = requestErrorWithOriginal;\n/**\n * A factory to create IncomingWebhookHTTPError objects\n * @param original The original error\n */\nfunction httpErrorWithOriginal(original) {\n    const error = errorWithCode(new Error(`An HTTP protocol error occurred: statusCode = ${original.response.status}`), ErrorCode.HTTPError);\n    error.original = original;\n    return error;\n}\nexports.httpErrorWithOriginal = httpErrorWithOriginal;\n//# sourceMappingURL=errors.js.map","\"use strict\";\n/// <reference lib=\"es2017\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorCode = exports.IncomingWebhook = void 0;\nvar IncomingWebhook_1 = require(\"./IncomingWebhook\");\nObject.defineProperty(exports, \"IncomingWebhook\", { enumerable: true, get: function () { return IncomingWebhook_1.IncomingWebhook; } });\nvar errors_1 = require(\"./errors\");\nObject.defineProperty(exports, \"ErrorCode\", { enumerable: true, get: function () { return errors_1.ErrorCode; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getUserAgent = exports.addAppMetadata = void 0;\nconst os = __importStar(require(\"os\"));\nconst packageJson = require('../package.json'); // tslint:disable-line:no-require-imports no-var-requires\n/**\n * Replaces occurrences of '/' with ':' in a string, since '/' is meaningful inside User-Agent strings as a separator.\n */\nfunction replaceSlashes(s) {\n    return s.replace('/', ':');\n}\nconst baseUserAgent = `${replaceSlashes(packageJson.name)}/${packageJson.version} ` +\n    `node/${process.version.replace('v', '')} ` +\n    `${os.platform()}/${os.release()}`;\nconst appMetadata = {};\n/**\n * Appends the app metadata into the User-Agent value\n * @param appMetadata.name name of tool to be counted in instrumentation\n * @param appMetadata.version version of tool to be counted in instrumentation\n */\nfunction addAppMetadata({ name, version }) {\n    appMetadata[replaceSlashes(name)] = version;\n}\nexports.addAppMetadata = addAppMetadata;\n/**\n * Returns the current User-Agent value for instrumentation\n */\nfunction getUserAgent() {\n    const appIdentifier = Object.entries(appMetadata).map(([name, version]) => `${name}/${version}`).join(' ');\n    // only prepend the appIdentifier when its not empty\n    return ((appIdentifier.length > 0) ? `${appIdentifier} ` : '') + baseUserAgent;\n}\nexports.getUserAgent = getUserAgent;\n//# sourceMappingURL=instrument.js.map","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildFullPath = require('../core/buildFullPath');\nvar buildURL = require('./../helpers/buildURL');\nvar http = require('http');\nvar https = require('https');\nvar httpFollow = require('follow-redirects').http;\nvar httpsFollow = require('follow-redirects').https;\nvar url = require('url');\nvar zlib = require('zlib');\nvar pkg = require('./../../package.json');\nvar createError = require('../core/createError');\nvar enhanceError = require('../core/enhanceError');\n\nvar isHttps = /https:?/;\n\n/**\n *\n * @param {http.ClientRequestArgs} options\n * @param {AxiosProxyConfig} proxy\n * @param {string} location\n */\nfunction setProxy(options, proxy, location) {\n  options.hostname = proxy.host;\n  options.host = proxy.host;\n  options.port = proxy.port;\n  options.path = location;\n\n  // Basic proxy authorization\n  if (proxy.auth) {\n    var base64 = Buffer.from(proxy.auth.username + ':' + proxy.auth.password, 'utf8').toString('base64');\n    options.headers['Proxy-Authorization'] = 'Basic ' + base64;\n  }\n\n  // If a proxy is used, any redirects must also pass through the proxy\n  options.beforeRedirect = function beforeRedirect(redirection) {\n    redirection.headers.host = redirection.host;\n    setProxy(redirection, proxy, redirection.href);\n  };\n}\n\n/*eslint consistent-return:0*/\nmodule.exports = function httpAdapter(config) {\n  return new Promise(function dispatchHttpRequest(resolvePromise, rejectPromise) {\n    var resolve = function resolve(value) {\n      resolvePromise(value);\n    };\n    var reject = function reject(value) {\n      rejectPromise(value);\n    };\n    var data = config.data;\n    var headers = config.headers;\n\n    // Set User-Agent (required by some servers)\n    // Only set header if it hasn't been set in config\n    // See https://github.com/axios/axios/issues/69\n    if (!headers['User-Agent'] && !headers['user-agent']) {\n      headers['User-Agent'] = 'axios/' + pkg.version;\n    }\n\n    if (data && !utils.isStream(data)) {\n      if (Buffer.isBuffer(data)) {\n        // Nothing to do...\n      } else if (utils.isArrayBuffer(data)) {\n        data = Buffer.from(new Uint8Array(data));\n      } else if (utils.isString(data)) {\n        data = Buffer.from(data, 'utf-8');\n      } else {\n        return reject(createError(\n          'Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream',\n          config\n        ));\n      }\n\n      // Add Content-Length header if data exists\n      headers['Content-Length'] = data.length;\n    }\n\n    // HTTP basic authentication\n    var auth = undefined;\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      auth = username + ':' + password;\n    }\n\n    // Parse url\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    var parsed = url.parse(fullPath);\n    var protocol = parsed.protocol || 'http:';\n\n    if (!auth && parsed.auth) {\n      var urlAuth = parsed.auth.split(':');\n      var urlUsername = urlAuth[0] || '';\n      var urlPassword = urlAuth[1] || '';\n      auth = urlUsername + ':' + urlPassword;\n    }\n\n    if (auth) {\n      delete headers.Authorization;\n    }\n\n    var isHttpsRequest = isHttps.test(protocol);\n    var agent = isHttpsRequest ? config.httpsAgent : config.httpAgent;\n\n    var options = {\n      path: buildURL(parsed.path, config.params, config.paramsSerializer).replace(/^\\?/, ''),\n      method: config.method.toUpperCase(),\n      headers: headers,\n      agent: agent,\n      agents: { http: config.httpAgent, https: config.httpsAgent },\n      auth: auth\n    };\n\n    if (config.socketPath) {\n      options.socketPath = config.socketPath;\n    } else {\n      options.hostname = parsed.hostname;\n      options.port = parsed.port;\n    }\n\n    var proxy = config.proxy;\n    if (!proxy && proxy !== false) {\n      var proxyEnv = protocol.slice(0, -1) + '_proxy';\n      var proxyUrl = process.env[proxyEnv] || process.env[proxyEnv.toUpperCase()];\n      if (proxyUrl) {\n        var parsedProxyUrl = url.parse(proxyUrl);\n        var noProxyEnv = process.env.no_proxy || process.env.NO_PROXY;\n        var shouldProxy = true;\n\n        if (noProxyEnv) {\n          var noProxy = noProxyEnv.split(',').map(function trim(s) {\n            return s.trim();\n          });\n\n          shouldProxy = !noProxy.some(function proxyMatch(proxyElement) {\n            if (!proxyElement) {\n              return false;\n            }\n            if (proxyElement === '*') {\n              return true;\n            }\n            if (proxyElement[0] === '.' &&\n                parsed.hostname.substr(parsed.hostname.length - proxyElement.length) === proxyElement) {\n              return true;\n            }\n\n            return parsed.hostname === proxyElement;\n          });\n        }\n\n        if (shouldProxy) {\n          proxy = {\n            host: parsedProxyUrl.hostname,\n            port: parsedProxyUrl.port,\n            protocol: parsedProxyUrl.protocol\n          };\n\n          if (parsedProxyUrl.auth) {\n            var proxyUrlAuth = parsedProxyUrl.auth.split(':');\n            proxy.auth = {\n              username: proxyUrlAuth[0],\n              password: proxyUrlAuth[1]\n            };\n          }\n        }\n      }\n    }\n\n    if (proxy) {\n      options.headers.host = parsed.hostname + (parsed.port ? ':' + parsed.port : '');\n      setProxy(options, proxy, protocol + '//' + parsed.hostname + (parsed.port ? ':' + parsed.port : '') + options.path);\n    }\n\n    var transport;\n    var isHttpsProxy = isHttpsRequest && (proxy ? isHttps.test(proxy.protocol) : true);\n    if (config.transport) {\n      transport = config.transport;\n    } else if (config.maxRedirects === 0) {\n      transport = isHttpsProxy ? https : http;\n    } else {\n      if (config.maxRedirects) {\n        options.maxRedirects = config.maxRedirects;\n      }\n      transport = isHttpsProxy ? httpsFollow : httpFollow;\n    }\n\n    if (config.maxBodyLength > -1) {\n      options.maxBodyLength = config.maxBodyLength;\n    }\n\n    // Create the request\n    var req = transport.request(options, function handleResponse(res) {\n      if (req.aborted) return;\n\n      // uncompress the response body transparently if required\n      var stream = res;\n\n      // return the last request in case of redirects\n      var lastRequest = res.req || req;\n\n\n      // if no content, is HEAD request or decompress disabled we should not decompress\n      if (res.statusCode !== 204 && lastRequest.method !== 'HEAD' && config.decompress !== false) {\n        switch (res.headers['content-encoding']) {\n        /*eslint default-case:0*/\n        case 'gzip':\n        case 'compress':\n        case 'deflate':\n        // add the unzipper to the body stream processing pipeline\n          stream = stream.pipe(zlib.createUnzip());\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        }\n      }\n\n      var response = {\n        status: res.statusCode,\n        statusText: res.statusMessage,\n        headers: res.headers,\n        config: config,\n        request: lastRequest\n      };\n\n      if (config.responseType === 'stream') {\n        response.data = stream;\n        settle(resolve, reject, response);\n      } else {\n        var responseBuffer = [];\n        stream.on('data', function handleStreamData(chunk) {\n          responseBuffer.push(chunk);\n\n          // make sure the content length is not over the maxContentLength if specified\n          if (config.maxContentLength > -1 && Buffer.concat(responseBuffer).length > config.maxContentLength) {\n            stream.destroy();\n            reject(createError('maxContentLength size of ' + config.maxContentLength + ' exceeded',\n              config, null, lastRequest));\n          }\n        });\n\n        stream.on('error', function handleStreamError(err) {\n          if (req.aborted) return;\n          reject(enhanceError(err, config, null, lastRequest));\n        });\n\n        stream.on('end', function handleStreamEnd() {\n          var responseData = Buffer.concat(responseBuffer);\n          if (config.responseType !== 'arraybuffer') {\n            responseData = responseData.toString(config.responseEncoding);\n            if (!config.responseEncoding || config.responseEncoding === 'utf8') {\n              responseData = utils.stripBOM(responseData);\n            }\n          }\n\n          response.data = responseData;\n          settle(resolve, reject, response);\n        });\n      }\n    });\n\n    // Handle errors\n    req.on('error', function handleRequestError(err) {\n      if (req.aborted && err.code !== 'ERR_FR_TOO_MANY_REDIRECTS') return;\n      reject(enhanceError(err, config, null, req));\n    });\n\n    // Handle request timeout\n    if (config.timeout) {\n      // Sometime, the response will be very slow, and does not respond, the connect event will be block by event loop system.\n      // And timer callback will be fired, and abort() will be invoked before connection, then get \"socket hang up\" and code ECONNRESET.\n      // At this time, if we have a large number of request, nodejs will hang up some socket on background. and the number will up and up.\n      // And then these socket which be hang up will devoring CPU little by little.\n      // ClientRequest.setTimeout will be fired on the specify milliseconds, and can make sure that abort() will be fired after connect.\n      req.setTimeout(config.timeout, function handleRequestTimeout() {\n        req.abort();\n        reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED', req));\n      });\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (req.aborted) return;\n\n        req.abort();\n        reject(cancel);\n      });\n    }\n\n    // Send the request\n    if (utils.isStream(data)) {\n      data.on('error', function handleStreamError(err) {\n        reject(enhanceError(err, config, null, req));\n      }).pipe(req);\n    } else {\n      req.end(data);\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","var register = require('./lib/register')\nvar addHook = require('./lib/add')\nvar removeHook = require('./lib/remove')\n\n// bind with array of arguments: https://stackoverflow.com/a/21792913\nvar bind = Function.bind\nvar bindable = bind.bind(bind)\n\nfunction bindApi (hook, state, name) {\n  var removeHookRef = bindable(removeHook, null).apply(null, name ? [state, name] : [state])\n  hook.api = { remove: removeHookRef }\n  hook.remove = removeHookRef\n\n  ;['before', 'error', 'after', 'wrap'].forEach(function (kind) {\n    var args = name ? [state, kind, name] : [state, kind]\n    hook[kind] = hook.api[kind] = bindable(addHook, null).apply(null, args)\n  })\n}\n\nfunction HookSingular () {\n  var singularHookName = 'h'\n  var singularHookState = {\n    registry: {}\n  }\n  var singularHook = register.bind(null, singularHookState, singularHookName)\n  bindApi(singularHook, singularHookState, singularHookName)\n  return singularHook\n}\n\nfunction HookCollection () {\n  var state = {\n    registry: {}\n  }\n\n  var hook = register.bind(null, state)\n  bindApi(hook, state)\n\n  return hook\n}\n\nvar collectionHookDeprecationMessageDisplayed = false\nfunction Hook () {\n  if (!collectionHookDeprecationMessageDisplayed) {\n    console.warn('[before-after-hook]: \"Hook()\" repurposing warning, use \"Hook.Collection()\". Read more: https://git.io/upgrade-before-after-hook-to-1.4')\n    collectionHookDeprecationMessageDisplayed = true\n  }\n  return HookCollection()\n}\n\nHook.Singular = HookSingular.bind()\nHook.Collection = HookCollection.bind()\n\nmodule.exports = Hook\n// expose constructors as a named property for TypeScript\nmodule.exports.Hook = Hook\nmodule.exports.Singular = Hook.Singular\nmodule.exports.Collection = Hook.Collection\n","module.exports = addHook;\n\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(orig.bind(null, options))\n        .then(method.bind(null, options));\n    };\n  }\n\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .then(function (result_) {\n          result = result_;\n          return orig(result, options);\n        })\n        .then(function () {\n          return result;\n        });\n    };\n  }\n\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .catch(function (error) {\n          return orig(error, options);\n        });\n    };\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig,\n  });\n}\n","module.exports = register;\n\nfunction register(state, name, method, options) {\n  if (typeof method !== \"function\") {\n    throw new Error(\"method for before hook must be a function\");\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  if (Array.isArray(name)) {\n    return name.reverse().reduce(function (callback, name) {\n      return register.bind(null, state, name, callback, options);\n    }, method)();\n  }\n\n  return Promise.resolve().then(function () {\n    if (!state.registry[name]) {\n      return method(options);\n    }\n\n    return state.registry[name].reduce(function (method, registered) {\n      return registered.hook.bind(null, method, options);\n    }, method)();\n  });\n}\n","module.exports = removeHook;\n\nfunction removeHook(state, name, method) {\n  if (!state.registry[name]) {\n    return;\n  }\n\n  var index = state.registry[name]\n    .map(function (registered) {\n      return registered.orig;\n    })\n    .indexOf(method);\n\n  if (index === -1) {\n    return;\n  }\n\n  state.registry[name].splice(index, 1);\n}\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => enableOverride === null ? createDebug.enabled(namespace) : enableOverride,\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nclass Deprecation extends Error {\n  constructor(message) {\n    super(message); // Maintains proper stack trace (only available on V8)\n\n    /* istanbul ignore next */\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    this.name = 'Deprecation';\n  }\n\n}\n\nexports.Deprecation = Deprecation;\n","var debug;\n\nmodule.exports = function () {\n  if (!debug) {\n    try {\n      /* eslint global-require: off */\n      debug = require(\"debug\")(\"follow-redirects\");\n    }\n    catch (error) {\n      debug = function () { /* */ };\n    }\n  }\n  debug.apply(null, arguments);\n};\n","var url = require(\"url\");\nvar URL = url.URL;\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Writable = require(\"stream\").Writable;\nvar assert = require(\"assert\");\nvar debug = require(\"./debug\");\n\n// Create handlers that pass events from native requests\nvar eventHandlers = Object.create(null);\n[\"abort\", \"aborted\", \"connect\", \"error\", \"socket\", \"timeout\"].forEach(function (event) {\n  eventHandlers[event] = function (arg1, arg2, arg3) {\n    this._redirectable.emit(event, arg1, arg2, arg3);\n  };\n});\n\n// Error types with codes\nvar RedirectionError = createErrorType(\n  \"ERR_FR_REDIRECTION_FAILURE\",\n  \"\"\n);\nvar TooManyRedirectsError = createErrorType(\n  \"ERR_FR_TOO_MANY_REDIRECTS\",\n  \"Maximum number of redirects exceeded\"\n);\nvar MaxBodyLengthExceededError = createErrorType(\n  \"ERR_FR_MAX_BODY_LENGTH_EXCEEDED\",\n  \"Request body larger than maxBodyLength limit\"\n);\nvar WriteAfterEndError = createErrorType(\n  \"ERR_STREAM_WRITE_AFTER_END\",\n  \"write after end\"\n);\n\n// An HTTP(S) request that can be redirected\nfunction RedirectableRequest(options, responseCallback) {\n  // Initialize the request\n  Writable.call(this);\n  this._sanitizeOptions(options);\n  this._options = options;\n  this._ended = false;\n  this._ending = false;\n  this._redirectCount = 0;\n  this._redirects = [];\n  this._requestBodyLength = 0;\n  this._requestBodyBuffers = [];\n\n  // Attach a callback if passed\n  if (responseCallback) {\n    this.on(\"response\", responseCallback);\n  }\n\n  // React to responses of native requests\n  var self = this;\n  this._onNativeResponse = function (response) {\n    self._processResponse(response);\n  };\n\n  // Perform the first request\n  this._performRequest();\n}\nRedirectableRequest.prototype = Object.create(Writable.prototype);\n\nRedirectableRequest.prototype.abort = function () {\n  // Abort the internal request\n  this._currentRequest.removeAllListeners();\n  this._currentRequest.on(\"error\", noop);\n  this._currentRequest.abort();\n\n  // Abort this request\n  this.emit(\"abort\");\n  this.removeAllListeners();\n};\n\n// Writes buffered data to the current native request\nRedirectableRequest.prototype.write = function (data, encoding, callback) {\n  // Writing is not allowed if end has been called\n  if (this._ending) {\n    throw new WriteAfterEndError();\n  }\n\n  // Validate input and shift parameters if necessary\n  if (!(typeof data === \"string\" || typeof data === \"object\" && (\"length\" in data))) {\n    throw new TypeError(\"data should be a string, Buffer or Uint8Array\");\n  }\n  if (typeof encoding === \"function\") {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Ignore empty buffers, since writing them doesn't invoke the callback\n  // https://github.com/nodejs/node/issues/22066\n  if (data.length === 0) {\n    if (callback) {\n      callback();\n    }\n    return;\n  }\n  // Only write when we don't exceed the maximum body length\n  if (this._requestBodyLength + data.length <= this._options.maxBodyLength) {\n    this._requestBodyLength += data.length;\n    this._requestBodyBuffers.push({ data: data, encoding: encoding });\n    this._currentRequest.write(data, encoding, callback);\n  }\n  // Error when we exceed the maximum body length\n  else {\n    this.emit(\"error\", new MaxBodyLengthExceededError());\n    this.abort();\n  }\n};\n\n// Ends the current native request\nRedirectableRequest.prototype.end = function (data, encoding, callback) {\n  // Shift parameters if necessary\n  if (typeof data === \"function\") {\n    callback = data;\n    data = encoding = null;\n  }\n  else if (typeof encoding === \"function\") {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Write data if needed and end\n  if (!data) {\n    this._ended = this._ending = true;\n    this._currentRequest.end(null, null, callback);\n  }\n  else {\n    var self = this;\n    var currentRequest = this._currentRequest;\n    this.write(data, encoding, function () {\n      self._ended = true;\n      currentRequest.end(null, null, callback);\n    });\n    this._ending = true;\n  }\n};\n\n// Sets a header value on the current native request\nRedirectableRequest.prototype.setHeader = function (name, value) {\n  this._options.headers[name] = value;\n  this._currentRequest.setHeader(name, value);\n};\n\n// Clears a header value on the current native request\nRedirectableRequest.prototype.removeHeader = function (name) {\n  delete this._options.headers[name];\n  this._currentRequest.removeHeader(name);\n};\n\n// Global timeout for all underlying requests\nRedirectableRequest.prototype.setTimeout = function (msecs, callback) {\n  var self = this;\n  if (callback) {\n    this.on(\"timeout\", callback);\n  }\n\n  // Sets up a timer to trigger a timeout event\n  function startTimer() {\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n    }\n    self._timeout = setTimeout(function () {\n      self.emit(\"timeout\");\n      clearTimer();\n    }, msecs);\n  }\n\n  // Prevent a timeout from triggering\n  function clearTimer() {\n    clearTimeout(this._timeout);\n    if (callback) {\n      self.removeListener(\"timeout\", callback);\n    }\n    if (!this.socket) {\n      self._currentRequest.removeListener(\"socket\", startTimer);\n    }\n  }\n\n  // Start the timer when the socket is opened\n  if (this.socket) {\n    startTimer();\n  }\n  else {\n    this._currentRequest.once(\"socket\", startTimer);\n  }\n\n  this.once(\"response\", clearTimer);\n  this.once(\"error\", clearTimer);\n\n  return this;\n};\n\n// Proxy all other public ClientRequest methods\n[\n  \"flushHeaders\", \"getHeader\",\n  \"setNoDelay\", \"setSocketKeepAlive\",\n].forEach(function (method) {\n  RedirectableRequest.prototype[method] = function (a, b) {\n    return this._currentRequest[method](a, b);\n  };\n});\n\n// Proxy all public ClientRequest properties\n[\"aborted\", \"connection\", \"socket\"].forEach(function (property) {\n  Object.defineProperty(RedirectableRequest.prototype, property, {\n    get: function () { return this._currentRequest[property]; },\n  });\n});\n\nRedirectableRequest.prototype._sanitizeOptions = function (options) {\n  // Ensure headers are always present\n  if (!options.headers) {\n    options.headers = {};\n  }\n\n  // Since http.request treats host as an alias of hostname,\n  // but the url module interprets host as hostname plus port,\n  // eliminate the host property to avoid confusion.\n  if (options.host) {\n    // Use hostname if set, because it has precedence\n    if (!options.hostname) {\n      options.hostname = options.host;\n    }\n    delete options.host;\n  }\n\n  // Complete the URL object when necessary\n  if (!options.pathname && options.path) {\n    var searchPos = options.path.indexOf(\"?\");\n    if (searchPos < 0) {\n      options.pathname = options.path;\n    }\n    else {\n      options.pathname = options.path.substring(0, searchPos);\n      options.search = options.path.substring(searchPos);\n    }\n  }\n};\n\n\n// Executes the next native request (initial or redirect)\nRedirectableRequest.prototype._performRequest = function () {\n  // Load the native protocol\n  var protocol = this._options.protocol;\n  var nativeProtocol = this._options.nativeProtocols[protocol];\n  if (!nativeProtocol) {\n    this.emit(\"error\", new TypeError(\"Unsupported protocol \" + protocol));\n    return;\n  }\n\n  // If specified, use the agent corresponding to the protocol\n  // (HTTP and HTTPS use different types of agents)\n  if (this._options.agents) {\n    var scheme = protocol.substr(0, protocol.length - 1);\n    this._options.agent = this._options.agents[scheme];\n  }\n\n  // Create the native request\n  var request = this._currentRequest =\n        nativeProtocol.request(this._options, this._onNativeResponse);\n  this._currentUrl = url.format(this._options);\n\n  // Set up event handlers\n  request._redirectable = this;\n  for (var event in eventHandlers) {\n    /* istanbul ignore else */\n    if (event) {\n      request.on(event, eventHandlers[event]);\n    }\n  }\n\n  // End a redirected request\n  // (The first request must be ended explicitly with RedirectableRequest#end)\n  if (this._isRedirect) {\n    // Write the request entity and end.\n    var i = 0;\n    var self = this;\n    var buffers = this._requestBodyBuffers;\n    (function writeNext(error) {\n      // Only write if this request has not been redirected yet\n      /* istanbul ignore else */\n      if (request === self._currentRequest) {\n        // Report any write errors\n        /* istanbul ignore if */\n        if (error) {\n          self.emit(\"error\", error);\n        }\n        // Write the next buffer if there are still left\n        else if (i < buffers.length) {\n          var buffer = buffers[i++];\n          /* istanbul ignore else */\n          if (!request.finished) {\n            request.write(buffer.data, buffer.encoding, writeNext);\n          }\n        }\n        // End the request if `end` has been called on us\n        else if (self._ended) {\n          request.end();\n        }\n      }\n    }());\n  }\n};\n\n// Processes a response from the current native request\nRedirectableRequest.prototype._processResponse = function (response) {\n  // Store the redirected response\n  var statusCode = response.statusCode;\n  if (this._options.trackRedirects) {\n    this._redirects.push({\n      url: this._currentUrl,\n      headers: response.headers,\n      statusCode: statusCode,\n    });\n  }\n\n  // RFC72316.4: The 3xx (Redirection) class of status code indicates\n  // that further action needs to be taken by the user agent in order to\n  // fulfill the request. If a Location header field is provided,\n  // the user agent MAY automatically redirect its request to the URI\n  // referenced by the Location field value,\n  // even if the specific status code is not understood.\n  var location = response.headers.location;\n  if (location && this._options.followRedirects !== false &&\n      statusCode >= 300 && statusCode < 400) {\n    // Abort the current request\n    this._currentRequest.removeAllListeners();\n    this._currentRequest.on(\"error\", noop);\n    this._currentRequest.abort();\n    // Discard the remainder of the response to avoid waiting for data\n    response.destroy();\n\n    // RFC72316.4: A client SHOULD detect and intervene\n    // in cyclical redirections (i.e., \"infinite\" redirection loops).\n    if (++this._redirectCount > this._options.maxRedirects) {\n      this.emit(\"error\", new TooManyRedirectsError());\n      return;\n    }\n\n    // RFC72316.4: Automatic redirection needs to done with\n    // care for methods not known to be safe, []\n    // RFC72316.4.23: For historical reasons, a user agent MAY change\n    // the request method from POST to GET for the subsequent request.\n    if ((statusCode === 301 || statusCode === 302) && this._options.method === \"POST\" ||\n        // RFC72316.4.4: The 303 (See Other) status code indicates that\n        // the server is redirecting the user agent to a different resource []\n        // A user agent can perform a retrieval request targeting that URI\n        // (a GET or HEAD request if using HTTP) []\n        (statusCode === 303) && !/^(?:GET|HEAD)$/.test(this._options.method)) {\n      this._options.method = \"GET\";\n      // Drop a possible entity and headers related to it\n      this._requestBodyBuffers = [];\n      removeMatchingHeaders(/^content-/i, this._options.headers);\n    }\n\n    // Drop the Host header, as the redirect might lead to a different host\n    var previousHostName = removeMatchingHeaders(/^host$/i, this._options.headers) ||\n      url.parse(this._currentUrl).hostname;\n\n    // Create the redirected request\n    var redirectUrl = url.resolve(this._currentUrl, location);\n    debug(\"redirecting to\", redirectUrl);\n    this._isRedirect = true;\n    var redirectUrlParts = url.parse(redirectUrl);\n    Object.assign(this._options, redirectUrlParts);\n\n    // Drop the Authorization header if redirecting to another host\n    if (redirectUrlParts.hostname !== previousHostName) {\n      removeMatchingHeaders(/^authorization$/i, this._options.headers);\n    }\n\n    // Evaluate the beforeRedirect callback\n    if (typeof this._options.beforeRedirect === \"function\") {\n      var responseDetails = { headers: response.headers };\n      try {\n        this._options.beforeRedirect.call(null, this._options, responseDetails);\n      }\n      catch (err) {\n        this.emit(\"error\", err);\n        return;\n      }\n      this._sanitizeOptions(this._options);\n    }\n\n    // Perform the redirected request\n    try {\n      this._performRequest();\n    }\n    catch (cause) {\n      var error = new RedirectionError(\"Redirected request failed: \" + cause.message);\n      error.cause = cause;\n      this.emit(\"error\", error);\n    }\n  }\n  else {\n    // The response is not a redirect; return it as-is\n    response.responseUrl = this._currentUrl;\n    response.redirects = this._redirects;\n    this.emit(\"response\", response);\n\n    // Clean up\n    this._requestBodyBuffers = [];\n  }\n};\n\n// Wraps the key/value object of protocols with redirect functionality\nfunction wrap(protocols) {\n  // Default settings\n  var exports = {\n    maxRedirects: 21,\n    maxBodyLength: 10 * 1024 * 1024,\n  };\n\n  // Wrap each protocol\n  var nativeProtocols = {};\n  Object.keys(protocols).forEach(function (scheme) {\n    var protocol = scheme + \":\";\n    var nativeProtocol = nativeProtocols[protocol] = protocols[scheme];\n    var wrappedProtocol = exports[scheme] = Object.create(nativeProtocol);\n\n    // Executes a request, following redirects\n    function request(input, options, callback) {\n      // Parse parameters\n      if (typeof input === \"string\") {\n        var urlStr = input;\n        try {\n          input = urlToOptions(new URL(urlStr));\n        }\n        catch (err) {\n          /* istanbul ignore next */\n          input = url.parse(urlStr);\n        }\n      }\n      else if (URL && (input instanceof URL)) {\n        input = urlToOptions(input);\n      }\n      else {\n        callback = options;\n        options = input;\n        input = { protocol: protocol };\n      }\n      if (typeof options === \"function\") {\n        callback = options;\n        options = null;\n      }\n\n      // Set defaults\n      options = Object.assign({\n        maxRedirects: exports.maxRedirects,\n        maxBodyLength: exports.maxBodyLength,\n      }, input, options);\n      options.nativeProtocols = nativeProtocols;\n\n      assert.equal(options.protocol, protocol, \"protocol mismatch\");\n      debug(\"options\", options);\n      return new RedirectableRequest(options, callback);\n    }\n\n    // Executes a GET request, following redirects\n    function get(input, options, callback) {\n      var wrappedRequest = wrappedProtocol.request(input, options, callback);\n      wrappedRequest.end();\n      return wrappedRequest;\n    }\n\n    // Expose the properties on the wrapped protocol\n    Object.defineProperties(wrappedProtocol, {\n      request: { value: request, configurable: true, enumerable: true, writable: true },\n      get: { value: get, configurable: true, enumerable: true, writable: true },\n    });\n  });\n  return exports;\n}\n\n/* istanbul ignore next */\nfunction noop() { /* empty */ }\n\n// from https://github.com/nodejs/node/blob/master/lib/internal/url.js\nfunction urlToOptions(urlObject) {\n  var options = {\n    protocol: urlObject.protocol,\n    hostname: urlObject.hostname.startsWith(\"[\") ?\n      /* istanbul ignore next */\n      urlObject.hostname.slice(1, -1) :\n      urlObject.hostname,\n    hash: urlObject.hash,\n    search: urlObject.search,\n    pathname: urlObject.pathname,\n    path: urlObject.pathname + urlObject.search,\n    href: urlObject.href,\n  };\n  if (urlObject.port !== \"\") {\n    options.port = Number(urlObject.port);\n  }\n  return options;\n}\n\nfunction removeMatchingHeaders(regex, headers) {\n  var lastValue;\n  for (var header in headers) {\n    if (regex.test(header)) {\n      lastValue = headers[header];\n      delete headers[header];\n    }\n  }\n  return lastValue;\n}\n\nfunction createErrorType(code, defaultMessage) {\n  function CustomError(message) {\n    Error.captureStackTrace(this, this.constructor);\n    this.message = message || defaultMessage;\n  }\n  CustomError.prototype = new Error();\n  CustomError.prototype.constructor = CustomError;\n  CustomError.prototype.name = \"Error [\" + code + \"]\";\n  CustomError.prototype.code = code;\n  return CustomError;\n}\n\n// Exports\nmodule.exports = wrap({ http: http, https: https });\nmodule.exports.wrap = wrap;\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","var encode = require('./lib/encoder'),\n    decode = require('./lib/decoder');\n\nmodule.exports = {\n  encode: encode,\n  decode: decode\n};\n","/* -*- tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- /\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n/*\n   Copyright 2011 notmasteryet\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n// - The JPEG specification can be found in the ITU CCITT Recommendation T.81\n//   (www.w3.org/Graphics/JPEG/itu-t81.pdf)\n// - The JFIF specification can be found in the JPEG File Interchange Format\n//   (www.w3.org/Graphics/JPEG/jfif3.pdf)\n// - The Adobe Application-Specific JPEG markers in the Supporting the DCT Filters\n//   in PostScript Level 2, Technical Note #5116\n//   (partners.adobe.com/public/developer/en/ps/sdk/5116.DCT_Filter.pdf)\n\nvar JpegImage = (function jpegImage() {\n  \"use strict\";\n  var dctZigZag = new Int32Array([\n     0,\n     1,  8,\n    16,  9,  2,\n     3, 10, 17, 24,\n    32, 25, 18, 11, 4,\n     5, 12, 19, 26, 33, 40,\n    48, 41, 34, 27, 20, 13,  6,\n     7, 14, 21, 28, 35, 42, 49, 56,\n    57, 50, 43, 36, 29, 22, 15,\n    23, 30, 37, 44, 51, 58,\n    59, 52, 45, 38, 31,\n    39, 46, 53, 60,\n    61, 54, 47,\n    55, 62,\n    63\n  ]);\n\n  var dctCos1  =  4017   // cos(pi/16)\n  var dctSin1  =   799   // sin(pi/16)\n  var dctCos3  =  3406   // cos(3*pi/16)\n  var dctSin3  =  2276   // sin(3*pi/16)\n  var dctCos6  =  1567   // cos(6*pi/16)\n  var dctSin6  =  3784   // sin(6*pi/16)\n  var dctSqrt2 =  5793   // sqrt(2)\n  var dctSqrt1d2 = 2896  // sqrt(2) / 2\n\n  function constructor() {\n  }\n\n  function buildHuffmanTable(codeLengths, values) {\n    var k = 0, code = [], i, j, length = 16;\n    while (length > 0 && !codeLengths[length - 1])\n      length--;\n    code.push({children: [], index: 0});\n    var p = code[0], q;\n    for (i = 0; i < length; i++) {\n      for (j = 0; j < codeLengths[i]; j++) {\n        p = code.pop();\n        p.children[p.index] = values[k];\n        while (p.index > 0) {\n          if (code.length === 0)\n            throw new Error('Could not recreate Huffman Table');\n          p = code.pop();\n        }\n        p.index++;\n        code.push(p);\n        while (code.length <= i) {\n          code.push(q = {children: [], index: 0});\n          p.children[p.index] = q.children;\n          p = q;\n        }\n        k++;\n      }\n      if (i + 1 < length) {\n        // p here points to last code\n        code.push(q = {children: [], index: 0});\n        p.children[p.index] = q.children;\n        p = q;\n      }\n    }\n    return code[0].children;\n  }\n\n  function decodeScan(data, offset,\n                      frame, components, resetInterval,\n                      spectralStart, spectralEnd,\n                      successivePrev, successive, opts) {\n    var precision = frame.precision;\n    var samplesPerLine = frame.samplesPerLine;\n    var scanLines = frame.scanLines;\n    var mcusPerLine = frame.mcusPerLine;\n    var progressive = frame.progressive;\n    var maxH = frame.maxH, maxV = frame.maxV;\n\n    var startOffset = offset, bitsData = 0, bitsCount = 0;\n    function readBit() {\n      if (bitsCount > 0) {\n        bitsCount--;\n        return (bitsData >> bitsCount) & 1;\n      }\n      bitsData = data[offset++];\n      if (bitsData == 0xFF) {\n        var nextByte = data[offset++];\n        if (nextByte) {\n          throw new Error(\"unexpected marker: \" + ((bitsData << 8) | nextByte).toString(16));\n        }\n        // unstuff 0\n      }\n      bitsCount = 7;\n      return bitsData >>> 7;\n    }\n    function decodeHuffman(tree) {\n      var node = tree, bit;\n      while ((bit = readBit()) !== null) {\n        node = node[bit];\n        if (typeof node === 'number')\n          return node;\n        if (typeof node !== 'object')\n          throw new Error(\"invalid huffman sequence\");\n      }\n      return null;\n    }\n    function receive(length) {\n      var n = 0;\n      while (length > 0) {\n        var bit = readBit();\n        if (bit === null) return;\n        n = (n << 1) | bit;\n        length--;\n      }\n      return n;\n    }\n    function receiveAndExtend(length) {\n      var n = receive(length);\n      if (n >= 1 << (length - 1))\n        return n;\n      return n + (-1 << length) + 1;\n    }\n    function decodeBaseline(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : receiveAndExtend(t);\n      zz[0]= (component.pred += diff);\n      var k = 1;\n      while (k < 64) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15)\n            break;\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s);\n        k++;\n      }\n    }\n    function decodeDCFirst(component, zz) {\n      var t = decodeHuffman(component.huffmanTableDC);\n      var diff = t === 0 ? 0 : (receiveAndExtend(t) << successive);\n      zz[0] = (component.pred += diff);\n    }\n    function decodeDCSuccessive(component, zz) {\n      zz[0] |= readBit() << successive;\n    }\n    var eobrun = 0;\n    function decodeACFirst(component, zz) {\n      if (eobrun > 0) {\n        eobrun--;\n        return;\n      }\n      var k = spectralStart, e = spectralEnd;\n      while (k <= e) {\n        var rs = decodeHuffman(component.huffmanTableAC);\n        var s = rs & 15, r = rs >> 4;\n        if (s === 0) {\n          if (r < 15) {\n            eobrun = receive(r) + (1 << r) - 1;\n            break;\n          }\n          k += 16;\n          continue;\n        }\n        k += r;\n        var z = dctZigZag[k];\n        zz[z] = receiveAndExtend(s) * (1 << successive);\n        k++;\n      }\n    }\n    var successiveACState = 0, successiveACNextValue;\n    function decodeACSuccessive(component, zz) {\n      var k = spectralStart, e = spectralEnd, r = 0;\n      while (k <= e) {\n        var z = dctZigZag[k];\n        var direction = zz[z] < 0 ? -1 : 1;\n        switch (successiveACState) {\n        case 0: // initial state\n          var rs = decodeHuffman(component.huffmanTableAC);\n          var s = rs & 15, r = rs >> 4;\n          if (s === 0) {\n            if (r < 15) {\n              eobrun = receive(r) + (1 << r);\n              successiveACState = 4;\n            } else {\n              r = 16;\n              successiveACState = 1;\n            }\n          } else {\n            if (s !== 1)\n              throw new Error(\"invalid ACn encoding\");\n            successiveACNextValue = receiveAndExtend(s);\n            successiveACState = r ? 2 : 3;\n          }\n          continue;\n        case 1: // skipping r zero items\n        case 2:\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          else {\n            r--;\n            if (r === 0)\n              successiveACState = successiveACState == 2 ? 3 : 0;\n          }\n          break;\n        case 3: // set value for a zero item\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          else {\n            zz[z] = successiveACNextValue << successive;\n            successiveACState = 0;\n          }\n          break;\n        case 4: // eob\n          if (zz[z])\n            zz[z] += (readBit() << successive) * direction;\n          break;\n        }\n        k++;\n      }\n      if (successiveACState === 4) {\n        eobrun--;\n        if (eobrun === 0)\n          successiveACState = 0;\n      }\n    }\n    function decodeMcu(component, decode, mcu, row, col) {\n      var mcuRow = (mcu / mcusPerLine) | 0;\n      var mcuCol = mcu % mcusPerLine;\n      var blockRow = mcuRow * component.v + row;\n      var blockCol = mcuCol * component.h + col;\n      // If the block is missing and we're in tolerant mode, just skip it.\n      if (component.blocks[blockRow] === undefined && opts.tolerantDecoding)\n        return;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n    function decodeBlock(component, decode, mcu) {\n      var blockRow = (mcu / component.blocksPerLine) | 0;\n      var blockCol = mcu % component.blocksPerLine;\n      // If the block is missing and we're in tolerant mode, just skip it.\n      if (component.blocks[blockRow] === undefined && opts.tolerantDecoding)\n        return;\n      decode(component, component.blocks[blockRow][blockCol]);\n    }\n\n    var componentsLength = components.length;\n    var component, i, j, k, n;\n    var decodeFn;\n    if (progressive) {\n      if (spectralStart === 0)\n        decodeFn = successivePrev === 0 ? decodeDCFirst : decodeDCSuccessive;\n      else\n        decodeFn = successivePrev === 0 ? decodeACFirst : decodeACSuccessive;\n    } else {\n      decodeFn = decodeBaseline;\n    }\n\n    var mcu = 0, marker;\n    var mcuExpected;\n    if (componentsLength == 1) {\n      mcuExpected = components[0].blocksPerLine * components[0].blocksPerColumn;\n    } else {\n      mcuExpected = mcusPerLine * frame.mcusPerColumn;\n    }\n    if (!resetInterval) resetInterval = mcuExpected;\n\n    var h, v;\n    while (mcu < mcuExpected) {\n      // reset interval stuff\n      for (i = 0; i < componentsLength; i++)\n        components[i].pred = 0;\n      eobrun = 0;\n\n      if (componentsLength == 1) {\n        component = components[0];\n        for (n = 0; n < resetInterval; n++) {\n          decodeBlock(component, decodeFn, mcu);\n          mcu++;\n        }\n      } else {\n        for (n = 0; n < resetInterval; n++) {\n          for (i = 0; i < componentsLength; i++) {\n            component = components[i];\n            h = component.h;\n            v = component.v;\n            for (j = 0; j < v; j++) {\n              for (k = 0; k < h; k++) {\n                decodeMcu(component, decodeFn, mcu, j, k);\n              }\n            }\n          }\n          mcu++;\n\n          // If we've reached our expected MCU's, stop decoding\n          if (mcu === mcuExpected) break;\n        }\n      }\n\n      if (mcu === mcuExpected) {\n        // Skip trailing bytes at the end of the scan - until we reach the next marker\n        do {\n          if (data[offset] === 0xFF) {\n            if (data[offset + 1] !== 0x00) {\n              break;\n            }\n          }\n          offset += 1;\n        } while (offset < data.length - 2);\n      }\n\n      // find marker\n      bitsCount = 0;\n      marker = (data[offset] << 8) | data[offset + 1];\n      if (marker < 0xFF00) {\n        throw new Error(\"marker was not found\");\n      }\n\n      if (marker >= 0xFFD0 && marker <= 0xFFD7) { // RSTx\n        offset += 2;\n      }\n      else\n        break;\n    }\n\n    return offset - startOffset;\n  }\n\n  function buildComponentData(frame, component) {\n    var lines = [];\n    var blocksPerLine = component.blocksPerLine;\n    var blocksPerColumn = component.blocksPerColumn;\n    var samplesPerLine = blocksPerLine << 3;\n    // Only 1 used per invocation of this function and garbage collected after invocation, so no need to account for its memory footprint.\n    var R = new Int32Array(64), r = new Uint8Array(64);\n\n    // A port of poppler's IDCT method which in turn is taken from:\n    //   Christoph Loeffler, Adriaan Ligtenberg, George S. Moschytz,\n    //   \"Practical Fast 1-D DCT Algorithms with 11 Multiplications\",\n    //   IEEE Intl. Conf. on Acoustics, Speech & Signal Processing, 1989,\n    //   988-991.\n    function quantizeAndInverse(zz, dataOut, dataIn) {\n      var qt = component.quantizationTable;\n      var v0, v1, v2, v3, v4, v5, v6, v7, t;\n      var p = dataIn;\n      var i;\n\n      // dequant\n      for (i = 0; i < 64; i++)\n        p[i] = zz[i] * qt[i];\n\n      // inverse DCT on rows\n      for (i = 0; i < 8; ++i) {\n        var row = 8 * i;\n\n        // check for all-zero AC coefficients\n        if (p[1 + row] == 0 && p[2 + row] == 0 && p[3 + row] == 0 &&\n            p[4 + row] == 0 && p[5 + row] == 0 && p[6 + row] == 0 &&\n            p[7 + row] == 0) {\n          t = (dctSqrt2 * p[0 + row] + 512) >> 10;\n          p[0 + row] = t;\n          p[1 + row] = t;\n          p[2 + row] = t;\n          p[3 + row] = t;\n          p[4 + row] = t;\n          p[5 + row] = t;\n          p[6 + row] = t;\n          p[7 + row] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0 + row] + 128) >> 8;\n        v1 = (dctSqrt2 * p[4 + row] + 128) >> 8;\n        v2 = p[2 + row];\n        v3 = p[6 + row];\n        v4 = (dctSqrt1d2 * (p[1 + row] - p[7 + row]) + 128) >> 8;\n        v7 = (dctSqrt1d2 * (p[1 + row] + p[7 + row]) + 128) >> 8;\n        v5 = p[3 + row] << 4;\n        v6 = p[5 + row] << 4;\n\n        // stage 3\n        t = (v0 - v1+ 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 128) >> 8;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 128) >> 8;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0 + row] = v0 + v7;\n        p[7 + row] = v0 - v7;\n        p[1 + row] = v1 + v6;\n        p[6 + row] = v1 - v6;\n        p[2 + row] = v2 + v5;\n        p[5 + row] = v2 - v5;\n        p[3 + row] = v3 + v4;\n        p[4 + row] = v3 - v4;\n      }\n\n      // inverse DCT on columns\n      for (i = 0; i < 8; ++i) {\n        var col = i;\n\n        // check for all-zero AC coefficients\n        if (p[1*8 + col] == 0 && p[2*8 + col] == 0 && p[3*8 + col] == 0 &&\n            p[4*8 + col] == 0 && p[5*8 + col] == 0 && p[6*8 + col] == 0 &&\n            p[7*8 + col] == 0) {\n          t = (dctSqrt2 * dataIn[i+0] + 8192) >> 14;\n          p[0*8 + col] = t;\n          p[1*8 + col] = t;\n          p[2*8 + col] = t;\n          p[3*8 + col] = t;\n          p[4*8 + col] = t;\n          p[5*8 + col] = t;\n          p[6*8 + col] = t;\n          p[7*8 + col] = t;\n          continue;\n        }\n\n        // stage 4\n        v0 = (dctSqrt2 * p[0*8 + col] + 2048) >> 12;\n        v1 = (dctSqrt2 * p[4*8 + col] + 2048) >> 12;\n        v2 = p[2*8 + col];\n        v3 = p[6*8 + col];\n        v4 = (dctSqrt1d2 * (p[1*8 + col] - p[7*8 + col]) + 2048) >> 12;\n        v7 = (dctSqrt1d2 * (p[1*8 + col] + p[7*8 + col]) + 2048) >> 12;\n        v5 = p[3*8 + col];\n        v6 = p[5*8 + col];\n\n        // stage 3\n        t = (v0 - v1 + 1) >> 1;\n        v0 = (v0 + v1 + 1) >> 1;\n        v1 = t;\n        t = (v2 * dctSin6 + v3 * dctCos6 + 2048) >> 12;\n        v2 = (v2 * dctCos6 - v3 * dctSin6 + 2048) >> 12;\n        v3 = t;\n        t = (v4 - v6 + 1) >> 1;\n        v4 = (v4 + v6 + 1) >> 1;\n        v6 = t;\n        t = (v7 + v5 + 1) >> 1;\n        v5 = (v7 - v5 + 1) >> 1;\n        v7 = t;\n\n        // stage 2\n        t = (v0 - v3 + 1) >> 1;\n        v0 = (v0 + v3 + 1) >> 1;\n        v3 = t;\n        t = (v1 - v2 + 1) >> 1;\n        v1 = (v1 + v2 + 1) >> 1;\n        v2 = t;\n        t = (v4 * dctSin3 + v7 * dctCos3 + 2048) >> 12;\n        v4 = (v4 * dctCos3 - v7 * dctSin3 + 2048) >> 12;\n        v7 = t;\n        t = (v5 * dctSin1 + v6 * dctCos1 + 2048) >> 12;\n        v5 = (v5 * dctCos1 - v6 * dctSin1 + 2048) >> 12;\n        v6 = t;\n\n        // stage 1\n        p[0*8 + col] = v0 + v7;\n        p[7*8 + col] = v0 - v7;\n        p[1*8 + col] = v1 + v6;\n        p[6*8 + col] = v1 - v6;\n        p[2*8 + col] = v2 + v5;\n        p[5*8 + col] = v2 - v5;\n        p[3*8 + col] = v3 + v4;\n        p[4*8 + col] = v3 - v4;\n      }\n\n      // convert to 8-bit integers\n      for (i = 0; i < 64; ++i) {\n        var sample = 128 + ((p[i] + 8) >> 4);\n        dataOut[i] = sample < 0 ? 0 : sample > 0xFF ? 0xFF : sample;\n      }\n    }\n\n    requestMemoryAllocation(samplesPerLine * blocksPerColumn * 8);\n\n    var i, j;\n    for (var blockRow = 0; blockRow < blocksPerColumn; blockRow++) {\n      var scanLine = blockRow << 3;\n      for (i = 0; i < 8; i++)\n        lines.push(new Uint8Array(samplesPerLine));\n      for (var blockCol = 0; blockCol < blocksPerLine; blockCol++) {\n        quantizeAndInverse(component.blocks[blockRow][blockCol], r, R);\n\n        var offset = 0, sample = blockCol << 3;\n        for (j = 0; j < 8; j++) {\n          var line = lines[scanLine + j];\n          for (i = 0; i < 8; i++)\n            line[sample + i] = r[offset++];\n        }\n      }\n    }\n    return lines;\n  }\n\n  function clampTo8bit(a) {\n    return a < 0 ? 0 : a > 255 ? 255 : a;\n  }\n\n  constructor.prototype = {\n    load: function load(path) {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", path, true);\n      xhr.responseType = \"arraybuffer\";\n      xhr.onload = (function() {\n        // TODO catch parse error\n        var data = new Uint8Array(xhr.response || xhr.mozResponseArrayBuffer);\n        this.parse(data);\n        if (this.onload)\n          this.onload();\n      }).bind(this);\n      xhr.send(null);\n    },\n    parse: function parse(data) {\n      var maxResolutionInPixels = this.opts.maxResolutionInMP * 1000 * 1000;\n      var offset = 0, length = data.length;\n      function readUint16() {\n        var value = (data[offset] << 8) | data[offset + 1];\n        offset += 2;\n        return value;\n      }\n      function readDataBlock() {\n        var length = readUint16();\n        var array = data.subarray(offset, offset + length - 2);\n        offset += array.length;\n        return array;\n      }\n      function prepareComponents(frame) {\n        var maxH = 0, maxV = 0;\n        var component, componentId;\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            if (maxH < component.h) maxH = component.h;\n            if (maxV < component.v) maxV = component.v;\n          }\n        }\n        var mcusPerLine = Math.ceil(frame.samplesPerLine / 8 / maxH);\n        var mcusPerColumn = Math.ceil(frame.scanLines / 8 / maxV);\n        for (componentId in frame.components) {\n          if (frame.components.hasOwnProperty(componentId)) {\n            component = frame.components[componentId];\n            var blocksPerLine = Math.ceil(Math.ceil(frame.samplesPerLine / 8) * component.h / maxH);\n            var blocksPerColumn = Math.ceil(Math.ceil(frame.scanLines  / 8) * component.v / maxV);\n            var blocksPerLineForMcu = mcusPerLine * component.h;\n            var blocksPerColumnForMcu = mcusPerColumn * component.v;\n            var blocksToAllocate = blocksPerColumnForMcu * blocksPerLineForMcu;\n            var blocks = [];\n\n            // Each block is a Int32Array of length 64 (4 x 64 = 256 bytes)\n            requestMemoryAllocation(blocksToAllocate * 256);\n\n            for (var i = 0; i < blocksPerColumnForMcu; i++) {\n              var row = [];\n              for (var j = 0; j < blocksPerLineForMcu; j++)\n                row.push(new Int32Array(64));\n              blocks.push(row);\n            }\n            component.blocksPerLine = blocksPerLine;\n            component.blocksPerColumn = blocksPerColumn;\n            component.blocks = blocks;\n          }\n        }\n        frame.maxH = maxH;\n        frame.maxV = maxV;\n        frame.mcusPerLine = mcusPerLine;\n        frame.mcusPerColumn = mcusPerColumn;\n      }\n      var jfif = null;\n      var adobe = null;\n      var pixels = null;\n      var frame, resetInterval;\n      var quantizationTables = [], frames = [];\n      var huffmanTablesAC = [], huffmanTablesDC = [];\n      var fileMarker = readUint16();\n      var malformedDataOffset = -1;\n      this.comments = [];\n      if (fileMarker != 0xFFD8) { // SOI (Start of Image)\n        throw new Error(\"SOI not found\");\n      }\n\n      fileMarker = readUint16();\n      while (fileMarker != 0xFFD9) { // EOI (End of image)\n        var i, j, l;\n        switch(fileMarker) {\n          case 0xFF00: break;\n          case 0xFFE0: // APP0 (Application Specific)\n          case 0xFFE1: // APP1\n          case 0xFFE2: // APP2\n          case 0xFFE3: // APP3\n          case 0xFFE4: // APP4\n          case 0xFFE5: // APP5\n          case 0xFFE6: // APP6\n          case 0xFFE7: // APP7\n          case 0xFFE8: // APP8\n          case 0xFFE9: // APP9\n          case 0xFFEA: // APP10\n          case 0xFFEB: // APP11\n          case 0xFFEC: // APP12\n          case 0xFFED: // APP13\n          case 0xFFEE: // APP14\n          case 0xFFEF: // APP15\n          case 0xFFFE: // COM (Comment)\n            var appData = readDataBlock();\n\n            if (fileMarker === 0xFFFE) {\n              var comment = String.fromCharCode.apply(null, appData);\n              this.comments.push(comment);\n            }\n\n            if (fileMarker === 0xFFE0) {\n              if (appData[0] === 0x4A && appData[1] === 0x46 && appData[2] === 0x49 &&\n                appData[3] === 0x46 && appData[4] === 0) { // 'JFIF\\x00'\n                jfif = {\n                  version: { major: appData[5], minor: appData[6] },\n                  densityUnits: appData[7],\n                  xDensity: (appData[8] << 8) | appData[9],\n                  yDensity: (appData[10] << 8) | appData[11],\n                  thumbWidth: appData[12],\n                  thumbHeight: appData[13],\n                  thumbData: appData.subarray(14, 14 + 3 * appData[12] * appData[13])\n                };\n              }\n            }\n            // TODO APP1 - Exif\n            if (fileMarker === 0xFFE1) {\n              if (appData[0] === 0x45 &&\n                appData[1] === 0x78 &&\n                appData[2] === 0x69 &&\n                appData[3] === 0x66 &&\n                appData[4] === 0) { // 'EXIF\\x00'\n                this.exifBuffer = appData.subarray(5, appData.length);\n              }\n            }\n\n            if (fileMarker === 0xFFEE) {\n              if (appData[0] === 0x41 && appData[1] === 0x64 && appData[2] === 0x6F &&\n                appData[3] === 0x62 && appData[4] === 0x65 && appData[5] === 0) { // 'Adobe\\x00'\n                adobe = {\n                  version: appData[6],\n                  flags0: (appData[7] << 8) | appData[8],\n                  flags1: (appData[9] << 8) | appData[10],\n                  transformCode: appData[11]\n                };\n              }\n            }\n            break;\n\n          case 0xFFDB: // DQT (Define Quantization Tables)\n            var quantizationTablesLength = readUint16();\n            var quantizationTablesEnd = quantizationTablesLength + offset - 2;\n            while (offset < quantizationTablesEnd) {\n              var quantizationTableSpec = data[offset++];\n              requestMemoryAllocation(64 * 4);\n              var tableData = new Int32Array(64);\n              if ((quantizationTableSpec >> 4) === 0) { // 8 bit values\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = data[offset++];\n                }\n              } else if ((quantizationTableSpec >> 4) === 1) { //16 bit\n                for (j = 0; j < 64; j++) {\n                  var z = dctZigZag[j];\n                  tableData[z] = readUint16();\n                }\n              } else\n                throw new Error(\"DQT: invalid table spec\");\n              quantizationTables[quantizationTableSpec & 15] = tableData;\n            }\n            break;\n\n          case 0xFFC0: // SOF0 (Start of Frame, Baseline DCT)\n          case 0xFFC1: // SOF1 (Start of Frame, Extended DCT)\n          case 0xFFC2: // SOF2 (Start of Frame, Progressive DCT)\n            readUint16(); // skip data length\n            frame = {};\n            frame.extended = (fileMarker === 0xFFC1);\n            frame.progressive = (fileMarker === 0xFFC2);\n            frame.precision = data[offset++];\n            frame.scanLines = readUint16();\n            frame.samplesPerLine = readUint16();\n            frame.components = {};\n            frame.componentsOrder = [];\n\n            var pixelsInFrame = frame.scanLines * frame.samplesPerLine;\n            if (pixelsInFrame > maxResolutionInPixels) {\n              var exceededAmount = Math.ceil((pixelsInFrame - maxResolutionInPixels) / 1e6);\n              throw new Error(`maxResolutionInMP limit exceeded by ${exceededAmount}MP`);\n            }\n\n            var componentsCount = data[offset++], componentId;\n            var maxH = 0, maxV = 0;\n            for (i = 0; i < componentsCount; i++) {\n              componentId = data[offset];\n              var h = data[offset + 1] >> 4;\n              var v = data[offset + 1] & 15;\n              var qId = data[offset + 2];\n              frame.componentsOrder.push(componentId);\n              frame.components[componentId] = {\n                h: h,\n                v: v,\n                quantizationIdx: qId\n              };\n              offset += 3;\n            }\n            prepareComponents(frame);\n            frames.push(frame);\n            break;\n\n          case 0xFFC4: // DHT (Define Huffman Tables)\n            var huffmanLength = readUint16();\n            for (i = 2; i < huffmanLength;) {\n              var huffmanTableSpec = data[offset++];\n              var codeLengths = new Uint8Array(16);\n              var codeLengthSum = 0;\n              for (j = 0; j < 16; j++, offset++) {\n                codeLengthSum += (codeLengths[j] = data[offset]);\n              }\n              requestMemoryAllocation(16 + codeLengthSum);\n              var huffmanValues = new Uint8Array(codeLengthSum);\n              for (j = 0; j < codeLengthSum; j++, offset++)\n                huffmanValues[j] = data[offset];\n              i += 17 + codeLengthSum;\n\n              ((huffmanTableSpec >> 4) === 0 ?\n                huffmanTablesDC : huffmanTablesAC)[huffmanTableSpec & 15] =\n                buildHuffmanTable(codeLengths, huffmanValues);\n            }\n            break;\n\n          case 0xFFDD: // DRI (Define Restart Interval)\n            readUint16(); // skip data length\n            resetInterval = readUint16();\n            break;\n\n          case 0xFFDC: // Number of Lines marker\n            readUint16() // skip data length\n            readUint16() // Ignore this data since it represents the image height\n            break;\n            \n          case 0xFFDA: // SOS (Start of Scan)\n            var scanLength = readUint16();\n            var selectorsCount = data[offset++];\n            var components = [], component;\n            for (i = 0; i < selectorsCount; i++) {\n              component = frame.components[data[offset++]];\n              var tableSpec = data[offset++];\n              component.huffmanTableDC = huffmanTablesDC[tableSpec >> 4];\n              component.huffmanTableAC = huffmanTablesAC[tableSpec & 15];\n              components.push(component);\n            }\n            var spectralStart = data[offset++];\n            var spectralEnd = data[offset++];\n            var successiveApproximation = data[offset++];\n            var processed = decodeScan(data, offset,\n              frame, components, resetInterval,\n              spectralStart, spectralEnd,\n              successiveApproximation >> 4, successiveApproximation & 15, this.opts);\n            offset += processed;\n            break;\n\n          case 0xFFFF: // Fill bytes\n            if (data[offset] !== 0xFF) { // Avoid skipping a valid marker.\n              offset--;\n            }\n            break;\n          default:\n            if (data[offset - 3] == 0xFF &&\n                data[offset - 2] >= 0xC0 && data[offset - 2] <= 0xFE) {\n              // could be incorrect encoding -- last 0xFF byte of the previous\n              // block was eaten by the encoder\n              offset -= 3;\n              break;\n            }\n            else if (fileMarker === 0xE0 || fileMarker == 0xE1) {\n              // Recover from malformed APP1 markers popular in some phone models.\n              // See https://github.com/eugeneware/jpeg-js/issues/82\n              if (malformedDataOffset !== -1) {\n                throw new Error(`first unknown JPEG marker at offset ${malformedDataOffset.toString(16)}, second unknown JPEG marker ${fileMarker.toString(16)} at offset ${(offset - 1).toString(16)}`);\n              }\n              malformedDataOffset = offset - 1;\n              const nextOffset = readUint16();\n              if (data[offset + nextOffset - 2] === 0xFF) {\n                offset += nextOffset - 2;\n                break;\n              }\n            }\n            throw new Error(\"unknown JPEG marker \" + fileMarker.toString(16));\n        }\n        fileMarker = readUint16();\n      }\n      if (frames.length != 1)\n        throw new Error(\"only single frame JPEGs supported\");\n\n      // set each frame's components quantization table\n      for (var i = 0; i < frames.length; i++) {\n        var cp = frames[i].components;\n        for (var j in cp) {\n          cp[j].quantizationTable = quantizationTables[cp[j].quantizationIdx];\n          delete cp[j].quantizationIdx;\n        }\n      }\n\n      this.width = frame.samplesPerLine;\n      this.height = frame.scanLines;\n      this.jfif = jfif;\n      this.adobe = adobe;\n      this.components = [];\n      for (var i = 0; i < frame.componentsOrder.length; i++) {\n        var component = frame.components[frame.componentsOrder[i]];\n        this.components.push({\n          lines: buildComponentData(frame, component),\n          scaleX: component.h / frame.maxH,\n          scaleY: component.v / frame.maxV\n        });\n      }\n    },\n    getData: function getData(width, height) {\n      var scaleX = this.width / width, scaleY = this.height / height;\n\n      var component1, component2, component3, component4;\n      var component1Line, component2Line, component3Line, component4Line;\n      var x, y;\n      var offset = 0;\n      var Y, Cb, Cr, K, C, M, Ye, R, G, B;\n      var colorTransform;\n      var dataLength = width * height * this.components.length;\n      requestMemoryAllocation(dataLength);\n      var data = new Uint8Array(dataLength);\n      switch (this.components.length) {\n        case 1:\n          component1 = this.components[0];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 2:\n          // PDF might compress two component data in custom colorspace\n          component1 = this.components[0];\n          component2 = this.components[1];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n              data[offset++] = Y;\n              Y = component2Line[0 | (x * component2.scaleX * scaleX)];\n              data[offset++] = Y;\n            }\n          }\n          break;\n        case 3:\n          // The default transform for three components is true\n          colorTransform = true;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.opts.colorTransform !== 'undefined')\n            colorTransform = !!this.opts.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                R = component1Line[0 | (x * component1.scaleX * scaleX)];\n                G = component2Line[0 | (x * component2.scaleX * scaleX)];\n                B = component3Line[0 | (x * component3.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n\n                R = clampTo8bit(Y + 1.402 * (Cr - 128));\n                G = clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                B = clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n\n              data[offset++] = R;\n              data[offset++] = G;\n              data[offset++] = B;\n            }\n          }\n          break;\n        case 4:\n          if (!this.adobe)\n            throw new Error('Unsupported color mode (4 components)');\n          // The default transform for four components is false\n          colorTransform = false;\n          // The adobe transform marker overrides any previous setting\n          if (this.adobe && this.adobe.transformCode)\n            colorTransform = true;\n          else if (typeof this.opts.colorTransform !== 'undefined')\n            colorTransform = !!this.opts.colorTransform;\n\n          component1 = this.components[0];\n          component2 = this.components[1];\n          component3 = this.components[2];\n          component4 = this.components[3];\n          for (y = 0; y < height; y++) {\n            component1Line = component1.lines[0 | (y * component1.scaleY * scaleY)];\n            component2Line = component2.lines[0 | (y * component2.scaleY * scaleY)];\n            component3Line = component3.lines[0 | (y * component3.scaleY * scaleY)];\n            component4Line = component4.lines[0 | (y * component4.scaleY * scaleY)];\n            for (x = 0; x < width; x++) {\n              if (!colorTransform) {\n                C = component1Line[0 | (x * component1.scaleX * scaleX)];\n                M = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Ye = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n              } else {\n                Y = component1Line[0 | (x * component1.scaleX * scaleX)];\n                Cb = component2Line[0 | (x * component2.scaleX * scaleX)];\n                Cr = component3Line[0 | (x * component3.scaleX * scaleX)];\n                K = component4Line[0 | (x * component4.scaleX * scaleX)];\n\n                C = 255 - clampTo8bit(Y + 1.402 * (Cr - 128));\n                M = 255 - clampTo8bit(Y - 0.3441363 * (Cb - 128) - 0.71413636 * (Cr - 128));\n                Ye = 255 - clampTo8bit(Y + 1.772 * (Cb - 128));\n              }\n              data[offset++] = 255-C;\n              data[offset++] = 255-M;\n              data[offset++] = 255-Ye;\n              data[offset++] = 255-K;\n            }\n          }\n          break;\n        default:\n          throw new Error('Unsupported color mode');\n      }\n      return data;\n    },\n    copyToImageData: function copyToImageData(imageData, formatAsRGBA) {\n      var width = imageData.width, height = imageData.height;\n      var imageDataArray = imageData.data;\n      var data = this.getData(width, height);\n      var i = 0, j = 0, x, y;\n      var Y, K, C, M, R, G, B;\n      switch (this.components.length) {\n        case 1:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              Y = data[i++];\n\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              imageDataArray[j++] = Y;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        case 3:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              R = data[i++];\n              G = data[i++];\n              B = data[i++];\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        case 4:\n          for (y = 0; y < height; y++) {\n            for (x = 0; x < width; x++) {\n              C = data[i++];\n              M = data[i++];\n              Y = data[i++];\n              K = data[i++];\n\n              R = 255 - clampTo8bit(C * (1 - K / 255) + K);\n              G = 255 - clampTo8bit(M * (1 - K / 255) + K);\n              B = 255 - clampTo8bit(Y * (1 - K / 255) + K);\n\n              imageDataArray[j++] = R;\n              imageDataArray[j++] = G;\n              imageDataArray[j++] = B;\n              if (formatAsRGBA) {\n                imageDataArray[j++] = 255;\n              }\n            }\n          }\n          break;\n        default:\n          throw new Error('Unsupported color mode');\n      }\n    }\n  };\n\n\n  // We cap the amount of memory used by jpeg-js to avoid unexpected OOMs from untrusted content.\n  var totalBytesAllocated = 0;\n  var maxMemoryUsageBytes = 0;\n  function requestMemoryAllocation(increaseAmount = 0) {\n    var totalMemoryImpactBytes = totalBytesAllocated + increaseAmount;\n    if (totalMemoryImpactBytes > maxMemoryUsageBytes) {\n      var exceededAmount = Math.ceil((totalMemoryImpactBytes - maxMemoryUsageBytes) / 1024 / 1024);\n      throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${exceededAmount}MB`);\n    }\n\n    totalBytesAllocated = totalMemoryImpactBytes;\n  }\n\n  constructor.resetMaxMemoryUsage = function (maxMemoryUsageBytes_) {\n    totalBytesAllocated = 0;\n    maxMemoryUsageBytes = maxMemoryUsageBytes_;\n  };\n\n  constructor.getBytesAllocated = function () {\n    return totalBytesAllocated;\n  };\n\n  constructor.requestMemoryAllocation = requestMemoryAllocation;\n\n  return constructor;\n})();\n\nif (typeof module !== 'undefined') {\n\tmodule.exports = decode;\n} else if (typeof window !== 'undefined') {\n\twindow['jpeg-js'] = window['jpeg-js'] || {};\n\twindow['jpeg-js'].decode = decode;\n}\n\nfunction decode(jpegData, userOpts = {}) {\n  var defaultOpts = {\n    // \"undefined\" means \"Choose whether to transform colors based on the images color model.\"\n    colorTransform: undefined,\n    useTArray: false,\n    formatAsRGBA: true,\n    tolerantDecoding: true,\n    maxResolutionInMP: 100, // Don't decode more than 100 megapixels\n    maxMemoryUsageInMB: 512, // Don't decode if memory footprint is more than 512MB\n  };\n\n  var opts = {...defaultOpts, ...userOpts};\n  var arr = new Uint8Array(jpegData);\n  var decoder = new JpegImage();\n  decoder.opts = opts;\n  // If this constructor ever supports async decoding this will need to be done differently.\n  // Until then, treating as singleton limit is fine.\n  JpegImage.resetMaxMemoryUsage(opts.maxMemoryUsageInMB * 1024 * 1024);\n  decoder.parse(arr);\n\n  var channels = (opts.formatAsRGBA) ? 4 : 3;\n  var bytesNeeded = decoder.width * decoder.height * channels;\n  try {\n    JpegImage.requestMemoryAllocation(bytesNeeded);\n    var image = {\n      width: decoder.width,\n      height: decoder.height,\n      exifBuffer: decoder.exifBuffer,\n      data: opts.useTArray ?\n        new Uint8Array(bytesNeeded) :\n        Buffer.alloc(bytesNeeded)\n    };\n    if(decoder.comments.length > 0) {\n      image[\"comments\"] = decoder.comments;\n    }\n  } catch (err){\n    if (err instanceof RangeError){\n      throw new Error(\"Could not allocate enough memory for the image. \" +\n                      \"Required: \" + bytesNeeded);\n    } else {\n      throw err;\n    }\n  }\n\n  decoder.copyToImageData(image, opts.formatAsRGBA);\n\n  return image;\n}\n","/*\n  Copyright (c) 2008, Adobe Systems Incorporated\n  All rights reserved.\n\n  Redistribution and use in source and binary forms, with or without \n  modification, are permitted provided that the following conditions are\n  met:\n\n  * Redistributions of source code must retain the above copyright notice, \n    this list of conditions and the following disclaimer.\n  \n  * Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in the \n    documentation and/or other materials provided with the distribution.\n  \n  * Neither the name of Adobe Systems Incorporated nor the names of its \n    contributors may be used to endorse or promote products derived from \n    this software without specific prior written permission.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n  IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR \n  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/*\nJPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n\nBasic GUI blocking jpeg encoder\n*/\n\nvar btoa = btoa || function(buf) {\n  return Buffer.from(buf).toString('base64');\n};\n\nfunction JPEGEncoder(quality) {\n  var self = this;\n\tvar fround = Math.round;\n\tvar ffloor = Math.floor;\n\tvar YTable = new Array(64);\n\tvar UVTable = new Array(64);\n\tvar fdtbl_Y = new Array(64);\n\tvar fdtbl_UV = new Array(64);\n\tvar YDC_HT;\n\tvar UVDC_HT;\n\tvar YAC_HT;\n\tvar UVAC_HT;\n\t\n\tvar bitcode = new Array(65535);\n\tvar category = new Array(65535);\n\tvar outputfDCTQuant = new Array(64);\n\tvar DU = new Array(64);\n\tvar byteout = [];\n\tvar bytenew = 0;\n\tvar bytepos = 7;\n\t\n\tvar YDU = new Array(64);\n\tvar UDU = new Array(64);\n\tvar VDU = new Array(64);\n\tvar clt = new Array(256);\n\tvar RGB_YUV_TABLE = new Array(2048);\n\tvar currentQuality;\n\t\n\tvar ZigZag = [\n\t\t\t 0, 1, 5, 6,14,15,27,28,\n\t\t\t 2, 4, 7,13,16,26,29,42,\n\t\t\t 3, 8,12,17,25,30,41,43,\n\t\t\t 9,11,18,24,31,40,44,53,\n\t\t\t10,19,23,32,39,45,52,54,\n\t\t\t20,22,33,38,46,51,55,60,\n\t\t\t21,34,37,47,50,56,59,61,\n\t\t\t35,36,48,49,57,58,62,63\n\t\t];\n\t\n\tvar std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n\tvar std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n\tvar std_ac_luminance_values = [\n\t\t\t0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n\t\t\t0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n\t\t\t0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n\t\t\t0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n\t\t\t0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n\t\t\t0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n\t\t\t0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n\t\t\t0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n\t\t\t0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n\t\t\t0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n\t\t\t0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n\t\t\t0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n\t\t\t0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n\t\t\t0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n\t\t\t0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n\t\t\t0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n\t\t\t0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n\t\t\t0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n\t\t\t0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n\t\t\t0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tvar std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n\tvar std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\tvar std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n\tvar std_ac_chrominance_values = [\n\t\t\t0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n\t\t\t0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n\t\t\t0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n\t\t\t0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n\t\t\t0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n\t\t\t0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n\t\t\t0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n\t\t\t0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n\t\t\t0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n\t\t\t0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n\t\t\t0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n\t\t\t0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n\t\t\t0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n\t\t\t0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n\t\t\t0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n\t\t\t0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n\t\t\t0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n\t\t\t0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n\t\t\t0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n\t\t\t0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t\t\t0xf9,0xfa\n\t\t];\n\t\n\tfunction initQuantTables(sf){\n\t\t\tvar YQT = [\n\t\t\t\t16, 11, 10, 16, 24, 40, 51, 61,\n\t\t\t\t12, 12, 14, 19, 26, 58, 60, 55,\n\t\t\t\t14, 13, 16, 24, 40, 57, 69, 56,\n\t\t\t\t14, 17, 22, 29, 51, 87, 80, 62,\n\t\t\t\t18, 22, 37, 56, 68,109,103, 77,\n\t\t\t\t24, 35, 55, 64, 81,104,113, 92,\n\t\t\t\t49, 64, 78, 87,103,121,120,101,\n\t\t\t\t72, 92, 95, 98,112,100,103, 99\n\t\t\t];\n\t\t\t\n\t\t\tfor (var i = 0; i < 64; i++) {\n\t\t\t\tvar t = ffloor((YQT[i]*sf+50)/100);\n\t\t\t\tif (t < 1) {\n\t\t\t\t\tt = 1;\n\t\t\t\t} else if (t > 255) {\n\t\t\t\t\tt = 255;\n\t\t\t\t}\n\t\t\t\tYTable[ZigZag[i]] = t;\n\t\t\t}\n\t\t\tvar UVQT = [\n\t\t\t\t17, 18, 24, 47, 99, 99, 99, 99,\n\t\t\t\t18, 21, 26, 66, 99, 99, 99, 99,\n\t\t\t\t24, 26, 56, 99, 99, 99, 99, 99,\n\t\t\t\t47, 66, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99,\n\t\t\t\t99, 99, 99, 99, 99, 99, 99, 99\n\t\t\t];\n\t\t\tfor (var j = 0; j < 64; j++) {\n\t\t\t\tvar u = ffloor((UVQT[j]*sf+50)/100);\n\t\t\t\tif (u < 1) {\n\t\t\t\t\tu = 1;\n\t\t\t\t} else if (u > 255) {\n\t\t\t\t\tu = 255;\n\t\t\t\t}\n\t\t\t\tUVTable[ZigZag[j]] = u;\n\t\t\t}\n\t\t\tvar aasf = [\n\t\t\t\t1.0, 1.387039845, 1.306562965, 1.175875602,\n\t\t\t\t1.0, 0.785694958, 0.541196100, 0.275899379\n\t\t\t];\n\t\t\tvar k = 0;\n\t\t\tfor (var row = 0; row < 8; row++)\n\t\t\t{\n\t\t\t\tfor (var col = 0; col < 8; col++)\n\t\t\t\t{\n\t\t\t\t\tfdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tfdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t\t\t\t\tk++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction computeHuffmanTbl(nrcodes, std_table){\n\t\t\tvar codevalue = 0;\n\t\t\tvar pos_in_table = 0;\n\t\t\tvar HT = new Array();\n\t\t\tfor (var k = 1; k <= 16; k++) {\n\t\t\t\tfor (var j = 1; j <= nrcodes[k]; j++) {\n\t\t\t\t\tHT[std_table[pos_in_table]] = [];\n\t\t\t\t\tHT[std_table[pos_in_table]][0] = codevalue;\n\t\t\t\t\tHT[std_table[pos_in_table]][1] = k;\n\t\t\t\t\tpos_in_table++;\n\t\t\t\t\tcodevalue++;\n\t\t\t\t}\n\t\t\t\tcodevalue*=2;\n\t\t\t}\n\t\t\treturn HT;\n\t\t}\n\t\t\n\t\tfunction initHuffmanTbl()\n\t\t{\n\t\t\tYDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n\t\t\tUVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n\t\t\tYAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n\t\t\tUVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n\t\t}\n\t\n\t\tfunction initCategoryNumber()\n\t\t{\n\t\t\tvar nrlower = 1;\n\t\t\tvar nrupper = 2;\n\t\t\tfor (var cat = 1; cat <= 15; cat++) {\n\t\t\t\t//Positive numbers\n\t\t\t\tfor (var nr = nrlower; nr<nrupper; nr++) {\n\t\t\t\t\tcategory[32767+nr] = cat;\n\t\t\t\t\tbitcode[32767+nr] = [];\n\t\t\t\t\tbitcode[32767+nr][1] = cat;\n\t\t\t\t\tbitcode[32767+nr][0] = nr;\n\t\t\t\t}\n\t\t\t\t//Negative numbers\n\t\t\t\tfor (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n\t\t\t\t\tcategory[32767+nrneg] = cat;\n\t\t\t\t\tbitcode[32767+nrneg] = [];\n\t\t\t\t\tbitcode[32767+nrneg][1] = cat;\n\t\t\t\t\tbitcode[32767+nrneg][0] = nrupper-1+nrneg;\n\t\t\t\t}\n\t\t\t\tnrlower <<= 1;\n\t\t\t\tnrupper <<= 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction initRGBYUVTable() {\n\t\t\tfor(var i = 0; i < 256;i++) {\n\t\t\t\tRGB_YUV_TABLE[i]      \t\t=  19595 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 256)>>0] \t=  38470 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+ 512)>>0] \t=   7471 * i + 0x8000;\n\t\t\t\tRGB_YUV_TABLE[(i+ 768)>>0] \t= -11059 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1024)>>0] \t= -21709 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1280)>>0] \t=  32768 * i + 0x807FFF;\n\t\t\t\tRGB_YUV_TABLE[(i+1536)>>0] \t= -27439 * i;\n\t\t\t\tRGB_YUV_TABLE[(i+1792)>>0] \t= - 5329 * i;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// IO functions\n\t\tfunction writeBits(bs)\n\t\t{\n\t\t\tvar value = bs[0];\n\t\t\tvar posval = bs[1]-1;\n\t\t\twhile ( posval >= 0 ) {\n\t\t\t\tif (value & (1 << posval) ) {\n\t\t\t\t\tbytenew |= (1 << bytepos);\n\t\t\t\t}\n\t\t\t\tposval--;\n\t\t\t\tbytepos--;\n\t\t\t\tif (bytepos < 0) {\n\t\t\t\t\tif (bytenew == 0xFF) {\n\t\t\t\t\t\twriteByte(0xFF);\n\t\t\t\t\t\twriteByte(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\twriteByte(bytenew);\n\t\t\t\t\t}\n\t\t\t\t\tbytepos=7;\n\t\t\t\t\tbytenew=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeByte(value)\n\t\t{\n\t\t\t//byteout.push(clt[value]); // write char directly instead of converting later\n      byteout.push(value);\n\t\t}\n\t\n\t\tfunction writeWord(value)\n\t\t{\n\t\t\twriteByte((value>>8)&0xFF);\n\t\t\twriteByte((value   )&0xFF);\n\t\t}\n\t\t\n\t\t// DCT & quantization core\n\t\tfunction fDCTQuant(data, fdtbl)\n\t\t{\n\t\t\tvar d0, d1, d2, d3, d4, d5, d6, d7;\n\t\t\t/* Pass 1: process rows. */\n\t\t\tvar dataOff=0;\n\t\t\tvar i;\n\t\t\tvar I8 = 8;\n\t\t\tvar I64 = 64;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff+1];\n\t\t\t\td2 = data[dataOff+2];\n\t\t\t\td3 = data[dataOff+3];\n\t\t\t\td4 = data[dataOff+4];\n\t\t\t\td5 = data[dataOff+5];\n\t\t\t\td6 = data[dataOff+6];\n\t\t\t\td7 = data[dataOff+7];\n\t\t\t\t\n\t\t\t\tvar tmp0 = d0 + d7;\n\t\t\t\tvar tmp7 = d0 - d7;\n\t\t\t\tvar tmp1 = d1 + d6;\n\t\t\t\tvar tmp6 = d1 - d6;\n\t\t\t\tvar tmp2 = d2 + d5;\n\t\t\t\tvar tmp5 = d2 - d5;\n\t\t\t\tvar tmp3 = d3 + d4;\n\t\t\t\tvar tmp4 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10 = tmp0 + tmp3;\t/* phase 2 */\n\t\t\t\tvar tmp13 = tmp0 - tmp3;\n\t\t\t\tvar tmp11 = tmp1 + tmp2;\n\t\t\t\tvar tmp12 = tmp1 - tmp2;\n\t\n\t\t\t\tdata[dataOff] = tmp10 + tmp11; /* phase 3 */\n\t\t\t\tdata[dataOff+4] = tmp10 - tmp11;\n\t\n\t\t\t\tvar z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+2] = tmp13 + z1; /* phase 5 */\n\t\t\t\tdata[dataOff+6] = tmp13 - z1;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10 = tmp4 + tmp5; /* phase 2 */\n\t\t\t\ttmp11 = tmp5 + tmp6;\n\t\t\t\ttmp12 = tmp6 + tmp7;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n\t\t\t\tvar z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n\t\t\t\tvar z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n\t\t\t\tvar z3 = tmp11 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11 = tmp7 + z3;\t/* phase 5 */\n\t\t\t\tvar z13 = tmp7 - z3;\n\t\n\t\t\t\tdata[dataOff+5] = z13 + z2;\t/* phase 6 */\n\t\t\t\tdata[dataOff+3] = z13 - z2;\n\t\t\t\tdata[dataOff+1] = z11 + z4;\n\t\t\t\tdata[dataOff+7] = z11 - z4;\n\t\n\t\t\t\tdataOff += 8; /* advance pointer to next row */\n\t\t\t}\n\t\n\t\t\t/* Pass 2: process columns. */\n\t\t\tdataOff = 0;\n\t\t\tfor (i=0; i<I8; ++i)\n\t\t\t{\n\t\t\t\td0 = data[dataOff];\n\t\t\t\td1 = data[dataOff + 8];\n\t\t\t\td2 = data[dataOff + 16];\n\t\t\t\td3 = data[dataOff + 24];\n\t\t\t\td4 = data[dataOff + 32];\n\t\t\t\td5 = data[dataOff + 40];\n\t\t\t\td6 = data[dataOff + 48];\n\t\t\t\td7 = data[dataOff + 56];\n\t\t\t\t\n\t\t\t\tvar tmp0p2 = d0 + d7;\n\t\t\t\tvar tmp7p2 = d0 - d7;\n\t\t\t\tvar tmp1p2 = d1 + d6;\n\t\t\t\tvar tmp6p2 = d1 - d6;\n\t\t\t\tvar tmp2p2 = d2 + d5;\n\t\t\t\tvar tmp5p2 = d2 - d5;\n\t\t\t\tvar tmp3p2 = d3 + d4;\n\t\t\t\tvar tmp4p2 = d3 - d4;\n\t\n\t\t\t\t/* Even part */\n\t\t\t\tvar tmp10p2 = tmp0p2 + tmp3p2;\t/* phase 2 */\n\t\t\t\tvar tmp13p2 = tmp0p2 - tmp3p2;\n\t\t\t\tvar tmp11p2 = tmp1p2 + tmp2p2;\n\t\t\t\tvar tmp12p2 = tmp1p2 - tmp2p2;\n\t\n\t\t\t\tdata[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n\t\t\t\tdata[dataOff+32] = tmp10p2 - tmp11p2;\n\t\n\t\t\t\tvar z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n\t\t\t\tdata[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n\t\t\t\tdata[dataOff+48] = tmp13p2 - z1p2;\n\t\n\t\t\t\t/* Odd part */\n\t\t\t\ttmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n\t\t\t\ttmp11p2 = tmp5p2 + tmp6p2;\n\t\t\t\ttmp12p2 = tmp6p2 + tmp7p2;\n\t\n\t\t\t\t/* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t\t\t\tvar z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n\t\t\t\tvar z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n\t\t\t\tvar z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n\t\t\t\tvar z3p2 = tmp11p2 * 0.707106781; /* c4 */\n\t\n\t\t\t\tvar z11p2 = tmp7p2 + z3p2;\t/* phase 5 */\n\t\t\t\tvar z13p2 = tmp7p2 - z3p2;\n\t\n\t\t\t\tdata[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n\t\t\t\tdata[dataOff+24] = z13p2 - z2p2;\n\t\t\t\tdata[dataOff+ 8] = z11p2 + z4p2;\n\t\t\t\tdata[dataOff+56] = z11p2 - z4p2;\n\t\n\t\t\t\tdataOff++; /* advance pointer to next column */\n\t\t\t}\n\t\n\t\t\t// Quantize/descale the coefficients\n\t\t\tvar fDCTQuant;\n\t\t\tfor (i=0; i<I64; ++i)\n\t\t\t{\n\t\t\t\t// Apply the quantization and scaling factor & Round to nearest integer\n\t\t\t\tfDCTQuant = data[i]*fdtbl[i];\n\t\t\t\toutputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n\t\t\t\t//outputfDCTQuant[i] = fround(fDCTQuant);\n\n\t\t\t}\n\t\t\treturn outputfDCTQuant;\n\t\t}\n\t\t\n\t\tfunction writeAPP0()\n\t\t{\n\t\t\twriteWord(0xFFE0); // marker\n\t\t\twriteWord(16); // length\n\t\t\twriteByte(0x4A); // J\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0x49); // I\n\t\t\twriteByte(0x46); // F\n\t\t\twriteByte(0); // = \"JFIF\",'\\0'\n\t\t\twriteByte(1); // versionhi\n\t\t\twriteByte(1); // versionlo\n\t\t\twriteByte(0); // xyunits\n\t\t\twriteWord(1); // xdensity\n\t\t\twriteWord(1); // ydensity\n\t\t\twriteByte(0); // thumbnwidth\n\t\t\twriteByte(0); // thumbnheight\n\t\t}\n\n\t\tfunction writeAPP1(exifBuffer) {\n\t\t\tif (!exifBuffer) return;\n\n\t\t\twriteWord(0xFFE1); // APP1 marker\n\n\t\t\tif (exifBuffer[0] === 0x45 &&\n\t\t\t\t\texifBuffer[1] === 0x78 &&\n\t\t\t\t\texifBuffer[2] === 0x69 &&\n\t\t\t\t\texifBuffer[3] === 0x66) {\n\t\t\t\t// Buffer already starts with EXIF, just use it directly\n\t\t\t\twriteWord(exifBuffer.length + 2); // length is buffer + length itself!\n\t\t\t} else {\n\t\t\t\t// Buffer doesn't start with EXIF, write it for them\n\t\t\t\twriteWord(exifBuffer.length + 5 + 2); // length is buffer + EXIF\\0 + length itself!\n\t\t\t\twriteByte(0x45); // E\n\t\t\t\twriteByte(0x78); // X\n\t\t\t\twriteByte(0x69); // I\n\t\t\t\twriteByte(0x66); // F\n\t\t\t\twriteByte(0); // = \"EXIF\",'\\0'\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < exifBuffer.length; i++) {\n\t\t\t\twriteByte(exifBuffer[i]);\n\t\t\t}\n\t\t}\n\n\t\tfunction writeSOF0(width, height)\n\t\t{\n\t\t\twriteWord(0xFFC0); // marker\n\t\t\twriteWord(17);   // length, truecolor YUV JPG\n\t\t\twriteByte(8);    // precision\n\t\t\twriteWord(height);\n\t\t\twriteWord(width);\n\t\t\twriteByte(3);    // nrofcomponents\n\t\t\twriteByte(1);    // IdY\n\t\t\twriteByte(0x11); // HVY\n\t\t\twriteByte(0);    // QTY\n\t\t\twriteByte(2);    // IdU\n\t\t\twriteByte(0x11); // HVU\n\t\t\twriteByte(1);    // QTU\n\t\t\twriteByte(3);    // IdV\n\t\t\twriteByte(0x11); // HVV\n\t\t\twriteByte(1);    // QTV\n\t\t}\n\t\n\t\tfunction writeDQT()\n\t\t{\n\t\t\twriteWord(0xFFDB); // marker\n\t\t\twriteWord(132);\t   // length\n\t\t\twriteByte(0);\n\t\t\tfor (var i=0; i<64; i++) {\n\t\t\t\twriteByte(YTable[i]);\n\t\t\t}\n\t\t\twriteByte(1);\n\t\t\tfor (var j=0; j<64; j++) {\n\t\t\t\twriteByte(UVTable[j]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeDHT()\n\t\t{\n\t\t\twriteWord(0xFFC4); // marker\n\t\t\twriteWord(0x01A2); // length\n\t\n\t\t\twriteByte(0); // HTYDCinfo\n\t\t\tfor (var i=0; i<16; i++) {\n\t\t\t\twriteByte(std_dc_luminance_nrcodes[i+1]);\n\t\t\t}\n\t\t\tfor (var j=0; j<=11; j++) {\n\t\t\t\twriteByte(std_dc_luminance_values[j]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x10); // HTYACinfo\n\t\t\tfor (var k=0; k<16; k++) {\n\t\t\t\twriteByte(std_ac_luminance_nrcodes[k+1]);\n\t\t\t}\n\t\t\tfor (var l=0; l<=161; l++) {\n\t\t\t\twriteByte(std_ac_luminance_values[l]);\n\t\t\t}\n\t\n\t\t\twriteByte(1); // HTUDCinfo\n\t\t\tfor (var m=0; m<16; m++) {\n\t\t\t\twriteByte(std_dc_chrominance_nrcodes[m+1]);\n\t\t\t}\n\t\t\tfor (var n=0; n<=11; n++) {\n\t\t\t\twriteByte(std_dc_chrominance_values[n]);\n\t\t\t}\n\t\n\t\t\twriteByte(0x11); // HTUACinfo\n\t\t\tfor (var o=0; o<16; o++) {\n\t\t\t\twriteByte(std_ac_chrominance_nrcodes[o+1]);\n\t\t\t}\n\t\t\tfor (var p=0; p<=161; p++) {\n\t\t\t\twriteByte(std_ac_chrominance_values[p]);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction writeSOS()\n\t\t{\n\t\t\twriteWord(0xFFDA); // marker\n\t\t\twriteWord(12); // length\n\t\t\twriteByte(3); // nrofcomponents\n\t\t\twriteByte(1); // IdY\n\t\t\twriteByte(0); // HTY\n\t\t\twriteByte(2); // IdU\n\t\t\twriteByte(0x11); // HTU\n\t\t\twriteByte(3); // IdV\n\t\t\twriteByte(0x11); // HTV\n\t\t\twriteByte(0); // Ss\n\t\t\twriteByte(0x3f); // Se\n\t\t\twriteByte(0); // Bf\n\t\t}\n\t\t\n\t\tfunction processDU(CDU, fdtbl, DC, HTDC, HTAC){\n\t\t\tvar EOB = HTAC[0x00];\n\t\t\tvar M16zeroes = HTAC[0xF0];\n\t\t\tvar pos;\n\t\t\tvar I16 = 16;\n\t\t\tvar I63 = 63;\n\t\t\tvar I64 = 64;\n\t\t\tvar DU_DCT = fDCTQuant(CDU, fdtbl);\n\t\t\t//ZigZag reorder\n\t\t\tfor (var j=0;j<I64;++j) {\n\t\t\t\tDU[ZigZag[j]]=DU_DCT[j];\n\t\t\t}\n\t\t\tvar Diff = DU[0] - DC; DC = DU[0];\n\t\t\t//Encode DC\n\t\t\tif (Diff==0) {\n\t\t\t\twriteBits(HTDC[0]); // Diff might be 0\n\t\t\t} else {\n\t\t\t\tpos = 32767+Diff;\n\t\t\t\twriteBits(HTDC[category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t}\n\t\t\t//Encode ACs\n\t\t\tvar end0pos = 63; // was const... which is crazy\n\t\t\tfor (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {};\n\t\t\t//end0pos = first element in reverse order !=0\n\t\t\tif ( end0pos == 0) {\n\t\t\t\twriteBits(EOB);\n\t\t\t\treturn DC;\n\t\t\t}\n\t\t\tvar i = 1;\n\t\t\tvar lng;\n\t\t\twhile ( i <= end0pos ) {\n\t\t\t\tvar startpos = i;\n\t\t\t\tfor (; (DU[i]==0) && (i<=end0pos); ++i) {}\n\t\t\t\tvar nrzeroes = i-startpos;\n\t\t\t\tif ( nrzeroes >= I16 ) {\n\t\t\t\t\tlng = nrzeroes>>4;\n\t\t\t\t\tfor (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n\t\t\t\t\t\twriteBits(M16zeroes);\n\t\t\t\t\tnrzeroes = nrzeroes&0xF;\n\t\t\t\t}\n\t\t\t\tpos = 32767+DU[i];\n\t\t\t\twriteBits(HTAC[(nrzeroes<<4)+category[pos]]);\n\t\t\t\twriteBits(bitcode[pos]);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif ( end0pos != I63 ) {\n\t\t\t\twriteBits(EOB);\n\t\t\t}\n\t\t\treturn DC;\n\t\t}\n\n\t\tfunction initCharLookupTable(){\n\t\t\tvar sfcc = String.fromCharCode;\n\t\t\tfor(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n\t\t\t\tclt[i] = sfcc(i);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.encode = function(image,quality) // image data object\n\t\t{\n\t\t\tvar time_start = new Date().getTime();\n\t\t\t\n\t\t\tif(quality) setQuality(quality);\n\t\t\t\n\t\t\t// Initialize bit writer\n\t\t\tbyteout = new Array();\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\n\t\t\t// Add JPEG headers\n\t\t\twriteWord(0xFFD8); // SOI\n\t\t\twriteAPP0();\n\t\t\twriteAPP1(image.exifBuffer);\n\t\t\twriteDQT();\n\t\t\twriteSOF0(image.width,image.height);\n\t\t\twriteDHT();\n\t\t\twriteSOS();\n\n\t\n\t\t\t// Encode 8x8 macroblocks\n\t\t\tvar DCY=0;\n\t\t\tvar DCU=0;\n\t\t\tvar DCV=0;\n\t\t\t\n\t\t\tbytenew=0;\n\t\t\tbytepos=7;\n\t\t\t\n\t\t\t\n\t\t\tthis.encode.displayName = \"_encode_\";\n\n\t\t\tvar imageData = image.data;\n\t\t\tvar width = image.width;\n\t\t\tvar height = image.height;\n\n\t\t\tvar quadWidth = width*4;\n\t\t\tvar tripleWidth = width*3;\n\t\t\t\n\t\t\tvar x, y = 0;\n\t\t\tvar r, g, b;\n\t\t\tvar start,p, col,row,pos;\n\t\t\twhile(y < height){\n\t\t\t\tx = 0;\n\t\t\t\twhile(x < quadWidth){\n\t\t\t\tstart = quadWidth * y + x;\n\t\t\t\tp = start;\n\t\t\t\tcol = -1;\n\t\t\t\trow = 0;\n\t\t\t\t\n\t\t\t\tfor(pos=0; pos < 64; pos++){\n\t\t\t\t\trow = pos >> 3;// /8\n\t\t\t\t\tcol = ( pos & 7 ) * 4; // %8\n\t\t\t\t\tp = start + ( row * quadWidth ) + col;\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(y+row >= height){ // padding bottom\n\t\t\t\t\t\tp-= (quadWidth*(y+1+row-height));\n\t\t\t\t\t}\n\n\t\t\t\t\tif(x+col >= quadWidth){ // padding right\t\n\t\t\t\t\t\tp-= ((x+col) - quadWidth +4)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tr = imageData[ p++ ];\n\t\t\t\t\tg = imageData[ p++ ];\n\t\t\t\t\tb = imageData[ p++ ];\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t/* // calculate YUV values dynamically\n\t\t\t\t\tYDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n\t\t\t\t\tUDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n\t\t\t\t\tVDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n\t\t\t\t\t*/\n\t\t\t\t\t\n\t\t\t\t\t// use lookup table (slightly faster)\n\t\t\t\t\tYDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n\t\t\t\t\tUDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n\t\t\t\t\tVDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tDCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n\t\t\t\tDCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n\t\t\t\tDCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n\t\t\t\tx+=32;\n\t\t\t\t}\n\t\t\t\ty+=8;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t////////////////////////////////////////////////////////////////\n\t\n\t\t\t// Do the bit alignment of the EOI marker\n\t\t\tif ( bytepos >= 0 ) {\n\t\t\t\tvar fillbits = [];\n\t\t\t\tfillbits[1] = bytepos+1;\n\t\t\t\tfillbits[0] = (1<<(bytepos+1))-1;\n\t\t\t\twriteBits(fillbits);\n\t\t\t}\n\t\n\t\t\twriteWord(0xFFD9); //EOI\n\n\t\t\tif (typeof module === 'undefined') return new Uint8Array(byteout);\n      return Buffer.from(byteout);\n\n\t\t\tvar jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n\t\t\t\n\t\t\tbyteout = [];\n\t\t\t\n\t\t\t// benchmarking\n\t\t\tvar duration = new Date().getTime() - time_start;\n    \t\t//console.log('Encoding time: '+ duration + 'ms');\n    \t\t//\n\t\t\t\n\t\t\treturn jpegDataUri\t\t\t\n\t}\n\t\n\tfunction setQuality(quality){\n\t\tif (quality <= 0) {\n\t\t\tquality = 1;\n\t\t}\n\t\tif (quality > 100) {\n\t\t\tquality = 100;\n\t\t}\n\t\t\n\t\tif(currentQuality == quality) return // don't recalc if unchanged\n\t\t\n\t\tvar sf = 0;\n\t\tif (quality < 50) {\n\t\t\tsf = Math.floor(5000 / quality);\n\t\t} else {\n\t\t\tsf = Math.floor(200 - quality*2);\n\t\t}\n\t\t\n\t\tinitQuantTables(sf);\n\t\tcurrentQuality = quality;\n\t\t//console.log('Quality set to: '+quality +'%');\n\t}\n\t\n\tfunction init(){\n\t\tvar time_start = new Date().getTime();\n\t\tif(!quality) quality = 50;\n\t\t// Create tables\n\t\tinitCharLookupTable()\n\t\tinitHuffmanTbl();\n\t\tinitCategoryNumber();\n\t\tinitRGBYUVTable();\n\t\t\n\t\tsetQuality(quality);\n\t\tvar duration = new Date().getTime() - time_start;\n    \t//console.log('Initialization '+ duration + 'ms');\n\t}\n\t\n\tinit();\n\t\n};\n\nif (typeof module !== 'undefined') {\n\tmodule.exports = encode;\n} else if (typeof window !== 'undefined') {\n\twindow['jpeg-js'] = window['jpeg-js'] || {};\n\twindow['jpeg-js'].encode = encode;\n}\n\nfunction encode(imgData, qu) {\n  if (typeof qu === 'undefined') qu = 50;\n  var encoder = new JPEGEncoder(qu);\n\tvar data = encoder.encode(imgData, qu);\n  return {\n    data: data,\n    width: imgData.width,\n    height: imgData.height\n  };\n}\n\n// helper function to get the imageData of an existing image on the current page.\nfunction getImageDataFromImage(idOrElement){\n\tvar theImg = (typeof(idOrElement)=='string')? document.getElementById(idOrElement):idOrElement;\n\tvar cvs = document.createElement('canvas');\n\tcvs.width = theImg.width;\n\tcvs.height = theImg.height;\n\tvar ctx = cvs.getContext(\"2d\");\n\tctx.drawImage(theImg,0,0);\n\t\n\treturn (ctx.getImageData(0, 0, cvs.width, cvs.height));\n}\n","'use strict';\n\n/**\n * @param typeMap [Object] Map of MIME type -> Array[extensions]\n * @param ...\n */\nfunction Mime() {\n  this._types = Object.create(null);\n  this._extensions = Object.create(null);\n\n  for (let i = 0; i < arguments.length; i++) {\n    this.define(arguments[i]);\n  }\n\n  this.define = this.define.bind(this);\n  this.getType = this.getType.bind(this);\n  this.getExtension = this.getExtension.bind(this);\n}\n\n/**\n * Define mimetype -> extension mappings.  Each key is a mime-type that maps\n * to an array of extensions associated with the type.  The first extension is\n * used as the default extension for the type.\n *\n * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});\n *\n * If a type declares an extension that has already been defined, an error will\n * be thrown.  To suppress this error and force the extension to be associated\n * with the new type, pass `force`=true.  Alternatively, you may prefix the\n * extension with \"*\" to map the type to extension, without mapping the\n * extension to the type.\n *\n * e.g. mime.define({'audio/wav', ['wav']}, {'audio/x-wav', ['*wav']});\n *\n *\n * @param map (Object) type definitions\n * @param force (Boolean) if true, force overriding of existing definitions\n */\nMime.prototype.define = function(typeMap, force) {\n  for (let type in typeMap) {\n    let extensions = typeMap[type].map(function(t) {\n      return t.toLowerCase();\n    });\n    type = type.toLowerCase();\n\n    for (let i = 0; i < extensions.length; i++) {\n      const ext = extensions[i];\n\n      // '*' prefix = not the preferred type for this extension.  So fixup the\n      // extension, and skip it.\n      if (ext[0] === '*') {\n        continue;\n      }\n\n      if (!force && (ext in this._types)) {\n        throw new Error(\n          'Attempt to change mapping for \"' + ext +\n          '\" extension from \"' + this._types[ext] + '\" to \"' + type +\n          '\". Pass `force=true` to allow this, otherwise remove \"' + ext +\n          '\" from the list of extensions for \"' + type + '\".'\n        );\n      }\n\n      this._types[ext] = type;\n    }\n\n    // Use first extension as default\n    if (force || !this._extensions[type]) {\n      const ext = extensions[0];\n      this._extensions[type] = (ext[0] !== '*') ? ext : ext.substr(1);\n    }\n  }\n};\n\n/**\n * Lookup a mime type based on extension\n */\nMime.prototype.getType = function(path) {\n  path = String(path);\n  let last = path.replace(/^.*[/\\\\]/, '').toLowerCase();\n  let ext = last.replace(/^.*\\./, '').toLowerCase();\n\n  let hasPath = last.length < path.length;\n  let hasDot = ext.length < last.length - 1;\n\n  return (hasDot || !hasPath) && this._types[ext] || null;\n};\n\n/**\n * Return file extension associated with a mime type\n */\nMime.prototype.getExtension = function(type) {\n  type = /^\\s*([^;\\s]*)/.test(type) && RegExp.$1;\n  return type && this._extensions[type.toLowerCase()] || null;\n};\n\nmodule.exports = Mime;\n","'use strict';\n\nlet Mime = require('./Mime');\nmodule.exports = new Mime(require('./types/standard'), require('./types/other'));\n","module.exports = {\"application/prs.cww\":[\"cww\"],\"application/vnd.1000minds.decision-model+xml\":[\"1km\"],\"application/vnd.3gpp.pic-bw-large\":[\"plb\"],\"application/vnd.3gpp.pic-bw-small\":[\"psb\"],\"application/vnd.3gpp.pic-bw-var\":[\"pvb\"],\"application/vnd.3gpp2.tcap\":[\"tcap\"],\"application/vnd.3m.post-it-notes\":[\"pwn\"],\"application/vnd.accpac.simply.aso\":[\"aso\"],\"application/vnd.accpac.simply.imp\":[\"imp\"],\"application/vnd.acucobol\":[\"acu\"],\"application/vnd.acucorp\":[\"atc\",\"acutc\"],\"application/vnd.adobe.air-application-installer-package+zip\":[\"air\"],\"application/vnd.adobe.formscentral.fcdt\":[\"fcdt\"],\"application/vnd.adobe.fxp\":[\"fxp\",\"fxpl\"],\"application/vnd.adobe.xdp+xml\":[\"xdp\"],\"application/vnd.adobe.xfdf\":[\"xfdf\"],\"application/vnd.ahead.space\":[\"ahead\"],\"application/vnd.airzip.filesecure.azf\":[\"azf\"],\"application/vnd.airzip.filesecure.azs\":[\"azs\"],\"application/vnd.amazon.ebook\":[\"azw\"],\"application/vnd.americandynamics.acc\":[\"acc\"],\"application/vnd.amiga.ami\":[\"ami\"],\"application/vnd.android.package-archive\":[\"apk\"],\"application/vnd.anser-web-certificate-issue-initiation\":[\"cii\"],\"application/vnd.anser-web-funds-transfer-initiation\":[\"fti\"],\"application/vnd.antix.game-component\":[\"atx\"],\"application/vnd.apple.installer+xml\":[\"mpkg\"],\"application/vnd.apple.keynote\":[\"key\"],\"application/vnd.apple.mpegurl\":[\"m3u8\"],\"application/vnd.apple.numbers\":[\"numbers\"],\"application/vnd.apple.pages\":[\"pages\"],\"application/vnd.apple.pkpass\":[\"pkpass\"],\"application/vnd.aristanetworks.swi\":[\"swi\"],\"application/vnd.astraea-software.iota\":[\"iota\"],\"application/vnd.audiograph\":[\"aep\"],\"application/vnd.balsamiq.bmml+xml\":[\"bmml\"],\"application/vnd.blueice.multipass\":[\"mpm\"],\"application/vnd.bmi\":[\"bmi\"],\"application/vnd.businessobjects\":[\"rep\"],\"application/vnd.chemdraw+xml\":[\"cdxml\"],\"application/vnd.chipnuts.karaoke-mmd\":[\"mmd\"],\"application/vnd.cinderella\":[\"cdy\"],\"application/vnd.citationstyles.style+xml\":[\"csl\"],\"application/vnd.claymore\":[\"cla\"],\"application/vnd.cloanto.rp9\":[\"rp9\"],\"application/vnd.clonk.c4group\":[\"c4g\",\"c4d\",\"c4f\",\"c4p\",\"c4u\"],\"application/vnd.cluetrust.cartomobile-config\":[\"c11amc\"],\"application/vnd.cluetrust.cartomobile-config-pkg\":[\"c11amz\"],\"application/vnd.commonspace\":[\"csp\"],\"application/vnd.contact.cmsg\":[\"cdbcmsg\"],\"application/vnd.cosmocaller\":[\"cmc\"],\"application/vnd.crick.clicker\":[\"clkx\"],\"application/vnd.crick.clicker.keyboard\":[\"clkk\"],\"application/vnd.crick.clicker.palette\":[\"clkp\"],\"application/vnd.crick.clicker.template\":[\"clkt\"],\"application/vnd.crick.clicker.wordbank\":[\"clkw\"],\"application/vnd.criticaltools.wbs+xml\":[\"wbs\"],\"application/vnd.ctc-posml\":[\"pml\"],\"application/vnd.cups-ppd\":[\"ppd\"],\"application/vnd.curl.car\":[\"car\"],\"application/vnd.curl.pcurl\":[\"pcurl\"],\"application/vnd.dart\":[\"dart\"],\"application/vnd.data-vision.rdz\":[\"rdz\"],\"application/vnd.dbf\":[\"dbf\"],\"application/vnd.dece.data\":[\"uvf\",\"uvvf\",\"uvd\",\"uvvd\"],\"application/vnd.dece.ttml+xml\":[\"uvt\",\"uvvt\"],\"application/vnd.dece.unspecified\":[\"uvx\",\"uvvx\"],\"application/vnd.dece.zip\":[\"uvz\",\"uvvz\"],\"application/vnd.denovo.fcselayout-link\":[\"fe_launch\"],\"application/vnd.dna\":[\"dna\"],\"application/vnd.dolby.mlp\":[\"mlp\"],\"application/vnd.dpgraph\":[\"dpg\"],\"application/vnd.dreamfactory\":[\"dfac\"],\"application/vnd.ds-keypoint\":[\"kpxx\"],\"application/vnd.dvb.ait\":[\"ait\"],\"application/vnd.dvb.service\":[\"svc\"],\"application/vnd.dynageo\":[\"geo\"],\"application/vnd.ecowin.chart\":[\"mag\"],\"application/vnd.enliven\":[\"nml\"],\"application/vnd.epson.esf\":[\"esf\"],\"application/vnd.epson.msf\":[\"msf\"],\"application/vnd.epson.quickanime\":[\"qam\"],\"application/vnd.epson.salt\":[\"slt\"],\"application/vnd.epson.ssf\":[\"ssf\"],\"application/vnd.eszigno3+xml\":[\"es3\",\"et3\"],\"application/vnd.ezpix-album\":[\"ez2\"],\"application/vnd.ezpix-package\":[\"ez3\"],\"application/vnd.fdf\":[\"fdf\"],\"application/vnd.fdsn.mseed\":[\"mseed\"],\"application/vnd.fdsn.seed\":[\"seed\",\"dataless\"],\"application/vnd.flographit\":[\"gph\"],\"application/vnd.fluxtime.clip\":[\"ftc\"],\"application/vnd.framemaker\":[\"fm\",\"frame\",\"maker\",\"book\"],\"application/vnd.frogans.fnc\":[\"fnc\"],\"application/vnd.frogans.ltf\":[\"ltf\"],\"application/vnd.fsc.weblaunch\":[\"fsc\"],\"application/vnd.fujitsu.oasys\":[\"oas\"],\"application/vnd.fujitsu.oasys2\":[\"oa2\"],\"application/vnd.fujitsu.oasys3\":[\"oa3\"],\"application/vnd.fujitsu.oasysgp\":[\"fg5\"],\"application/vnd.fujitsu.oasysprs\":[\"bh2\"],\"application/vnd.fujixerox.ddd\":[\"ddd\"],\"application/vnd.fujixerox.docuworks\":[\"xdw\"],\"application/vnd.fujixerox.docuworks.binder\":[\"xbd\"],\"application/vnd.fuzzysheet\":[\"fzs\"],\"application/vnd.genomatix.tuxedo\":[\"txd\"],\"application/vnd.geogebra.file\":[\"ggb\"],\"application/vnd.geogebra.tool\":[\"ggt\"],\"application/vnd.geometry-explorer\":[\"gex\",\"gre\"],\"application/vnd.geonext\":[\"gxt\"],\"application/vnd.geoplan\":[\"g2w\"],\"application/vnd.geospace\":[\"g3w\"],\"application/vnd.gmx\":[\"gmx\"],\"application/vnd.google-apps.document\":[\"gdoc\"],\"application/vnd.google-apps.presentation\":[\"gslides\"],\"application/vnd.google-apps.spreadsheet\":[\"gsheet\"],\"application/vnd.google-earth.kml+xml\":[\"kml\"],\"application/vnd.google-earth.kmz\":[\"kmz\"],\"application/vnd.grafeq\":[\"gqf\",\"gqs\"],\"application/vnd.groove-account\":[\"gac\"],\"application/vnd.groove-help\":[\"ghf\"],\"application/vnd.groove-identity-message\":[\"gim\"],\"application/vnd.groove-injector\":[\"grv\"],\"application/vnd.groove-tool-message\":[\"gtm\"],\"application/vnd.groove-tool-template\":[\"tpl\"],\"application/vnd.groove-vcard\":[\"vcg\"],\"application/vnd.hal+xml\":[\"hal\"],\"application/vnd.handheld-entertainment+xml\":[\"zmm\"],\"application/vnd.hbci\":[\"hbci\"],\"application/vnd.hhe.lesson-player\":[\"les\"],\"application/vnd.hp-hpgl\":[\"hpgl\"],\"application/vnd.hp-hpid\":[\"hpid\"],\"application/vnd.hp-hps\":[\"hps\"],\"application/vnd.hp-jlyt\":[\"jlt\"],\"application/vnd.hp-pcl\":[\"pcl\"],\"application/vnd.hp-pclxl\":[\"pclxl\"],\"application/vnd.hydrostatix.sof-data\":[\"sfd-hdstx\"],\"application/vnd.ibm.minipay\":[\"mpy\"],\"application/vnd.ibm.modcap\":[\"afp\",\"listafp\",\"list3820\"],\"application/vnd.ibm.rights-management\":[\"irm\"],\"application/vnd.ibm.secure-container\":[\"sc\"],\"application/vnd.iccprofile\":[\"icc\",\"icm\"],\"application/vnd.igloader\":[\"igl\"],\"application/vnd.immervision-ivp\":[\"ivp\"],\"application/vnd.immervision-ivu\":[\"ivu\"],\"application/vnd.insors.igm\":[\"igm\"],\"application/vnd.intercon.formnet\":[\"xpw\",\"xpx\"],\"application/vnd.intergeo\":[\"i2g\"],\"application/vnd.intu.qbo\":[\"qbo\"],\"application/vnd.intu.qfx\":[\"qfx\"],\"application/vnd.ipunplugged.rcprofile\":[\"rcprofile\"],\"application/vnd.irepository.package+xml\":[\"irp\"],\"application/vnd.is-xpr\":[\"xpr\"],\"application/vnd.isac.fcs\":[\"fcs\"],\"application/vnd.jam\":[\"jam\"],\"application/vnd.jcp.javame.midlet-rms\":[\"rms\"],\"application/vnd.jisp\":[\"jisp\"],\"application/vnd.joost.joda-archive\":[\"joda\"],\"application/vnd.kahootz\":[\"ktz\",\"ktr\"],\"application/vnd.kde.karbon\":[\"karbon\"],\"application/vnd.kde.kchart\":[\"chrt\"],\"application/vnd.kde.kformula\":[\"kfo\"],\"application/vnd.kde.kivio\":[\"flw\"],\"application/vnd.kde.kontour\":[\"kon\"],\"application/vnd.kde.kpresenter\":[\"kpr\",\"kpt\"],\"application/vnd.kde.kspread\":[\"ksp\"],\"application/vnd.kde.kword\":[\"kwd\",\"kwt\"],\"application/vnd.kenameaapp\":[\"htke\"],\"application/vnd.kidspiration\":[\"kia\"],\"application/vnd.kinar\":[\"kne\",\"knp\"],\"application/vnd.koan\":[\"skp\",\"skd\",\"skt\",\"skm\"],\"application/vnd.kodak-descriptor\":[\"sse\"],\"application/vnd.las.las+xml\":[\"lasxml\"],\"application/vnd.llamagraphics.life-balance.desktop\":[\"lbd\"],\"application/vnd.llamagraphics.life-balance.exchange+xml\":[\"lbe\"],\"application/vnd.lotus-1-2-3\":[\"123\"],\"application/vnd.lotus-approach\":[\"apr\"],\"application/vnd.lotus-freelance\":[\"pre\"],\"application/vnd.lotus-notes\":[\"nsf\"],\"application/vnd.lotus-organizer\":[\"org\"],\"application/vnd.lotus-screencam\":[\"scm\"],\"application/vnd.lotus-wordpro\":[\"lwp\"],\"application/vnd.macports.portpkg\":[\"portpkg\"],\"application/vnd.mcd\":[\"mcd\"],\"application/vnd.medcalcdata\":[\"mc1\"],\"application/vnd.mediastation.cdkey\":[\"cdkey\"],\"application/vnd.mfer\":[\"mwf\"],\"application/vnd.mfmp\":[\"mfm\"],\"application/vnd.micrografx.flo\":[\"flo\"],\"application/vnd.micrografx.igx\":[\"igx\"],\"application/vnd.mif\":[\"mif\"],\"application/vnd.mobius.daf\":[\"daf\"],\"application/vnd.mobius.dis\":[\"dis\"],\"application/vnd.mobius.mbk\":[\"mbk\"],\"application/vnd.mobius.mqy\":[\"mqy\"],\"application/vnd.mobius.msl\":[\"msl\"],\"application/vnd.mobius.plc\":[\"plc\"],\"application/vnd.mobius.txf\":[\"txf\"],\"application/vnd.mophun.application\":[\"mpn\"],\"application/vnd.mophun.certificate\":[\"mpc\"],\"application/vnd.mozilla.xul+xml\":[\"xul\"],\"application/vnd.ms-artgalry\":[\"cil\"],\"application/vnd.ms-cab-compressed\":[\"cab\"],\"application/vnd.ms-excel\":[\"xls\",\"xlm\",\"xla\",\"xlc\",\"xlt\",\"xlw\"],\"application/vnd.ms-excel.addin.macroenabled.12\":[\"xlam\"],\"application/vnd.ms-excel.sheet.binary.macroenabled.12\":[\"xlsb\"],\"application/vnd.ms-excel.sheet.macroenabled.12\":[\"xlsm\"],\"application/vnd.ms-excel.template.macroenabled.12\":[\"xltm\"],\"application/vnd.ms-fontobject\":[\"eot\"],\"application/vnd.ms-htmlhelp\":[\"chm\"],\"application/vnd.ms-ims\":[\"ims\"],\"application/vnd.ms-lrm\":[\"lrm\"],\"application/vnd.ms-officetheme\":[\"thmx\"],\"application/vnd.ms-outlook\":[\"msg\"],\"application/vnd.ms-pki.seccat\":[\"cat\"],\"application/vnd.ms-pki.stl\":[\"*stl\"],\"application/vnd.ms-powerpoint\":[\"ppt\",\"pps\",\"pot\"],\"application/vnd.ms-powerpoint.addin.macroenabled.12\":[\"ppam\"],\"application/vnd.ms-powerpoint.presentation.macroenabled.12\":[\"pptm\"],\"application/vnd.ms-powerpoint.slide.macroenabled.12\":[\"sldm\"],\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\":[\"ppsm\"],\"application/vnd.ms-powerpoint.template.macroenabled.12\":[\"potm\"],\"application/vnd.ms-project\":[\"mpp\",\"mpt\"],\"application/vnd.ms-word.document.macroenabled.12\":[\"docm\"],\"application/vnd.ms-word.template.macroenabled.12\":[\"dotm\"],\"application/vnd.ms-works\":[\"wps\",\"wks\",\"wcm\",\"wdb\"],\"application/vnd.ms-wpl\":[\"wpl\"],\"application/vnd.ms-xpsdocument\":[\"xps\"],\"application/vnd.mseq\":[\"mseq\"],\"application/vnd.musician\":[\"mus\"],\"application/vnd.muvee.style\":[\"msty\"],\"application/vnd.mynfc\":[\"taglet\"],\"application/vnd.neurolanguage.nlu\":[\"nlu\"],\"application/vnd.nitf\":[\"ntf\",\"nitf\"],\"application/vnd.noblenet-directory\":[\"nnd\"],\"application/vnd.noblenet-sealer\":[\"nns\"],\"application/vnd.noblenet-web\":[\"nnw\"],\"application/vnd.nokia.n-gage.ac+xml\":[\"*ac\"],\"application/vnd.nokia.n-gage.data\":[\"ngdat\"],\"application/vnd.nokia.n-gage.symbian.install\":[\"n-gage\"],\"application/vnd.nokia.radio-preset\":[\"rpst\"],\"application/vnd.nokia.radio-presets\":[\"rpss\"],\"application/vnd.novadigm.edm\":[\"edm\"],\"application/vnd.novadigm.edx\":[\"edx\"],\"application/vnd.novadigm.ext\":[\"ext\"],\"application/vnd.oasis.opendocument.chart\":[\"odc\"],\"application/vnd.oasis.opendocument.chart-template\":[\"otc\"],\"application/vnd.oasis.opendocument.database\":[\"odb\"],\"application/vnd.oasis.opendocument.formula\":[\"odf\"],\"application/vnd.oasis.opendocument.formula-template\":[\"odft\"],\"application/vnd.oasis.opendocument.graphics\":[\"odg\"],\"application/vnd.oasis.opendocument.graphics-template\":[\"otg\"],\"application/vnd.oasis.opendocument.image\":[\"odi\"],\"application/vnd.oasis.opendocument.image-template\":[\"oti\"],\"application/vnd.oasis.opendocument.presentation\":[\"odp\"],\"application/vnd.oasis.opendocument.presentation-template\":[\"otp\"],\"application/vnd.oasis.opendocument.spreadsheet\":[\"ods\"],\"application/vnd.oasis.opendocument.spreadsheet-template\":[\"ots\"],\"application/vnd.oasis.opendocument.text\":[\"odt\"],\"application/vnd.oasis.opendocument.text-master\":[\"odm\"],\"application/vnd.oasis.opendocument.text-template\":[\"ott\"],\"application/vnd.oasis.opendocument.text-web\":[\"oth\"],\"application/vnd.olpc-sugar\":[\"xo\"],\"application/vnd.oma.dd2+xml\":[\"dd2\"],\"application/vnd.openblox.game+xml\":[\"obgx\"],\"application/vnd.openofficeorg.extension\":[\"oxt\"],\"application/vnd.openstreetmap.data+xml\":[\"osm\"],\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":[\"pptx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slide\":[\"sldx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":[\"ppsx\"],\"application/vnd.openxmlformats-officedocument.presentationml.template\":[\"potx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":[\"xlsx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":[\"xltx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":[\"docx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":[\"dotx\"],\"application/vnd.osgeo.mapguide.package\":[\"mgp\"],\"application/vnd.osgi.dp\":[\"dp\"],\"application/vnd.osgi.subsystem\":[\"esa\"],\"application/vnd.palm\":[\"pdb\",\"pqa\",\"oprc\"],\"application/vnd.pawaafile\":[\"paw\"],\"application/vnd.pg.format\":[\"str\"],\"application/vnd.pg.osasli\":[\"ei6\"],\"application/vnd.picsel\":[\"efif\"],\"application/vnd.pmi.widget\":[\"wg\"],\"application/vnd.pocketlearn\":[\"plf\"],\"application/vnd.powerbuilder6\":[\"pbd\"],\"application/vnd.previewsystems.box\":[\"box\"],\"application/vnd.proteus.magazine\":[\"mgz\"],\"application/vnd.publishare-delta-tree\":[\"qps\"],\"application/vnd.pvi.ptid1\":[\"ptid\"],\"application/vnd.quark.quarkxpress\":[\"qxd\",\"qxt\",\"qwd\",\"qwt\",\"qxl\",\"qxb\"],\"application/vnd.rar\":[\"rar\"],\"application/vnd.realvnc.bed\":[\"bed\"],\"application/vnd.recordare.musicxml\":[\"mxl\"],\"application/vnd.recordare.musicxml+xml\":[\"musicxml\"],\"application/vnd.rig.cryptonote\":[\"cryptonote\"],\"application/vnd.rim.cod\":[\"cod\"],\"application/vnd.rn-realmedia\":[\"rm\"],\"application/vnd.rn-realmedia-vbr\":[\"rmvb\"],\"application/vnd.route66.link66+xml\":[\"link66\"],\"application/vnd.sailingtracker.track\":[\"st\"],\"application/vnd.seemail\":[\"see\"],\"application/vnd.sema\":[\"sema\"],\"application/vnd.semd\":[\"semd\"],\"application/vnd.semf\":[\"semf\"],\"application/vnd.shana.informed.formdata\":[\"ifm\"],\"application/vnd.shana.informed.formtemplate\":[\"itp\"],\"application/vnd.shana.informed.interchange\":[\"iif\"],\"application/vnd.shana.informed.package\":[\"ipk\"],\"application/vnd.simtech-mindmapper\":[\"twd\",\"twds\"],\"application/vnd.smaf\":[\"mmf\"],\"application/vnd.smart.teacher\":[\"teacher\"],\"application/vnd.software602.filler.form+xml\":[\"fo\"],\"application/vnd.solent.sdkm+xml\":[\"sdkm\",\"sdkd\"],\"application/vnd.spotfire.dxp\":[\"dxp\"],\"application/vnd.spotfire.sfs\":[\"sfs\"],\"application/vnd.stardivision.calc\":[\"sdc\"],\"application/vnd.stardivision.draw\":[\"sda\"],\"application/vnd.stardivision.impress\":[\"sdd\"],\"application/vnd.stardivision.math\":[\"smf\"],\"application/vnd.stardivision.writer\":[\"sdw\",\"vor\"],\"application/vnd.stardivision.writer-global\":[\"sgl\"],\"application/vnd.stepmania.package\":[\"smzip\"],\"application/vnd.stepmania.stepchart\":[\"sm\"],\"application/vnd.sun.wadl+xml\":[\"wadl\"],\"application/vnd.sun.xml.calc\":[\"sxc\"],\"application/vnd.sun.xml.calc.template\":[\"stc\"],\"application/vnd.sun.xml.draw\":[\"sxd\"],\"application/vnd.sun.xml.draw.template\":[\"std\"],\"application/vnd.sun.xml.impress\":[\"sxi\"],\"application/vnd.sun.xml.impress.template\":[\"sti\"],\"application/vnd.sun.xml.math\":[\"sxm\"],\"application/vnd.sun.xml.writer\":[\"sxw\"],\"application/vnd.sun.xml.writer.global\":[\"sxg\"],\"application/vnd.sun.xml.writer.template\":[\"stw\"],\"application/vnd.sus-calendar\":[\"sus\",\"susp\"],\"application/vnd.svd\":[\"svd\"],\"application/vnd.symbian.install\":[\"sis\",\"sisx\"],\"application/vnd.syncml+xml\":[\"xsm\"],\"application/vnd.syncml.dm+wbxml\":[\"bdm\"],\"application/vnd.syncml.dm+xml\":[\"xdm\"],\"application/vnd.syncml.dmddf+xml\":[\"ddf\"],\"application/vnd.tao.intent-module-archive\":[\"tao\"],\"application/vnd.tcpdump.pcap\":[\"pcap\",\"cap\",\"dmp\"],\"application/vnd.tmobile-livetv\":[\"tmo\"],\"application/vnd.trid.tpt\":[\"tpt\"],\"application/vnd.triscape.mxs\":[\"mxs\"],\"application/vnd.trueapp\":[\"tra\"],\"application/vnd.ufdl\":[\"ufd\",\"ufdl\"],\"application/vnd.uiq.theme\":[\"utz\"],\"application/vnd.umajin\":[\"umj\"],\"application/vnd.unity\":[\"unityweb\"],\"application/vnd.uoml+xml\":[\"uoml\"],\"application/vnd.vcx\":[\"vcx\"],\"application/vnd.visio\":[\"vsd\",\"vst\",\"vss\",\"vsw\"],\"application/vnd.visionary\":[\"vis\"],\"application/vnd.vsf\":[\"vsf\"],\"application/vnd.wap.wbxml\":[\"wbxml\"],\"application/vnd.wap.wmlc\":[\"wmlc\"],\"application/vnd.wap.wmlscriptc\":[\"wmlsc\"],\"application/vnd.webturbo\":[\"wtb\"],\"application/vnd.wolfram.player\":[\"nbp\"],\"application/vnd.wordperfect\":[\"wpd\"],\"application/vnd.wqd\":[\"wqd\"],\"application/vnd.wt.stf\":[\"stf\"],\"application/vnd.xara\":[\"xar\"],\"application/vnd.xfdl\":[\"xfdl\"],\"application/vnd.yamaha.hv-dic\":[\"hvd\"],\"application/vnd.yamaha.hv-script\":[\"hvs\"],\"application/vnd.yamaha.hv-voice\":[\"hvp\"],\"application/vnd.yamaha.openscoreformat\":[\"osf\"],\"application/vnd.yamaha.openscoreformat.osfpvg+xml\":[\"osfpvg\"],\"application/vnd.yamaha.smaf-audio\":[\"saf\"],\"application/vnd.yamaha.smaf-phrase\":[\"spf\"],\"application/vnd.yellowriver-custom-menu\":[\"cmp\"],\"application/vnd.zul\":[\"zir\",\"zirz\"],\"application/vnd.zzazz.deck+xml\":[\"zaz\"],\"application/x-7z-compressed\":[\"7z\"],\"application/x-abiword\":[\"abw\"],\"application/x-ace-compressed\":[\"ace\"],\"application/x-apple-diskimage\":[\"*dmg\"],\"application/x-arj\":[\"arj\"],\"application/x-authorware-bin\":[\"aab\",\"x32\",\"u32\",\"vox\"],\"application/x-authorware-map\":[\"aam\"],\"application/x-authorware-seg\":[\"aas\"],\"application/x-bcpio\":[\"bcpio\"],\"application/x-bdoc\":[\"*bdoc\"],\"application/x-bittorrent\":[\"torrent\"],\"application/x-blorb\":[\"blb\",\"blorb\"],\"application/x-bzip\":[\"bz\"],\"application/x-bzip2\":[\"bz2\",\"boz\"],\"application/x-cbr\":[\"cbr\",\"cba\",\"cbt\",\"cbz\",\"cb7\"],\"application/x-cdlink\":[\"vcd\"],\"application/x-cfs-compressed\":[\"cfs\"],\"application/x-chat\":[\"chat\"],\"application/x-chess-pgn\":[\"pgn\"],\"application/x-chrome-extension\":[\"crx\"],\"application/x-cocoa\":[\"cco\"],\"application/x-conference\":[\"nsc\"],\"application/x-cpio\":[\"cpio\"],\"application/x-csh\":[\"csh\"],\"application/x-debian-package\":[\"*deb\",\"udeb\"],\"application/x-dgc-compressed\":[\"dgc\"],\"application/x-director\":[\"dir\",\"dcr\",\"dxr\",\"cst\",\"cct\",\"cxt\",\"w3d\",\"fgd\",\"swa\"],\"application/x-doom\":[\"wad\"],\"application/x-dtbncx+xml\":[\"ncx\"],\"application/x-dtbook+xml\":[\"dtb\"],\"application/x-dtbresource+xml\":[\"res\"],\"application/x-dvi\":[\"dvi\"],\"application/x-envoy\":[\"evy\"],\"application/x-eva\":[\"eva\"],\"application/x-font-bdf\":[\"bdf\"],\"application/x-font-ghostscript\":[\"gsf\"],\"application/x-font-linux-psf\":[\"psf\"],\"application/x-font-pcf\":[\"pcf\"],\"application/x-font-snf\":[\"snf\"],\"application/x-font-type1\":[\"pfa\",\"pfb\",\"pfm\",\"afm\"],\"application/x-freearc\":[\"arc\"],\"application/x-futuresplash\":[\"spl\"],\"application/x-gca-compressed\":[\"gca\"],\"application/x-glulx\":[\"ulx\"],\"application/x-gnumeric\":[\"gnumeric\"],\"application/x-gramps-xml\":[\"gramps\"],\"application/x-gtar\":[\"gtar\"],\"application/x-hdf\":[\"hdf\"],\"application/x-httpd-php\":[\"php\"],\"application/x-install-instructions\":[\"install\"],\"application/x-iso9660-image\":[\"*iso\"],\"application/x-java-archive-diff\":[\"jardiff\"],\"application/x-java-jnlp-file\":[\"jnlp\"],\"application/x-keepass2\":[\"kdbx\"],\"application/x-latex\":[\"latex\"],\"application/x-lua-bytecode\":[\"luac\"],\"application/x-lzh-compressed\":[\"lzh\",\"lha\"],\"application/x-makeself\":[\"run\"],\"application/x-mie\":[\"mie\"],\"application/x-mobipocket-ebook\":[\"prc\",\"mobi\"],\"application/x-ms-application\":[\"application\"],\"application/x-ms-shortcut\":[\"lnk\"],\"application/x-ms-wmd\":[\"wmd\"],\"application/x-ms-wmz\":[\"wmz\"],\"application/x-ms-xbap\":[\"xbap\"],\"application/x-msaccess\":[\"mdb\"],\"application/x-msbinder\":[\"obd\"],\"application/x-mscardfile\":[\"crd\"],\"application/x-msclip\":[\"clp\"],\"application/x-msdos-program\":[\"*exe\"],\"application/x-msdownload\":[\"*exe\",\"*dll\",\"com\",\"bat\",\"*msi\"],\"application/x-msmediaview\":[\"mvb\",\"m13\",\"m14\"],\"application/x-msmetafile\":[\"*wmf\",\"*wmz\",\"*emf\",\"emz\"],\"application/x-msmoney\":[\"mny\"],\"application/x-mspublisher\":[\"pub\"],\"application/x-msschedule\":[\"scd\"],\"application/x-msterminal\":[\"trm\"],\"application/x-mswrite\":[\"wri\"],\"application/x-netcdf\":[\"nc\",\"cdf\"],\"application/x-ns-proxy-autoconfig\":[\"pac\"],\"application/x-nzb\":[\"nzb\"],\"application/x-perl\":[\"pl\",\"pm\"],\"application/x-pilot\":[\"*prc\",\"*pdb\"],\"application/x-pkcs12\":[\"p12\",\"pfx\"],\"application/x-pkcs7-certificates\":[\"p7b\",\"spc\"],\"application/x-pkcs7-certreqresp\":[\"p7r\"],\"application/x-rar-compressed\":[\"*rar\"],\"application/x-redhat-package-manager\":[\"rpm\"],\"application/x-research-info-systems\":[\"ris\"],\"application/x-sea\":[\"sea\"],\"application/x-sh\":[\"sh\"],\"application/x-shar\":[\"shar\"],\"application/x-shockwave-flash\":[\"swf\"],\"application/x-silverlight-app\":[\"xap\"],\"application/x-sql\":[\"sql\"],\"application/x-stuffit\":[\"sit\"],\"application/x-stuffitx\":[\"sitx\"],\"application/x-subrip\":[\"srt\"],\"application/x-sv4cpio\":[\"sv4cpio\"],\"application/x-sv4crc\":[\"sv4crc\"],\"application/x-t3vm-image\":[\"t3\"],\"application/x-tads\":[\"gam\"],\"application/x-tar\":[\"tar\"],\"application/x-tcl\":[\"tcl\",\"tk\"],\"application/x-tex\":[\"tex\"],\"application/x-tex-tfm\":[\"tfm\"],\"application/x-texinfo\":[\"texinfo\",\"texi\"],\"application/x-tgif\":[\"*obj\"],\"application/x-ustar\":[\"ustar\"],\"application/x-virtualbox-hdd\":[\"hdd\"],\"application/x-virtualbox-ova\":[\"ova\"],\"application/x-virtualbox-ovf\":[\"ovf\"],\"application/x-virtualbox-vbox\":[\"vbox\"],\"application/x-virtualbox-vbox-extpack\":[\"vbox-extpack\"],\"application/x-virtualbox-vdi\":[\"vdi\"],\"application/x-virtualbox-vhd\":[\"vhd\"],\"application/x-virtualbox-vmdk\":[\"vmdk\"],\"application/x-wais-source\":[\"src\"],\"application/x-web-app-manifest+json\":[\"webapp\"],\"application/x-x509-ca-cert\":[\"der\",\"crt\",\"pem\"],\"application/x-xfig\":[\"fig\"],\"application/x-xliff+xml\":[\"*xlf\"],\"application/x-xpinstall\":[\"xpi\"],\"application/x-xz\":[\"xz\"],\"application/x-zmachine\":[\"z1\",\"z2\",\"z3\",\"z4\",\"z5\",\"z6\",\"z7\",\"z8\"],\"audio/vnd.dece.audio\":[\"uva\",\"uvva\"],\"audio/vnd.digital-winds\":[\"eol\"],\"audio/vnd.dra\":[\"dra\"],\"audio/vnd.dts\":[\"dts\"],\"audio/vnd.dts.hd\":[\"dtshd\"],\"audio/vnd.lucent.voice\":[\"lvp\"],\"audio/vnd.ms-playready.media.pya\":[\"pya\"],\"audio/vnd.nuera.ecelp4800\":[\"ecelp4800\"],\"audio/vnd.nuera.ecelp7470\":[\"ecelp7470\"],\"audio/vnd.nuera.ecelp9600\":[\"ecelp9600\"],\"audio/vnd.rip\":[\"rip\"],\"audio/x-aac\":[\"aac\"],\"audio/x-aiff\":[\"aif\",\"aiff\",\"aifc\"],\"audio/x-caf\":[\"caf\"],\"audio/x-flac\":[\"flac\"],\"audio/x-m4a\":[\"*m4a\"],\"audio/x-matroska\":[\"mka\"],\"audio/x-mpegurl\":[\"m3u\"],\"audio/x-ms-wax\":[\"wax\"],\"audio/x-ms-wma\":[\"wma\"],\"audio/x-pn-realaudio\":[\"ram\",\"ra\"],\"audio/x-pn-realaudio-plugin\":[\"rmp\"],\"audio/x-realaudio\":[\"*ra\"],\"audio/x-wav\":[\"*wav\"],\"chemical/x-cdx\":[\"cdx\"],\"chemical/x-cif\":[\"cif\"],\"chemical/x-cmdf\":[\"cmdf\"],\"chemical/x-cml\":[\"cml\"],\"chemical/x-csml\":[\"csml\"],\"chemical/x-xyz\":[\"xyz\"],\"image/prs.btif\":[\"btif\"],\"image/prs.pti\":[\"pti\"],\"image/vnd.adobe.photoshop\":[\"psd\"],\"image/vnd.airzip.accelerator.azv\":[\"azv\"],\"image/vnd.dece.graphic\":[\"uvi\",\"uvvi\",\"uvg\",\"uvvg\"],\"image/vnd.djvu\":[\"djvu\",\"djv\"],\"image/vnd.dvb.subtitle\":[\"*sub\"],\"image/vnd.dwg\":[\"dwg\"],\"image/vnd.dxf\":[\"dxf\"],\"image/vnd.fastbidsheet\":[\"fbs\"],\"image/vnd.fpx\":[\"fpx\"],\"image/vnd.fst\":[\"fst\"],\"image/vnd.fujixerox.edmics-mmr\":[\"mmr\"],\"image/vnd.fujixerox.edmics-rlc\":[\"rlc\"],\"image/vnd.microsoft.icon\":[\"ico\"],\"image/vnd.ms-dds\":[\"dds\"],\"image/vnd.ms-modi\":[\"mdi\"],\"image/vnd.ms-photo\":[\"wdp\"],\"image/vnd.net-fpx\":[\"npx\"],\"image/vnd.pco.b16\":[\"b16\"],\"image/vnd.tencent.tap\":[\"tap\"],\"image/vnd.valve.source.texture\":[\"vtf\"],\"image/vnd.wap.wbmp\":[\"wbmp\"],\"image/vnd.xiff\":[\"xif\"],\"image/vnd.zbrush.pcx\":[\"pcx\"],\"image/x-3ds\":[\"3ds\"],\"image/x-cmu-raster\":[\"ras\"],\"image/x-cmx\":[\"cmx\"],\"image/x-freehand\":[\"fh\",\"fhc\",\"fh4\",\"fh5\",\"fh7\"],\"image/x-icon\":[\"*ico\"],\"image/x-jng\":[\"jng\"],\"image/x-mrsid-image\":[\"sid\"],\"image/x-ms-bmp\":[\"*bmp\"],\"image/x-pcx\":[\"*pcx\"],\"image/x-pict\":[\"pic\",\"pct\"],\"image/x-portable-anymap\":[\"pnm\"],\"image/x-portable-bitmap\":[\"pbm\"],\"image/x-portable-graymap\":[\"pgm\"],\"image/x-portable-pixmap\":[\"ppm\"],\"image/x-rgb\":[\"rgb\"],\"image/x-tga\":[\"tga\"],\"image/x-xbitmap\":[\"xbm\"],\"image/x-xpixmap\":[\"xpm\"],\"image/x-xwindowdump\":[\"xwd\"],\"message/vnd.wfa.wsc\":[\"wsc\"],\"model/vnd.collada+xml\":[\"dae\"],\"model/vnd.dwf\":[\"dwf\"],\"model/vnd.gdl\":[\"gdl\"],\"model/vnd.gtw\":[\"gtw\"],\"model/vnd.mts\":[\"mts\"],\"model/vnd.opengex\":[\"ogex\"],\"model/vnd.parasolid.transmit.binary\":[\"x_b\"],\"model/vnd.parasolid.transmit.text\":[\"x_t\"],\"model/vnd.usdz+zip\":[\"usdz\"],\"model/vnd.valve.source.compiled-map\":[\"bsp\"],\"model/vnd.vtu\":[\"vtu\"],\"text/prs.lines.tag\":[\"dsc\"],\"text/vnd.curl\":[\"curl\"],\"text/vnd.curl.dcurl\":[\"dcurl\"],\"text/vnd.curl.mcurl\":[\"mcurl\"],\"text/vnd.curl.scurl\":[\"scurl\"],\"text/vnd.dvb.subtitle\":[\"sub\"],\"text/vnd.fly\":[\"fly\"],\"text/vnd.fmi.flexstor\":[\"flx\"],\"text/vnd.graphviz\":[\"gv\"],\"text/vnd.in3d.3dml\":[\"3dml\"],\"text/vnd.in3d.spot\":[\"spot\"],\"text/vnd.sun.j2me.app-descriptor\":[\"jad\"],\"text/vnd.wap.wml\":[\"wml\"],\"text/vnd.wap.wmlscript\":[\"wmls\"],\"text/x-asm\":[\"s\",\"asm\"],\"text/x-c\":[\"c\",\"cc\",\"cxx\",\"cpp\",\"h\",\"hh\",\"dic\"],\"text/x-component\":[\"htc\"],\"text/x-fortran\":[\"f\",\"for\",\"f77\",\"f90\"],\"text/x-handlebars-template\":[\"hbs\"],\"text/x-java-source\":[\"java\"],\"text/x-lua\":[\"lua\"],\"text/x-markdown\":[\"mkd\"],\"text/x-nfo\":[\"nfo\"],\"text/x-opml\":[\"opml\"],\"text/x-org\":[\"*org\"],\"text/x-pascal\":[\"p\",\"pas\"],\"text/x-processing\":[\"pde\"],\"text/x-sass\":[\"sass\"],\"text/x-scss\":[\"scss\"],\"text/x-setext\":[\"etx\"],\"text/x-sfv\":[\"sfv\"],\"text/x-suse-ymp\":[\"ymp\"],\"text/x-uuencode\":[\"uu\"],\"text/x-vcalendar\":[\"vcs\"],\"text/x-vcard\":[\"vcf\"],\"video/vnd.dece.hd\":[\"uvh\",\"uvvh\"],\"video/vnd.dece.mobile\":[\"uvm\",\"uvvm\"],\"video/vnd.dece.pd\":[\"uvp\",\"uvvp\"],\"video/vnd.dece.sd\":[\"uvs\",\"uvvs\"],\"video/vnd.dece.video\":[\"uvv\",\"uvvv\"],\"video/vnd.dvb.file\":[\"dvb\"],\"video/vnd.fvt\":[\"fvt\"],\"video/vnd.mpegurl\":[\"mxu\",\"m4u\"],\"video/vnd.ms-playready.media.pyv\":[\"pyv\"],\"video/vnd.uvvu.mp4\":[\"uvu\",\"uvvu\"],\"video/vnd.vivo\":[\"viv\"],\"video/x-f4v\":[\"f4v\"],\"video/x-fli\":[\"fli\"],\"video/x-flv\":[\"flv\"],\"video/x-m4v\":[\"m4v\"],\"video/x-matroska\":[\"mkv\",\"mk3d\",\"mks\"],\"video/x-mng\":[\"mng\"],\"video/x-ms-asf\":[\"asf\",\"asx\"],\"video/x-ms-vob\":[\"vob\"],\"video/x-ms-wm\":[\"wm\"],\"video/x-ms-wmv\":[\"wmv\"],\"video/x-ms-wmx\":[\"wmx\"],\"video/x-ms-wvx\":[\"wvx\"],\"video/x-msvideo\":[\"avi\"],\"video/x-sgi-movie\":[\"movie\"],\"video/x-smv\":[\"smv\"],\"x-conference/x-cooltalk\":[\"ice\"]};","module.exports = {\"application/andrew-inset\":[\"ez\"],\"application/applixware\":[\"aw\"],\"application/atom+xml\":[\"atom\"],\"application/atomcat+xml\":[\"atomcat\"],\"application/atomdeleted+xml\":[\"atomdeleted\"],\"application/atomsvc+xml\":[\"atomsvc\"],\"application/atsc-dwd+xml\":[\"dwd\"],\"application/atsc-held+xml\":[\"held\"],\"application/atsc-rsat+xml\":[\"rsat\"],\"application/bdoc\":[\"bdoc\"],\"application/calendar+xml\":[\"xcs\"],\"application/ccxml+xml\":[\"ccxml\"],\"application/cdfx+xml\":[\"cdfx\"],\"application/cdmi-capability\":[\"cdmia\"],\"application/cdmi-container\":[\"cdmic\"],\"application/cdmi-domain\":[\"cdmid\"],\"application/cdmi-object\":[\"cdmio\"],\"application/cdmi-queue\":[\"cdmiq\"],\"application/cu-seeme\":[\"cu\"],\"application/dash+xml\":[\"mpd\"],\"application/davmount+xml\":[\"davmount\"],\"application/docbook+xml\":[\"dbk\"],\"application/dssc+der\":[\"dssc\"],\"application/dssc+xml\":[\"xdssc\"],\"application/ecmascript\":[\"ecma\",\"es\"],\"application/emma+xml\":[\"emma\"],\"application/emotionml+xml\":[\"emotionml\"],\"application/epub+zip\":[\"epub\"],\"application/exi\":[\"exi\"],\"application/fdt+xml\":[\"fdt\"],\"application/font-tdpfr\":[\"pfr\"],\"application/geo+json\":[\"geojson\"],\"application/gml+xml\":[\"gml\"],\"application/gpx+xml\":[\"gpx\"],\"application/gxf\":[\"gxf\"],\"application/gzip\":[\"gz\"],\"application/hjson\":[\"hjson\"],\"application/hyperstudio\":[\"stk\"],\"application/inkml+xml\":[\"ink\",\"inkml\"],\"application/ipfix\":[\"ipfix\"],\"application/its+xml\":[\"its\"],\"application/java-archive\":[\"jar\",\"war\",\"ear\"],\"application/java-serialized-object\":[\"ser\"],\"application/java-vm\":[\"class\"],\"application/javascript\":[\"js\",\"mjs\"],\"application/json\":[\"json\",\"map\"],\"application/json5\":[\"json5\"],\"application/jsonml+json\":[\"jsonml\"],\"application/ld+json\":[\"jsonld\"],\"application/lgr+xml\":[\"lgr\"],\"application/lost+xml\":[\"lostxml\"],\"application/mac-binhex40\":[\"hqx\"],\"application/mac-compactpro\":[\"cpt\"],\"application/mads+xml\":[\"mads\"],\"application/manifest+json\":[\"webmanifest\"],\"application/marc\":[\"mrc\"],\"application/marcxml+xml\":[\"mrcx\"],\"application/mathematica\":[\"ma\",\"nb\",\"mb\"],\"application/mathml+xml\":[\"mathml\"],\"application/mbox\":[\"mbox\"],\"application/mediaservercontrol+xml\":[\"mscml\"],\"application/metalink+xml\":[\"metalink\"],\"application/metalink4+xml\":[\"meta4\"],\"application/mets+xml\":[\"mets\"],\"application/mmt-aei+xml\":[\"maei\"],\"application/mmt-usd+xml\":[\"musd\"],\"application/mods+xml\":[\"mods\"],\"application/mp21\":[\"m21\",\"mp21\"],\"application/mp4\":[\"mp4s\",\"m4p\"],\"application/mrb-consumer+xml\":[\"*xdf\"],\"application/mrb-publish+xml\":[\"*xdf\"],\"application/msword\":[\"doc\",\"dot\"],\"application/mxf\":[\"mxf\"],\"application/n-quads\":[\"nq\"],\"application/n-triples\":[\"nt\"],\"application/node\":[\"cjs\"],\"application/octet-stream\":[\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"],\"application/oda\":[\"oda\"],\"application/oebps-package+xml\":[\"opf\"],\"application/ogg\":[\"ogx\"],\"application/omdoc+xml\":[\"omdoc\"],\"application/onenote\":[\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"],\"application/oxps\":[\"oxps\"],\"application/p2p-overlay+xml\":[\"relo\"],\"application/patch-ops-error+xml\":[\"*xer\"],\"application/pdf\":[\"pdf\"],\"application/pgp-encrypted\":[\"pgp\"],\"application/pgp-signature\":[\"asc\",\"sig\"],\"application/pics-rules\":[\"prf\"],\"application/pkcs10\":[\"p10\"],\"application/pkcs7-mime\":[\"p7m\",\"p7c\"],\"application/pkcs7-signature\":[\"p7s\"],\"application/pkcs8\":[\"p8\"],\"application/pkix-attr-cert\":[\"ac\"],\"application/pkix-cert\":[\"cer\"],\"application/pkix-crl\":[\"crl\"],\"application/pkix-pkipath\":[\"pkipath\"],\"application/pkixcmp\":[\"pki\"],\"application/pls+xml\":[\"pls\"],\"application/postscript\":[\"ai\",\"eps\",\"ps\"],\"application/provenance+xml\":[\"provx\"],\"application/pskc+xml\":[\"pskcxml\"],\"application/raml+yaml\":[\"raml\"],\"application/rdf+xml\":[\"rdf\",\"owl\"],\"application/reginfo+xml\":[\"rif\"],\"application/relax-ng-compact-syntax\":[\"rnc\"],\"application/resource-lists+xml\":[\"rl\"],\"application/resource-lists-diff+xml\":[\"rld\"],\"application/rls-services+xml\":[\"rs\"],\"application/route-apd+xml\":[\"rapd\"],\"application/route-s-tsid+xml\":[\"sls\"],\"application/route-usd+xml\":[\"rusd\"],\"application/rpki-ghostbusters\":[\"gbr\"],\"application/rpki-manifest\":[\"mft\"],\"application/rpki-roa\":[\"roa\"],\"application/rsd+xml\":[\"rsd\"],\"application/rss+xml\":[\"rss\"],\"application/rtf\":[\"rtf\"],\"application/sbml+xml\":[\"sbml\"],\"application/scvp-cv-request\":[\"scq\"],\"application/scvp-cv-response\":[\"scs\"],\"application/scvp-vp-request\":[\"spq\"],\"application/scvp-vp-response\":[\"spp\"],\"application/sdp\":[\"sdp\"],\"application/senml+xml\":[\"senmlx\"],\"application/sensml+xml\":[\"sensmlx\"],\"application/set-payment-initiation\":[\"setpay\"],\"application/set-registration-initiation\":[\"setreg\"],\"application/shf+xml\":[\"shf\"],\"application/sieve\":[\"siv\",\"sieve\"],\"application/smil+xml\":[\"smi\",\"smil\"],\"application/sparql-query\":[\"rq\"],\"application/sparql-results+xml\":[\"srx\"],\"application/srgs\":[\"gram\"],\"application/srgs+xml\":[\"grxml\"],\"application/sru+xml\":[\"sru\"],\"application/ssdl+xml\":[\"ssdl\"],\"application/ssml+xml\":[\"ssml\"],\"application/swid+xml\":[\"swidtag\"],\"application/tei+xml\":[\"tei\",\"teicorpus\"],\"application/thraud+xml\":[\"tfi\"],\"application/timestamped-data\":[\"tsd\"],\"application/toml\":[\"toml\"],\"application/ttml+xml\":[\"ttml\"],\"application/ubjson\":[\"ubj\"],\"application/urc-ressheet+xml\":[\"rsheet\"],\"application/urc-targetdesc+xml\":[\"td\"],\"application/voicexml+xml\":[\"vxml\"],\"application/wasm\":[\"wasm\"],\"application/widget\":[\"wgt\"],\"application/winhlp\":[\"hlp\"],\"application/wsdl+xml\":[\"wsdl\"],\"application/wspolicy+xml\":[\"wspolicy\"],\"application/xaml+xml\":[\"xaml\"],\"application/xcap-att+xml\":[\"xav\"],\"application/xcap-caps+xml\":[\"xca\"],\"application/xcap-diff+xml\":[\"xdf\"],\"application/xcap-el+xml\":[\"xel\"],\"application/xcap-error+xml\":[\"xer\"],\"application/xcap-ns+xml\":[\"xns\"],\"application/xenc+xml\":[\"xenc\"],\"application/xhtml+xml\":[\"xhtml\",\"xht\"],\"application/xliff+xml\":[\"xlf\"],\"application/xml\":[\"xml\",\"xsl\",\"xsd\",\"rng\"],\"application/xml-dtd\":[\"dtd\"],\"application/xop+xml\":[\"xop\"],\"application/xproc+xml\":[\"xpl\"],\"application/xslt+xml\":[\"*xsl\",\"xslt\"],\"application/xspf+xml\":[\"xspf\"],\"application/xv+xml\":[\"mxml\",\"xhvml\",\"xvml\",\"xvm\"],\"application/yang\":[\"yang\"],\"application/yin+xml\":[\"yin\"],\"application/zip\":[\"zip\"],\"audio/3gpp\":[\"*3gpp\"],\"audio/adpcm\":[\"adp\"],\"audio/amr\":[\"amr\"],\"audio/basic\":[\"au\",\"snd\"],\"audio/midi\":[\"mid\",\"midi\",\"kar\",\"rmi\"],\"audio/mobile-xmf\":[\"mxmf\"],\"audio/mp3\":[\"*mp3\"],\"audio/mp4\":[\"m4a\",\"mp4a\"],\"audio/mpeg\":[\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"],\"audio/ogg\":[\"oga\",\"ogg\",\"spx\",\"opus\"],\"audio/s3m\":[\"s3m\"],\"audio/silk\":[\"sil\"],\"audio/wav\":[\"wav\"],\"audio/wave\":[\"*wav\"],\"audio/webm\":[\"weba\"],\"audio/xm\":[\"xm\"],\"font/collection\":[\"ttc\"],\"font/otf\":[\"otf\"],\"font/ttf\":[\"ttf\"],\"font/woff\":[\"woff\"],\"font/woff2\":[\"woff2\"],\"image/aces\":[\"exr\"],\"image/apng\":[\"apng\"],\"image/avif\":[\"avif\"],\"image/bmp\":[\"bmp\"],\"image/cgm\":[\"cgm\"],\"image/dicom-rle\":[\"drle\"],\"image/emf\":[\"emf\"],\"image/fits\":[\"fits\"],\"image/g3fax\":[\"g3\"],\"image/gif\":[\"gif\"],\"image/heic\":[\"heic\"],\"image/heic-sequence\":[\"heics\"],\"image/heif\":[\"heif\"],\"image/heif-sequence\":[\"heifs\"],\"image/hej2k\":[\"hej2\"],\"image/hsj2\":[\"hsj2\"],\"image/ief\":[\"ief\"],\"image/jls\":[\"jls\"],\"image/jp2\":[\"jp2\",\"jpg2\"],\"image/jpeg\":[\"jpeg\",\"jpg\",\"jpe\"],\"image/jph\":[\"jph\"],\"image/jphc\":[\"jhc\"],\"image/jpm\":[\"jpm\"],\"image/jpx\":[\"jpx\",\"jpf\"],\"image/jxr\":[\"jxr\"],\"image/jxra\":[\"jxra\"],\"image/jxrs\":[\"jxrs\"],\"image/jxs\":[\"jxs\"],\"image/jxsc\":[\"jxsc\"],\"image/jxsi\":[\"jxsi\"],\"image/jxss\":[\"jxss\"],\"image/ktx\":[\"ktx\"],\"image/ktx2\":[\"ktx2\"],\"image/png\":[\"png\"],\"image/sgi\":[\"sgi\"],\"image/svg+xml\":[\"svg\",\"svgz\"],\"image/t38\":[\"t38\"],\"image/tiff\":[\"tif\",\"tiff\"],\"image/tiff-fx\":[\"tfx\"],\"image/webp\":[\"webp\"],\"image/wmf\":[\"wmf\"],\"message/disposition-notification\":[\"disposition-notification\"],\"message/global\":[\"u8msg\"],\"message/global-delivery-status\":[\"u8dsn\"],\"message/global-disposition-notification\":[\"u8mdn\"],\"message/global-headers\":[\"u8hdr\"],\"message/rfc822\":[\"eml\",\"mime\"],\"model/3mf\":[\"3mf\"],\"model/gltf+json\":[\"gltf\"],\"model/gltf-binary\":[\"glb\"],\"model/iges\":[\"igs\",\"iges\"],\"model/mesh\":[\"msh\",\"mesh\",\"silo\"],\"model/mtl\":[\"mtl\"],\"model/obj\":[\"obj\"],\"model/stl\":[\"stl\"],\"model/vrml\":[\"wrl\",\"vrml\"],\"model/x3d+binary\":[\"*x3db\",\"x3dbz\"],\"model/x3d+fastinfoset\":[\"x3db\"],\"model/x3d+vrml\":[\"*x3dv\",\"x3dvz\"],\"model/x3d+xml\":[\"x3d\",\"x3dz\"],\"model/x3d-vrml\":[\"x3dv\"],\"text/cache-manifest\":[\"appcache\",\"manifest\"],\"text/calendar\":[\"ics\",\"ifb\"],\"text/coffeescript\":[\"coffee\",\"litcoffee\"],\"text/css\":[\"css\"],\"text/csv\":[\"csv\"],\"text/html\":[\"html\",\"htm\",\"shtml\"],\"text/jade\":[\"jade\"],\"text/jsx\":[\"jsx\"],\"text/less\":[\"less\"],\"text/markdown\":[\"markdown\",\"md\"],\"text/mathml\":[\"mml\"],\"text/mdx\":[\"mdx\"],\"text/n3\":[\"n3\"],\"text/plain\":[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"],\"text/richtext\":[\"rtx\"],\"text/rtf\":[\"*rtf\"],\"text/sgml\":[\"sgml\",\"sgm\"],\"text/shex\":[\"shex\"],\"text/slim\":[\"slim\",\"slm\"],\"text/spdx\":[\"spdx\"],\"text/stylus\":[\"stylus\",\"styl\"],\"text/tab-separated-values\":[\"tsv\"],\"text/troff\":[\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"],\"text/turtle\":[\"ttl\"],\"text/uri-list\":[\"uri\",\"uris\",\"urls\"],\"text/vcard\":[\"vcard\"],\"text/vtt\":[\"vtt\"],\"text/xml\":[\"*xml\"],\"text/yaml\":[\"yaml\",\"yml\"],\"video/3gpp\":[\"3gp\",\"3gpp\"],\"video/3gpp2\":[\"3g2\"],\"video/h261\":[\"h261\"],\"video/h263\":[\"h263\"],\"video/h264\":[\"h264\"],\"video/iso.segment\":[\"m4s\"],\"video/jpeg\":[\"jpgv\"],\"video/jpm\":[\"*jpm\",\"jpgm\"],\"video/mj2\":[\"mj2\",\"mjp2\"],\"video/mp2t\":[\"ts\"],\"video/mp4\":[\"mp4\",\"mp4v\",\"mpg4\"],\"video/mpeg\":[\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"],\"video/ogg\":[\"ogv\"],\"video/quicktime\":[\"qt\",\"mov\"],\"video/webm\":[\"webm\"]};","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Stream = _interopDefault(require('stream'));\nvar http = _interopDefault(require('http'));\nvar Url = _interopDefault(require('url'));\nvar https = _interopDefault(require('https'));\nvar zlib = _interopDefault(require('zlib'));\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nmodule.exports = exports = fetch;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = exports;\nexports.Headers = Headers;\nexports.Request = Request;\nexports.Response = Response;\nexports.FetchError = FetchError;\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('./lib/inprocess');\n","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserServerImpl = exports.BrowserServerLauncherImpl = void 0;\nconst ws = __importStar(require(\"ws\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst ws_1 = require(\"ws\");\nconst dispatcher_1 = require(\"./dispatchers/dispatcher\");\nconst browserDispatcher_1 = require(\"./dispatchers/browserDispatcher\");\nconst clientHelper_1 = require(\"./client/clientHelper\");\nconst utils_1 = require(\"./utils/utils\");\nconst selectorsDispatcher_1 = require(\"./dispatchers/selectorsDispatcher\");\nconst selectors_1 = require(\"./server/selectors\");\nconst browserContext_1 = require(\"./server/browserContext\");\nconst streamDispatcher_1 = require(\"./dispatchers/streamDispatcher\");\nconst instrumentation_1 = require(\"./server/instrumentation\");\nclass BrowserServerLauncherImpl {\n    constructor(browserType) {\n        this._browserType = browserType;\n    }\n    async launchServer(options = {}) {\n        const browser = await this._browserType.launch(instrumentation_1.internalCallMetadata(), {\n            ...options,\n            ignoreDefaultArgs: Array.isArray(options.ignoreDefaultArgs) ? options.ignoreDefaultArgs : undefined,\n            ignoreAllDefaultArgs: !!options.ignoreDefaultArgs && !Array.isArray(options.ignoreDefaultArgs),\n            env: options.env ? clientHelper_1.envObjectToArray(options.env) : undefined,\n        }, toProtocolLogger(options.logger));\n        return BrowserServerImpl.start(browser, options.port);\n    }\n}\nexports.BrowserServerLauncherImpl = BrowserServerLauncherImpl;\nclass BrowserServerImpl extends ws_1.EventEmitter {\n    constructor(browser, port) {\n        super();\n        this._browser = browser;\n        this._wsEndpoint = '';\n        this._process = browser.options.browserProcess.process;\n        let readyCallback = () => { };\n        this._ready = new Promise(f => readyCallback = f);\n        const token = utils_1.createGuid();\n        this._server = new ws.Server({ port, path: '/' + token }, () => {\n            const address = this._server.address();\n            this._wsEndpoint = typeof address === 'string' ? `${address}/${token}` : `ws://127.0.0.1:${address.port}/${token}`;\n            readyCallback();\n        });\n        this._server.on('connection', (socket, req) => {\n            this._clientAttached(socket);\n        });\n        browser.options.browserProcess.onclose = (exitCode, signal) => {\n            this._server.close();\n            this.emit('close', exitCode, signal);\n        };\n    }\n    static async start(browser, port = 0) {\n        const server = new BrowserServerImpl(browser, port);\n        await server._ready;\n        return server;\n    }\n    process() {\n        return this._process;\n    }\n    wsEndpoint() {\n        return this._wsEndpoint;\n    }\n    async close() {\n        await this._browser.options.browserProcess.close();\n    }\n    async kill() {\n        await this._browser.options.browserProcess.kill();\n    }\n    _clientAttached(socket) {\n        const connection = new dispatcher_1.DispatcherConnection();\n        connection.onmessage = message => {\n            if (socket.readyState !== ws.CLOSING)\n                socket.send(JSON.stringify(message));\n        };\n        socket.on('message', (message) => {\n            connection.dispatch(JSON.parse(Buffer.from(message).toString()));\n        });\n        socket.on('error', () => { });\n        const selectors = new selectors_1.Selectors();\n        const scope = connection.rootDispatcher();\n        const remoteBrowser = new RemoteBrowserDispatcher(scope, this._browser, selectors);\n        socket.on('close', () => {\n            // Avoid sending any more messages over closed socket.\n            connection.onmessage = () => { };\n            // Cleanup contexts upon disconnect.\n            remoteBrowser.connectedBrowser.close().catch(e => { });\n        });\n    }\n}\nexports.BrowserServerImpl = BrowserServerImpl;\nclass RemoteBrowserDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, browser, selectors) {\n        const connectedBrowser = new ConnectedBrowser(scope, browser, selectors);\n        super(scope, browser, 'RemoteBrowser', {\n            selectors: new selectorsDispatcher_1.SelectorsDispatcher(scope, selectors),\n            browser: connectedBrowser,\n        }, false, 'remoteBrowser');\n        this.connectedBrowser = connectedBrowser;\n        connectedBrowser._remoteBrowser = this;\n    }\n}\nclass ConnectedBrowser extends browserDispatcher_1.BrowserDispatcher {\n    constructor(scope, browser, selectors) {\n        super(scope, browser);\n        this._contexts = [];\n        this._closed = false;\n        this._selectors = selectors;\n    }\n    async newContext(params, metadata) {\n        if (params.recordVideo) {\n            // TODO: we should create a separate temp directory or accept a launchServer parameter.\n            params.recordVideo.dir = this._object.options.downloadsPath;\n        }\n        const result = await super.newContext(params, metadata);\n        const dispatcher = result.context;\n        dispatcher._object.on(browserContext_1.BrowserContext.Events.VideoStarted, (video) => this._sendVideo(dispatcher, video));\n        dispatcher._object._setSelectors(this._selectors);\n        this._contexts.push(dispatcher);\n        return result;\n    }\n    async close() {\n        // Only close our own contexts.\n        await Promise.all(this._contexts.map(context => context.close({}, instrumentation_1.internalCallMetadata())));\n        this._didClose();\n    }\n    _didClose() {\n        if (!this._closed) {\n            // We come here multiple times:\n            // - from ConnectedBrowser.close();\n            // - from underlying Browser.on('close').\n            this._closed = true;\n            super._didClose();\n        }\n    }\n    _sendVideo(contextDispatcher, video) {\n        video._waitForCallbackOnFinish(async () => {\n            const readable = fs_1.default.createReadStream(video._path);\n            await new Promise(f => readable.on('readable', f));\n            const stream = new streamDispatcher_1.StreamDispatcher(this._remoteBrowser._scope, readable);\n            this._remoteBrowser._dispatchEvent('video', {\n                stream,\n                context: contextDispatcher,\n                relativePath: video._relativePath\n            });\n            await new Promise(resolve => {\n                readable.on('close', resolve);\n                readable.on('end', resolve);\n                readable.on('error', resolve);\n            });\n        });\n    }\n}\nfunction toProtocolLogger(logger) {\n    return logger ? (direction, message) => {\n        if (logger.isEnabled('protocol', 'verbose'))\n            logger.log('protocol', 'verbose', (direction === 'send' ? 'SEND  ' : ' RECV ') + JSON.stringify(message), [], {});\n    } : undefined;\n}\n//# sourceMappingURL=browserServerImpl.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Accessibility = void 0;\nfunction axNodeFromProtocol(axNode) {\n    const result = {\n        ...axNode,\n        value: axNode.valueNumber !== undefined ? axNode.valueNumber : axNode.valueString,\n        checked: axNode.checked === 'checked' ? true : axNode.checked === 'unchecked' ? false : axNode.checked,\n        pressed: axNode.pressed === 'pressed' ? true : axNode.pressed === 'released' ? false : axNode.pressed,\n        children: axNode.children ? axNode.children.map(axNodeFromProtocol) : undefined,\n    };\n    delete result.valueNumber;\n    delete result.valueString;\n    return result;\n}\nclass Accessibility {\n    constructor(channel) {\n        this._channel = channel;\n    }\n    async snapshot(options = {}) {\n        const root = options.root ? options.root._elementChannel : undefined;\n        const result = await this._channel.accessibilitySnapshot({ interestingOnly: options.interestingOnly, root });\n        return result.rootAXNode ? axNodeFromProtocol(result.rootAXNode) : null;\n    }\n}\nexports.Accessibility = Accessibility;\n//# sourceMappingURL=accessibility.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AndroidWebView = exports.AndroidInput = exports.AndroidSocket = exports.AndroidDevice = exports.Android = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../utils/utils\");\nconst events_1 = require(\"./events\");\nconst browserContext_1 = require(\"./browserContext\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst waiter_1 = require(\"./waiter\");\nconst events_2 = require(\"events\");\nclass Android extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n    }\n    static from(android) {\n        return android._object;\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n        this._channel.setDefaultTimeoutNoReply({ timeout });\n    }\n    async devices() {\n        return this._wrapApiCall('android.devices', async (channel) => {\n            const { devices } = await channel.devices();\n            return devices.map(d => AndroidDevice.from(d));\n        });\n    }\n}\nexports.Android = Android;\nclass AndroidDevice extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._webViews = new Map();\n        this.input = new AndroidInput(this);\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings(parent._timeoutSettings);\n        this._channel.on('webViewAdded', ({ webView }) => this._onWebViewAdded(webView));\n        this._channel.on('webViewRemoved', ({ pid }) => this._onWebViewRemoved(pid));\n    }\n    static from(androidDevice) {\n        return androidDevice._object;\n    }\n    _onWebViewAdded(webView) {\n        const view = new AndroidWebView(this, webView);\n        this._webViews.set(webView.pid, view);\n        this.emit(events_1.Events.AndroidDevice.WebView, view);\n    }\n    _onWebViewRemoved(pid) {\n        const view = this._webViews.get(pid);\n        this._webViews.delete(pid);\n        if (view)\n            view.emit(events_1.Events.AndroidWebView.Close);\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n        this._channel.setDefaultTimeoutNoReply({ timeout });\n    }\n    serial() {\n        return this._initializer.serial;\n    }\n    model() {\n        return this._initializer.model;\n    }\n    webViews() {\n        return [...this._webViews.values()];\n    }\n    async webView(selector, options) {\n        const webView = [...this._webViews.values()].find(v => v.pkg() === selector.pkg);\n        if (webView)\n            return webView;\n        return this.waitForEvent('webview', {\n            ...options,\n            predicate: (view) => view.pkg() === selector.pkg\n        });\n    }\n    async wait(selector, options) {\n        await this._wrapApiCall('androidDevice.wait', async (channel) => {\n            await channel.wait({ selector: toSelectorChannel(selector), ...options });\n        });\n    }\n    async fill(selector, text, options) {\n        await this._wrapApiCall('androidDevice.fill', async (channel) => {\n            await channel.fill({ selector: toSelectorChannel(selector), text, ...options });\n        });\n    }\n    async press(selector, key, options) {\n        await this.tap(selector, options);\n        await this.input.press(key);\n    }\n    async tap(selector, options) {\n        await this._wrapApiCall('androidDevice.tap', async (channel) => {\n            await channel.tap({ selector: toSelectorChannel(selector), ...options });\n        });\n    }\n    async drag(selector, dest, options) {\n        await this._wrapApiCall('androidDevice.drag', async (channel) => {\n            await channel.drag({ selector: toSelectorChannel(selector), dest, ...options });\n        });\n    }\n    async fling(selector, direction, options) {\n        await this._wrapApiCall('androidDevice.fling', async (channel) => {\n            await channel.fling({ selector: toSelectorChannel(selector), direction, ...options });\n        });\n    }\n    async longTap(selector, options) {\n        await this._wrapApiCall('androidDevice.longTap', async (channel) => {\n            await channel.longTap({ selector: toSelectorChannel(selector), ...options });\n        });\n    }\n    async pinchClose(selector, percent, options) {\n        await this._wrapApiCall('androidDevice.pinchClose', async (channel) => {\n            await channel.pinchClose({ selector: toSelectorChannel(selector), percent, ...options });\n        });\n    }\n    async pinchOpen(selector, percent, options) {\n        await this._wrapApiCall('androidDevice.pinchOpen', async (channel) => {\n            await channel.pinchOpen({ selector: toSelectorChannel(selector), percent, ...options });\n        });\n    }\n    async scroll(selector, direction, percent, options) {\n        await this._wrapApiCall('androidDevice.scroll', async (channel) => {\n            await channel.scroll({ selector: toSelectorChannel(selector), direction, percent, ...options });\n        });\n    }\n    async swipe(selector, direction, percent, options) {\n        await this._wrapApiCall('androidDevice.swipe', async (channel) => {\n            await channel.swipe({ selector: toSelectorChannel(selector), direction, percent, ...options });\n        });\n    }\n    async info(selector) {\n        return await this._wrapApiCall('androidDevice.info', async (channel) => {\n            return (await channel.info({ selector: toSelectorChannel(selector) })).info;\n        });\n    }\n    async screenshot(options = {}) {\n        return await this._wrapApiCall('androidDevice.screenshot', async (channel) => {\n            const { binary } = await channel.screenshot();\n            const buffer = Buffer.from(binary, 'base64');\n            if (options.path)\n                await util.promisify(fs_1.default.writeFile)(options.path, buffer);\n            return buffer;\n        });\n    }\n    async close() {\n        return this._wrapApiCall('androidDevice.close', async (channel) => {\n            await channel.close();\n            this.emit(events_1.Events.AndroidDevice.Close);\n        });\n    }\n    async shell(command) {\n        return this._wrapApiCall('androidDevice.shell', async (channel) => {\n            const { result } = await channel.shell({ command });\n            return Buffer.from(result, 'base64');\n        });\n    }\n    async open(command) {\n        return this._wrapApiCall('androidDevice.open', async (channel) => {\n            return AndroidSocket.from((await channel.open({ command })).socket);\n        });\n    }\n    async installApk(file, options) {\n        return this._wrapApiCall('androidDevice.installApk', async (channel) => {\n            await channel.installApk({ file: await loadFile(file), args: options && options.args });\n        });\n    }\n    async push(file, path, options) {\n        return this._wrapApiCall('androidDevice.push', async (channel) => {\n            await channel.push({ file: await loadFile(file), path, mode: options ? options.mode : undefined });\n        });\n    }\n    async launchBrowser(options = {}) {\n        return this._wrapApiCall('androidDevice.launchBrowser', async (channel) => {\n            const contextOptions = await browserContext_1.prepareBrowserContextParams(options);\n            const { context } = await channel.launchBrowser(contextOptions);\n            return browserContext_1.BrowserContext.from(context);\n        });\n    }\n    async waitForEvent(event, optionsOrPredicate = {}) {\n        const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n        const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n        const waiter = waiter_1.Waiter.createForEvent(this, 'androidDevice', event);\n        waiter.rejectOnTimeout(timeout, `Timeout while waiting for event \"${event}\"`);\n        if (event !== events_1.Events.AndroidDevice.Close)\n            waiter.rejectOnEvent(this, events_1.Events.AndroidDevice.Close, new Error('Device closed'));\n        const result = await waiter.waitForEvent(this, event, predicate);\n        waiter.dispose();\n        return result;\n    }\n}\nexports.AndroidDevice = AndroidDevice;\nclass AndroidSocket extends channelOwner_1.ChannelOwner {\n    static from(androidDevice) {\n        return androidDevice._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._channel.on('data', ({ data }) => this.emit(events_1.Events.AndroidSocket.Data, Buffer.from(data, 'base64')));\n        this._channel.on('close', () => this.emit(events_1.Events.AndroidSocket.Close));\n    }\n    async write(data) {\n        return this._wrapApiCall('androidDevice.write', async (channel) => {\n            await channel.write({ data: data.toString('base64') });\n        });\n    }\n    async close() {\n        return this._wrapApiCall('androidDevice.close', async (channel) => {\n            await channel.close();\n        });\n    }\n}\nexports.AndroidSocket = AndroidSocket;\nasync function loadFile(file) {\n    if (utils_1.isString(file))\n        return (await util.promisify(fs_1.default.readFile)(file)).toString('base64');\n    return file.toString('base64');\n}\nclass AndroidInput {\n    constructor(device) {\n        this._device = device;\n    }\n    async type(text) {\n        return this._device._wrapApiCall('androidDevice.inputType', async (channel) => {\n            await channel.inputType({ text });\n        });\n    }\n    async press(key) {\n        return this._device._wrapApiCall('androidDevice.inputPress', async (channel) => {\n            await channel.inputPress({ key });\n        });\n    }\n    async tap(point) {\n        return this._device._wrapApiCall('androidDevice.inputTap', async (channel) => {\n            await channel.inputTap({ point });\n        });\n    }\n    async swipe(from, segments, steps) {\n        return this._device._wrapApiCall('androidDevice.inputSwipe', async (channel) => {\n            await channel.inputSwipe({ segments, steps });\n        });\n    }\n    async drag(from, to, steps) {\n        return this._device._wrapApiCall('androidDevice.inputDragAndDrop', async (channel) => {\n            await channel.inputDrag({ from, to, steps });\n        });\n    }\n}\nexports.AndroidInput = AndroidInput;\nfunction toSelectorChannel(selector) {\n    const { checkable, checked, clazz, clickable, depth, desc, enabled, focusable, focused, hasChild, hasDescendant, longClickable, pkg, res, scrollable, selected, text, } = selector;\n    const toRegex = (value) => {\n        if (value === undefined)\n            return undefined;\n        if (value instanceof RegExp)\n            return value.source;\n        return '^' + value.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d') + '$';\n    };\n    return {\n        checkable,\n        checked,\n        clazz: toRegex(clazz),\n        pkg: toRegex(pkg),\n        desc: toRegex(desc),\n        res: toRegex(res),\n        text: toRegex(text),\n        clickable,\n        depth,\n        enabled,\n        focusable,\n        focused,\n        hasChild: hasChild ? { selector: toSelectorChannel(hasChild.selector) } : undefined,\n        hasDescendant: hasDescendant ? { selector: toSelectorChannel(hasDescendant.selector), maxDepth: hasDescendant.maxDepth } : undefined,\n        longClickable,\n        scrollable,\n        selected,\n    };\n}\nclass AndroidWebView extends events_2.EventEmitter {\n    constructor(device, data) {\n        super();\n        this._device = device;\n        this._data = data;\n    }\n    pid() {\n        return this._data.pid;\n    }\n    pkg() {\n        return this._data.pkg;\n    }\n    async page() {\n        if (!this._pagePromise)\n            this._pagePromise = this._fetchPage();\n        return this._pagePromise;\n    }\n    async _fetchPage() {\n        return this._device._wrapApiCall('androidWebView.page', async (channel) => {\n            const { context } = await channel.connectToWebView({ pid: this._data.pid, sdkLanguage: 'javascript' });\n            return browserContext_1.BrowserContext.from(context).pages()[0];\n        });\n    }\n}\nexports.AndroidWebView = AndroidWebView;\n//# sourceMappingURL=android.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Browser = void 0;\nconst browserContext_1 = require(\"./browserContext\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst events_1 = require(\"./events\");\nconst errors_1 = require(\"../utils/errors\");\nclass Browser extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._contexts = new Set();\n        this._isConnected = true;\n        this._isRemote = false;\n        this._channel.on('close', () => this._didClose());\n        this._closedPromise = new Promise(f => this.once(events_1.Events.Browser.Disconnected, f));\n    }\n    static from(browser) {\n        return browser._object;\n    }\n    static fromNullable(browser) {\n        return browser ? Browser.from(browser) : null;\n    }\n    async newContext(options = {}) {\n        return this._wrapApiCall('browser.newContext', async (channel) => {\n            if (this._isRemote && options._traceDir)\n                throw new Error(`\"_traceDir\" is not supported in connected browser`);\n            const contextOptions = await browserContext_1.prepareBrowserContextParams(options);\n            const context = browserContext_1.BrowserContext.from((await channel.newContext(contextOptions)).context);\n            context._options = contextOptions;\n            this._contexts.add(context);\n            context._logger = options.logger || this._logger;\n            return context;\n        });\n    }\n    contexts() {\n        return [...this._contexts];\n    }\n    version() {\n        return this._initializer.version;\n    }\n    async newPage(options = {}) {\n        const context = await this.newContext(options);\n        const page = await context.newPage();\n        page._ownedContext = context;\n        context._ownerPage = page;\n        return page;\n    }\n    isConnected() {\n        return this._isConnected;\n    }\n    async close() {\n        try {\n            await this._wrapApiCall('browser.close', async (channel) => {\n                await channel.close();\n                await this._closedPromise;\n            });\n        }\n        catch (e) {\n            if (errors_1.isSafeCloseError(e))\n                return;\n            throw e;\n        }\n    }\n    _didClose() {\n        this._isConnected = false;\n        this.emit(events_1.Events.Browser.Disconnected, this);\n    }\n}\nexports.Browser = Browser;\n//# sourceMappingURL=browser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepareBrowserContextParams = exports.BrowserContext = void 0;\nconst page_1 = require(\"./page\");\nconst network = __importStar(require(\"./network\"));\nconst util = __importStar(require(\"util\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst channelOwner_1 = require(\"./channelOwner\");\nconst clientHelper_1 = require(\"./clientHelper\");\nconst browser_1 = require(\"./browser\");\nconst events_1 = require(\"./events\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst waiter_1 = require(\"./waiter\");\nconst utils_1 = require(\"../utils/utils\");\nconst errors_1 = require(\"../utils/errors\");\nconst fsWriteFileAsync = util.promisify(fs_1.default.writeFile.bind(fs_1.default));\nconst fsReadFileAsync = util.promisify(fs_1.default.readFile.bind(fs_1.default));\nclass BrowserContext extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._pages = new Set();\n        this._routes = [];\n        this._browser = null;\n        this._bindings = new Map();\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n        this._options = {\n            sdkLanguage: 'javascript'\n        };\n        if (parent instanceof browser_1.Browser)\n            this._browser = parent;\n        this._channel.on('bindingCall', ({ binding }) => this._onBinding(page_1.BindingCall.from(binding)));\n        this._channel.on('close', () => this._onClose());\n        this._channel.on('page', ({ page }) => this._onPage(page_1.Page.from(page)));\n        this._channel.on('route', ({ route, request }) => this._onRoute(network.Route.from(route), network.Request.from(request)));\n        this._closedPromise = new Promise(f => this.once(events_1.Events.BrowserContext.Close, f));\n    }\n    static from(context) {\n        return context._object;\n    }\n    static fromNullable(context) {\n        return context ? BrowserContext.from(context) : null;\n    }\n    _onPage(page) {\n        this._pages.add(page);\n        this.emit(events_1.Events.BrowserContext.Page, page);\n    }\n    _onRoute(route, request) {\n        for (const { url, handler } of this._routes) {\n            if (clientHelper_1.urlMatches(request.url(), url)) {\n                handler(route, request);\n                return;\n            }\n        }\n        // it can race with BrowserContext.close() which then throws since its closed\n        route.continue().catch(() => { });\n    }\n    async _onBinding(bindingCall) {\n        const func = this._bindings.get(bindingCall._initializer.name);\n        if (!func)\n            return;\n        await bindingCall.call(func);\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n        this._channel.setDefaultNavigationTimeoutNoReply({ timeout });\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n        this._channel.setDefaultTimeoutNoReply({ timeout });\n    }\n    browser() {\n        return this._browser;\n    }\n    pages() {\n        return [...this._pages];\n    }\n    async newPage() {\n        return this._wrapApiCall('browserContext.newPage', async (channel) => {\n            if (this._ownerPage)\n                throw new Error('Please use browser.newContext()');\n            return page_1.Page.from((await channel.newPage()).page);\n        });\n    }\n    async cookies(urls) {\n        if (!urls)\n            urls = [];\n        if (urls && typeof urls === 'string')\n            urls = [urls];\n        return this._wrapApiCall('browserContext.cookies', async (channel) => {\n            return (await channel.cookies({ urls: urls })).cookies;\n        });\n    }\n    async addCookies(cookies) {\n        return this._wrapApiCall('browserContext.addCookies', async (channel) => {\n            await channel.addCookies({ cookies });\n        });\n    }\n    async clearCookies() {\n        return this._wrapApiCall('browserContext.clearCookies', async (channel) => {\n            await channel.clearCookies();\n        });\n    }\n    async grantPermissions(permissions, options) {\n        return this._wrapApiCall('browserContext.grantPermissions', async (channel) => {\n            await channel.grantPermissions({ permissions, ...options });\n        });\n    }\n    async clearPermissions() {\n        return this._wrapApiCall('browserContext.clearPermissions', async (channel) => {\n            await channel.clearPermissions();\n        });\n    }\n    async setGeolocation(geolocation) {\n        return this._wrapApiCall('browserContext.setGeolocation', async (channel) => {\n            await channel.setGeolocation({ geolocation: geolocation || undefined });\n        });\n    }\n    async setExtraHTTPHeaders(headers) {\n        return this._wrapApiCall('browserContext.setExtraHTTPHeaders', async (channel) => {\n            network.validateHeaders(headers);\n            await channel.setExtraHTTPHeaders({ headers: utils_1.headersObjectToArray(headers) });\n        });\n    }\n    async setOffline(offline) {\n        return this._wrapApiCall('browserContext.setOffline', async (channel) => {\n            await channel.setOffline({ offline });\n        });\n    }\n    async setHTTPCredentials(httpCredentials) {\n        if (!utils_1.isUnderTest())\n            clientHelper_1.deprecate(`context.setHTTPCredentials`, `warning: method |context.setHTTPCredentials()| is deprecated. Instead of changing credentials, create another browser context with new credentials.`);\n        return this._wrapApiCall('browserContext.setHTTPCredentials', async (channel) => {\n            await channel.setHTTPCredentials({ httpCredentials: httpCredentials || undefined });\n        });\n    }\n    async addInitScript(script, arg) {\n        return this._wrapApiCall('browserContext.addInitScript', async (channel) => {\n            const source = await clientHelper_1.evaluationScript(script, arg);\n            await channel.addInitScript({ source });\n        });\n    }\n    async exposeBinding(name, callback, options = {}) {\n        return this._wrapApiCall('browserContext.exposeBinding', async (channel) => {\n            await channel.exposeBinding({ name, needsHandle: options.handle });\n            this._bindings.set(name, callback);\n        });\n    }\n    async exposeFunction(name, callback) {\n        return this._wrapApiCall('browserContext.exposeFunction', async (channel) => {\n            await channel.exposeBinding({ name });\n            const binding = (source, ...args) => callback(...args);\n            this._bindings.set(name, binding);\n        });\n    }\n    async route(url, handler) {\n        return this._wrapApiCall('browserContext.route', async (channel) => {\n            this._routes.push({ url, handler });\n            if (this._routes.length === 1)\n                await channel.setNetworkInterceptionEnabled({ enabled: true });\n        });\n    }\n    async unroute(url, handler) {\n        return this._wrapApiCall('browserContext.unroute', async (channel) => {\n            this._routes = this._routes.filter(route => route.url !== url || (handler && route.handler !== handler));\n            if (this._routes.length === 0)\n                await channel.setNetworkInterceptionEnabled({ enabled: false });\n        });\n    }\n    async waitForEvent(event, optionsOrPredicate = {}) {\n        const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n        const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n        const waiter = waiter_1.Waiter.createForEvent(this, 'browserContext', event);\n        waiter.rejectOnTimeout(timeout, `Timeout while waiting for event \"${event}\"`);\n        if (event !== events_1.Events.BrowserContext.Close)\n            waiter.rejectOnEvent(this, events_1.Events.BrowserContext.Close, new Error('Context closed'));\n        const result = await waiter.waitForEvent(this, event, predicate);\n        waiter.dispose();\n        return result;\n    }\n    async storageState(options = {}) {\n        return await this._wrapApiCall('browserContext.storageState', async (channel) => {\n            const state = await channel.storageState();\n            if (options.path) {\n                await utils_1.mkdirIfNeeded(options.path);\n                await fsWriteFileAsync(options.path, JSON.stringify(state, undefined, 2), 'utf8');\n            }\n            return state;\n        });\n    }\n    _onClose() {\n        if (this._browser)\n            this._browser._contexts.delete(this);\n        this.emit(events_1.Events.BrowserContext.Close, this);\n    }\n    async close() {\n        try {\n            await this._wrapApiCall('browserContext.close', async (channel) => {\n                await channel.close();\n                await this._closedPromise;\n            });\n        }\n        catch (e) {\n            if (errors_1.isSafeCloseError(e))\n                return;\n            throw e;\n        }\n    }\n    async _enableRecorder(params) {\n        await this._channel.recorderSupplementEnable(params);\n    }\n}\nexports.BrowserContext = BrowserContext;\nasync function prepareBrowserContextParams(options) {\n    if (options.videoSize && !options.videosPath)\n        throw new Error(`\"videoSize\" option requires \"videosPath\" to be specified`);\n    if (options.extraHTTPHeaders)\n        network.validateHeaders(options.extraHTTPHeaders);\n    const contextParams = {\n        sdkLanguage: 'javascript',\n        ...options,\n        viewport: options.viewport === null ? undefined : options.viewport,\n        noDefaultViewport: options.viewport === null,\n        extraHTTPHeaders: options.extraHTTPHeaders ? utils_1.headersObjectToArray(options.extraHTTPHeaders) : undefined,\n        storageState: typeof options.storageState === 'string' ? JSON.parse(await fsReadFileAsync(options.storageState, 'utf8')) : options.storageState,\n    };\n    if (!contextParams.recordVideo && options.videosPath) {\n        contextParams.recordVideo = {\n            dir: options.videosPath,\n            size: options.videoSize\n        };\n    }\n    return contextParams;\n}\nexports.prepareBrowserContextParams = prepareBrowserContextParams;\n//# sourceMappingURL=browserContext.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RemoteBrowser = exports.BrowserType = void 0;\nconst browser_1 = require(\"./browser\");\nconst browserContext_1 = require(\"./browserContext\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst ws_1 = __importDefault(require(\"ws\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst connection_1 = require(\"./connection\");\nconst serializers_1 = require(\"../protocol/serializers\");\nconst events_1 = require(\"./events\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst clientHelper_1 = require(\"./clientHelper\");\nconst utils_1 = require(\"../utils/utils\");\nconst selectors_1 = require(\"./selectors\");\nconst errors_1 = require(\"../utils/errors\");\nconst stream_1 = require(\"./stream\");\nclass BrowserType extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n    }\n    static from(browserType) {\n        return browserType._object;\n    }\n    executablePath() {\n        if (!this._initializer.executablePath)\n            throw new Error('Browser is not supported on current platform');\n        return this._initializer.executablePath;\n    }\n    name() {\n        return this._initializer.name;\n    }\n    async launch(options = {}) {\n        const logger = options.logger;\n        return this._wrapApiCall('browserType.launch', async (channel) => {\n            utils_1.assert(!options.userDataDir, 'userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead');\n            utils_1.assert(!options.port, 'Cannot specify a port without launching as a server.');\n            const launchOptions = {\n                ...options,\n                ignoreDefaultArgs: Array.isArray(options.ignoreDefaultArgs) ? options.ignoreDefaultArgs : undefined,\n                ignoreAllDefaultArgs: !!options.ignoreDefaultArgs && !Array.isArray(options.ignoreDefaultArgs),\n                env: options.env ? clientHelper_1.envObjectToArray(options.env) : undefined,\n            };\n            const browser = browser_1.Browser.from((await channel.launch(launchOptions)).browser);\n            browser._logger = logger;\n            return browser;\n        }, logger);\n    }\n    async launchServer(options = {}) {\n        if (!this._serverLauncher)\n            throw new Error('Launching server is not supported');\n        return this._serverLauncher.launchServer(options);\n    }\n    async launchPersistentContext(userDataDir, options = {}) {\n        return this._wrapApiCall('browserType.launchPersistentContext', async (channel) => {\n            utils_1.assert(!options.port, 'Cannot specify a port without launching as a server.');\n            const contextParams = await browserContext_1.prepareBrowserContextParams(options);\n            const persistentParams = {\n                ...contextParams,\n                ignoreDefaultArgs: Array.isArray(options.ignoreDefaultArgs) ? options.ignoreDefaultArgs : undefined,\n                ignoreAllDefaultArgs: !!options.ignoreDefaultArgs && !Array.isArray(options.ignoreDefaultArgs),\n                env: options.env ? clientHelper_1.envObjectToArray(options.env) : undefined,\n                channel: options.channel,\n                userDataDir,\n            };\n            const result = await channel.launchPersistentContext(persistentParams);\n            const context = browserContext_1.BrowserContext.from(result.context);\n            context._options = contextParams;\n            context._logger = options.logger;\n            return context;\n        }, options.logger);\n    }\n    async connect(params) {\n        const logger = params.logger;\n        return this._wrapApiCall('browserType.connect', async () => {\n            const connection = new connection_1.Connection();\n            const ws = new ws_1.default(params.wsEndpoint, [], {\n                perMessageDeflate: false,\n                maxPayload: 256 * 1024 * 1024,\n                handshakeTimeout: this._timeoutSettings.timeout(params),\n            });\n            // The 'ws' module in node sometimes sends us multiple messages in a single task.\n            const waitForNextTask = params.slowMo\n                ? (cb) => setTimeout(cb, params.slowMo)\n                : utils_1.makeWaitForNextTask();\n            connection.onmessage = message => {\n                if (ws.readyState !== ws_1.default.OPEN) {\n                    setTimeout(() => {\n                        connection.dispatch({ id: message.id, error: serializers_1.serializeError(new Error(errors_1.kBrowserClosedError)) });\n                    }, 0);\n                    return;\n                }\n                ws.send(JSON.stringify(message));\n            };\n            ws.addEventListener('message', event => {\n                waitForNextTask(() => connection.dispatch(JSON.parse(event.data)));\n            });\n            return await new Promise(async (fulfill, reject) => {\n                if (params.__testHookBeforeCreateBrowser) {\n                    try {\n                        await params.__testHookBeforeCreateBrowser();\n                    }\n                    catch (e) {\n                        reject(e);\n                    }\n                }\n                ws.addEventListener('open', async () => {\n                    const prematureCloseListener = (event) => {\n                        reject(new Error('Server disconnected: ' + event.reason));\n                    };\n                    ws.addEventListener('close', prematureCloseListener);\n                    const remoteBrowser = await connection.waitForObjectWithKnownName('remoteBrowser');\n                    // Inherit shared selectors for connected browser.\n                    const selectorsOwner = selectors_1.SelectorsOwner.from(remoteBrowser._initializer.selectors);\n                    selectors_1.sharedSelectors._addChannel(selectorsOwner);\n                    const browser = browser_1.Browser.from(remoteBrowser._initializer.browser);\n                    browser._logger = logger;\n                    browser._isRemote = true;\n                    const closeListener = () => {\n                        // Emulate all pages, contexts and the browser closing upon disconnect.\n                        for (const context of browser.contexts()) {\n                            for (const page of context.pages())\n                                page._onClose();\n                            context._onClose();\n                        }\n                        browser._didClose();\n                    };\n                    ws.removeEventListener('close', prematureCloseListener);\n                    ws.addEventListener('close', closeListener);\n                    browser.on(events_1.Events.Browser.Disconnected, () => {\n                        selectors_1.sharedSelectors._removeChannel(selectorsOwner);\n                        ws.removeEventListener('close', closeListener);\n                        ws.close();\n                    });\n                    fulfill(browser);\n                });\n                ws.addEventListener('error', event => {\n                    ws.close();\n                    reject(new Error(event.message + '. Most likely ws endpoint is incorrect'));\n                });\n            });\n        }, logger);\n    }\n    async connectOverCDP(params) {\n        if (this.name() !== 'chromium')\n            throw new Error('Connecting over CDP is only supported in Chromium.');\n        const logger = params.logger;\n        return this._wrapApiCall('browserType.connectOverCDP', async (channel) => {\n            const result = await channel.connectOverCDP({\n                sdkLanguage: 'javascript',\n                wsEndpoint: params.wsEndpoint,\n                slowMo: params.slowMo,\n                timeout: params.timeout\n            });\n            const browser = browser_1.Browser.from(result.browser);\n            if (result.defaultContext)\n                browser._contexts.add(browserContext_1.BrowserContext.from(result.defaultContext));\n            browser._isRemote = true;\n            browser._logger = logger;\n            return browser;\n        }, logger);\n    }\n}\nexports.BrowserType = BrowserType;\nclass RemoteBrowser extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._channel.on('video', ({ context, stream, relativePath }) => this._onVideo(browserContext_1.BrowserContext.from(context), stream_1.Stream.from(stream), relativePath));\n    }\n    async _onVideo(context, stream, relativePath) {\n        const videoFile = path_1.default.join(context._options.recordVideo.dir, relativePath);\n        await utils_1.mkdirIfNeeded(videoFile);\n        stream.stream().pipe(fs_1.default.createWriteStream(videoFile));\n    }\n}\nexports.RemoteBrowser = RemoteBrowser;\n//# sourceMappingURL=browserType.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CDPSession = void 0;\nconst channelOwner_1 = require(\"./channelOwner\");\nclass CDPSession extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._channel.on('event', ({ method, params }) => {\n            this.emit(method, params);\n        });\n        this.on = super.on;\n        this.addListener = super.addListener;\n        this.off = super.removeListener;\n        this.removeListener = super.removeListener;\n        this.once = super.once;\n    }\n    static from(cdpSession) {\n        return cdpSession._object;\n    }\n    async send(method, params) {\n        return this._wrapApiCall('cdpSession.send', async (channel) => {\n            const result = await channel.send({ method, params });\n            return result.result;\n        });\n    }\n    async detach() {\n        return this._wrapApiCall('cdpSession.detach', async (channel) => {\n            return channel.detach();\n        });\n    }\n}\nexports.CDPSession = CDPSession;\n//# sourceMappingURL=cdpSession.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChannelOwner = void 0;\nconst events_1 = require(\"events\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nconst stackTrace_1 = require(\"../utils/stackTrace\");\nconst validator_1 = require(\"../protocol/validator\");\nclass ChannelOwner extends events_1.EventEmitter {\n    constructor(parent, type, guid, initializer) {\n        super();\n        this._objects = new Map();\n        this.setMaxListeners(0);\n        this._connection = parent instanceof ChannelOwner ? parent._connection : parent;\n        this._type = type;\n        this._guid = guid;\n        this._parent = parent instanceof ChannelOwner ? parent : undefined;\n        this._connection._objects.set(guid, this);\n        if (this._parent) {\n            this._parent._objects.set(guid, this);\n            this._logger = this._parent._logger;\n        }\n        this._channel = this._createChannel(new events_1.EventEmitter(), '');\n        this._initializer = initializer;\n    }\n    _dispose() {\n        // Clean up from parent and connection.\n        if (this._parent)\n            this._parent._objects.delete(this._guid);\n        this._connection._objects.delete(this._guid);\n        // Dispose all children.\n        for (const object of [...this._objects.values()])\n            object._dispose();\n        this._objects.clear();\n    }\n    _debugScopeState() {\n        return {\n            _guid: this._guid,\n            objects: Array.from(this._objects.values()).map(o => o._debugScopeState()),\n        };\n    }\n    _createChannel(base, apiName) {\n        const channel = new Proxy(base, {\n            get: (obj, prop) => {\n                if (prop === 'debugScopeState')\n                    return (params) => this._connection.sendMessageToServer(this._guid, prop, params, apiName);\n                if (typeof prop === 'string') {\n                    const validator = scheme[paramsName(this._type, prop)];\n                    if (validator)\n                        return (params) => this._connection.sendMessageToServer(this._guid, prop, validator(params, ''), apiName);\n                }\n                return obj[prop];\n            },\n        });\n        channel._object = this;\n        return channel;\n    }\n    async _wrapApiCall(apiName, func, logger) {\n        logger = logger || this._logger;\n        try {\n            logApiCall(logger, `=> ${apiName} started`);\n            const channel = this._createChannel({}, apiName);\n            const result = await func(channel);\n            logApiCall(logger, `<= ${apiName} succeeded`);\n            return result;\n        }\n        catch (e) {\n            logApiCall(logger, `<= ${apiName} failed`);\n            stackTrace_1.rewriteErrorMessage(e, `${apiName}: ` + e.message);\n            throw e;\n        }\n    }\n    _waitForEventInfoBefore(waitId, name, stack) {\n        this._connection.sendMessageToServer(this._guid, 'waitForEventInfo', { info: { name, waitId, phase: 'before', stack } }, undefined).catch(() => { });\n    }\n    _waitForEventInfoAfter(waitId, error) {\n        this._connection.sendMessageToServer(this._guid, 'waitForEventInfo', { info: { waitId, phase: 'after', error } }, undefined).catch(() => { });\n    }\n    _waitForEventInfoLog(waitId, message) {\n        this._connection.sendMessageToServer(this._guid, 'waitForEventInfo', { info: { waitId, phase: 'log', message } }, undefined).catch(() => { });\n    }\n    toJSON() {\n        // Jest's expect library tries to print objects sometimes.\n        // RPC objects can contain links to lots of other objects,\n        // which can cause jest to crash. Let's help it out\n        // by just returning the important values.\n        return {\n            _type: this._type,\n            _guid: this._guid,\n        };\n    }\n}\nexports.ChannelOwner = ChannelOwner;\nfunction logApiCall(logger, message) {\n    if (logger && logger.isEnabled('api', 'info'))\n        logger.log('api', 'info', message, [], { color: 'cyan' });\n    debugLogger_1.debugLogger.log('api', message);\n}\nfunction paramsName(type, method) {\n    return type + method[0].toUpperCase() + method.substring(1) + 'Params';\n}\nconst tChannel = (name) => {\n    return (arg, path) => {\n        if (arg._object instanceof ChannelOwner && (name === '*' || arg._object._type === name))\n            return { guid: arg._object._guid };\n        throw new validator_1.ValidationError(`${path}: expected ${name}`);\n    };\n};\nconst scheme = validator_1.createScheme(tChannel);\n//# sourceMappingURL=channelOwner.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChromiumBrowser = void 0;\nconst cdpSession_1 = require(\"./cdpSession\");\nconst browser_1 = require(\"./browser\");\nclass ChromiumBrowser extends browser_1.Browser {\n    contexts() {\n        return super.contexts();\n    }\n    newContext(options) {\n        return super.newContext(options);\n    }\n    async newBrowserCDPSession() {\n        return this._wrapApiCall('chromiumBrowser.newBrowserCDPSession', async (channel) => {\n            return cdpSession_1.CDPSession.from((await channel.crNewBrowserCDPSession()).session);\n        });\n    }\n    async startTracing(page, options = {}) {\n        return this._wrapApiCall('chromiumBrowser.startTracing', async (channel) => {\n            await channel.crStartTracing({ ...options, page: page ? page._channel : undefined });\n        });\n    }\n    async stopTracing() {\n        return this._wrapApiCall('chromiumBrowser.stopTracing', async (channel) => {\n            return Buffer.from((await channel.crStopTracing()).binary, 'base64');\n        });\n    }\n}\nexports.ChromiumBrowser = ChromiumBrowser;\n//# sourceMappingURL=chromiumBrowser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChromiumBrowserContext = void 0;\nconst page_1 = require(\"./page\");\nconst cdpSession_1 = require(\"./cdpSession\");\nconst events_1 = require(\"./events\");\nconst worker_1 = require(\"./worker\");\nconst browserContext_1 = require(\"./browserContext\");\nclass ChromiumBrowserContext extends browserContext_1.BrowserContext {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._backgroundPages = new Set();\n        this._serviceWorkers = new Set();\n        this._isChromium = true;\n        this._channel.on('crBackgroundPage', ({ page }) => {\n            const backgroundPage = page_1.Page.from(page);\n            this._backgroundPages.add(backgroundPage);\n            this.emit(events_1.Events.ChromiumBrowserContext.BackgroundPage, backgroundPage);\n        });\n        this._channel.on('crServiceWorker', ({ worker }) => {\n            const serviceWorker = worker_1.Worker.from(worker);\n            serviceWorker._context = this;\n            this._serviceWorkers.add(serviceWorker);\n            this.emit(events_1.Events.ChromiumBrowserContext.ServiceWorker, serviceWorker);\n        });\n    }\n    backgroundPages() {\n        return [...this._backgroundPages];\n    }\n    serviceWorkers() {\n        return [...this._serviceWorkers];\n    }\n    async newCDPSession(page) {\n        return this._wrapApiCall('chromiumBrowserContext.newCDPSession', async (channel) => {\n            const result = await channel.crNewCDPSession({ page: page._channel });\n            return cdpSession_1.CDPSession.from(result.session);\n        });\n    }\n}\nexports.ChromiumBrowserContext = ChromiumBrowserContext;\n//# sourceMappingURL=chromiumBrowserContext.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChromiumCoverage = void 0;\nclass ChromiumCoverage {\n    constructor(channel) {\n        this._channel = channel;\n    }\n    async startJSCoverage(options = {}) {\n        await this._channel.crStartJSCoverage(options);\n    }\n    async stopJSCoverage() {\n        return (await this._channel.crStopJSCoverage()).entries;\n    }\n    async startCSSCoverage(options = {}) {\n        await this._channel.crStartCSSCoverage(options);\n    }\n    async stopCSSCoverage() {\n        return (await this._channel.crStopCSSCoverage()).entries;\n    }\n}\nexports.ChromiumCoverage = ChromiumCoverage;\n//# sourceMappingURL=chromiumCoverage.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.globToRegex = exports.urlMatches = exports.parsedURL = exports.evaluationScript = exports.envObjectToArray = exports.deprecate = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../utils/utils\");\nconst deprecatedHits = new Set();\nfunction deprecate(methodName, message) {\n    if (deprecatedHits.has(methodName))\n        return;\n    deprecatedHits.add(methodName);\n    console.warn(message);\n}\nexports.deprecate = deprecate;\nfunction envObjectToArray(env) {\n    const result = [];\n    for (const name in env) {\n        if (!Object.is(env[name], undefined))\n            result.push({ name, value: String(env[name]) });\n    }\n    return result;\n}\nexports.envObjectToArray = envObjectToArray;\nasync function evaluationScript(fun, arg, addSourceUrl = true) {\n    if (typeof fun === 'function') {\n        const source = fun.toString();\n        const argString = Object.is(arg, undefined) ? 'undefined' : JSON.stringify(arg);\n        return `(${source})(${argString})`;\n    }\n    if (arg !== undefined)\n        throw new Error('Cannot evaluate a string with arguments');\n    if (utils_1.isString(fun))\n        return fun;\n    if (fun.content !== undefined)\n        return fun.content;\n    if (fun.path !== undefined) {\n        let source = await util.promisify(fs_1.default.readFile)(fun.path, 'utf8');\n        if (addSourceUrl)\n            source += '//# sourceURL=' + fun.path.replace(/\\n/g, '');\n        return source;\n    }\n    throw new Error('Either path or content property must be present');\n}\nexports.evaluationScript = evaluationScript;\nfunction parsedURL(url) {\n    try {\n        return new URL(url);\n    }\n    catch (e) {\n        return null;\n    }\n}\nexports.parsedURL = parsedURL;\nfunction urlMatches(urlString, match) {\n    if (match === undefined || match === '')\n        return true;\n    if (utils_1.isString(match))\n        match = globToRegex(match);\n    if (utils_1.isRegExp(match))\n        return match.test(urlString);\n    if (typeof match === 'string' && match === urlString)\n        return true;\n    const url = parsedURL(urlString);\n    if (!url)\n        return false;\n    if (typeof match === 'string')\n        return url.pathname === match;\n    if (typeof match !== 'function')\n        throw new Error('url parameter should be string, RegExp or function');\n    return match(url);\n}\nexports.urlMatches = urlMatches;\nconst escapeGlobChars = new Set(['/', '$', '^', '+', '.', '(', ')', '=', '!', '|']);\nfunction globToRegex(glob) {\n    const tokens = ['^'];\n    let inGroup;\n    for (let i = 0; i < glob.length; ++i) {\n        const c = glob[i];\n        if (escapeGlobChars.has(c)) {\n            tokens.push('\\\\' + c);\n            continue;\n        }\n        if (c === '*') {\n            const beforeDeep = glob[i - 1];\n            let starCount = 1;\n            while (glob[i + 1] === '*') {\n                starCount++;\n                i++;\n            }\n            const afterDeep = glob[i + 1];\n            const isDeep = starCount > 1 &&\n                (beforeDeep === '/' || beforeDeep === undefined) &&\n                (afterDeep === '/' || afterDeep === undefined);\n            if (isDeep) {\n                tokens.push('((?:[^/]*(?:\\/|$))*)');\n                i++;\n            }\n            else {\n                tokens.push('([^/]*)');\n            }\n            continue;\n        }\n        switch (c) {\n            case '?':\n                tokens.push('.');\n                break;\n            case '{':\n                inGroup = true;\n                tokens.push('(');\n                break;\n            case '}':\n                inGroup = false;\n                tokens.push(')');\n                break;\n            case ',':\n                if (inGroup) {\n                    tokens.push('|');\n                    break;\n                }\n                tokens.push('\\\\' + c);\n                break;\n            default:\n                tokens.push(c);\n        }\n    }\n    tokens.push('$');\n    return new RegExp(tokens.join(''));\n}\nexports.globToRegex = globToRegex;\n//# sourceMappingURL=clientHelper.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Connection = void 0;\nconst browser_1 = require(\"./browser\");\nconst browserContext_1 = require(\"./browserContext\");\nconst browserType_1 = require(\"./browserType\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst elementHandle_1 = require(\"./elementHandle\");\nconst frame_1 = require(\"./frame\");\nconst jsHandle_1 = require(\"./jsHandle\");\nconst network_1 = require(\"./network\");\nconst page_1 = require(\"./page\");\nconst worker_1 = require(\"./worker\");\nconst consoleMessage_1 = require(\"./consoleMessage\");\nconst dialog_1 = require(\"./dialog\");\nconst download_1 = require(\"./download\");\nconst serializers_1 = require(\"../protocol/serializers\");\nconst cdpSession_1 = require(\"./cdpSession\");\nconst playwright_1 = require(\"./playwright\");\nconst electron_1 = require(\"./electron\");\nconst chromiumBrowser_1 = require(\"./chromiumBrowser\");\nconst chromiumBrowserContext_1 = require(\"./chromiumBrowserContext\");\nconst stream_1 = require(\"./stream\");\nconst webkitBrowser_1 = require(\"./webkitBrowser\");\nconst firefoxBrowser_1 = require(\"./firefoxBrowser\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nconst selectors_1 = require(\"./selectors\");\nconst utils_1 = require(\"../utils/utils\");\nconst android_1 = require(\"./android\");\nconst stackTrace_1 = require(\"../utils/stackTrace\");\nclass Root extends channelOwner_1.ChannelOwner {\n    constructor(connection) {\n        super(connection, '', '', {});\n    }\n}\nclass Connection {\n    constructor() {\n        this._objects = new Map();\n        this._waitingForObject = new Map();\n        this.onmessage = (message) => { };\n        this._lastId = 0;\n        this._callbacks = new Map();\n        this._rootObject = new Root(this);\n    }\n    async waitForObjectWithKnownName(guid) {\n        if (this._objects.has(guid))\n            return this._objects.get(guid);\n        return new Promise(f => this._waitingForObject.set(guid, f));\n    }\n    getObjectWithKnownName(guid) {\n        return this._objects.get(guid);\n    }\n    async sendMessageToServer(guid, method, params, apiName) {\n        const { stack, frames } = stackTrace_1.captureStackTrace();\n        const id = ++this._lastId;\n        const converted = { id, guid, method, params };\n        // Do not include metadata in debug logs to avoid noise.\n        debugLogger_1.debugLogger.log('channel:command', converted);\n        this.onmessage({ ...converted, metadata: { stack: frames, apiName } });\n        try {\n            return await new Promise((resolve, reject) => this._callbacks.set(id, { resolve, reject }));\n        }\n        catch (e) {\n            const innerStack = ((process.env.PWDEBUGIMPL || utils_1.isUnderTest()) && e.stack) ? e.stack.substring(e.stack.indexOf(e.message) + e.message.length) : '';\n            e.stack = e.message + innerStack + '\\n' + stack;\n            throw e;\n        }\n    }\n    _debugScopeState() {\n        return this._rootObject._debugScopeState();\n    }\n    dispatch(message) {\n        const { id, guid, method, params, result, error } = message;\n        if (id) {\n            debugLogger_1.debugLogger.log('channel:response', message);\n            const callback = this._callbacks.get(id);\n            if (!callback)\n                throw new Error(`Cannot find command to respond: ${id}`);\n            this._callbacks.delete(id);\n            if (error)\n                callback.reject(serializers_1.parseError(error));\n            else\n                callback.resolve(this._replaceGuidsWithChannels(result));\n            return;\n        }\n        debugLogger_1.debugLogger.log('channel:event', message);\n        if (method === '__create__') {\n            this._createRemoteObject(guid, params.type, params.guid, params.initializer);\n            return;\n        }\n        if (method === '__dispose__') {\n            const object = this._objects.get(guid);\n            if (!object)\n                throw new Error(`Cannot find object to dispose: ${guid}`);\n            object._dispose();\n            return;\n        }\n        const object = this._objects.get(guid);\n        if (!object)\n            throw new Error(`Cannot find object to emit \"${method}\": ${guid}`);\n        object._channel.emit(method, this._replaceGuidsWithChannels(params));\n    }\n    _replaceGuidsWithChannels(payload) {\n        if (!payload)\n            return payload;\n        if (Array.isArray(payload))\n            return payload.map(p => this._replaceGuidsWithChannels(p));\n        if (payload.guid && this._objects.has(payload.guid))\n            return this._objects.get(payload.guid)._channel;\n        if (typeof payload === 'object') {\n            const result = {};\n            for (const key of Object.keys(payload))\n                result[key] = this._replaceGuidsWithChannels(payload[key]);\n            return result;\n        }\n        return payload;\n    }\n    _createRemoteObject(parentGuid, type, guid, initializer) {\n        const parent = this._objects.get(parentGuid);\n        if (!parent)\n            throw new Error(`Cannot find parent object ${parentGuid} to create ${guid}`);\n        let result;\n        initializer = this._replaceGuidsWithChannels(initializer);\n        switch (type) {\n            case 'Android':\n                result = new android_1.Android(parent, type, guid, initializer);\n                break;\n            case 'AndroidSocket':\n                result = new android_1.AndroidSocket(parent, type, guid, initializer);\n                break;\n            case 'AndroidDevice':\n                result = new android_1.AndroidDevice(parent, type, guid, initializer);\n                break;\n            case 'BindingCall':\n                result = new page_1.BindingCall(parent, type, guid, initializer);\n                break;\n            case 'Browser': {\n                const browserName = initializer.name;\n                if (browserName === 'chromium')\n                    result = new chromiumBrowser_1.ChromiumBrowser(parent, type, guid, initializer);\n                else if (browserName === 'webkit')\n                    result = new webkitBrowser_1.WebKitBrowser(parent, type, guid, initializer);\n                else if (browserName === 'firefox')\n                    result = new firefoxBrowser_1.FirefoxBrowser(parent, type, guid, initializer);\n                else\n                    result = new browser_1.Browser(parent, type, guid, initializer);\n                break;\n            }\n            case 'BrowserContext': {\n                const { isChromium } = initializer;\n                if (isChromium)\n                    result = new chromiumBrowserContext_1.ChromiumBrowserContext(parent, type, guid, initializer);\n                else\n                    result = new browserContext_1.BrowserContext(parent, type, guid, initializer);\n                break;\n            }\n            case 'BrowserType':\n                result = new browserType_1.BrowserType(parent, type, guid, initializer);\n                break;\n            case 'CDPSession':\n                result = new cdpSession_1.CDPSession(parent, type, guid, initializer);\n                break;\n            case 'ConsoleMessage':\n                result = new consoleMessage_1.ConsoleMessage(parent, type, guid, initializer);\n                break;\n            case 'Dialog':\n                result = new dialog_1.Dialog(parent, type, guid, initializer);\n                break;\n            case 'Download':\n                result = new download_1.Download(parent, type, guid, initializer);\n                break;\n            case 'Electron':\n                result = new electron_1.Electron(parent, type, guid, initializer);\n                break;\n            case 'ElectronApplication':\n                result = new electron_1.ElectronApplication(parent, type, guid, initializer);\n                break;\n            case 'ElementHandle':\n                result = new elementHandle_1.ElementHandle(parent, type, guid, initializer);\n                break;\n            case 'Frame':\n                result = new frame_1.Frame(parent, type, guid, initializer);\n                break;\n            case 'JSHandle':\n                result = new jsHandle_1.JSHandle(parent, type, guid, initializer);\n                break;\n            case 'Page':\n                result = new page_1.Page(parent, type, guid, initializer);\n                break;\n            case 'Playwright':\n                result = new playwright_1.Playwright(parent, type, guid, initializer);\n                break;\n            case 'RemoteBrowser':\n                result = new browserType_1.RemoteBrowser(parent, type, guid, initializer);\n                break;\n            case 'Request':\n                result = new network_1.Request(parent, type, guid, initializer);\n                break;\n            case 'Response':\n                result = new network_1.Response(parent, type, guid, initializer);\n                break;\n            case 'Route':\n                result = new network_1.Route(parent, type, guid, initializer);\n                break;\n            case 'Stream':\n                result = new stream_1.Stream(parent, type, guid, initializer);\n                break;\n            case 'Selectors':\n                result = new selectors_1.SelectorsOwner(parent, type, guid, initializer);\n                break;\n            case 'WebSocket':\n                result = new network_1.WebSocket(parent, type, guid, initializer);\n                break;\n            case 'Worker':\n                result = new worker_1.Worker(parent, type, guid, initializer);\n                break;\n            default:\n                throw new Error('Missing type ' + type);\n        }\n        const callback = this._waitingForObject.get(guid);\n        if (callback) {\n            callback(result);\n            this._waitingForObject.delete(guid);\n        }\n        return result;\n    }\n}\nexports.Connection = Connection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConsoleMessage = void 0;\nconst util = __importStar(require(\"util\"));\nconst jsHandle_1 = require(\"./jsHandle\");\nconst channelOwner_1 = require(\"./channelOwner\");\nclass ConsoleMessage extends channelOwner_1.ChannelOwner {\n    static from(message) {\n        return message._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    type() {\n        return this._initializer.type;\n    }\n    text() {\n        return this._initializer.text;\n    }\n    args() {\n        return this._initializer.args.map(jsHandle_1.JSHandle.from);\n    }\n    location() {\n        return this._initializer.location;\n    }\n    [util.inspect.custom]() {\n        return this.text();\n    }\n}\nexports.ConsoleMessage = ConsoleMessage;\n//# sourceMappingURL=consoleMessage.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Dialog = void 0;\nconst channelOwner_1 = require(\"./channelOwner\");\nclass Dialog extends channelOwner_1.ChannelOwner {\n    static from(dialog) {\n        return dialog._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    type() {\n        return this._initializer.type;\n    }\n    message() {\n        return this._initializer.message;\n    }\n    defaultValue() {\n        return this._initializer.defaultValue;\n    }\n    async accept(promptText) {\n        return this._wrapApiCall('dialog.accept', async (channel) => {\n            await channel.accept({ promptText });\n        });\n    }\n    async dismiss() {\n        return this._wrapApiCall('dialog.dismiss', async (channel) => {\n            await channel.dismiss();\n        });\n    }\n}\nexports.Dialog = Dialog;\n//# sourceMappingURL=dialog.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Download = void 0;\nconst channelOwner_1 = require(\"./channelOwner\");\nconst stream_1 = require(\"./stream\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst utils_1 = require(\"../utils/utils\");\nclass Download extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._browser = parent._browser;\n    }\n    static from(download) {\n        return download._object;\n    }\n    url() {\n        return this._initializer.url;\n    }\n    suggestedFilename() {\n        return this._initializer.suggestedFilename;\n    }\n    async path() {\n        if (this._browser && this._browser._isRemote)\n            throw new Error(`Path is not available when using browserType.connect(). Use download.saveAs() to save a local copy.`);\n        return this._wrapApiCall('download.path', async (channel) => {\n            return (await channel.path()).value || null;\n        });\n    }\n    async saveAs(path) {\n        return this._wrapApiCall('download.saveAs', async (channel) => {\n            if (!this._browser || !this._browser._isRemote) {\n                await channel.saveAs({ path });\n                return;\n            }\n            const result = await channel.saveAsStream();\n            const stream = stream_1.Stream.from(result.stream);\n            await utils_1.mkdirIfNeeded(path);\n            await new Promise((resolve, reject) => {\n                stream.stream().pipe(fs_1.default.createWriteStream(path))\n                    .on('finish', resolve)\n                    .on('error', reject);\n            });\n        });\n    }\n    async failure() {\n        return this._wrapApiCall('download.failure', async (channel) => {\n            return (await channel.failure()).error || null;\n        });\n    }\n    async createReadStream() {\n        return this._wrapApiCall('download.createReadStream', async (channel) => {\n            const result = await channel.stream();\n            if (!result.stream)\n                return null;\n            const stream = stream_1.Stream.from(result.stream);\n            return stream.stream();\n        });\n    }\n    async delete() {\n        return this._wrapApiCall('download.delete', async (channel) => {\n            return channel.delete();\n        });\n    }\n}\nexports.Download = Download;\n//# sourceMappingURL=download.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElectronApplication = exports.Electron = void 0;\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst browserContext_1 = require(\"./browserContext\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst clientHelper_1 = require(\"./clientHelper\");\nconst events_1 = require(\"./events\");\nconst jsHandle_1 = require(\"./jsHandle\");\nconst page_1 = require(\"./page\");\nconst waiter_1 = require(\"./waiter\");\nclass Electron extends channelOwner_1.ChannelOwner {\n    static from(electron) {\n        return electron._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    async launch(options = {}) {\n        return this._wrapApiCall('electron.launch', async (channel) => {\n            const params = {\n                sdkLanguage: 'javascript',\n                ...options,\n                env: clientHelper_1.envObjectToArray(options.env ? options.env : process.env),\n            };\n            return ElectronApplication.from((await channel.launch(params)).electronApplication);\n        });\n    }\n}\nexports.Electron = Electron;\nclass ElectronApplication extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._windows = new Set();\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n        this._channel.on('context', ({ context }) => this._context = browserContext_1.BrowserContext.from(context));\n        this._channel.on('window', ({ page, browserWindow }) => {\n            const window = page_1.Page.from(page);\n            window.browserWindow = jsHandle_1.JSHandle.from(browserWindow);\n            this._windows.add(window);\n            this.emit(events_1.Events.ElectronApplication.Window, window);\n            window.once(events_1.Events.Page.Close, () => this._windows.delete(window));\n        });\n        this._channel.on('close', () => this.emit(events_1.Events.ElectronApplication.Close));\n    }\n    static from(electronApplication) {\n        return electronApplication._object;\n    }\n    windows() {\n        // TODO: add ElectronPage class inherting from Page.\n        return [...this._windows];\n    }\n    async firstWindow() {\n        return this._wrapApiCall('electronApplication.firstWindow', async (channel) => {\n            if (this._windows.size)\n                return this._windows.values().next().value;\n            return this.waitForEvent('window');\n        });\n    }\n    context() {\n        return this._context;\n    }\n    async close() {\n        await this._channel.close();\n    }\n    async waitForEvent(event, optionsOrPredicate = {}) {\n        const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n        const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n        const waiter = waiter_1.Waiter.createForEvent(this, 'electronApplication', event);\n        waiter.rejectOnTimeout(timeout, `Timeout while waiting for event \"${event}\"`);\n        if (event !== events_1.Events.ElectronApplication.Close)\n            waiter.rejectOnEvent(this, events_1.Events.ElectronApplication.Close, new Error('Electron application closed'));\n        const result = await waiter.waitForEvent(this, event, predicate);\n        waiter.dispose();\n        return result;\n    }\n    async evaluate(pageFunction, arg) {\n        return this._wrapApiCall('electronApplication.evaluate', async (channel) => {\n            const result = await channel.evaluateExpression({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async evaluateHandle(pageFunction, arg) {\n        return this._wrapApiCall('electronApplication.evaluateHandle', async (channel) => {\n            const result = await channel.evaluateExpressionHandle({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.JSHandle.from(result.handle);\n        });\n    }\n}\nexports.ElectronApplication = ElectronApplication;\n//# sourceMappingURL=electron.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.determineScreenshotType = exports.convertInputFiles = exports.convertSelectOptionValues = exports.ElementHandle = void 0;\nconst frame_1 = require(\"./frame\");\nconst jsHandle_1 = require(\"./jsHandle\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst mime = __importStar(require(\"mime\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../utils/utils\");\nconst fsWriteFileAsync = util.promisify(fs_1.default.writeFile.bind(fs_1.default));\nclass ElementHandle extends jsHandle_1.JSHandle {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._elementChannel = this._channel;\n    }\n    static from(handle) {\n        return handle._object;\n    }\n    static fromNullable(handle) {\n        return handle ? ElementHandle.from(handle) : null;\n    }\n    asElement() {\n        return this;\n    }\n    async ownerFrame() {\n        return this._wrapApiCall('elementHandle.ownerFrame', async (channel) => {\n            return frame_1.Frame.fromNullable((await channel.ownerFrame()).frame);\n        });\n    }\n    async contentFrame() {\n        return this._wrapApiCall('elementHandle.contentFrame', async (channel) => {\n            return frame_1.Frame.fromNullable((await channel.contentFrame()).frame);\n        });\n    }\n    async getAttribute(name) {\n        return this._wrapApiCall('elementHandle.getAttribute', async (channel) => {\n            const value = (await channel.getAttribute({ name })).value;\n            return value === undefined ? null : value;\n        });\n    }\n    async textContent() {\n        return this._wrapApiCall('elementHandle.textContent', async (channel) => {\n            const value = (await channel.textContent()).value;\n            return value === undefined ? null : value;\n        });\n    }\n    async innerText() {\n        return this._wrapApiCall('elementHandle.innerText', async (channel) => {\n            return (await channel.innerText()).value;\n        });\n    }\n    async innerHTML() {\n        return this._wrapApiCall('elementHandle.innerHTML', async (channel) => {\n            return (await channel.innerHTML()).value;\n        });\n    }\n    async isChecked() {\n        return this._wrapApiCall('elementHandle.isChecked', async (channel) => {\n            return (await channel.isChecked()).value;\n        });\n    }\n    async isDisabled() {\n        return this._wrapApiCall('elementHandle.isDisabled', async (channel) => {\n            return (await channel.isDisabled()).value;\n        });\n    }\n    async isEditable() {\n        return this._wrapApiCall('elementHandle.isEditable', async (channel) => {\n            return (await channel.isEditable()).value;\n        });\n    }\n    async isEnabled() {\n        return this._wrapApiCall('elementHandle.isEnabled', async (channel) => {\n            return (await channel.isEnabled()).value;\n        });\n    }\n    async isHidden() {\n        return this._wrapApiCall('elementHandle.isHidden', async (channel) => {\n            return (await channel.isHidden()).value;\n        });\n    }\n    async isVisible() {\n        return this._wrapApiCall('elementHandle.isVisible', async (channel) => {\n            return (await channel.isVisible()).value;\n        });\n    }\n    async dispatchEvent(type, eventInit = {}) {\n        return this._wrapApiCall('elementHandle.dispatchEvent', async (channel) => {\n            await channel.dispatchEvent({ type, eventInit: jsHandle_1.serializeArgument(eventInit) });\n        });\n    }\n    async scrollIntoViewIfNeeded(options = {}) {\n        return this._wrapApiCall('elementHandle.scrollIntoViewIfNeeded', async (channel) => {\n            await channel.scrollIntoViewIfNeeded(options);\n        });\n    }\n    async hover(options = {}) {\n        return this._wrapApiCall('elementHandle.hover', async (channel) => {\n            await channel.hover(options);\n        });\n    }\n    async click(options = {}) {\n        return this._wrapApiCall('elementHandle.click', async (channel) => {\n            return await channel.click(options);\n        });\n    }\n    async dblclick(options = {}) {\n        return this._wrapApiCall('elementHandle.dblclick', async (channel) => {\n            return await channel.dblclick(options);\n        });\n    }\n    async tap(options = {}) {\n        return this._wrapApiCall('elementHandle.tap', async (channel) => {\n            return await channel.tap(options);\n        });\n    }\n    async selectOption(values, options = {}) {\n        return this._wrapApiCall('elementHandle.selectOption', async (channel) => {\n            const result = await channel.selectOption({ ...convertSelectOptionValues(values), ...options });\n            return result.values;\n        });\n    }\n    async fill(value, options = {}) {\n        return this._wrapApiCall('elementHandle.fill', async (channel) => {\n            return await channel.fill({ value, ...options });\n        });\n    }\n    async selectText(options = {}) {\n        return this._wrapApiCall('elementHandle.selectText', async (channel) => {\n            await channel.selectText(options);\n        });\n    }\n    async setInputFiles(files, options = {}) {\n        return this._wrapApiCall('elementHandle.setInputFiles', async (channel) => {\n            await channel.setInputFiles({ files: await convertInputFiles(files), ...options });\n        });\n    }\n    async focus() {\n        return this._wrapApiCall('elementHandle.focus', async (channel) => {\n            await channel.focus();\n        });\n    }\n    async type(text, options = {}) {\n        return this._wrapApiCall('elementHandle.type', async (channel) => {\n            await channel.type({ text, ...options });\n        });\n    }\n    async press(key, options = {}) {\n        return this._wrapApiCall('elementHandle.press', async (channel) => {\n            await channel.press({ key, ...options });\n        });\n    }\n    async check(options = {}) {\n        return this._wrapApiCall('elementHandle.check', async (channel) => {\n            return await channel.check(options);\n        });\n    }\n    async uncheck(options = {}) {\n        return this._wrapApiCall('elementHandle.uncheck', async (channel) => {\n            return await channel.uncheck(options);\n        });\n    }\n    async boundingBox() {\n        return this._wrapApiCall('elementHandle.boundingBox', async (channel) => {\n            const value = (await channel.boundingBox()).value;\n            return value === undefined ? null : value;\n        });\n    }\n    async screenshot(options = {}) {\n        return this._wrapApiCall('elementHandle.screenshot', async (channel) => {\n            const copy = { ...options };\n            if (!copy.type)\n                copy.type = determineScreenshotType(options);\n            const result = await channel.screenshot(copy);\n            const buffer = Buffer.from(result.binary, 'base64');\n            if (options.path) {\n                await utils_1.mkdirIfNeeded(options.path);\n                await fsWriteFileAsync(options.path, buffer);\n            }\n            return buffer;\n        });\n    }\n    async $(selector) {\n        return this._wrapApiCall('elementHandle.$', async (channel) => {\n            return ElementHandle.fromNullable((await channel.querySelector({ selector })).element);\n        });\n    }\n    async $$(selector) {\n        return this._wrapApiCall('elementHandle.$$', async (channel) => {\n            const result = await channel.querySelectorAll({ selector });\n            return result.elements.map(h => ElementHandle.from(h));\n        });\n    }\n    async $eval(selector, pageFunction, arg) {\n        return this._wrapApiCall('elementHandle.$eval', async (channel) => {\n            const result = await channel.evalOnSelector({ selector, expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async $$eval(selector, pageFunction, arg) {\n        return this._wrapApiCall('elementHandle.$$eval', async (channel) => {\n            const result = await channel.evalOnSelectorAll({ selector, expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async waitForElementState(state, options = {}) {\n        return this._wrapApiCall('elementHandle.waitForElementState', async (channel) => {\n            return await channel.waitForElementState({ state, ...options });\n        });\n    }\n    async waitForSelector(selector, options = {}) {\n        return this._wrapApiCall('elementHandle.waitForSelector', async (channel) => {\n            const result = await channel.waitForSelector({ selector, ...options });\n            return ElementHandle.fromNullable(result.element);\n        });\n    }\n}\nexports.ElementHandle = ElementHandle;\nfunction convertSelectOptionValues(values) {\n    if (values === null)\n        return {};\n    if (!Array.isArray(values))\n        values = [values];\n    if (!values.length)\n        return {};\n    for (let i = 0; i < values.length; i++)\n        utils_1.assert(values[i] !== null, `options[${i}]: expected object, got null`);\n    if (values[0] instanceof ElementHandle)\n        return { elements: values.map((v) => v._elementChannel) };\n    if (utils_1.isString(values[0]))\n        return { options: values.map(value => ({ value })) };\n    return { options: values };\n}\nexports.convertSelectOptionValues = convertSelectOptionValues;\nasync function convertInputFiles(files) {\n    const items = Array.isArray(files) ? files : [files];\n    const filePayloads = await Promise.all(items.map(async (item) => {\n        if (typeof item === 'string') {\n            return {\n                name: path_1.default.basename(item),\n                mimeType: mime.getType(item) || 'application/octet-stream',\n                buffer: (await util.promisify(fs_1.default.readFile)(item)).toString('base64')\n            };\n        }\n        else {\n            return {\n                name: item.name,\n                mimeType: item.mimeType,\n                buffer: item.buffer.toString('base64'),\n            };\n        }\n    }));\n    return filePayloads;\n}\nexports.convertInputFiles = convertInputFiles;\nfunction determineScreenshotType(options) {\n    if (options.path) {\n        const mimeType = mime.getType(options.path);\n        if (mimeType === 'image/png')\n            return 'png';\n        else if (mimeType === 'image/jpeg')\n            return 'jpeg';\n        throw new Error(`path: unsupported mime type \"${mimeType}\"`);\n    }\n    return options.type;\n}\nexports.determineScreenshotType = determineScreenshotType;\n//# sourceMappingURL=elementHandle.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Events = void 0;\nexports.Events = {\n    AndroidDevice: {\n        WebView: 'webview',\n        Close: 'close'\n    },\n    AndroidSocket: {\n        Data: 'data',\n        Close: 'close'\n    },\n    AndroidWebView: {\n        Close: 'close'\n    },\n    Browser: {\n        Disconnected: 'disconnected'\n    },\n    BrowserContext: {\n        Close: 'close',\n        Page: 'page',\n    },\n    BrowserServer: {\n        Close: 'close',\n    },\n    Page: {\n        Close: 'close',\n        Crash: 'crash',\n        Console: 'console',\n        Dialog: 'dialog',\n        Download: 'download',\n        FileChooser: 'filechooser',\n        DOMContentLoaded: 'domcontentloaded',\n        // Can't use just 'error' due to node.js special treatment of error events.\n        // @see https://nodejs.org/api/events.html#events_error_events\n        PageError: 'pageerror',\n        Request: 'request',\n        Response: 'response',\n        RequestFailed: 'requestfailed',\n        RequestFinished: 'requestfinished',\n        FrameAttached: 'frameattached',\n        FrameDetached: 'framedetached',\n        FrameNavigated: 'framenavigated',\n        Load: 'load',\n        Popup: 'popup',\n        WebSocket: 'websocket',\n        Worker: 'worker',\n    },\n    WebSocket: {\n        Close: 'close',\n        Error: 'socketerror',\n        FrameReceived: 'framereceived',\n        FrameSent: 'framesent',\n    },\n    Worker: {\n        Close: 'close',\n    },\n    ChromiumBrowserContext: {\n        BackgroundPage: 'backgroundpage',\n        ServiceWorker: 'serviceworker',\n    },\n    ElectronApplication: {\n        Close: 'close',\n        Window: 'window',\n    },\n};\n//# sourceMappingURL=events.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileChooser = void 0;\nclass FileChooser {\n    constructor(page, elementHandle, isMultiple) {\n        this._page = page;\n        this._elementHandle = elementHandle;\n        this._isMultiple = isMultiple;\n    }\n    element() {\n        return this._elementHandle;\n    }\n    isMultiple() {\n        return this._isMultiple;\n    }\n    page() {\n        return this._page;\n    }\n    async setFiles(files, options) {\n        return this._page._wrapApiCall('fileChooser.setFiles', async () => {\n            return this._elementHandle.setInputFiles(files, options);\n        });\n    }\n}\nexports.FileChooser = FileChooser;\n//# sourceMappingURL=fileChooser.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FirefoxBrowser = void 0;\nconst browser_1 = require(\"./browser\");\nclass FirefoxBrowser extends browser_1.Browser {\n}\nexports.FirefoxBrowser = FirefoxBrowser;\n//# sourceMappingURL=firefoxBrowser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.verifyLoadState = exports.Frame = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst elementHandle_1 = require(\"./elementHandle\");\nconst jsHandle_1 = require(\"./jsHandle\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst network = __importStar(require(\"./network\"));\nconst util = __importStar(require(\"util\"));\nconst events_1 = require(\"events\");\nconst waiter_1 = require(\"./waiter\");\nconst events_2 = require(\"./events\");\nconst types_1 = require(\"./types\");\nconst clientHelper_1 = require(\"./clientHelper\");\nconst fsReadFileAsync = util.promisify(fs_1.default.readFile.bind(fs_1.default));\nclass Frame extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._parentFrame = null;\n        this._url = '';\n        this._name = '';\n        this._detached = false;\n        this._childFrames = new Set();\n        this._eventEmitter = new events_1.EventEmitter();\n        this._eventEmitter.setMaxListeners(0);\n        this._parentFrame = Frame.fromNullable(initializer.parentFrame);\n        if (this._parentFrame)\n            this._parentFrame._childFrames.add(this);\n        this._name = initializer.name;\n        this._url = initializer.url;\n        this._loadStates = new Set(initializer.loadStates);\n        this._channel.on('loadstate', event => {\n            if (event.add) {\n                this._loadStates.add(event.add);\n                this._eventEmitter.emit('loadstate', event.add);\n            }\n            if (event.remove)\n                this._loadStates.delete(event.remove);\n        });\n        this._channel.on('navigated', event => {\n            this._url = event.url;\n            this._name = event.name;\n            this._eventEmitter.emit('navigated', event);\n            if (!event.error && this._page)\n                this._page.emit(events_2.Events.Page.FrameNavigated, this);\n        });\n    }\n    static from(frame) {\n        return frame._object;\n    }\n    static fromNullable(frame) {\n        return frame ? Frame.from(frame) : null;\n    }\n    _apiName(method) {\n        return this._page._isPageCall ? 'page.' + method : 'frame.' + method;\n    }\n    page() {\n        return this._page;\n    }\n    async goto(url, options = {}) {\n        return this._wrapApiCall(this._apiName('goto'), async (channel) => {\n            const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            return network.Response.fromNullable((await channel.goto({ url, ...options, waitUntil })).response);\n        });\n    }\n    _setupNavigationWaiter(name, options) {\n        const waiter = new waiter_1.Waiter(this, name);\n        waiter.rejectOnEvent(this._page, events_2.Events.Page.Close, new Error('Navigation failed because page was closed!'));\n        waiter.rejectOnEvent(this._page, events_2.Events.Page.Crash, new Error('Navigation failed because page crashed!'));\n        waiter.rejectOnEvent(this._page, events_2.Events.Page.FrameDetached, new Error('Navigating frame was detached!'), frame => frame === this);\n        const timeout = this._page._timeoutSettings.navigationTimeout(options);\n        waiter.rejectOnTimeout(timeout, `Timeout ${timeout}ms exceeded.`);\n        return waiter;\n    }\n    async waitForNavigation(options = {}) {\n        return this._wrapApiCall(this._apiName('waitForNavigation'), async (channel) => {\n            const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            const waiter = this._setupNavigationWaiter(this._apiName('waitForNavigation'), options);\n            const toUrl = typeof options.url === 'string' ? ` to \"${options.url}\"` : '';\n            waiter.log(`waiting for navigation${toUrl} until \"${waitUntil}\"`);\n            const navigatedEvent = await waiter.waitForEvent(this._eventEmitter, 'navigated', event => {\n                // Any failed navigation results in a rejection.\n                if (event.error)\n                    return true;\n                waiter.log(`  navigated to \"${event.url}\"`);\n                return clientHelper_1.urlMatches(event.url, options.url);\n            });\n            if (navigatedEvent.error) {\n                const e = new Error(navigatedEvent.error);\n                e.stack = '';\n                await waiter.waitForPromise(Promise.reject(e));\n            }\n            if (!this._loadStates.has(waitUntil)) {\n                await waiter.waitForEvent(this._eventEmitter, 'loadstate', s => {\n                    waiter.log(`  \"${s}\" event fired`);\n                    return s === waitUntil;\n                });\n            }\n            const request = navigatedEvent.newDocument ? network.Request.fromNullable(navigatedEvent.newDocument.request) : null;\n            const response = request ? await waiter.waitForPromise(request._finalRequest().response()) : null;\n            waiter.dispose();\n            return response;\n        });\n    }\n    async waitForLoadState(state = 'load', options = {}) {\n        state = verifyLoadState('state', state);\n        if (this._loadStates.has(state))\n            return;\n        return this._wrapApiCall(this._apiName('waitForLoadState'), async (channel) => {\n            const waiter = this._setupNavigationWaiter(this._apiName('waitForLoadState'), options);\n            await waiter.waitForEvent(this._eventEmitter, 'loadstate', s => {\n                waiter.log(`  \"${s}\" event fired`);\n                return s === state;\n            });\n            waiter.dispose();\n        });\n    }\n    async frameElement() {\n        return this._wrapApiCall(this._apiName('frameElement'), async (channel) => {\n            return elementHandle_1.ElementHandle.from((await channel.frameElement()).element);\n        });\n    }\n    async evaluateHandle(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall(this._apiName('evaluateHandle'), async (channel) => {\n            const result = await channel.evaluateExpressionHandle({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.JSHandle.from(result.handle);\n        });\n    }\n    async _evaluateHandleInUtility(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall(this._apiName('_evaluateHandleInUtility'), async (channel) => {\n            const result = await channel.evaluateExpressionHandle({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg), world: 'utility' });\n            return jsHandle_1.JSHandle.from(result.handle);\n        });\n    }\n    async evaluate(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall(this._apiName('evaluate'), async (channel) => {\n            const result = await channel.evaluateExpression({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async _evaluateInUtility(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall(this._apiName('evaluate'), async (channel) => {\n            const result = await channel.evaluateExpression({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg), world: 'utility' });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async $(selector) {\n        return this._wrapApiCall(this._apiName('$'), async (channel) => {\n            const result = await channel.querySelector({ selector });\n            return elementHandle_1.ElementHandle.fromNullable(result.element);\n        });\n    }\n    async waitForSelector(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('waitForSelector'), async (channel) => {\n            if (options.visibility)\n                throw new Error('options.visibility is not supported, did you mean options.state?');\n            if (options.waitFor && options.waitFor !== 'visible')\n                throw new Error('options.waitFor is not supported, did you mean options.state?');\n            const result = await channel.waitForSelector({ selector, ...options });\n            return elementHandle_1.ElementHandle.fromNullable(result.element);\n        });\n    }\n    async dispatchEvent(selector, type, eventInit, options = {}) {\n        return this._wrapApiCall(this._apiName('dispatchEvent'), async (channel) => {\n            await channel.dispatchEvent({ selector, type, eventInit: jsHandle_1.serializeArgument(eventInit), ...options });\n        });\n    }\n    async $eval(selector, pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 3);\n        return this._wrapApiCall(this._apiName('$eval'), async (channel) => {\n            const result = await channel.evalOnSelector({ selector, expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async $$eval(selector, pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 3);\n        return this._wrapApiCall(this._apiName('$$eval'), async (channel) => {\n            const result = await channel.evalOnSelectorAll({ selector, expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async $$(selector) {\n        return this._wrapApiCall(this._apiName('$$'), async (channel) => {\n            const result = await channel.querySelectorAll({ selector });\n            return result.elements.map(e => elementHandle_1.ElementHandle.from(e));\n        });\n    }\n    async content() {\n        return this._wrapApiCall(this._apiName('content'), async (channel) => {\n            return (await channel.content()).value;\n        });\n    }\n    async setContent(html, options = {}) {\n        return this._wrapApiCall(this._apiName('setContent'), async (channel) => {\n            const waitUntil = verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            await channel.setContent({ html, ...options, waitUntil });\n        });\n    }\n    name() {\n        return this._name || '';\n    }\n    url() {\n        return this._url;\n    }\n    parentFrame() {\n        return this._parentFrame;\n    }\n    childFrames() {\n        return Array.from(this._childFrames);\n    }\n    isDetached() {\n        return this._detached;\n    }\n    async addScriptTag(options = {}) {\n        return this._wrapApiCall(this._apiName('addScriptTag'), async (channel) => {\n            const copy = { ...options };\n            if (copy.path) {\n                copy.content = (await fsReadFileAsync(copy.path)).toString();\n                copy.content += '//# sourceURL=' + copy.path.replace(/\\n/g, '');\n            }\n            return elementHandle_1.ElementHandle.from((await channel.addScriptTag({ ...copy })).element);\n        });\n    }\n    async addStyleTag(options = {}) {\n        return this._wrapApiCall(this._apiName('addStyleTag'), async (channel) => {\n            const copy = { ...options };\n            if (copy.path) {\n                copy.content = (await fsReadFileAsync(copy.path)).toString();\n                copy.content += '/*# sourceURL=' + copy.path.replace(/\\n/g, '') + '*/';\n            }\n            return elementHandle_1.ElementHandle.from((await channel.addStyleTag({ ...copy })).element);\n        });\n    }\n    async click(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('click'), async (channel) => {\n            return await channel.click({ selector, ...options });\n        });\n    }\n    async dblclick(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('dblclick'), async (channel) => {\n            return await channel.dblclick({ selector, ...options });\n        });\n    }\n    async tap(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('tap'), async (channel) => {\n            return await channel.tap({ selector, ...options });\n        });\n    }\n    async fill(selector, value, options = {}) {\n        return this._wrapApiCall(this._apiName('fill'), async (channel) => {\n            return await channel.fill({ selector, value, ...options });\n        });\n    }\n    async focus(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('focus'), async (channel) => {\n            await channel.focus({ selector, ...options });\n        });\n    }\n    async textContent(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('textContent'), async (channel) => {\n            const value = (await channel.textContent({ selector, ...options })).value;\n            return value === undefined ? null : value;\n        });\n    }\n    async innerText(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('innerText'), async (channel) => {\n            return (await channel.innerText({ selector, ...options })).value;\n        });\n    }\n    async innerHTML(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('innerHTML'), async (channel) => {\n            return (await channel.innerHTML({ selector, ...options })).value;\n        });\n    }\n    async getAttribute(selector, name, options = {}) {\n        return this._wrapApiCall(this._apiName('getAttribute'), async (channel) => {\n            const value = (await channel.getAttribute({ selector, name, ...options })).value;\n            return value === undefined ? null : value;\n        });\n    }\n    async isChecked(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isChecked'), async (channel) => {\n            return (await channel.isChecked({ selector, ...options })).value;\n        });\n    }\n    async isDisabled(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isDisabled'), async (channel) => {\n            return (await channel.isDisabled({ selector, ...options })).value;\n        });\n    }\n    async isEditable(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isEditable'), async (channel) => {\n            return (await channel.isEditable({ selector, ...options })).value;\n        });\n    }\n    async isEnabled(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isEnabled'), async (channel) => {\n            return (await channel.isEnabled({ selector, ...options })).value;\n        });\n    }\n    async isHidden(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isHidden'), async (channel) => {\n            return (await channel.isHidden({ selector, ...options })).value;\n        });\n    }\n    async isVisible(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('isVisible'), async (channel) => {\n            return (await channel.isVisible({ selector, ...options })).value;\n        });\n    }\n    async hover(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('hover'), async (channel) => {\n            await channel.hover({ selector, ...options });\n        });\n    }\n    async selectOption(selector, values, options = {}) {\n        return this._wrapApiCall(this._apiName('selectOption'), async (channel) => {\n            return (await channel.selectOption({ selector, ...elementHandle_1.convertSelectOptionValues(values), ...options })).values;\n        });\n    }\n    async setInputFiles(selector, files, options = {}) {\n        return this._wrapApiCall(this._apiName('setInputFiles'), async (channel) => {\n            await channel.setInputFiles({ selector, files: await elementHandle_1.convertInputFiles(files), ...options });\n        });\n    }\n    async type(selector, text, options = {}) {\n        return this._wrapApiCall(this._apiName('type'), async (channel) => {\n            await channel.type({ selector, text, ...options });\n        });\n    }\n    async press(selector, key, options = {}) {\n        return this._wrapApiCall(this._apiName('press'), async (channel) => {\n            await channel.press({ selector, key, ...options });\n        });\n    }\n    async check(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('check'), async (channel) => {\n            await channel.check({ selector, ...options });\n        });\n    }\n    async uncheck(selector, options = {}) {\n        return this._wrapApiCall(this._apiName('uncheck'), async (channel) => {\n            await channel.uncheck({ selector, ...options });\n        });\n    }\n    async waitForTimeout(timeout) {\n        return this._wrapApiCall(this._apiName('waitForTimeout'), async (channel) => {\n            await new Promise(fulfill => setTimeout(fulfill, timeout));\n        });\n    }\n    async waitForFunction(pageFunction, arg, options = {}) {\n        return this._wrapApiCall(this._apiName('waitForFunction'), async (channel) => {\n            if (typeof options.polling === 'string')\n                utils_1.assert(options.polling === 'raf', 'Unknown polling option: ' + options.polling);\n            const result = await channel.waitForFunction({\n                ...options,\n                pollingInterval: options.polling === 'raf' ? undefined : options.polling,\n                expression: String(pageFunction),\n                isFunction: typeof pageFunction === 'function',\n                arg: jsHandle_1.serializeArgument(arg),\n            });\n            return jsHandle_1.JSHandle.from(result.handle);\n        });\n    }\n    async title() {\n        return this._wrapApiCall(this._apiName('title'), async (channel) => {\n            return (await channel.title()).value;\n        });\n    }\n}\nexports.Frame = Frame;\nfunction verifyLoadState(name, waitUntil) {\n    if (waitUntil === 'networkidle0')\n        waitUntil = 'networkidle';\n    if (!types_1.kLifecycleEvents.has(waitUntil))\n        throw new Error(`${name}: expected one of (load|domcontentloaded|networkidle)`);\n    return waitUntil;\n}\nexports.verifyLoadState = verifyLoadState;\n//# sourceMappingURL=frame.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Touchscreen = exports.Mouse = exports.Keyboard = void 0;\nclass Keyboard {\n    constructor(channel) {\n        this._channel = channel;\n    }\n    async down(key) {\n        await this._channel.keyboardDown({ key });\n    }\n    async up(key) {\n        await this._channel.keyboardUp({ key });\n    }\n    async insertText(text) {\n        await this._channel.keyboardInsertText({ text });\n    }\n    async type(text, options = {}) {\n        await this._channel.keyboardType({ text, ...options });\n    }\n    async press(key, options = {}) {\n        await this._channel.keyboardPress({ key, ...options });\n    }\n}\nexports.Keyboard = Keyboard;\nclass Mouse {\n    constructor(channel) {\n        this._channel = channel;\n    }\n    async move(x, y, options = {}) {\n        await this._channel.mouseMove({ x, y, ...options });\n    }\n    async down(options = {}) {\n        await this._channel.mouseDown({ ...options });\n    }\n    async up(options = {}) {\n        await this._channel.mouseUp(options);\n    }\n    async click(x, y, options = {}) {\n        await this._channel.mouseClick({ x, y, ...options });\n    }\n    async dblclick(x, y, options = {}) {\n        await this.click(x, y, { ...options, clickCount: 2 });\n    }\n}\nexports.Mouse = Mouse;\nclass Touchscreen {\n    constructor(channel) {\n        this._channel = channel;\n    }\n    async tap(x, y) {\n        await this._channel.touchscreenTap({ x, y });\n    }\n}\nexports.Touchscreen = Touchscreen;\n//# sourceMappingURL=input.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assertMaxArguments = exports.parseResult = exports.serializeArgument = exports.JSHandle = void 0;\nconst channelOwner_1 = require(\"./channelOwner\");\nconst serializers_1 = require(\"../protocol/serializers\");\nclass JSHandle extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._preview = this._initializer.preview;\n        this._channel.on('previewUpdated', ({ preview }) => this._preview = preview);\n    }\n    static from(handle) {\n        return handle._object;\n    }\n    async evaluate(pageFunction, arg) {\n        return this._wrapApiCall('jsHandle.evaluate', async (channel) => {\n            const result = await channel.evaluateExpression({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: serializeArgument(arg) });\n            return parseResult(result.value);\n        });\n    }\n    async evaluateHandle(pageFunction, arg) {\n        return this._wrapApiCall('jsHandle.evaluateHandle', async (channel) => {\n            const result = await channel.evaluateExpressionHandle({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: serializeArgument(arg) });\n            return JSHandle.from(result.handle);\n        });\n    }\n    async getProperty(propertyName) {\n        return this._wrapApiCall('jsHandle.getProperty', async (channel) => {\n            const result = await channel.getProperty({ name: propertyName });\n            return JSHandle.from(result.handle);\n        });\n    }\n    async getProperties() {\n        return this._wrapApiCall('jsHandle.getProperties', async (channel) => {\n            const map = new Map();\n            for (const { name, value } of (await channel.getPropertyList()).properties)\n                map.set(name, JSHandle.from(value));\n            return map;\n        });\n    }\n    async jsonValue() {\n        return this._wrapApiCall('jsHandle.jsonValue', async (channel) => {\n            return parseResult((await channel.jsonValue()).value);\n        });\n    }\n    asElement() {\n        return null;\n    }\n    async dispose() {\n        return this._wrapApiCall('jsHandle.dispose', async (channel) => {\n            return await channel.dispose();\n        });\n    }\n    toString() {\n        return this._preview;\n    }\n}\nexports.JSHandle = JSHandle;\n// This function takes care of converting all JSHandles to their channels,\n// so that generic channel serializer converts them to guids.\nfunction serializeArgument(arg) {\n    const handles = [];\n    const pushHandle = (channel) => {\n        handles.push(channel);\n        return handles.length - 1;\n    };\n    const value = serializers_1.serializeValue(arg, value => {\n        if (value instanceof JSHandle)\n            return { h: pushHandle(value._channel) };\n        return { fallThrough: value };\n    }, new Set());\n    return { value, handles };\n}\nexports.serializeArgument = serializeArgument;\nfunction parseResult(value) {\n    return serializers_1.parseSerializedValue(value, undefined);\n}\nexports.parseResult = parseResult;\nfunction assertMaxArguments(count, max) {\n    if (count > max)\n        throw new Error('Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.');\n}\nexports.assertMaxArguments = assertMaxArguments;\n//# sourceMappingURL=jsHandle.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateHeaders = exports.WebSocket = exports.Response = exports.Route = exports.Request = void 0;\nconst url_1 = require(\"url\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst frame_1 = require(\"./frame\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst mime = __importStar(require(\"mime\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../utils/utils\");\nconst events_1 = require(\"./events\");\nconst waiter_1 = require(\"./waiter\");\nclass Request extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._redirectedFrom = null;\n        this._redirectedTo = null;\n        this._failureText = null;\n        this._redirectedFrom = Request.fromNullable(initializer.redirectedFrom);\n        if (this._redirectedFrom)\n            this._redirectedFrom._redirectedTo = this;\n        this._headers = utils_1.headersArrayToObject(initializer.headers, true /* lowerCase */);\n        this._postData = initializer.postData ? Buffer.from(initializer.postData, 'base64') : null;\n        this._timing = {\n            startTime: 0,\n            domainLookupStart: -1,\n            domainLookupEnd: -1,\n            connectStart: -1,\n            secureConnectionStart: -1,\n            connectEnd: -1,\n            requestStart: -1,\n            responseStart: -1,\n            responseEnd: -1,\n        };\n    }\n    static from(request) {\n        return request._object;\n    }\n    static fromNullable(request) {\n        return request ? Request.from(request) : null;\n    }\n    url() {\n        return this._initializer.url;\n    }\n    resourceType() {\n        return this._initializer.resourceType;\n    }\n    method() {\n        return this._initializer.method;\n    }\n    postData() {\n        return this._postData ? this._postData.toString('utf8') : null;\n    }\n    postDataBuffer() {\n        return this._postData;\n    }\n    postDataJSON() {\n        const postData = this.postData();\n        if (!postData)\n            return null;\n        const contentType = this.headers()['content-type'];\n        if (contentType === 'application/x-www-form-urlencoded') {\n            const entries = {};\n            const parsed = new url_1.URLSearchParams(postData);\n            for (const [k, v] of parsed.entries())\n                entries[k] = v;\n            return entries;\n        }\n        try {\n            return JSON.parse(postData);\n        }\n        catch (e) {\n            throw new Error('POST data is not a valid JSON object: ' + postData);\n        }\n    }\n    headers() {\n        return { ...this._headers };\n    }\n    async response() {\n        return this._wrapApiCall('request.response', async (channel) => {\n            return Response.fromNullable((await channel.response()).response);\n        });\n    }\n    frame() {\n        return frame_1.Frame.from(this._initializer.frame);\n    }\n    isNavigationRequest() {\n        return this._initializer.isNavigationRequest;\n    }\n    redirectedFrom() {\n        return this._redirectedFrom;\n    }\n    redirectedTo() {\n        return this._redirectedTo;\n    }\n    failure() {\n        if (this._failureText === null)\n            return null;\n        return {\n            errorText: this._failureText\n        };\n    }\n    timing() {\n        return this._timing;\n    }\n    _finalRequest() {\n        return this._redirectedTo ? this._redirectedTo._finalRequest() : this;\n    }\n}\nexports.Request = Request;\nclass Route extends channelOwner_1.ChannelOwner {\n    static from(route) {\n        return route._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    request() {\n        return Request.from(this._initializer.request);\n    }\n    async abort(errorCode) {\n        return this._wrapApiCall('route.abort', async (channel) => {\n            await channel.abort({ errorCode });\n        });\n    }\n    async fulfill(options = {}) {\n        return this._wrapApiCall('route.fulfill', async (channel) => {\n            let body = '';\n            let isBase64 = false;\n            let length = 0;\n            if (options.path) {\n                const buffer = await util.promisify(fs_1.default.readFile)(options.path);\n                body = buffer.toString('base64');\n                isBase64 = true;\n                length = buffer.length;\n            }\n            else if (utils_1.isString(options.body)) {\n                body = options.body;\n                isBase64 = false;\n                length = Buffer.byteLength(body);\n            }\n            else if (options.body) {\n                body = options.body.toString('base64');\n                isBase64 = true;\n                length = options.body.length;\n            }\n            const headers = {};\n            for (const header of Object.keys(options.headers || {}))\n                headers[header.toLowerCase()] = String(options.headers[header]);\n            if (options.contentType)\n                headers['content-type'] = String(options.contentType);\n            else if (options.path)\n                headers['content-type'] = mime.getType(options.path) || 'application/octet-stream';\n            if (length && !('content-length' in headers))\n                headers['content-length'] = String(length);\n            await channel.fulfill({\n                status: options.status || 200,\n                headers: utils_1.headersObjectToArray(headers),\n                body,\n                isBase64\n            });\n        });\n    }\n    async continue(options = {}) {\n        return this._wrapApiCall('route.continue', async (channel) => {\n            const postDataBuffer = utils_1.isString(options.postData) ? Buffer.from(options.postData, 'utf8') : options.postData;\n            await channel.continue({\n                url: options.url,\n                method: options.method,\n                headers: options.headers ? utils_1.headersObjectToArray(options.headers) : undefined,\n                postData: postDataBuffer ? postDataBuffer.toString('base64') : undefined,\n            });\n        });\n    }\n}\nexports.Route = Route;\nclass Response extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._headers = utils_1.headersArrayToObject(initializer.headers, true /* lowerCase */);\n        this._request = Request.from(this._initializer.request);\n        this._request._headers = utils_1.headersArrayToObject(initializer.requestHeaders, true /* lowerCase */);\n        Object.assign(this._request._timing, this._initializer.timing);\n    }\n    static from(response) {\n        return response._object;\n    }\n    static fromNullable(response) {\n        return response ? Response.from(response) : null;\n    }\n    url() {\n        return this._initializer.url;\n    }\n    ok() {\n        return this._initializer.status === 0 || (this._initializer.status >= 200 && this._initializer.status <= 299);\n    }\n    status() {\n        return this._initializer.status;\n    }\n    statusText() {\n        return this._initializer.statusText;\n    }\n    headers() {\n        return { ...this._headers };\n    }\n    async finished() {\n        const result = await this._channel.finished();\n        if (result.error)\n            return new Error(result.error);\n        return null;\n    }\n    async body() {\n        return this._wrapApiCall('response.body', async (channel) => {\n            return Buffer.from((await channel.body()).binary, 'base64');\n        });\n    }\n    async text() {\n        const content = await this.body();\n        return content.toString('utf8');\n    }\n    async json() {\n        const content = await this.text();\n        return JSON.parse(content);\n    }\n    request() {\n        return this._request;\n    }\n    frame() {\n        return this._request.frame();\n    }\n}\nexports.Response = Response;\nclass WebSocket extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._isClosed = false;\n        this._page = parent;\n        this._channel.on('frameSent', (event) => {\n            const payload = event.opcode === 2 ? Buffer.from(event.data, 'base64') : event.data;\n            this.emit(events_1.Events.WebSocket.FrameSent, { payload });\n        });\n        this._channel.on('frameReceived', (event) => {\n            const payload = event.opcode === 2 ? Buffer.from(event.data, 'base64') : event.data;\n            this.emit(events_1.Events.WebSocket.FrameReceived, { payload });\n        });\n        this._channel.on('socketError', ({ error }) => this.emit(events_1.Events.WebSocket.Error, error));\n        this._channel.on('close', () => {\n            this._isClosed = true;\n            this.emit(events_1.Events.WebSocket.Close, this);\n        });\n    }\n    static from(webSocket) {\n        return webSocket._object;\n    }\n    url() {\n        return this._initializer.url;\n    }\n    isClosed() {\n        return this._isClosed;\n    }\n    async waitForEvent(event, optionsOrPredicate = {}) {\n        const timeout = this._page._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n        const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n        const waiter = waiter_1.Waiter.createForEvent(this, 'webSocket', event);\n        waiter.rejectOnTimeout(timeout, `Timeout while waiting for event \"${event}\"`);\n        if (event !== events_1.Events.WebSocket.Error)\n            waiter.rejectOnEvent(this, events_1.Events.WebSocket.Error, new Error('Socket error'));\n        if (event !== events_1.Events.WebSocket.Close)\n            waiter.rejectOnEvent(this, events_1.Events.WebSocket.Close, new Error('Socket closed'));\n        waiter.rejectOnEvent(this._page, events_1.Events.Page.Close, new Error('Page closed'));\n        const result = await waiter.waitForEvent(this, event, predicate);\n        waiter.dispose();\n        return result;\n    }\n}\nexports.WebSocket = WebSocket;\nfunction validateHeaders(headers) {\n    for (const key of Object.keys(headers)) {\n        const value = headers[key];\n        if (!Object.is(value, undefined) && !utils_1.isString(value))\n            throw new Error(`Expected value of header \"${key}\" to be String, but \"${typeof value}\" is found.`);\n    }\n}\nexports.validateHeaders = validateHeaders;\n//# sourceMappingURL=network.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingCall = exports.Page = void 0;\nconst events_1 = require(\"./events\");\nconst utils_1 = require(\"../utils/utils\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst serializers_1 = require(\"../protocol/serializers\");\nconst accessibility_1 = require(\"./accessibility\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst consoleMessage_1 = require(\"./consoleMessage\");\nconst dialog_1 = require(\"./dialog\");\nconst download_1 = require(\"./download\");\nconst elementHandle_1 = require(\"./elementHandle\");\nconst worker_1 = require(\"./worker\");\nconst frame_1 = require(\"./frame\");\nconst input_1 = require(\"./input\");\nconst jsHandle_1 = require(\"./jsHandle\");\nconst network_1 = require(\"./network\");\nconst fileChooser_1 = require(\"./fileChooser\");\nconst buffer_1 = require(\"buffer\");\nconst chromiumCoverage_1 = require(\"./chromiumCoverage\");\nconst waiter_1 = require(\"./waiter\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util = __importStar(require(\"util\"));\nconst clientHelper_1 = require(\"./clientHelper\");\nconst utils_2 = require(\"../utils/utils\");\nconst errors_1 = require(\"../utils/errors\");\nconst video_1 = require(\"./video\");\nconst fsWriteFileAsync = util.promisify(fs_1.default.writeFile.bind(fs_1.default));\nconst mkdirAsync = util.promisify(fs_1.default.mkdir);\nclass Page extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._frames = new Set();\n        this._workers = new Set();\n        this._closed = false;\n        this._routes = [];\n        this.coverage = null;\n        this._bindings = new Map();\n        this._isPageCall = false;\n        this._video = null;\n        this._browserContext = parent;\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings(this._browserContext._timeoutSettings);\n        this.accessibility = new accessibility_1.Accessibility(this._channel);\n        this.keyboard = new input_1.Keyboard(this._channel);\n        this.mouse = new input_1.Mouse(this._channel);\n        this.touchscreen = new input_1.Touchscreen(this._channel);\n        this._mainFrame = frame_1.Frame.from(initializer.mainFrame);\n        this._mainFrame._page = this;\n        this._frames.add(this._mainFrame);\n        this._viewportSize = initializer.viewportSize || null;\n        this._closed = initializer.isClosed;\n        this._channel.on('bindingCall', ({ binding }) => this._onBinding(BindingCall.from(binding)));\n        this._channel.on('close', () => this._onClose());\n        this._channel.on('console', ({ message }) => this.emit(events_1.Events.Page.Console, consoleMessage_1.ConsoleMessage.from(message)));\n        this._channel.on('crash', () => this._onCrash());\n        this._channel.on('dialog', ({ dialog }) => {\n            if (!this.emit(events_1.Events.Page.Dialog, dialog_1.Dialog.from(dialog)))\n                dialog.dismiss().catch(() => { });\n        });\n        this._channel.on('domcontentloaded', () => this.emit(events_1.Events.Page.DOMContentLoaded, this));\n        this._channel.on('download', ({ download }) => this.emit(events_1.Events.Page.Download, download_1.Download.from(download)));\n        this._channel.on('fileChooser', ({ element, isMultiple }) => this.emit(events_1.Events.Page.FileChooser, new fileChooser_1.FileChooser(this, elementHandle_1.ElementHandle.from(element), isMultiple)));\n        this._channel.on('frameAttached', ({ frame }) => this._onFrameAttached(frame_1.Frame.from(frame)));\n        this._channel.on('frameDetached', ({ frame }) => this._onFrameDetached(frame_1.Frame.from(frame)));\n        this._channel.on('load', () => this.emit(events_1.Events.Page.Load, this));\n        this._channel.on('pageError', ({ error }) => this.emit(events_1.Events.Page.PageError, serializers_1.parseError(error)));\n        this._channel.on('popup', ({ page }) => this.emit(events_1.Events.Page.Popup, Page.from(page)));\n        this._channel.on('request', ({ request }) => this.emit(events_1.Events.Page.Request, network_1.Request.from(request)));\n        this._channel.on('requestFailed', ({ request, failureText, responseEndTiming }) => this._onRequestFailed(network_1.Request.from(request), responseEndTiming, failureText));\n        this._channel.on('requestFinished', ({ request, responseEndTiming }) => this._onRequestFinished(network_1.Request.from(request), responseEndTiming));\n        this._channel.on('response', ({ response }) => this.emit(events_1.Events.Page.Response, network_1.Response.from(response)));\n        this._channel.on('route', ({ route, request }) => this._onRoute(network_1.Route.from(route), network_1.Request.from(request)));\n        this._channel.on('video', ({ relativePath }) => this.video()._setRelativePath(relativePath));\n        this._channel.on('webSocket', ({ webSocket }) => this.emit(events_1.Events.Page.WebSocket, network_1.WebSocket.from(webSocket)));\n        this._channel.on('worker', ({ worker }) => this._onWorker(worker_1.Worker.from(worker)));\n        if (this._browserContext._isChromium) {\n            this.coverage = new chromiumCoverage_1.ChromiumCoverage(this._channel);\n            this.pdf = options => this._pdf(options);\n        }\n        else {\n            this.pdf = undefined;\n        }\n    }\n    static from(page) {\n        return page._object;\n    }\n    static fromNullable(page) {\n        return page ? Page.from(page) : null;\n    }\n    _onRequestFailed(request, responseEndTiming, failureText) {\n        request._failureText = failureText || null;\n        if (request._timing)\n            request._timing.responseEnd = responseEndTiming;\n        this.emit(events_1.Events.Page.RequestFailed, request);\n    }\n    _onRequestFinished(request, responseEndTiming) {\n        if (request._timing)\n            request._timing.responseEnd = responseEndTiming;\n        this.emit(events_1.Events.Page.RequestFinished, request);\n    }\n    _onFrameAttached(frame) {\n        frame._page = this;\n        this._frames.add(frame);\n        if (frame._parentFrame)\n            frame._parentFrame._childFrames.add(frame);\n        this.emit(events_1.Events.Page.FrameAttached, frame);\n    }\n    _onFrameDetached(frame) {\n        this._frames.delete(frame);\n        frame._detached = true;\n        if (frame._parentFrame)\n            frame._parentFrame._childFrames.delete(frame);\n        this.emit(events_1.Events.Page.FrameDetached, frame);\n    }\n    _onRoute(route, request) {\n        for (const { url, handler } of this._routes) {\n            if (clientHelper_1.urlMatches(request.url(), url)) {\n                handler(route, request);\n                return;\n            }\n        }\n        this._browserContext._onRoute(route, request);\n    }\n    async _onBinding(bindingCall) {\n        const func = this._bindings.get(bindingCall._initializer.name);\n        if (func) {\n            await bindingCall.call(func);\n            return;\n        }\n        await this._browserContext._onBinding(bindingCall);\n    }\n    _onWorker(worker) {\n        this._workers.add(worker);\n        worker._page = this;\n        this.emit(events_1.Events.Page.Worker, worker);\n    }\n    _onClose() {\n        this._closed = true;\n        this._browserContext._pages.delete(this);\n        this.emit(events_1.Events.Page.Close, this);\n    }\n    _onCrash() {\n        this.emit(events_1.Events.Page.Crash, this);\n    }\n    context() {\n        return this._browserContext;\n    }\n    async opener() {\n        return this._wrapApiCall('page.opener', async (channel) => {\n            return Page.fromNullable((await channel.opener()).page);\n        });\n    }\n    mainFrame() {\n        return this._mainFrame;\n    }\n    frame(frameSelector) {\n        const name = utils_2.isString(frameSelector) ? frameSelector : frameSelector.name;\n        const url = utils_2.isObject(frameSelector) ? frameSelector.url : undefined;\n        utils_1.assert(name || url, 'Either name or url matcher should be specified');\n        return this.frames().find(f => {\n            if (name)\n                return f.name() === name;\n            return clientHelper_1.urlMatches(f.url(), url);\n        }) || null;\n    }\n    frames() {\n        return [...this._frames];\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n        this._channel.setDefaultNavigationTimeoutNoReply({ timeout });\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n        this._channel.setDefaultTimeoutNoReply({ timeout });\n    }\n    video() {\n        if (this._video)\n            return this._video;\n        if (!this._browserContext._options.recordVideo)\n            return null;\n        this._video = new video_1.Video(this);\n        // In case of persistent profile, we already have it.\n        if (this._initializer.videoRelativePath)\n            this._video._setRelativePath(this._initializer.videoRelativePath);\n        return this._video;\n    }\n    _attributeToPage(func) {\n        try {\n            this._isPageCall = true;\n            return func();\n        }\n        finally {\n            this._isPageCall = false;\n        }\n    }\n    async $(selector) {\n        return this._attributeToPage(() => this._mainFrame.$(selector));\n    }\n    async waitForSelector(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.waitForSelector(selector, options));\n    }\n    async dispatchEvent(selector, type, eventInit, options) {\n        return this._attributeToPage(() => this._mainFrame.dispatchEvent(selector, type, eventInit, options));\n    }\n    async evaluateHandle(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._attributeToPage(() => this._mainFrame.evaluateHandle(pageFunction, arg));\n    }\n    async $eval(selector, pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 3);\n        return this._attributeToPage(() => this._mainFrame.$eval(selector, pageFunction, arg));\n    }\n    async $$eval(selector, pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 3);\n        return this._attributeToPage(() => this._mainFrame.$$eval(selector, pageFunction, arg));\n    }\n    async $$(selector) {\n        return this._attributeToPage(() => this._mainFrame.$$(selector));\n    }\n    async addScriptTag(options = {}) {\n        return this._attributeToPage(() => this._mainFrame.addScriptTag(options));\n    }\n    async addStyleTag(options = {}) {\n        return this._attributeToPage(() => this._mainFrame.addStyleTag(options));\n    }\n    async exposeFunction(name, callback) {\n        return this._wrapApiCall('page.exposeFunction', async (channel) => {\n            await channel.exposeBinding({ name });\n            const binding = (source, ...args) => callback(...args);\n            this._bindings.set(name, binding);\n        });\n    }\n    async exposeBinding(name, callback, options = {}) {\n        return this._wrapApiCall('page.exposeBinding', async (channel) => {\n            await channel.exposeBinding({ name, needsHandle: options.handle });\n            this._bindings.set(name, callback);\n        });\n    }\n    async setExtraHTTPHeaders(headers) {\n        return this._wrapApiCall('page.setExtraHTTPHeaders', async (channel) => {\n            network_1.validateHeaders(headers);\n            await channel.setExtraHTTPHeaders({ headers: utils_2.headersObjectToArray(headers) });\n        });\n    }\n    url() {\n        return this._attributeToPage(() => this._mainFrame.url());\n    }\n    async content() {\n        return this._attributeToPage(() => this._mainFrame.content());\n    }\n    async setContent(html, options) {\n        return this._attributeToPage(() => this._mainFrame.setContent(html, options));\n    }\n    async goto(url, options) {\n        return this._attributeToPage(() => this._mainFrame.goto(url, options));\n    }\n    async reload(options = {}) {\n        return this._wrapApiCall('page.reload', async (channel) => {\n            const waitUntil = frame_1.verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            return network_1.Response.fromNullable((await channel.reload({ ...options, waitUntil })).response);\n        });\n    }\n    async waitForLoadState(state, options) {\n        return this._attributeToPage(() => this._mainFrame.waitForLoadState(state, options));\n    }\n    async waitForNavigation(options) {\n        return this._attributeToPage(() => this._mainFrame.waitForNavigation(options));\n    }\n    async waitForRequest(urlOrPredicate, options = {}) {\n        return this._wrapApiCall('page.waitForRequest', async (channel) => {\n            const predicate = (request) => {\n                if (utils_2.isString(urlOrPredicate) || utils_2.isRegExp(urlOrPredicate))\n                    return clientHelper_1.urlMatches(request.url(), urlOrPredicate);\n                return urlOrPredicate(request);\n            };\n            const trimmedUrl = trimUrl(urlOrPredicate);\n            const logLine = trimmedUrl ? `waiting for request ${trimmedUrl}` : undefined;\n            return this._waitForEvent(events_1.Events.Page.Request, { predicate, timeout: options.timeout }, logLine);\n        });\n    }\n    async waitForResponse(urlOrPredicate, options = {}) {\n        return this._wrapApiCall('page.waitForResponse', async (channel) => {\n            const predicate = (response) => {\n                if (utils_2.isString(urlOrPredicate) || utils_2.isRegExp(urlOrPredicate))\n                    return clientHelper_1.urlMatches(response.url(), urlOrPredicate);\n                return urlOrPredicate(response);\n            };\n            const trimmedUrl = trimUrl(urlOrPredicate);\n            const logLine = trimmedUrl ? `waiting for response ${trimmedUrl}` : undefined;\n            return this._waitForEvent(events_1.Events.Page.Response, { predicate, timeout: options.timeout }, logLine);\n        });\n    }\n    async waitForEvent(event, optionsOrPredicate = {}) {\n        return this._wrapApiCall('page.waitForEvent', async (channel) => {\n            return this._waitForEvent(event, optionsOrPredicate, `waiting for event \"${event}\"`);\n        });\n    }\n    async _waitForEvent(event, optionsOrPredicate, logLine) {\n        const timeout = this._timeoutSettings.timeout(typeof optionsOrPredicate === 'function' ? {} : optionsOrPredicate);\n        const predicate = typeof optionsOrPredicate === 'function' ? optionsOrPredicate : optionsOrPredicate.predicate;\n        const waiter = waiter_1.Waiter.createForEvent(this, 'page', event);\n        if (logLine)\n            waiter.log(logLine);\n        waiter.rejectOnTimeout(timeout, `Timeout while waiting for event \"${event}\"`);\n        if (event !== events_1.Events.Page.Crash)\n            waiter.rejectOnEvent(this, events_1.Events.Page.Crash, new Error('Page crashed'));\n        if (event !== events_1.Events.Page.Close)\n            waiter.rejectOnEvent(this, events_1.Events.Page.Close, new Error('Page closed'));\n        const result = await waiter.waitForEvent(this, event, predicate);\n        waiter.dispose();\n        return result;\n    }\n    async goBack(options = {}) {\n        return this._wrapApiCall('page.goBack', async (channel) => {\n            const waitUntil = frame_1.verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            return network_1.Response.fromNullable((await channel.goBack({ ...options, waitUntil })).response);\n        });\n    }\n    async goForward(options = {}) {\n        return this._wrapApiCall('page.goForward', async (channel) => {\n            const waitUntil = frame_1.verifyLoadState('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            return network_1.Response.fromNullable((await channel.goForward({ ...options, waitUntil })).response);\n        });\n    }\n    async emulateMedia(options = {}) {\n        return this._wrapApiCall('page.emulateMedia', async (channel) => {\n            await channel.emulateMedia({\n                media: options.media === null ? 'null' : options.media,\n                colorScheme: options.colorScheme === null ? 'null' : options.colorScheme,\n            });\n        });\n    }\n    async setViewportSize(viewportSize) {\n        return this._wrapApiCall('page.setViewportSize', async (channel) => {\n            this._viewportSize = viewportSize;\n            await channel.setViewportSize({ viewportSize });\n        });\n    }\n    viewportSize() {\n        return this._viewportSize;\n    }\n    async evaluate(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._attributeToPage(() => this._mainFrame.evaluate(pageFunction, arg));\n    }\n    async addInitScript(script, arg) {\n        return this._wrapApiCall('page.addInitScript', async (channel) => {\n            const source = await clientHelper_1.evaluationScript(script, arg);\n            await channel.addInitScript({ source });\n        });\n    }\n    async route(url, handler) {\n        return this._wrapApiCall('page.route', async (channel) => {\n            this._routes.push({ url, handler });\n            if (this._routes.length === 1)\n                await channel.setNetworkInterceptionEnabled({ enabled: true });\n        });\n    }\n    async unroute(url, handler) {\n        return this._wrapApiCall('page.unroute', async (channel) => {\n            this._routes = this._routes.filter(route => route.url !== url || (handler && route.handler !== handler));\n            if (this._routes.length === 0)\n                await channel.setNetworkInterceptionEnabled({ enabled: false });\n        });\n    }\n    async screenshot(options = {}) {\n        return this._wrapApiCall('page.screenshot', async (channel) => {\n            const copy = { ...options };\n            if (!copy.type)\n                copy.type = elementHandle_1.determineScreenshotType(options);\n            const result = await channel.screenshot(copy);\n            const buffer = buffer_1.Buffer.from(result.binary, 'base64');\n            if (options.path) {\n                await utils_2.mkdirIfNeeded(options.path);\n                await fsWriteFileAsync(options.path, buffer);\n            }\n            return buffer;\n        });\n    }\n    async title() {\n        return this._attributeToPage(() => this._mainFrame.title());\n    }\n    async bringToFront() {\n        return this._wrapApiCall('page.bringToFront', async (channel) => {\n            await channel.bringToFront();\n        });\n    }\n    async close(options = { runBeforeUnload: undefined }) {\n        try {\n            await this._wrapApiCall('page.close', async (channel) => {\n                await channel.close(options);\n                if (this._ownedContext)\n                    await this._ownedContext.close();\n            });\n        }\n        catch (e) {\n            if (errors_1.isSafeCloseError(e))\n                return;\n            throw e;\n        }\n    }\n    isClosed() {\n        return this._closed;\n    }\n    async click(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.click(selector, options));\n    }\n    async dblclick(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.dblclick(selector, options));\n    }\n    async tap(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.tap(selector, options));\n    }\n    async fill(selector, value, options) {\n        return this._attributeToPage(() => this._mainFrame.fill(selector, value, options));\n    }\n    async focus(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.focus(selector, options));\n    }\n    async textContent(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.textContent(selector, options));\n    }\n    async innerText(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.innerText(selector, options));\n    }\n    async innerHTML(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.innerHTML(selector, options));\n    }\n    async getAttribute(selector, name, options) {\n        return this._attributeToPage(() => this._mainFrame.getAttribute(selector, name, options));\n    }\n    async isChecked(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isChecked(selector, options));\n    }\n    async isDisabled(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isDisabled(selector, options));\n    }\n    async isEditable(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isEditable(selector, options));\n    }\n    async isEnabled(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isEnabled(selector, options));\n    }\n    async isHidden(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isHidden(selector, options));\n    }\n    async isVisible(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.isVisible(selector, options));\n    }\n    async hover(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.hover(selector, options));\n    }\n    async selectOption(selector, values, options) {\n        return this._attributeToPage(() => this._mainFrame.selectOption(selector, values, options));\n    }\n    async setInputFiles(selector, files, options) {\n        return this._attributeToPage(() => this._mainFrame.setInputFiles(selector, files, options));\n    }\n    async type(selector, text, options) {\n        return this._attributeToPage(() => this._mainFrame.type(selector, text, options));\n    }\n    async press(selector, key, options) {\n        return this._attributeToPage(() => this._mainFrame.press(selector, key, options));\n    }\n    async check(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.check(selector, options));\n    }\n    async uncheck(selector, options) {\n        return this._attributeToPage(() => this._mainFrame.uncheck(selector, options));\n    }\n    async waitForTimeout(timeout) {\n        return this._attributeToPage(() => this._mainFrame.waitForTimeout(timeout));\n    }\n    async waitForFunction(pageFunction, arg, options) {\n        return this._attributeToPage(() => this._mainFrame.waitForFunction(pageFunction, arg, options));\n    }\n    workers() {\n        return [...this._workers];\n    }\n    on(event, listener) {\n        if (event === events_1.Events.Page.FileChooser && !this.listenerCount(event))\n            this._channel.setFileChooserInterceptedNoReply({ intercepted: true });\n        super.on(event, listener);\n        return this;\n    }\n    addListener(event, listener) {\n        if (event === events_1.Events.Page.FileChooser && !this.listenerCount(event))\n            this._channel.setFileChooserInterceptedNoReply({ intercepted: true });\n        super.addListener(event, listener);\n        return this;\n    }\n    off(event, listener) {\n        super.off(event, listener);\n        if (event === events_1.Events.Page.FileChooser && !this.listenerCount(event))\n            this._channel.setFileChooserInterceptedNoReply({ intercepted: false });\n        return this;\n    }\n    removeListener(event, listener) {\n        super.removeListener(event, listener);\n        if (event === events_1.Events.Page.FileChooser && !this.listenerCount(event))\n            this._channel.setFileChooserInterceptedNoReply({ intercepted: false });\n        return this;\n    }\n    async pause() {\n        return this.context()._wrapApiCall('page.pause', async (channel) => {\n            await channel.pause();\n        });\n    }\n    async _pdf(options = {}) {\n        return this._wrapApiCall('page.pdf', async (channel) => {\n            const transportOptions = { ...options };\n            if (transportOptions.margin)\n                transportOptions.margin = { ...transportOptions.margin };\n            if (typeof options.width === 'number')\n                transportOptions.width = options.width + 'px';\n            if (typeof options.height === 'number')\n                transportOptions.height = options.height + 'px';\n            for (const margin of ['top', 'right', 'bottom', 'left']) {\n                const index = margin;\n                if (options.margin && typeof options.margin[index] === 'number')\n                    transportOptions.margin[index] = transportOptions.margin[index] + 'px';\n            }\n            const result = await channel.pdf(transportOptions);\n            const buffer = buffer_1.Buffer.from(result.pdf, 'base64');\n            if (options.path) {\n                await mkdirAsync(path_1.default.dirname(options.path), { recursive: true });\n                await fsWriteFileAsync(options.path, buffer);\n            }\n            return buffer;\n        });\n    }\n}\nexports.Page = Page;\nclass BindingCall extends channelOwner_1.ChannelOwner {\n    static from(channel) {\n        return channel._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    async call(func) {\n        try {\n            const frame = frame_1.Frame.from(this._initializer.frame);\n            const source = {\n                context: frame._page.context(),\n                page: frame._page,\n                frame\n            };\n            let result;\n            if (this._initializer.handle)\n                result = await func(source, jsHandle_1.JSHandle.from(this._initializer.handle));\n            else\n                result = await func(source, ...this._initializer.args.map(jsHandle_1.parseResult));\n            this._channel.resolve({ result: jsHandle_1.serializeArgument(result) }).catch(() => { });\n        }\n        catch (e) {\n            this._channel.reject({ error: serializers_1.serializeError(e) }).catch(() => { });\n        }\n    }\n}\nexports.BindingCall = BindingCall;\nfunction trimEnd(s) {\n    if (s.length > 50)\n        s = s.substring(0, 50) + '\\u2026';\n    return s;\n}\nfunction trimUrl(param) {\n    if (utils_2.isRegExp(param))\n        return `/${trimEnd(param.source)}/${param.flags}`;\n    if (utils_2.isString(param))\n        return `\"${trimEnd(param)}\"`;\n}\n//# sourceMappingURL=page.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Playwright = void 0;\nconst browserType_1 = require(\"./browserType\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst selectors_1 = require(\"./selectors\");\nconst electron_1 = require(\"./electron\");\nconst errors_1 = require(\"../utils/errors\");\nconst android_1 = require(\"./android\");\nclass Playwright extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this.chromium = browserType_1.BrowserType.from(initializer.chromium);\n        this.firefox = browserType_1.BrowserType.from(initializer.firefox);\n        this.webkit = browserType_1.BrowserType.from(initializer.webkit);\n        this._android = android_1.Android.from(initializer.android);\n        this._electron = electron_1.Electron.from(initializer.electron);\n        this.devices = {};\n        for (const { name, descriptor } of initializer.deviceDescriptors)\n            this.devices[name] = descriptor;\n        this.selectors = selectors_1.sharedSelectors;\n        this.errors = { TimeoutError: errors_1.TimeoutError };\n        this.selectors._addChannel(selectors_1.SelectorsOwner.from(initializer.selectors));\n    }\n}\nexports.Playwright = Playwright;\n//# sourceMappingURL=playwright.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sharedSelectors = exports.SelectorsOwner = exports.Selectors = void 0;\nconst clientHelper_1 = require(\"./clientHelper\");\nconst channelOwner_1 = require(\"./channelOwner\");\nclass Selectors {\n    constructor() {\n        this._channels = new Set();\n        this._registrations = [];\n    }\n    async register(name, script, options = {}) {\n        const source = await clientHelper_1.evaluationScript(script, undefined, false);\n        const params = { ...options, name, source };\n        for (const channel of this._channels)\n            await channel._channel.register(params);\n        this._registrations.push(params);\n    }\n    _addChannel(channel) {\n        this._channels.add(channel);\n        for (const params of this._registrations) {\n            // This should not fail except for connection closure, but just in case we catch.\n            channel._channel.register(params).catch(e => { });\n        }\n    }\n    _removeChannel(channel) {\n        this._channels.delete(channel);\n    }\n}\nexports.Selectors = Selectors;\nclass SelectorsOwner extends channelOwner_1.ChannelOwner {\n    static from(browser) {\n        return browser._object;\n    }\n}\nexports.SelectorsOwner = SelectorsOwner;\nexports.sharedSelectors = new Selectors();\n//# sourceMappingURL=selectors.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Stream = void 0;\nconst stream_1 = require(\"stream\");\nconst channelOwner_1 = require(\"./channelOwner\");\nclass Stream extends channelOwner_1.ChannelOwner {\n    static from(Stream) {\n        return Stream._object;\n    }\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n    }\n    stream() {\n        return new StreamImpl(this._channel);\n    }\n}\nexports.Stream = Stream;\nclass StreamImpl extends stream_1.Readable {\n    constructor(channel) {\n        super();\n        this._channel = channel;\n    }\n    async _read(size) {\n        const result = await this._channel.read({ size });\n        if (result.binary)\n            this.push(Buffer.from(result.binary, 'base64'));\n        else\n            this.push(null);\n    }\n    _destroy(error, callback) {\n        // Stream might be destroyed after the connection was closed.\n        this._channel.close().catch(e => null);\n        super._destroy(error, callback);\n    }\n}\n//# sourceMappingURL=stream.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kLifecycleEvents = void 0;\nexports.kLifecycleEvents = new Set(['load', 'domcontentloaded', 'networkidle']);\n//# sourceMappingURL=types.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Video = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nclass Video {\n    constructor(page) {\n        this._page = page;\n        this._pathPromise = new Promise(f => this._pathCallback = f);\n    }\n    _setRelativePath(relativePath) {\n        this._pathCallback(path_1.default.join(this._page.context()._options.recordVideo.dir, relativePath));\n    }\n    path() {\n        return this._pathPromise;\n    }\n}\nexports.Video = Video;\n//# sourceMappingURL=video.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Waiter = void 0;\nconst stackTrace_1 = require(\"../utils/stackTrace\");\nconst errors_1 = require(\"../utils/errors\");\nconst utils_1 = require(\"../utils/utils\");\nclass Waiter {\n    constructor(channelOwner, name) {\n        this._failures = [];\n        // TODO: can/should we move these logs into wrapApiCall?\n        this._logs = [];\n        this._waitId = utils_1.createGuid();\n        this._channelOwner = channelOwner;\n        this._channelOwner._waitForEventInfoBefore(this._waitId, name, stackTrace_1.captureStackTrace().frames);\n        this._dispose = [\n            () => this._channelOwner._waitForEventInfoAfter(this._waitId, this._error)\n        ];\n    }\n    static createForEvent(channelOwner, target, event) {\n        return new Waiter(channelOwner, `${target}.waitForEvent(${event})`);\n    }\n    async waitForEvent(emitter, event, predicate) {\n        const { promise, dispose } = waitForEvent(emitter, event, predicate);\n        return this.waitForPromise(promise, dispose);\n    }\n    rejectOnEvent(emitter, event, error, predicate) {\n        const { promise, dispose } = waitForEvent(emitter, event, predicate);\n        this._rejectOn(promise.then(() => { throw error; }), dispose);\n    }\n    rejectOnTimeout(timeout, message) {\n        if (!timeout)\n            return;\n        const { promise, dispose } = waitForTimeout(timeout);\n        this._rejectOn(promise.then(() => { throw new errors_1.TimeoutError(message); }), dispose);\n    }\n    dispose() {\n        for (const dispose of this._dispose)\n            dispose();\n    }\n    async waitForPromise(promise, dispose) {\n        try {\n            const result = await Promise.race([promise, ...this._failures]);\n            if (dispose)\n                dispose();\n            return result;\n        }\n        catch (e) {\n            if (dispose)\n                dispose();\n            this._error = e.message;\n            this.dispose();\n            stackTrace_1.rewriteErrorMessage(e, e.message + formatLogRecording(this._logs) + kLoggingNote);\n            throw e;\n        }\n    }\n    log(s) {\n        this._logs.push(s);\n        this._channelOwner._waitForEventInfoLog(this._waitId, s);\n    }\n    _rejectOn(promise, dispose) {\n        this._failures.push(promise);\n        if (dispose)\n            this._dispose.push(dispose);\n    }\n}\nexports.Waiter = Waiter;\nfunction waitForEvent(emitter, event, predicate) {\n    let listener;\n    const promise = new Promise((resolve, reject) => {\n        listener = (eventArg) => {\n            try {\n                if (predicate && !predicate(eventArg))\n                    return;\n                emitter.removeListener(event, listener);\n                resolve(eventArg);\n            }\n            catch (e) {\n                emitter.removeListener(event, listener);\n                reject(e);\n            }\n        };\n        emitter.addListener(event, listener);\n    });\n    const dispose = () => emitter.removeListener(event, listener);\n    return { promise, dispose };\n}\nfunction waitForTimeout(timeout) {\n    let timeoutId;\n    const promise = new Promise(resolve => timeoutId = setTimeout(resolve, timeout));\n    const dispose = () => clearTimeout(timeoutId);\n    return { promise, dispose };\n}\nconst kLoggingNote = `\\nNote: use DEBUG=pw:api environment variable to capture Playwright logs.`;\nfunction formatLogRecording(log) {\n    if (!log.length)\n        return '';\n    const header = ` logs `;\n    const headerLength = 60;\n    const leftLength = (headerLength - header.length) / 2;\n    const rightLength = headerLength - header.length - leftLength;\n    return `\\n${'='.repeat(leftLength)}${header}${'='.repeat(rightLength)}\\n${log.join('\\n')}\\n${'='.repeat(headerLength)}`;\n}\n//# sourceMappingURL=waiter.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebKitBrowser = void 0;\nconst browser_1 = require(\"./browser\");\nclass WebKitBrowser extends browser_1.Browser {\n}\nexports.WebKitBrowser = WebKitBrowser;\n//# sourceMappingURL=webkitBrowser.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Worker = void 0;\nconst events_1 = require(\"./events\");\nconst channelOwner_1 = require(\"./channelOwner\");\nconst jsHandle_1 = require(\"./jsHandle\");\nclass Worker extends channelOwner_1.ChannelOwner {\n    constructor(parent, type, guid, initializer) {\n        super(parent, type, guid, initializer);\n        this._channel.on('close', () => {\n            if (this._page)\n                this._page._workers.delete(this);\n            if (this._context)\n                this._context._serviceWorkers.delete(this);\n            this.emit(events_1.Events.Worker.Close, this);\n        });\n    }\n    static from(worker) {\n        return worker._object;\n    }\n    url() {\n        return this._initializer.url;\n    }\n    async evaluate(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall('worker.evaluate', async (channel) => {\n            const result = await channel.evaluateExpression({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.parseResult(result.value);\n        });\n    }\n    async evaluateHandle(pageFunction, arg) {\n        jsHandle_1.assertMaxArguments(arguments.length, 2);\n        return this._wrapApiCall('worker.evaluateHandle', async (channel) => {\n            const result = await channel.evaluateExpressionHandle({ expression: String(pageFunction), isFunction: typeof pageFunction === 'function', arg: jsHandle_1.serializeArgument(arg) });\n            return jsHandle_1.JSHandle.from(result.handle);\n        });\n    }\n}\nexports.Worker = Worker;\n//# sourceMappingURL=worker.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AndroidSocketDispatcher = exports.AndroidDeviceDispatcher = exports.AndroidDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst android_1 = require(\"../server/android/android\");\nconst browserContextDispatcher_1 = require(\"./browserContextDispatcher\");\nclass AndroidDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, android) {\n        super(scope, android, 'Android', {}, true);\n    }\n    async devices(params) {\n        const devices = await this._object.devices();\n        return {\n            devices: devices.map(d => AndroidDeviceDispatcher.from(this._scope, d))\n        };\n    }\n    async setDefaultTimeoutNoReply(params) {\n        this._object.setDefaultTimeout(params.timeout);\n    }\n}\nexports.AndroidDispatcher = AndroidDispatcher;\nclass AndroidDeviceDispatcher extends dispatcher_1.Dispatcher {\n    static from(scope, device) {\n        const result = dispatcher_1.existingDispatcher(device);\n        return result || new AndroidDeviceDispatcher(scope, device);\n    }\n    constructor(scope, device) {\n        super(scope, device, 'AndroidDevice', {\n            model: device.model,\n            serial: device.serial,\n        }, true);\n        for (const webView of device.webViews())\n            this._dispatchEvent('webViewAdded', { webView });\n        device.on(android_1.AndroidDevice.Events.WebViewAdded, webView => this._dispatchEvent('webViewAdded', { webView }));\n        device.on(android_1.AndroidDevice.Events.WebViewRemoved, pid => this._dispatchEvent('webViewRemoved', { pid }));\n    }\n    async wait(params) {\n        await this._object.send('wait', params);\n    }\n    async fill(params) {\n        await this._object.send('click', { selector: params.selector });\n        await this._object.send('fill', params);\n    }\n    async tap(params) {\n        await this._object.send('click', params);\n    }\n    async drag(params) {\n        await this._object.send('drag', params);\n    }\n    async fling(params) {\n        await this._object.send('fling', params);\n    }\n    async longTap(params) {\n        await this._object.send('longClick', params);\n    }\n    async pinchClose(params) {\n        await this._object.send('pinchClose', params);\n    }\n    async pinchOpen(params) {\n        await this._object.send('pinchOpen', params);\n    }\n    async scroll(params) {\n        await this._object.send('scroll', params);\n    }\n    async swipe(params) {\n        await this._object.send('swipe', params);\n    }\n    async info(params) {\n        return { info: await this._object.send('info', params) };\n    }\n    async inputType(params) {\n        const text = params.text;\n        const keyCodes = [];\n        for (let i = 0; i < text.length; ++i) {\n            const code = keyMap.get(text[i].toUpperCase());\n            if (code === undefined)\n                throw new Error('No mapping for ' + text[i] + ' found');\n            keyCodes.push(code);\n        }\n        await Promise.all(keyCodes.map(keyCode => this._object.send('inputPress', { keyCode })));\n    }\n    async inputPress(params) {\n        if (!keyMap.has(params.key))\n            throw new Error('Unknown key: ' + params.key);\n        await this._object.send('inputPress', { keyCode: keyMap.get(params.key) });\n    }\n    async inputTap(params) {\n        await this._object.send('inputClick', params);\n    }\n    async inputSwipe(params) {\n        await this._object.send('inputSwipe', params);\n    }\n    async inputDrag(params) {\n        await this._object.send('inputDrag', params);\n    }\n    async screenshot(params) {\n        return { binary: (await this._object.screenshot()).toString('base64') };\n    }\n    async shell(params) {\n        return { result: (await this._object.shell(params.command)).toString('base64') };\n    }\n    async open(params, metadata) {\n        const socket = await this._object.open(params.command);\n        return { socket: new AndroidSocketDispatcher(this._scope, socket) };\n    }\n    async installApk(params) {\n        await this._object.installApk(Buffer.from(params.file, 'base64'), { args: params.args });\n    }\n    async push(params) {\n        await this._object.push(Buffer.from(params.file, 'base64'), params.path, params.mode);\n    }\n    async launchBrowser(params) {\n        const context = await this._object.launchBrowser(params.pkg, params);\n        return { context: new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, context) };\n    }\n    async close(params) {\n        await this._object.close();\n    }\n    async setDefaultTimeoutNoReply(params) {\n        this._object.setDefaultTimeout(params.timeout);\n    }\n    async connectToWebView(params) {\n        return { context: new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, await this._object.connectToWebView(params.pid, params.sdkLanguage)) };\n    }\n}\nexports.AndroidDeviceDispatcher = AndroidDeviceDispatcher;\nclass AndroidSocketDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, socket) {\n        super(scope, socket, 'AndroidSocket', {}, true);\n        socket.on('data', (data) => this._dispatchEvent('data', { data: data.toString('base64') }));\n        socket.on('close', () => {\n            this._dispatchEvent('close');\n            this._dispose();\n        });\n    }\n    async write(params, metadata) {\n        await this._object.write(Buffer.from(params.data, 'base64'));\n    }\n    async close(params, metadata) {\n        this._object.close();\n    }\n}\nexports.AndroidSocketDispatcher = AndroidSocketDispatcher;\nconst keyMap = new Map([\n    ['Unknown', 0],\n    ['SoftLeft', 1],\n    ['SoftRight', 2],\n    ['Home', 3],\n    ['Back', 4],\n    ['Call', 5],\n    ['EndCall', 6],\n    ['0', 7],\n    ['1', 8],\n    ['2', 9],\n    ['3', 10],\n    ['4', 11],\n    ['5', 12],\n    ['6', 13],\n    ['7', 14],\n    ['8', 15],\n    ['9', 16],\n    ['Star', 17],\n    ['*', 17],\n    ['Pound', 18],\n    ['#', 18],\n    ['DialUp', 19],\n    ['DialDown', 20],\n    ['DialLeft', 21],\n    ['DialRight', 22],\n    ['DialCenter', 23],\n    ['VolumeUp', 24],\n    ['VolumeDown', 25],\n    ['Power', 26],\n    ['Camera', 27],\n    ['Clear', 28],\n    ['A', 29],\n    ['B', 30],\n    ['C', 31],\n    ['D', 32],\n    ['E', 33],\n    ['F', 34],\n    ['G', 35],\n    ['H', 36],\n    ['I', 37],\n    ['J', 38],\n    ['K', 39],\n    ['L', 40],\n    ['M', 41],\n    ['N', 42],\n    ['O', 43],\n    ['P', 44],\n    ['Q', 45],\n    ['R', 46],\n    ['S', 47],\n    ['T', 48],\n    ['U', 49],\n    ['V', 50],\n    ['W', 51],\n    ['X', 52],\n    ['Y', 53],\n    ['Z', 54],\n    ['Comma', 55],\n    [',', 55],\n    ['Period', 56],\n    ['.', 56],\n    ['AltLeft', 57],\n    ['AltRight', 58],\n    ['ShiftLeft', 59],\n    ['ShiftRight', 60],\n    ['Tab', 61],\n    ['\\t', 61],\n    ['Space', 62],\n    [' ', 62],\n    ['Sym', 63],\n    ['Explorer', 64],\n    ['Envelop', 65],\n    ['Enter', 66],\n    ['Del', 67],\n    ['Grave', 68],\n    ['Minus', 69],\n    ['-', 69],\n    ['Equals', 70],\n    ['=', 70],\n    ['LeftBracket', 71],\n    ['(', 71],\n    ['RightBracket', 72],\n    [')', 72],\n    ['Backslash', 73],\n    ['\\\\', 73],\n    ['Semicolon', 74],\n    [';', 74],\n    ['Apostrophe', 75],\n    ['`', 75],\n    ['Slash', 76],\n    ['/', 76],\n    ['At', 77],\n    ['@', 77],\n    ['Num', 78],\n    ['HeadsetHook', 79],\n    ['Focus', 80],\n    ['Plus', 81],\n    ['Menu', 82],\n    ['Notification', 83],\n    ['Search', 84],\n    ['AppSwitch', 187],\n    ['Assist', 219],\n    ['Cut', 277],\n    ['Copy', 278],\n    ['Paste', 279],\n]);\n//# sourceMappingURL=androidDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserContextDispatcher = void 0;\nconst browserContext_1 = require(\"../server/browserContext\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst pageDispatcher_1 = require(\"./pageDispatcher\");\nconst networkDispatchers_1 = require(\"./networkDispatchers\");\nconst crBrowser_1 = require(\"../server/chromium/crBrowser\");\nconst cdpSessionDispatcher_1 = require(\"./cdpSessionDispatcher\");\nconst recorderSupplement_1 = require(\"../server/supplements/recorderSupplement\");\nclass BrowserContextDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, context) {\n        super(scope, context, 'BrowserContext', { isChromium: context._browser.options.isChromium }, true);\n        this._context = context;\n        for (const page of context.pages())\n            this._dispatchEvent('page', { page: new pageDispatcher_1.PageDispatcher(this._scope, page) });\n        context.on(browserContext_1.BrowserContext.Events.Page, page => this._dispatchEvent('page', { page: new pageDispatcher_1.PageDispatcher(this._scope, page) }));\n        context.on(browserContext_1.BrowserContext.Events.Close, () => {\n            this._dispatchEvent('close');\n            this._dispose();\n        });\n        if (context._browser.options.name === 'chromium') {\n            for (const page of context.backgroundPages())\n                this._dispatchEvent('crBackgroundPage', { page: new pageDispatcher_1.PageDispatcher(this._scope, page) });\n            context.on(crBrowser_1.CRBrowserContext.CREvents.BackgroundPage, page => this._dispatchEvent('crBackgroundPage', { page: new pageDispatcher_1.PageDispatcher(this._scope, page) }));\n            for (const serviceWorker of context.serviceWorkers())\n                this._dispatchEvent('crServiceWorker', { worker: new pageDispatcher_1.WorkerDispatcher(this._scope, serviceWorker) });\n            context.on(crBrowser_1.CRBrowserContext.CREvents.ServiceWorker, serviceWorker => this._dispatchEvent('crServiceWorker', { worker: new pageDispatcher_1.WorkerDispatcher(this._scope, serviceWorker) }));\n        }\n    }\n    async setDefaultNavigationTimeoutNoReply(params) {\n        this._context.setDefaultNavigationTimeout(params.timeout);\n    }\n    async setDefaultTimeoutNoReply(params) {\n        this._context.setDefaultTimeout(params.timeout);\n    }\n    async exposeBinding(params) {\n        await this._context.exposeBinding(params.name, !!params.needsHandle, (source, ...args) => {\n            const binding = new pageDispatcher_1.BindingCallDispatcher(this._scope, params.name, !!params.needsHandle, source, args);\n            this._dispatchEvent('bindingCall', { binding });\n            return binding.promise();\n        });\n    }\n    async newPage(params, metadata) {\n        return { page: dispatcher_1.lookupDispatcher(await this._context.newPage(metadata)) };\n    }\n    async cookies(params) {\n        return { cookies: await this._context.cookies(params.urls) };\n    }\n    async addCookies(params) {\n        await this._context.addCookies(params.cookies);\n    }\n    async clearCookies() {\n        await this._context.clearCookies();\n    }\n    async grantPermissions(params) {\n        await this._context.grantPermissions(params.permissions, params.origin);\n    }\n    async clearPermissions() {\n        await this._context.clearPermissions();\n    }\n    async setGeolocation(params) {\n        await this._context.setGeolocation(params.geolocation);\n    }\n    async setExtraHTTPHeaders(params) {\n        await this._context.setExtraHTTPHeaders(params.headers);\n    }\n    async setOffline(params) {\n        await this._context.setOffline(params.offline);\n    }\n    async setHTTPCredentials(params) {\n        await this._context.setHTTPCredentials(params.httpCredentials);\n    }\n    async addInitScript(params) {\n        await this._context._doAddInitScript(params.source);\n    }\n    async setNetworkInterceptionEnabled(params) {\n        if (!params.enabled) {\n            await this._context._setRequestInterceptor(undefined);\n            return;\n        }\n        await this._context._setRequestInterceptor((route, request) => {\n            this._dispatchEvent('route', { route: new networkDispatchers_1.RouteDispatcher(this._scope, route), request: networkDispatchers_1.RequestDispatcher.from(this._scope, request) });\n        });\n    }\n    async storageState(params, metadata) {\n        return await this._context.storageState(metadata);\n    }\n    async close(params, metadata) {\n        await this._context.close(metadata);\n    }\n    async recorderSupplementEnable(params) {\n        await recorderSupplement_1.RecorderSupplement.getOrCreate(this._context, params);\n    }\n    async pause(params, metadata) {\n        // Inspector controller will take care of this.\n    }\n    async crNewCDPSession(params) {\n        if (!this._object._browser.options.isChromium)\n            throw new Error(`CDP session is only available in Chromium`);\n        const crBrowserContext = this._object;\n        return { session: new cdpSessionDispatcher_1.CDPSessionDispatcher(this._scope, await crBrowserContext.newCDPSession(params.page._object)) };\n    }\n}\nexports.BrowserContextDispatcher = BrowserContextDispatcher;\n//# sourceMappingURL=browserContextDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserDispatcher = void 0;\nconst browser_1 = require(\"../server/browser\");\nconst browserContextDispatcher_1 = require(\"./browserContextDispatcher\");\nconst cdpSessionDispatcher_1 = require(\"./cdpSessionDispatcher\");\nconst dispatcher_1 = require(\"./dispatcher\");\nclass BrowserDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, browser) {\n        super(scope, browser, 'Browser', { version: browser.version(), name: browser.options.name }, true);\n        browser.on(browser_1.Browser.Events.Disconnected, () => this._didClose());\n    }\n    _didClose() {\n        this._dispatchEvent('close');\n        this._dispose();\n    }\n    async newContext(params, metadata) {\n        const context = await this._object.newContext(params);\n        if (params.storageState)\n            await context.setStorageState(metadata, params.storageState);\n        return { context: new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, context) };\n    }\n    async close() {\n        await this._object.close();\n    }\n    async crNewBrowserCDPSession() {\n        if (!this._object.options.isChromium)\n            throw new Error(`CDP session is only available in Chromium`);\n        const crBrowser = this._object;\n        return { session: new cdpSessionDispatcher_1.CDPSessionDispatcher(this._scope, await crBrowser.newBrowserCDPSession()) };\n    }\n    async crStartTracing(params) {\n        if (!this._object.options.isChromium)\n            throw new Error(`Tracing is only available in Chromium`);\n        const crBrowser = this._object;\n        await crBrowser.startTracing(params.page ? params.page._object : undefined, params);\n    }\n    async crStopTracing() {\n        if (!this._object.options.isChromium)\n            throw new Error(`Tracing is only available in Chromium`);\n        const crBrowser = this._object;\n        const buffer = await crBrowser.stopTracing();\n        return { binary: buffer.toString('base64') };\n    }\n}\nexports.BrowserDispatcher = BrowserDispatcher;\n//# sourceMappingURL=browserDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserTypeDispatcher = void 0;\nconst browserDispatcher_1 = require(\"./browserDispatcher\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst browserContextDispatcher_1 = require(\"./browserContextDispatcher\");\nclass BrowserTypeDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, browserType) {\n        super(scope, browserType, 'BrowserType', {\n            executablePath: browserType.executablePath(),\n            name: browserType.name()\n        }, true);\n    }\n    async launch(params, metadata) {\n        const browser = await this._object.launch(metadata, params);\n        return { browser: new browserDispatcher_1.BrowserDispatcher(this._scope, browser) };\n    }\n    async launchPersistentContext(params, metadata) {\n        const browserContext = await this._object.launchPersistentContext(metadata, params.userDataDir, params);\n        return { context: new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, browserContext) };\n    }\n    async connectOverCDP(params, metadata) {\n        const browser = await this._object.connectOverCDP(metadata, params.wsEndpoint, params, params.timeout);\n        return {\n            browser: new browserDispatcher_1.BrowserDispatcher(this._scope, browser),\n            defaultContext: browser._defaultContext ? new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, browser._defaultContext) : undefined,\n        };\n    }\n}\nexports.BrowserTypeDispatcher = BrowserTypeDispatcher;\n//# sourceMappingURL=browserTypeDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CDPSessionDispatcher = void 0;\nconst crConnection_1 = require(\"../server/chromium/crConnection\");\nconst dispatcher_1 = require(\"./dispatcher\");\nclass CDPSessionDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, crSession) {\n        super(scope, crSession, 'CDPSession', {}, true);\n        crSession._eventListener = (method, params) => {\n            this._dispatchEvent('event', { method, params });\n        };\n        crSession.on(crConnection_1.CRSessionEvents.Disconnected, () => this._dispose());\n    }\n    async send(params) {\n        return { result: await this._object.send(params.method, params.params) };\n    }\n    async detach() {\n        return this._object.detach();\n    }\n}\nexports.CDPSessionDispatcher = CDPSessionDispatcher;\n//# sourceMappingURL=cdpSessionDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConsoleMessageDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst elementHandlerDispatcher_1 = require(\"./elementHandlerDispatcher\");\nclass ConsoleMessageDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, message) {\n        super(scope, message, 'ConsoleMessage', {\n            type: message.type(),\n            text: message.text(),\n            args: message.args().map(a => elementHandlerDispatcher_1.createHandle(scope, a)),\n            location: message.location(),\n        });\n    }\n}\nexports.ConsoleMessageDispatcher = ConsoleMessageDispatcher;\n//# sourceMappingURL=consoleMessageDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DialogDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nclass DialogDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, dialog) {\n        super(scope, dialog, 'Dialog', {\n            type: dialog.type(),\n            message: dialog.message(),\n            defaultValue: dialog.defaultValue(),\n        });\n    }\n    async accept(params) {\n        await this._object.accept(params.promptText);\n    }\n    async dismiss() {\n        await this._object.dismiss();\n    }\n}\nexports.DialogDispatcher = DialogDispatcher;\n//# sourceMappingURL=dialogDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DispatcherConnection = exports.Dispatcher = exports.lookupNullableDispatcher = exports.existingDispatcher = exports.lookupDispatcher = exports.dispatcherSymbol = void 0;\nconst events_1 = require(\"events\");\nconst serializers_1 = require(\"../protocol/serializers\");\nconst validator_1 = require(\"../protocol/validator\");\nconst utils_1 = require(\"../utils/utils\");\nconst validatorPrimitives_1 = require(\"../protocol/validatorPrimitives\");\nconst errors_1 = require(\"../utils/errors\");\nconst instrumentation_1 = require(\"../server/instrumentation\");\nconst stackTrace_1 = require(\"../utils/stackTrace\");\nexports.dispatcherSymbol = Symbol('dispatcher');\nfunction lookupDispatcher(object) {\n    const result = object[exports.dispatcherSymbol];\n    utils_1.debugAssert(result);\n    return result;\n}\nexports.lookupDispatcher = lookupDispatcher;\nfunction existingDispatcher(object) {\n    return object[exports.dispatcherSymbol];\n}\nexports.existingDispatcher = existingDispatcher;\nfunction lookupNullableDispatcher(object) {\n    return object ? lookupDispatcher(object) : undefined;\n}\nexports.lookupNullableDispatcher = lookupNullableDispatcher;\nclass Dispatcher extends events_1.EventEmitter {\n    constructor(parent, object, type, initializer, isScope, guid = type + '@' + utils_1.createGuid()) {\n        super();\n        // Only \"isScope\" channel owners have registered dispatchers inside.\n        this._dispatchers = new Map();\n        this._disposed = false;\n        this._connection = parent instanceof DispatcherConnection ? parent : parent._connection;\n        this._isScope = !!isScope;\n        this._parent = parent instanceof DispatcherConnection ? undefined : parent;\n        this._scope = isScope ? this : this._parent;\n        utils_1.assert(!this._connection._dispatchers.has(guid));\n        this._connection._dispatchers.set(guid, this);\n        if (this._parent) {\n            utils_1.assert(!this._parent._dispatchers.has(guid));\n            this._parent._dispatchers.set(guid, this);\n        }\n        this._type = type;\n        this._guid = guid;\n        this._object = object;\n        object[exports.dispatcherSymbol] = this;\n        if (this._parent)\n            this._connection.sendMessageToClient(this._parent._guid, '__create__', { type, initializer, guid });\n    }\n    _dispatchEvent(method, params = {}) {\n        if (this._disposed) {\n            if (utils_1.isUnderTest())\n                throw new Error(`${this._guid} is sending \"${method}\" event after being disposed`);\n            // Just ignore this event outside of tests.\n            return;\n        }\n        this._connection.sendMessageToClient(this._guid, method, params);\n    }\n    _dispose() {\n        utils_1.assert(!this._disposed);\n        // Clean up from parent and connection.\n        if (this._parent)\n            this._parent._dispatchers.delete(this._guid);\n        this._connection._dispatchers.delete(this._guid);\n        // Dispose all children.\n        for (const dispatcher of [...this._dispatchers.values()])\n            dispatcher._dispose();\n        this._dispatchers.clear();\n        if (this._isScope)\n            this._connection.sendMessageToClient(this._guid, '__dispose__', {});\n    }\n    _debugScopeState() {\n        return {\n            _guid: this._guid,\n            objects: Array.from(this._dispatchers.values()).map(o => o._debugScopeState()),\n        };\n    }\n    async waitForEventInfo() {\n        // Instrumentation takes care of this.\n    }\n}\nexports.Dispatcher = Dispatcher;\nclass Root extends Dispatcher {\n    constructor(connection) {\n        super(connection, {}, '', {}, true, '');\n    }\n}\nclass DispatcherConnection {\n    constructor() {\n        this._dispatchers = new Map();\n        this.onmessage = (message) => { };\n        this._rootDispatcher = new Root(this);\n        const tChannel = (name) => {\n            return (arg, path) => {\n                if (arg && typeof arg === 'object' && typeof arg.guid === 'string') {\n                    const guid = arg.guid;\n                    const dispatcher = this._dispatchers.get(guid);\n                    if (!dispatcher)\n                        throw new validator_1.ValidationError(`${path}: no object with guid ${guid}`);\n                    if (name !== '*' && dispatcher._type !== name)\n                        throw new validator_1.ValidationError(`${path}: object with guid ${guid} has type ${dispatcher._type}, expected ${name}`);\n                    return dispatcher;\n                }\n                throw new validator_1.ValidationError(`${path}: expected ${name}`);\n            };\n        };\n        const scheme = validator_1.createScheme(tChannel);\n        this._validateParams = (type, method, params) => {\n            if (method === 'waitForEventInfo')\n                return validatorPrimitives_1.tOptional(scheme['WaitForEventInfo'])(params.info, '');\n            const name = type + method[0].toUpperCase() + method.substring(1) + 'Params';\n            if (!scheme[name])\n                throw new validator_1.ValidationError(`Unknown scheme for ${type}.${method}`);\n            return scheme[name](params, '');\n        };\n        this._validateMetadata = (metadata) => {\n            return validatorPrimitives_1.tOptional(scheme['Metadata'])(metadata, '');\n        };\n    }\n    sendMessageToClient(guid, method, params) {\n        this.onmessage({ guid, method, params: this._replaceDispatchersWithGuids(params) });\n    }\n    rootDispatcher() {\n        return this._rootDispatcher;\n    }\n    async dispatch(message) {\n        var _a, _b;\n        const { id, guid, method, params, metadata } = message;\n        const dispatcher = this._dispatchers.get(guid);\n        if (!dispatcher) {\n            this.onmessage({ id, error: serializers_1.serializeError(new Error(errors_1.kBrowserOrContextClosedError)) });\n            return;\n        }\n        if (method === 'debugScopeState') {\n            this.onmessage({ id, result: this._rootDispatcher._debugScopeState() });\n            return;\n        }\n        let validParams;\n        let validMetadata;\n        try {\n            validParams = this._validateParams(dispatcher._type, method, params);\n            validMetadata = this._validateMetadata(metadata);\n            if (typeof dispatcher[method] !== 'function')\n                throw new Error(`Mismatching dispatcher: \"${dispatcher._type}\" does not implement \"${method}\"`);\n        }\n        catch (e) {\n            this.onmessage({ id, error: serializers_1.serializeError(e) });\n            return;\n        }\n        const sdkObject = dispatcher._object instanceof instrumentation_1.SdkObject ? dispatcher._object : undefined;\n        const callMetadata = {\n            id,\n            ...validMetadata,\n            pageId: (_a = sdkObject === null || sdkObject === void 0 ? void 0 : sdkObject.attribution.page) === null || _a === void 0 ? void 0 : _a.uniqueId,\n            frameId: (_b = sdkObject === null || sdkObject === void 0 ? void 0 : sdkObject.attribution.frame) === null || _b === void 0 ? void 0 : _b.uniqueId,\n            startTime: utils_1.monotonicTime(),\n            endTime: 0,\n            type: dispatcher._type,\n            method,\n            params,\n            log: [],\n        };\n        try {\n            if (sdkObject)\n                await sdkObject.instrumentation.onBeforeCall(sdkObject, callMetadata);\n            const result = await dispatcher[method](validParams, callMetadata);\n            this.onmessage({ id, result: this._replaceDispatchersWithGuids(result) });\n        }\n        catch (e) {\n            // Dispatching error\n            callMetadata.error = e.message;\n            if (callMetadata.log.length)\n                stackTrace_1.rewriteErrorMessage(e, e.message + formatLogRecording(callMetadata.log) + kLoggingNote);\n            this.onmessage({ id, error: serializers_1.serializeError(e) });\n        }\n        finally {\n            callMetadata.endTime = utils_1.monotonicTime();\n            if (sdkObject)\n                await sdkObject.instrumentation.onAfterCall(sdkObject, callMetadata);\n        }\n    }\n    _replaceDispatchersWithGuids(payload) {\n        if (!payload)\n            return payload;\n        if (payload instanceof Dispatcher)\n            return { guid: payload._guid };\n        if (Array.isArray(payload))\n            return payload.map(p => this._replaceDispatchersWithGuids(p));\n        if (typeof payload === 'object') {\n            const result = {};\n            for (const key of Object.keys(payload))\n                result[key] = this._replaceDispatchersWithGuids(payload[key]);\n            return result;\n        }\n        return payload;\n    }\n}\nexports.DispatcherConnection = DispatcherConnection;\nconst kLoggingNote = `\\nNote: use DEBUG=pw:api environment variable to capture Playwright logs.`;\nfunction formatLogRecording(log) {\n    if (!log.length)\n        return '';\n    const header = ` logs `;\n    const headerLength = 60;\n    const leftLength = (headerLength - header.length) / 2;\n    const rightLength = headerLength - header.length - leftLength;\n    return `\\n${'='.repeat(leftLength)}${header}${'='.repeat(rightLength)}\\n${log.join('\\n')}\\n${'='.repeat(headerLength)}`;\n}\n//# sourceMappingURL=dispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DownloadDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst streamDispatcher_1 = require(\"./streamDispatcher\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../utils/utils\");\nclass DownloadDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, download) {\n        super(scope, download, 'Download', {\n            url: download.url(),\n            suggestedFilename: download.suggestedFilename(),\n        });\n    }\n    async path() {\n        const path = await this._object.localPath();\n        return { value: path || undefined };\n    }\n    async saveAs(params) {\n        return await new Promise((resolve, reject) => {\n            this._object.saveAs(async (localPath, error) => {\n                if (error !== undefined) {\n                    reject(new Error(error));\n                    return;\n                }\n                try {\n                    await utils_1.mkdirIfNeeded(params.path);\n                    await util.promisify(fs_1.default.copyFile)(localPath, params.path);\n                    resolve();\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async saveAsStream() {\n        return await new Promise((resolve, reject) => {\n            this._object.saveAs(async (localPath, error) => {\n                if (error !== undefined) {\n                    reject(new Error(error));\n                    return;\n                }\n                try {\n                    const readable = fs_1.default.createReadStream(localPath);\n                    await new Promise(f => readable.on('readable', f));\n                    const stream = new streamDispatcher_1.StreamDispatcher(this._scope, readable);\n                    // Resolve with a stream, so that client starts saving the data.\n                    resolve({ stream });\n                    // Block the download until the stream is consumed.\n                    await new Promise(resolve => {\n                        readable.on('close', resolve);\n                        readable.on('end', resolve);\n                        readable.on('error', resolve);\n                    });\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async stream() {\n        const fileName = await this._object.localPath();\n        if (!fileName)\n            return {};\n        const readable = fs_1.default.createReadStream(fileName);\n        await new Promise(f => readable.on('readable', f));\n        return { stream: new streamDispatcher_1.StreamDispatcher(this._scope, readable) };\n    }\n    async failure() {\n        const error = await this._object.failure();\n        return { error: error || undefined };\n    }\n    async delete() {\n        await this._object.delete();\n    }\n}\nexports.DownloadDispatcher = DownloadDispatcher;\n//# sourceMappingURL=downloadDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElectronApplicationDispatcher = exports.ElectronDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst electron_1 = require(\"../server/electron/electron\");\nconst browserContextDispatcher_1 = require(\"./browserContextDispatcher\");\nconst jsHandleDispatcher_1 = require(\"./jsHandleDispatcher\");\nconst elementHandlerDispatcher_1 = require(\"./elementHandlerDispatcher\");\nclass ElectronDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, electron) {\n        super(scope, electron, 'Electron', {}, true);\n    }\n    async launch(params) {\n        const electronApplication = await this._object.launch(params);\n        return { electronApplication: new ElectronApplicationDispatcher(this._scope, electronApplication) };\n    }\n}\nexports.ElectronDispatcher = ElectronDispatcher;\nclass ElectronApplicationDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, electronApplication) {\n        super(scope, electronApplication, 'ElectronApplication', {}, true);\n        this._dispatchEvent('context', { context: new browserContextDispatcher_1.BrowserContextDispatcher(this._scope, electronApplication.context()) });\n        electronApplication.on(electron_1.ElectronApplication.Events.Close, () => {\n            this._dispatchEvent('close');\n            this._dispose();\n        });\n        electronApplication.on(electron_1.ElectronApplication.Events.Window, (page) => {\n            this._dispatchEvent('window', {\n                page: dispatcher_1.lookupDispatcher(page),\n                browserWindow: elementHandlerDispatcher_1.createHandle(this._scope, page.browserWindow),\n            });\n        });\n    }\n    async evaluateExpression(params) {\n        const handle = this._object._nodeElectronHandle;\n        return { value: jsHandleDispatcher_1.serializeResult(await handle.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, true /* returnByValue */, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async evaluateExpressionHandle(params) {\n        const handle = this._object._nodeElectronHandle;\n        const result = await handle.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, false /* returnByValue */, jsHandleDispatcher_1.parseArgument(params.arg));\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, result) };\n    }\n    async close() {\n        await this._object.close();\n    }\n}\nexports.ElectronApplicationDispatcher = ElectronApplicationDispatcher;\n//# sourceMappingURL=electronDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElementHandleDispatcher = exports.createHandle = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst jsHandleDispatcher_1 = require(\"./jsHandleDispatcher\");\nfunction createHandle(scope, handle) {\n    return handle.asElement() ? new ElementHandleDispatcher(scope, handle.asElement()) : new jsHandleDispatcher_1.JSHandleDispatcher(scope, handle);\n}\nexports.createHandle = createHandle;\nclass ElementHandleDispatcher extends jsHandleDispatcher_1.JSHandleDispatcher {\n    constructor(scope, elementHandle) {\n        super(scope, elementHandle);\n        this._elementHandle = elementHandle;\n    }\n    static createNullable(scope, handle) {\n        if (!handle)\n            return undefined;\n        return new ElementHandleDispatcher(scope, handle);\n    }\n    async ownerFrame(params, metadata) {\n        return { frame: dispatcher_1.lookupNullableDispatcher(await this._elementHandle.ownerFrame()) };\n    }\n    async contentFrame(params, metadata) {\n        return { frame: dispatcher_1.lookupNullableDispatcher(await this._elementHandle.contentFrame()) };\n    }\n    async getAttribute(params, metadata) {\n        const value = await this._elementHandle.getAttribute(params.name);\n        return { value: value === null ? undefined : value };\n    }\n    async textContent(params, metadata) {\n        const value = await this._elementHandle.textContent();\n        return { value: value === null ? undefined : value };\n    }\n    async innerText(params, metadata) {\n        return { value: await this._elementHandle.innerText() };\n    }\n    async innerHTML(params, metadata) {\n        return { value: await this._elementHandle.innerHTML() };\n    }\n    async isChecked(params, metadata) {\n        return { value: await this._elementHandle.isChecked() };\n    }\n    async isDisabled(params, metadata) {\n        return { value: await this._elementHandle.isDisabled() };\n    }\n    async isEditable(params, metadata) {\n        return { value: await this._elementHandle.isEditable() };\n    }\n    async isEnabled(params, metadata) {\n        return { value: await this._elementHandle.isEnabled() };\n    }\n    async isHidden(params, metadata) {\n        return { value: await this._elementHandle.isHidden() };\n    }\n    async isVisible(params, metadata) {\n        return { value: await this._elementHandle.isVisible() };\n    }\n    async dispatchEvent(params, metadata) {\n        await this._elementHandle.dispatchEvent(params.type, jsHandleDispatcher_1.parseArgument(params.eventInit));\n    }\n    async scrollIntoViewIfNeeded(params, metadata) {\n        await this._elementHandle.scrollIntoViewIfNeeded(metadata, params);\n    }\n    async hover(params, metadata) {\n        return await this._elementHandle.hover(metadata, params);\n    }\n    async click(params, metadata) {\n        return await this._elementHandle.click(metadata, params);\n    }\n    async dblclick(params, metadata) {\n        return await this._elementHandle.dblclick(metadata, params);\n    }\n    async tap(params, metadata) {\n        return await this._elementHandle.tap(metadata, params);\n    }\n    async selectOption(params, metadata) {\n        const elements = (params.elements || []).map(e => e._elementHandle);\n        return { values: await this._elementHandle.selectOption(metadata, elements, params.options || [], params) };\n    }\n    async fill(params, metadata) {\n        return await this._elementHandle.fill(metadata, params.value, params);\n    }\n    async selectText(params, metadata) {\n        await this._elementHandle.selectText(metadata, params);\n    }\n    async setInputFiles(params, metadata) {\n        return await this._elementHandle.setInputFiles(metadata, params.files, params);\n    }\n    async focus(params, metadata) {\n        await this._elementHandle.focus(metadata);\n    }\n    async type(params, metadata) {\n        return await this._elementHandle.type(metadata, params.text, params);\n    }\n    async press(params, metadata) {\n        return await this._elementHandle.press(metadata, params.key, params);\n    }\n    async check(params, metadata) {\n        return await this._elementHandle.check(metadata, params);\n    }\n    async uncheck(params, metadata) {\n        return await this._elementHandle.uncheck(metadata, params);\n    }\n    async boundingBox(params, metadata) {\n        const value = await this._elementHandle.boundingBox();\n        return { value: value || undefined };\n    }\n    async screenshot(params, metadata) {\n        return { binary: (await this._elementHandle.screenshot(metadata, params)).toString('base64') };\n    }\n    async querySelector(params, metadata) {\n        const handle = await this._elementHandle.$(params.selector);\n        return { element: handle ? new ElementHandleDispatcher(this._scope, handle) : undefined };\n    }\n    async querySelectorAll(params, metadata) {\n        const elements = await this._elementHandle.$$(params.selector);\n        return { elements: elements.map(e => new ElementHandleDispatcher(this._scope, e)) };\n    }\n    async evalOnSelector(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._elementHandle.evalOnSelectorAndWaitForSignals(params.selector, params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async evalOnSelectorAll(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._elementHandle.evalOnSelectorAllAndWaitForSignals(params.selector, params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async waitForElementState(params, metadata) {\n        await this._elementHandle.waitForElementState(metadata, params.state, params);\n    }\n    async waitForSelector(params, metadata) {\n        return { element: ElementHandleDispatcher.createNullable(this._scope, await this._elementHandle.waitForSelector(metadata, params.selector, params)) };\n    }\n}\nexports.ElementHandleDispatcher = ElementHandleDispatcher;\n//# sourceMappingURL=elementHandlerDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FrameDispatcher = void 0;\nconst frames_1 = require(\"../server/frames\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst elementHandlerDispatcher_1 = require(\"./elementHandlerDispatcher\");\nconst jsHandleDispatcher_1 = require(\"./jsHandleDispatcher\");\nconst networkDispatchers_1 = require(\"./networkDispatchers\");\nclass FrameDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, frame) {\n        super(scope, frame, 'Frame', {\n            url: frame.url(),\n            name: frame.name(),\n            parentFrame: dispatcher_1.lookupNullableDispatcher(frame.parentFrame()),\n            loadStates: Array.from(frame._subtreeLifecycleEvents),\n        });\n        this._frame = frame;\n        frame.on(frames_1.Frame.Events.AddLifecycle, lifecycleEvent => {\n            this._dispatchEvent('loadstate', { add: lifecycleEvent });\n        });\n        frame.on(frames_1.Frame.Events.RemoveLifecycle, lifecycleEvent => {\n            this._dispatchEvent('loadstate', { remove: lifecycleEvent });\n        });\n        frame.on(frames_1.Frame.Events.Navigation, (event) => {\n            const params = { url: event.url, name: event.name, error: event.error ? event.error.message : undefined };\n            if (event.newDocument)\n                params.newDocument = { request: networkDispatchers_1.RequestDispatcher.fromNullable(this._scope, event.newDocument.request || null) };\n            this._dispatchEvent('navigated', params);\n        });\n    }\n    static from(scope, frame) {\n        const result = dispatcher_1.existingDispatcher(frame);\n        return result || new FrameDispatcher(scope, frame);\n    }\n    async goto(params, metadata) {\n        return { response: dispatcher_1.lookupNullableDispatcher(await this._frame.goto(metadata, params.url, params)) };\n    }\n    async frameElement() {\n        return { element: new elementHandlerDispatcher_1.ElementHandleDispatcher(this._scope, await this._frame.frameElement()) };\n    }\n    async evaluateExpression(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._frame.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg), params.world)) };\n    }\n    async evaluateExpressionHandle(params, metadata) {\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, await this._frame.evaluateExpressionHandleAndWaitForSignals(params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg), params.world)) };\n    }\n    async waitForSelector(params, metadata) {\n        return { element: elementHandlerDispatcher_1.ElementHandleDispatcher.createNullable(this._scope, await this._frame.waitForSelector(metadata, params.selector, params)) };\n    }\n    async dispatchEvent(params, metadata) {\n        return this._frame.dispatchEvent(metadata, params.selector, params.type, jsHandleDispatcher_1.parseArgument(params.eventInit), params);\n    }\n    async evalOnSelector(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._frame.evalOnSelectorAndWaitForSignals(params.selector, params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async evalOnSelectorAll(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._frame.evalOnSelectorAllAndWaitForSignals(params.selector, params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async querySelector(params, metadata) {\n        return { element: elementHandlerDispatcher_1.ElementHandleDispatcher.createNullable(this._scope, await this._frame.$(params.selector)) };\n    }\n    async querySelectorAll(params, metadata) {\n        const elements = await this._frame.$$(params.selector);\n        return { elements: elements.map(e => new elementHandlerDispatcher_1.ElementHandleDispatcher(this._scope, e)) };\n    }\n    async content() {\n        return { value: await this._frame.content() };\n    }\n    async setContent(params, metadata) {\n        return await this._frame.setContent(metadata, params.html, params);\n    }\n    async addScriptTag(params, metadata) {\n        return { element: new elementHandlerDispatcher_1.ElementHandleDispatcher(this._scope, await this._frame.addScriptTag(params)) };\n    }\n    async addStyleTag(params, metadata) {\n        return { element: new elementHandlerDispatcher_1.ElementHandleDispatcher(this._scope, await this._frame.addStyleTag(params)) };\n    }\n    async click(params, metadata) {\n        return await this._frame.click(metadata, params.selector, params);\n    }\n    async dblclick(params, metadata) {\n        return await this._frame.dblclick(metadata, params.selector, params);\n    }\n    async tap(params, metadata) {\n        return await this._frame.tap(metadata, params.selector, params);\n    }\n    async fill(params, metadata) {\n        return await this._frame.fill(metadata, params.selector, params.value, params);\n    }\n    async focus(params, metadata) {\n        await this._frame.focus(metadata, params.selector, params);\n    }\n    async textContent(params, metadata) {\n        const value = await this._frame.textContent(metadata, params.selector, params);\n        return { value: value === null ? undefined : value };\n    }\n    async innerText(params, metadata) {\n        return { value: await this._frame.innerText(metadata, params.selector, params) };\n    }\n    async innerHTML(params, metadata) {\n        return { value: await this._frame.innerHTML(metadata, params.selector, params) };\n    }\n    async getAttribute(params, metadata) {\n        const value = await this._frame.getAttribute(metadata, params.selector, params.name, params);\n        return { value: value === null ? undefined : value };\n    }\n    async isChecked(params, metadata) {\n        return { value: await this._frame.isChecked(metadata, params.selector, params) };\n    }\n    async isDisabled(params, metadata) {\n        return { value: await this._frame.isDisabled(metadata, params.selector, params) };\n    }\n    async isEditable(params, metadata) {\n        return { value: await this._frame.isEditable(metadata, params.selector, params) };\n    }\n    async isEnabled(params, metadata) {\n        return { value: await this._frame.isEnabled(metadata, params.selector, params) };\n    }\n    async isHidden(params, metadata) {\n        return { value: await this._frame.isHidden(metadata, params.selector, params) };\n    }\n    async isVisible(params, metadata) {\n        return { value: await this._frame.isVisible(metadata, params.selector, params) };\n    }\n    async hover(params, metadata) {\n        return await this._frame.hover(metadata, params.selector, params);\n    }\n    async selectOption(params, metadata) {\n        const elements = (params.elements || []).map(e => e._elementHandle);\n        return { values: await this._frame.selectOption(metadata, params.selector, elements, params.options || [], params) };\n    }\n    async setInputFiles(params, metadata) {\n        return await this._frame.setInputFiles(metadata, params.selector, params.files, params);\n    }\n    async type(params, metadata) {\n        return await this._frame.type(metadata, params.selector, params.text, params);\n    }\n    async press(params, metadata) {\n        return await this._frame.press(metadata, params.selector, params.key, params);\n    }\n    async check(params, metadata) {\n        return await this._frame.check(metadata, params.selector, params);\n    }\n    async uncheck(params, metadata) {\n        return await this._frame.uncheck(metadata, params.selector, params);\n    }\n    async waitForFunction(params, metadata) {\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, await this._frame._waitForFunctionExpression(metadata, params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg), params)) };\n    }\n    async title(params, metadata) {\n        return { value: await this._frame.title() };\n    }\n}\nexports.FrameDispatcher = FrameDispatcher;\n//# sourceMappingURL=frameDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeResult = exports.parseValue = exports.parseArgument = exports.JSHandleDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nconst elementHandlerDispatcher_1 = require(\"./elementHandlerDispatcher\");\nconst serializers_1 = require(\"../protocol/serializers\");\nclass JSHandleDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, jsHandle) {\n        // Do not call this directly, use createHandle() instead.\n        super(scope, jsHandle, jsHandle.asElement() ? 'ElementHandle' : 'JSHandle', {\n            preview: jsHandle.toString(),\n        });\n        jsHandle._setPreviewCallback(preview => this._dispatchEvent('previewUpdated', { preview }));\n    }\n    async evaluateExpression(params) {\n        return { value: serializeResult(await this._object.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, true /* returnByValue */, parseArgument(params.arg))) };\n    }\n    async evaluateExpressionHandle(params) {\n        const jsHandle = await this._object.evaluateExpressionAndWaitForSignals(params.expression, params.isFunction, false /* returnByValue */, parseArgument(params.arg));\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, jsHandle) };\n    }\n    async getProperty(params) {\n        const jsHandle = await this._object.getProperty(params.name);\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, jsHandle) };\n    }\n    async getPropertyList() {\n        const map = await this._object.getProperties();\n        const properties = [];\n        for (const [name, value] of map)\n            properties.push({ name, value: elementHandlerDispatcher_1.createHandle(this._scope, value) });\n        return { properties };\n    }\n    async jsonValue() {\n        return { value: serializeResult(await this._object.jsonValue()) };\n    }\n    async dispose() {\n        await this._object.dispose();\n    }\n}\nexports.JSHandleDispatcher = JSHandleDispatcher;\n// Generic channel parser converts guids to JSHandleDispatchers,\n// and this function takes care of coverting them into underlying JSHandles.\nfunction parseArgument(arg) {\n    return serializers_1.parseSerializedValue(arg.value, arg.handles.map(a => a._object));\n}\nexports.parseArgument = parseArgument;\nfunction parseValue(v) {\n    return serializers_1.parseSerializedValue(v, []);\n}\nexports.parseValue = parseValue;\nfunction serializeResult(arg) {\n    return serializers_1.serializeValue(arg, value => ({ fallThrough: value }), new Set());\n}\nexports.serializeResult = serializeResult;\n//# sourceMappingURL=jsHandleDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocketDispatcher = exports.RouteDispatcher = exports.ResponseDispatcher = exports.RequestDispatcher = void 0;\nconst network_1 = require(\"../server/network\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst frameDispatcher_1 = require(\"./frameDispatcher\");\nclass RequestDispatcher extends dispatcher_1.Dispatcher {\n    static from(scope, request) {\n        const result = dispatcher_1.existingDispatcher(request);\n        return result || new RequestDispatcher(scope, request);\n    }\n    static fromNullable(scope, request) {\n        return request ? RequestDispatcher.from(scope, request) : undefined;\n    }\n    constructor(scope, request) {\n        const postData = request.postDataBuffer();\n        super(scope, request, 'Request', {\n            frame: frameDispatcher_1.FrameDispatcher.from(scope, request.frame()),\n            url: request.url(),\n            resourceType: request.resourceType(),\n            method: request.method(),\n            postData: postData === null ? undefined : postData.toString('base64'),\n            headers: request.headers(),\n            isNavigationRequest: request.isNavigationRequest(),\n            redirectedFrom: RequestDispatcher.fromNullable(scope, request.redirectedFrom()),\n        });\n    }\n    async response() {\n        return { response: dispatcher_1.lookupNullableDispatcher(await this._object.response()) };\n    }\n}\nexports.RequestDispatcher = RequestDispatcher;\nclass ResponseDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, response) {\n        super(scope, response, 'Response', {\n            // TODO: responses in popups can point to non-reported requests.\n            request: RequestDispatcher.from(scope, response.request()),\n            url: response.url(),\n            status: response.status(),\n            statusText: response.statusText(),\n            requestHeaders: response.request().headers(),\n            headers: response.headers(),\n            timing: response.timing()\n        });\n    }\n    async finished() {\n        return await this._object._finishedPromise;\n    }\n    async body() {\n        return { binary: (await this._object.body()).toString('base64') };\n    }\n}\nexports.ResponseDispatcher = ResponseDispatcher;\nclass RouteDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, route) {\n        super(scope, route, 'Route', {\n            // Context route can point to a non-reported request.\n            request: RequestDispatcher.from(scope, route.request())\n        });\n    }\n    async continue(params) {\n        await this._object.continue({\n            url: params.url,\n            method: params.method,\n            headers: params.headers,\n            postData: params.postData ? Buffer.from(params.postData, 'base64') : undefined,\n        });\n    }\n    async fulfill(params) {\n        await this._object.fulfill(params);\n    }\n    async abort(params) {\n        await this._object.abort(params.errorCode || 'failed');\n    }\n}\nexports.RouteDispatcher = RouteDispatcher;\nclass WebSocketDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, webSocket) {\n        super(scope, webSocket, 'WebSocket', {\n            url: webSocket.url(),\n        });\n        webSocket.on(network_1.WebSocket.Events.FrameSent, (event) => this._dispatchEvent('frameSent', event));\n        webSocket.on(network_1.WebSocket.Events.FrameReceived, (event) => this._dispatchEvent('frameReceived', event));\n        webSocket.on(network_1.WebSocket.Events.SocketError, (error) => this._dispatchEvent('socketError', { error }));\n        webSocket.on(network_1.WebSocket.Events.Close, () => this._dispatchEvent('close', {}));\n    }\n}\nexports.WebSocketDispatcher = WebSocketDispatcher;\n//# sourceMappingURL=networkDispatchers.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingCallDispatcher = exports.WorkerDispatcher = exports.PageDispatcher = void 0;\nconst page_1 = require(\"../server/page\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst serializers_1 = require(\"../protocol/serializers\");\nconst consoleMessageDispatcher_1 = require(\"./consoleMessageDispatcher\");\nconst dialogDispatcher_1 = require(\"./dialogDispatcher\");\nconst downloadDispatcher_1 = require(\"./downloadDispatcher\");\nconst frameDispatcher_1 = require(\"./frameDispatcher\");\nconst networkDispatchers_1 = require(\"./networkDispatchers\");\nconst jsHandleDispatcher_1 = require(\"./jsHandleDispatcher\");\nconst elementHandlerDispatcher_1 = require(\"./elementHandlerDispatcher\");\nclass PageDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, page) {\n        // TODO: theoretically, there could be more than one frame already.\n        // If we split pageCreated and pageReady, there should be no main frame during pageCreated.\n        super(scope, page, 'Page', {\n            mainFrame: frameDispatcher_1.FrameDispatcher.from(scope, page.mainFrame()),\n            videoRelativePath: page._video ? page._video._relativePath : undefined,\n            viewportSize: page.viewportSize() || undefined,\n            isClosed: page.isClosed()\n        }, true);\n        this._page = page;\n        page.on(page_1.Page.Events.Close, () => {\n            this._dispatchEvent('close');\n            this._dispose();\n        });\n        page.on(page_1.Page.Events.Console, message => this._dispatchEvent('console', { message: new consoleMessageDispatcher_1.ConsoleMessageDispatcher(this._scope, message) }));\n        page.on(page_1.Page.Events.Crash, () => this._dispatchEvent('crash'));\n        page.on(page_1.Page.Events.DOMContentLoaded, () => this._dispatchEvent('domcontentloaded'));\n        page.on(page_1.Page.Events.Dialog, dialog => this._dispatchEvent('dialog', { dialog: new dialogDispatcher_1.DialogDispatcher(this._scope, dialog) }));\n        page.on(page_1.Page.Events.Download, download => this._dispatchEvent('download', { download: new downloadDispatcher_1.DownloadDispatcher(scope, download) }));\n        this._page.on(page_1.Page.Events.FileChooser, (fileChooser) => this._dispatchEvent('fileChooser', {\n            element: new elementHandlerDispatcher_1.ElementHandleDispatcher(this._scope, fileChooser.element()),\n            isMultiple: fileChooser.isMultiple()\n        }));\n        page.on(page_1.Page.Events.FrameAttached, frame => this._onFrameAttached(frame));\n        page.on(page_1.Page.Events.FrameDetached, frame => this._onFrameDetached(frame));\n        page.on(page_1.Page.Events.Load, () => this._dispatchEvent('load'));\n        page.on(page_1.Page.Events.PageError, error => this._dispatchEvent('pageError', { error: serializers_1.serializeError(error) }));\n        page.on(page_1.Page.Events.Popup, page => this._dispatchEvent('popup', { page: dispatcher_1.lookupDispatcher(page) }));\n        page.on(page_1.Page.Events.Request, request => this._dispatchEvent('request', { request: networkDispatchers_1.RequestDispatcher.from(this._scope, request) }));\n        page.on(page_1.Page.Events.RequestFailed, (request) => this._dispatchEvent('requestFailed', {\n            request: networkDispatchers_1.RequestDispatcher.from(this._scope, request),\n            failureText: request._failureText,\n            responseEndTiming: request._responseEndTiming\n        }));\n        page.on(page_1.Page.Events.RequestFinished, (request) => this._dispatchEvent('requestFinished', {\n            request: networkDispatchers_1.RequestDispatcher.from(scope, request),\n            responseEndTiming: request._responseEndTiming\n        }));\n        page.on(page_1.Page.Events.Response, response => this._dispatchEvent('response', { response: new networkDispatchers_1.ResponseDispatcher(this._scope, response) }));\n        page.on(page_1.Page.Events.VideoStarted, (video) => this._dispatchEvent('video', { relativePath: video._relativePath }));\n        page.on(page_1.Page.Events.WebSocket, webSocket => this._dispatchEvent('webSocket', { webSocket: new networkDispatchers_1.WebSocketDispatcher(this._scope, webSocket) }));\n        page.on(page_1.Page.Events.Worker, worker => this._dispatchEvent('worker', { worker: new WorkerDispatcher(this._scope, worker) }));\n    }\n    async setDefaultNavigationTimeoutNoReply(params, metadata) {\n        this._page.setDefaultNavigationTimeout(params.timeout);\n    }\n    async setDefaultTimeoutNoReply(params, metadata) {\n        this._page.setDefaultTimeout(params.timeout);\n    }\n    async opener(params, metadata) {\n        return { page: dispatcher_1.lookupNullableDispatcher(await this._page.opener()) };\n    }\n    async exposeBinding(params, metadata) {\n        await this._page.exposeBinding(params.name, !!params.needsHandle, (source, ...args) => {\n            const binding = new BindingCallDispatcher(this._scope, params.name, !!params.needsHandle, source, args);\n            this._dispatchEvent('bindingCall', { binding });\n            return binding.promise();\n        });\n    }\n    async setExtraHTTPHeaders(params, metadata) {\n        await this._page.setExtraHTTPHeaders(params.headers);\n    }\n    async reload(params, metadata) {\n        return { response: dispatcher_1.lookupNullableDispatcher(await this._page.reload(metadata, params)) };\n    }\n    async goBack(params, metadata) {\n        return { response: dispatcher_1.lookupNullableDispatcher(await this._page.goBack(metadata, params)) };\n    }\n    async goForward(params, metadata) {\n        return { response: dispatcher_1.lookupNullableDispatcher(await this._page.goForward(metadata, params)) };\n    }\n    async emulateMedia(params, metadata) {\n        await this._page.emulateMedia({\n            media: params.media === 'null' ? null : params.media,\n            colorScheme: params.colorScheme === 'null' ? null : params.colorScheme,\n        });\n    }\n    async setViewportSize(params, metadata) {\n        await this._page.setViewportSize(params.viewportSize);\n    }\n    async addInitScript(params, metadata) {\n        await this._page._addInitScriptExpression(params.source);\n    }\n    async setNetworkInterceptionEnabled(params, metadata) {\n        if (!params.enabled) {\n            await this._page._setClientRequestInterceptor(undefined);\n            return;\n        }\n        await this._page._setClientRequestInterceptor((route, request) => {\n            this._dispatchEvent('route', { route: new networkDispatchers_1.RouteDispatcher(this._scope, route), request: networkDispatchers_1.RequestDispatcher.from(this._scope, request) });\n        });\n    }\n    async screenshot(params, metadata) {\n        return { binary: (await this._page.screenshot(metadata, params)).toString('base64') };\n    }\n    async close(params, metadata) {\n        await this._page.close(metadata, params);\n    }\n    async setFileChooserInterceptedNoReply(params, metadata) {\n        await this._page._setFileChooserIntercepted(params.intercepted);\n    }\n    async keyboardDown(params, metadata) {\n        await this._page.keyboard.down(params.key);\n    }\n    async keyboardUp(params, metadata) {\n        await this._page.keyboard.up(params.key);\n    }\n    async keyboardInsertText(params, metadata) {\n        await this._page.keyboard.insertText(params.text);\n    }\n    async keyboardType(params, metadata) {\n        await this._page.keyboard.type(params.text, params);\n    }\n    async keyboardPress(params, metadata) {\n        await this._page.keyboard.press(params.key, params);\n    }\n    async mouseMove(params, metadata) {\n        await this._page.mouse.move(params.x, params.y, params);\n    }\n    async mouseDown(params, metadata) {\n        await this._page.mouse.down(params);\n    }\n    async mouseUp(params, metadata) {\n        await this._page.mouse.up(params);\n    }\n    async mouseClick(params, metadata) {\n        await this._page.mouse.click(params.x, params.y, params);\n    }\n    async touchscreenTap(params, metadata) {\n        await this._page.touchscreen.tap(params.x, params.y);\n    }\n    async accessibilitySnapshot(params, metadata) {\n        const rootAXNode = await this._page.accessibility.snapshot({\n            interestingOnly: params.interestingOnly,\n            root: params.root ? params.root._elementHandle : undefined\n        });\n        return { rootAXNode: rootAXNode || undefined };\n    }\n    async pdf(params, metadata) {\n        if (!this._page.pdf)\n            throw new Error('PDF generation is only supported for Headless Chromium');\n        const buffer = await this._page.pdf(params);\n        return { pdf: buffer.toString('base64') };\n    }\n    async bringToFront(params, metadata) {\n        await this._page.bringToFront();\n    }\n    async crStartJSCoverage(params, metadata) {\n        const coverage = this._page.coverage;\n        await coverage.startJSCoverage(params);\n    }\n    async crStopJSCoverage(params, metadata) {\n        const coverage = this._page.coverage;\n        return { entries: await coverage.stopJSCoverage() };\n    }\n    async crStartCSSCoverage(params, metadata) {\n        const coverage = this._page.coverage;\n        await coverage.startCSSCoverage(params);\n    }\n    async crStopCSSCoverage(params, metadata) {\n        const coverage = this._page.coverage;\n        return { entries: await coverage.stopCSSCoverage() };\n    }\n    _onFrameAttached(frame) {\n        this._dispatchEvent('frameAttached', { frame: frameDispatcher_1.FrameDispatcher.from(this._scope, frame) });\n    }\n    _onFrameDetached(frame) {\n        this._dispatchEvent('frameDetached', { frame: dispatcher_1.lookupDispatcher(frame) });\n    }\n}\nexports.PageDispatcher = PageDispatcher;\nclass WorkerDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, worker) {\n        super(scope, worker, 'Worker', {\n            url: worker.url()\n        });\n        worker.on(page_1.Worker.Events.Close, () => this._dispatchEvent('close'));\n    }\n    async evaluateExpression(params, metadata) {\n        return { value: jsHandleDispatcher_1.serializeResult(await this._object.evaluateExpression(params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n    async evaluateExpressionHandle(params, metadata) {\n        return { handle: elementHandlerDispatcher_1.createHandle(this._scope, await this._object.evaluateExpressionHandle(params.expression, params.isFunction, jsHandleDispatcher_1.parseArgument(params.arg))) };\n    }\n}\nexports.WorkerDispatcher = WorkerDispatcher;\nclass BindingCallDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, name, needsHandle, source, args) {\n        super(scope, {}, 'BindingCall', {\n            frame: dispatcher_1.lookupDispatcher(source.frame),\n            name,\n            args: needsHandle ? undefined : args.map(jsHandleDispatcher_1.serializeResult),\n            handle: needsHandle ? elementHandlerDispatcher_1.createHandle(scope, args[0]) : undefined,\n        });\n        this._promise = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    promise() {\n        return this._promise;\n    }\n    async resolve(params, metadata) {\n        this._resolve(jsHandleDispatcher_1.parseArgument(params.result));\n    }\n    async reject(params, metadata) {\n        this._reject(serializers_1.parseError(params.error));\n    }\n}\nexports.BindingCallDispatcher = BindingCallDispatcher;\n//# sourceMappingURL=pageDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlaywrightDispatcher = void 0;\nconst androidDispatcher_1 = require(\"./androidDispatcher\");\nconst browserTypeDispatcher_1 = require(\"./browserTypeDispatcher\");\nconst dispatcher_1 = require(\"./dispatcher\");\nconst electronDispatcher_1 = require(\"./electronDispatcher\");\nconst selectorsDispatcher_1 = require(\"./selectorsDispatcher\");\nclass PlaywrightDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, playwright) {\n        const descriptors = require('../server/deviceDescriptors');\n        const deviceDescriptors = Object.entries(descriptors)\n            .map(([name, descriptor]) => ({ name, descriptor }));\n        super(scope, playwright, 'Playwright', {\n            chromium: new browserTypeDispatcher_1.BrowserTypeDispatcher(scope, playwright.chromium),\n            firefox: new browserTypeDispatcher_1.BrowserTypeDispatcher(scope, playwright.firefox),\n            webkit: new browserTypeDispatcher_1.BrowserTypeDispatcher(scope, playwright.webkit),\n            android: new androidDispatcher_1.AndroidDispatcher(scope, playwright.android),\n            electron: new electronDispatcher_1.ElectronDispatcher(scope, playwright.electron),\n            deviceDescriptors,\n            selectors: new selectorsDispatcher_1.SelectorsDispatcher(scope, playwright.selectors),\n        }, false, 'Playwright');\n    }\n}\nexports.PlaywrightDispatcher = PlaywrightDispatcher;\n//# sourceMappingURL=playwrightDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectorsDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nclass SelectorsDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, selectors) {\n        super(scope, selectors, 'Selectors', {});\n    }\n    async register(params) {\n        await this._object.register(params.name, params.source, params.contentScript);\n    }\n}\nexports.SelectorsDispatcher = SelectorsDispatcher;\n//# sourceMappingURL=selectorsDispatcher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamDispatcher = void 0;\nconst dispatcher_1 = require(\"./dispatcher\");\nclass StreamDispatcher extends dispatcher_1.Dispatcher {\n    constructor(scope, stream) {\n        super(scope, stream, 'Stream', {});\n    }\n    async read(params) {\n        const buffer = this._object.read(Math.min(this._object.readableLength, params.size || this._object.readableLength));\n        return { binary: buffer ? buffer.toString('base64') : '' };\n    }\n    async close() {\n        this._object.destroy();\n    }\n}\nexports.StreamDispatcher = StreamDispatcher;\n//# sourceMappingURL=streamDispatcher.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.source = void 0;\nexports.source = \"var pwExport =\\n/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/server/supplements/injected/consoleApi.ts\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./src/server/common/cssParser.ts\\\":\\n/*!****************************************!*\\\\\\n  !*** ./src/server/common/cssParser.ts ***!\\n  \\\\****************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\\"default\\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\\"default\\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\\"default\\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.serializeSelector = exports.parseCSS = void 0;\\nconst css = __importStar(__webpack_require__(/*! ./cssTokenizer */ \\\"./src/server/common/cssTokenizer.js\\\"));\\nfunction parseCSS(selector, customNames) {\\n    let tokens;\\n    try {\\n        tokens = css.tokenize(selector);\\n        if (!(tokens[tokens.length - 1] instanceof css.EOFToken))\\n            tokens.push(new css.EOFToken());\\n    }\\n    catch (e) {\\n        const newMessage = e.message + ` while parsing selector \\\"${selector}\\\"`;\\n        const index = (e.stack || '').indexOf(e.message);\\n        if (index !== -1)\\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\\n        e.message = newMessage;\\n        throw e;\\n    }\\n    const unsupportedToken = tokens.find(token => {\\n        return (token instanceof css.AtKeywordToken) ||\\n            (token instanceof css.BadStringToken) ||\\n            (token instanceof css.BadURLToken) ||\\n            (token instanceof css.ColumnToken) ||\\n            (token instanceof css.CDOToken) ||\\n            (token instanceof css.CDCToken) ||\\n            (token instanceof css.SemicolonToken) ||\\n            // TODO: Consider using these for something, e.g. to escape complex strings.\\n            // For example :xpath{ (//div/bar[@attr=\\\"foo\\\"])[2]/baz }\\n            // Or this way :xpath( {complex-xpath-goes-here(\\\"hello\\\")} )\\n            (token instanceof css.OpenCurlyToken) ||\\n            (token instanceof css.CloseCurlyToken) ||\\n            // TODO: Consider treating these as strings?\\n            (token instanceof css.URLToken) ||\\n            (token instanceof css.PercentageToken);\\n    });\\n    if (unsupportedToken)\\n        throw new Error(`Unsupported token \\\"${unsupportedToken.toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    let pos = 0;\\n    const names = new Set();\\n    function unexpected() {\\n        return new Error(`Unexpected token \\\"${tokens[pos].toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    }\\n    function skipWhitespace() {\\n        while (tokens[pos] instanceof css.WhitespaceToken)\\n            pos++;\\n    }\\n    function isIdent(p = pos) {\\n        return tokens[p] instanceof css.IdentToken;\\n    }\\n    function isString(p = pos) {\\n        return tokens[p] instanceof css.StringToken;\\n    }\\n    function isNumber(p = pos) {\\n        return tokens[p] instanceof css.NumberToken;\\n    }\\n    function isComma(p = pos) {\\n        return tokens[p] instanceof css.CommaToken;\\n    }\\n    function isCloseParen(p = pos) {\\n        return tokens[p] instanceof css.CloseParenToken;\\n    }\\n    function isStar(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && tokens[p].value === '*';\\n    }\\n    function isEOF(p = pos) {\\n        return tokens[p] instanceof css.EOFToken;\\n    }\\n    function isClauseCombinator(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && (['>', '+', '~'].includes(tokens[p].value));\\n    }\\n    function isSelectorClauseEnd(p = pos) {\\n        return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || (tokens[p] instanceof css.WhitespaceToken);\\n    }\\n    function consumeFunctionArguments() {\\n        const result = [consumeArgument()];\\n        while (true) {\\n            skipWhitespace();\\n            if (!isComma())\\n                break;\\n            pos++;\\n            result.push(consumeArgument());\\n        }\\n        return result;\\n    }\\n    function consumeArgument() {\\n        skipWhitespace();\\n        if (isNumber())\\n            return tokens[pos++].value;\\n        if (isString())\\n            return tokens[pos++].value;\\n        return consumeComplexSelector();\\n    }\\n    function consumeComplexSelector() {\\n        skipWhitespace();\\n        const result = { simples: [{ selector: consumeSimpleSelector(), combinator: '' }] };\\n        while (true) {\\n            skipWhitespace();\\n            if (isClauseCombinator()) {\\n                result.simples[result.simples.length - 1].combinator = tokens[pos++].value;\\n                skipWhitespace();\\n            }\\n            else if (isSelectorClauseEnd()) {\\n                break;\\n            }\\n            result.simples.push({ combinator: '', selector: consumeSimpleSelector() });\\n        }\\n        return result;\\n    }\\n    function consumeSimpleSelector() {\\n        let rawCSSString = '';\\n        const functions = [];\\n        while (!isSelectorClauseEnd()) {\\n            if (isIdent() || isStar()) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if (tokens[pos] instanceof css.HashToken) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if ((tokens[pos] instanceof css.DelimToken) && tokens[pos].value === '.') {\\n                pos++;\\n                if (isIdent())\\n                    rawCSSString += '.' + tokens[pos++].toSource();\\n                else\\n                    throw unexpected();\\n            }\\n            else if (tokens[pos] instanceof css.ColonToken) {\\n                pos++;\\n                if (isIdent()) {\\n                    if (!customNames.has(tokens[pos].value.toLowerCase())) {\\n                        rawCSSString += ':' + tokens[pos++].toSource();\\n                    }\\n                    else {\\n                        const name = tokens[pos++].value.toLowerCase();\\n                        functions.push({ name, args: [] });\\n                        names.add(name);\\n                    }\\n                }\\n                else if (tokens[pos] instanceof css.FunctionToken) {\\n                    const name = tokens[pos++].value.toLowerCase();\\n                    if (!customNames.has(name)) {\\n                        rawCSSString += `:${name}(${consumeBuiltinFunctionArguments()})`;\\n                    }\\n                    else {\\n                        functions.push({ name, args: consumeFunctionArguments() });\\n                        names.add(name);\\n                    }\\n                    skipWhitespace();\\n                    if (!isCloseParen())\\n                        throw unexpected();\\n                    pos++;\\n                }\\n                else {\\n                    throw unexpected();\\n                }\\n            }\\n            else if (tokens[pos] instanceof css.OpenSquareToken) {\\n                rawCSSString += '[';\\n                pos++;\\n                while (!(tokens[pos] instanceof css.CloseSquareToken) && !isEOF())\\n                    rawCSSString += tokens[pos++].toSource();\\n                if (!(tokens[pos] instanceof css.CloseSquareToken))\\n                    throw unexpected();\\n                rawCSSString += ']';\\n                pos++;\\n            }\\n            else {\\n                throw unexpected();\\n            }\\n        }\\n        if (!rawCSSString && !functions.length)\\n            throw unexpected();\\n        return { css: rawCSSString || undefined, functions };\\n    }\\n    function consumeBuiltinFunctionArguments() {\\n        let s = '';\\n        while (!isCloseParen() && !isEOF())\\n            s += tokens[pos++].toSource();\\n        return s;\\n    }\\n    const result = consumeFunctionArguments();\\n    if (!isEOF())\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    if (result.some(arg => typeof arg !== 'object' || !('simples' in arg)))\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    return { selector: result, names: Array.from(names) };\\n}\\nexports.parseCSS = parseCSS;\\nfunction serializeSelector(args) {\\n    return args.map(arg => {\\n        if (typeof arg === 'string')\\n            return `\\\"${arg}\\\"`;\\n        if (typeof arg === 'number')\\n            return String(arg);\\n        return arg.simples.map(({ selector, combinator }) => {\\n            let s = selector.css || '';\\n            s = s + selector.functions.map(func => `:${func.name}(${serializeSelector(func.args)})`).join('');\\n            if (combinator)\\n                s += ' ' + combinator;\\n            return s;\\n        }).join(' ');\\n    }).join(', ');\\n}\\nexports.serializeSelector = serializeSelector;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/cssTokenizer.js\\\":\\n/*!*******************************************!*\\\\\\n  !*** ./src/server/common/cssTokenizer.js ***!\\n  \\\\*******************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\\n/*\\n * Original at https://github.com/tabatkins/parse-css\\n * licensed under http://creativecommons.org/publicdomain/zero/1.0/\\n *\\n * Modifications copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\n// Changes from https://github.com/tabatkins/parse-css\\n//   - Tabs are replaced with two spaces.\\n//   - Everything not related to tokenizing - below the first exports block - is removed.\\n// @ts-nocheck\\n(function (root, factory) {\\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\\n    // Rhino, and plain browser loading.\\n    if (true) {\\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\\n\\t\\t\\t\\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n    }\\n    else {}\\n}(this, function (exports) {\\n    var between = function (num, first, last) { return num >= first && num <= last; };\\n    function digit(code) { return between(code, 0x30, 0x39); }\\n    function hexdigit(code) { return digit(code) || between(code, 0x41, 0x46) || between(code, 0x61, 0x66); }\\n    function uppercaseletter(code) { return between(code, 0x41, 0x5a); }\\n    function lowercaseletter(code) { return between(code, 0x61, 0x7a); }\\n    function letter(code) { return uppercaseletter(code) || lowercaseletter(code); }\\n    function nonascii(code) { return code >= 0x80; }\\n    function namestartchar(code) { return letter(code) || nonascii(code) || code == 0x5f; }\\n    function namechar(code) { return namestartchar(code) || digit(code) || code == 0x2d; }\\n    function nonprintable(code) { return between(code, 0, 8) || code == 0xb || between(code, 0xe, 0x1f) || code == 0x7f; }\\n    function newline(code) { return code == 0xa; }\\n    function whitespace(code) { return newline(code) || code == 9 || code == 0x20; }\\n    function badescape(code) { return newline(code) || isNaN(code); }\\n    var maximumallowedcodepoint = 0x10ffff;\\n    var InvalidCharacterError = function (message) {\\n        this.message = message;\\n    };\\n    InvalidCharacterError.prototype = new Error;\\n    InvalidCharacterError.prototype.name = 'InvalidCharacterError';\\n    function preprocess(str) {\\n        // Turn a string into an array of code points,\\n        // following the preprocessing cleanup rules.\\n        var codepoints = [];\\n        for (var i = 0; i < str.length; i++) {\\n            var code = str.charCodeAt(i);\\n            if (code == 0xd && str.charCodeAt(i + 1) == 0xa) {\\n                code = 0xa;\\n                i++;\\n            }\\n            if (code == 0xd || code == 0xc)\\n                code = 0xa;\\n            if (code == 0x0)\\n                code = 0xfffd;\\n            if (between(code, 0xd800, 0xdbff) && between(str.charCodeAt(i + 1), 0xdc00, 0xdfff)) {\\n                // Decode a surrogate pair into an astral codepoint.\\n                var lead = code - 0xd800;\\n                var trail = str.charCodeAt(i + 1) - 0xdc00;\\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\\n                i++;\\n            }\\n            codepoints.push(code);\\n        }\\n        return codepoints;\\n    }\\n    function stringFromCode(code) {\\n        if (code <= 0xffff)\\n            return String.fromCharCode(code);\\n        // Otherwise, encode astral char as surrogate pair.\\n        code -= Math.pow(2, 16);\\n        var lead = Math.floor(code / Math.pow(2, 10)) + 0xd800;\\n        var trail = code % Math.pow(2, 10) + 0xdc00;\\n        return String.fromCharCode(lead) + String.fromCharCode(trail);\\n    }\\n    function tokenize(str) {\\n        str = preprocess(str);\\n        var i = -1;\\n        var tokens = [];\\n        var code;\\n        // Line number information.\\n        var line = 0;\\n        var column = 0;\\n        // The only use of lastLineLength is in reconsume().\\n        var lastLineLength = 0;\\n        var incrLineno = function () {\\n            line += 1;\\n            lastLineLength = column;\\n            column = 0;\\n        };\\n        var locStart = { line: line, column: column };\\n        var codepoint = function (i) {\\n            if (i >= str.length) {\\n                return -1;\\n            }\\n            return str[i];\\n        };\\n        var next = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            if (num > 3)\\n                throw \\\"Spec Error: no more than three codepoints of lookahead.\\\";\\n            return codepoint(i + num);\\n        };\\n        var consume = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            i += num;\\n            code = codepoint(i);\\n            if (newline(code))\\n                incrLineno();\\n            else\\n                column += num;\\n            //console.log('Consume '+i+' '+String.fromCharCode(code) + ' 0x' + code.toString(16));\\n            return true;\\n        };\\n        var reconsume = function () {\\n            i -= 1;\\n            if (newline(code)) {\\n                line -= 1;\\n                column = lastLineLength;\\n            }\\n            else {\\n                column -= 1;\\n            }\\n            locStart.line = line;\\n            locStart.column = column;\\n            return true;\\n        };\\n        var eof = function (codepoint) {\\n            if (codepoint === undefined)\\n                codepoint = code;\\n            return codepoint == -1;\\n        };\\n        var donothing = function () { };\\n        var parseerror = function () { console.log(\\\"Parse error at index \\\" + i + \\\", processing codepoint 0x\\\" + code.toString(16) + \\\".\\\"); return true; };\\n        var consumeAToken = function () {\\n            consumeComments();\\n            consume();\\n            if (whitespace(code)) {\\n                while (whitespace(next()))\\n                    consume();\\n                return new WhitespaceToken;\\n            }\\n            else if (code == 0x22)\\n                return consumeAStringToken();\\n            else if (code == 0x23) {\\n                if (namechar(next()) || areAValidEscape(next(1), next(2))) {\\n                    var token = new HashToken();\\n                    if (wouldStartAnIdentifier(next(1), next(2), next(3)))\\n                        token.type = \\\"id\\\";\\n                    token.value = consumeAName();\\n                    return token;\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x24) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SuffixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x27)\\n                return consumeAStringToken();\\n            else if (code == 0x28)\\n                return new OpenParenToken();\\n            else if (code == 0x29)\\n                return new CloseParenToken();\\n            else if (code == 0x2a) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SubstringMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2b) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2c)\\n                return new CommaToken();\\n            else if (code == 0x2d) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else if (next(1) == 0x2d && next(2) == 0x3e) {\\n                    consume(2);\\n                    return new CDCToken();\\n                }\\n                else if (startsWithAnIdentifier()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2e) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x3a)\\n                return new ColonToken;\\n            else if (code == 0x3b)\\n                return new SemicolonToken;\\n            else if (code == 0x3c) {\\n                if (next(1) == 0x21 && next(2) == 0x2d && next(3) == 0x2d) {\\n                    consume(3);\\n                    return new CDOToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x40) {\\n                if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                    return new AtKeywordToken(consumeAName());\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5b)\\n                return new OpenSquareToken();\\n            else if (code == 0x5c) {\\n                if (startsWithAValidEscape()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    parseerror();\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5d)\\n                return new CloseSquareToken();\\n            else if (code == 0x5e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new PrefixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7b)\\n                return new OpenCurlyToken();\\n            else if (code == 0x7c) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new DashMatchToken();\\n                }\\n                else if (next() == 0x7c) {\\n                    consume();\\n                    return new ColumnToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7d)\\n                return new CloseCurlyToken();\\n            else if (code == 0x7e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new IncludeMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (digit(code)) {\\n                reconsume();\\n                return consumeANumericToken();\\n            }\\n            else if (namestartchar(code)) {\\n                reconsume();\\n                return consumeAnIdentlikeToken();\\n            }\\n            else if (eof())\\n                return new EOFToken();\\n            else\\n                return new DelimToken(code);\\n        };\\n        var consumeComments = function () {\\n            while (next(1) == 0x2f && next(2) == 0x2a) {\\n                consume(2);\\n                while (true) {\\n                    consume();\\n                    if (code == 0x2a && next() == 0x2f) {\\n                        consume();\\n                        break;\\n                    }\\n                    else if (eof()) {\\n                        parseerror();\\n                        return;\\n                    }\\n                }\\n            }\\n        };\\n        var consumeANumericToken = function () {\\n            var num = consumeANumber();\\n            if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                var token = new DimensionToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                token.unit = consumeAName();\\n                return token;\\n            }\\n            else if (next() == 0x25) {\\n                consume();\\n                var token = new PercentageToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                return token;\\n            }\\n            else {\\n                var token = new NumberToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                return token;\\n            }\\n        };\\n        var consumeAnIdentlikeToken = function () {\\n            var str = consumeAName();\\n            if (str.toLowerCase() == \\\"url\\\" && next() == 0x28) {\\n                consume();\\n                while (whitespace(next(1)) && whitespace(next(2)))\\n                    consume();\\n                if (next() == 0x22 || next() == 0x27) {\\n                    return new FunctionToken(str);\\n                }\\n                else if (whitespace(next()) && (next(2) == 0x22 || next(2) == 0x27)) {\\n                    return new FunctionToken(str);\\n                }\\n                else {\\n                    return consumeAURLToken();\\n                }\\n            }\\n            else if (next() == 0x28) {\\n                consume();\\n                return new FunctionToken(str);\\n            }\\n            else {\\n                return new IdentToken(str);\\n            }\\n        };\\n        var consumeAStringToken = function (endingCodePoint) {\\n            if (endingCodePoint === undefined)\\n                endingCodePoint = code;\\n            var string = \\\"\\\";\\n            while (consume()) {\\n                if (code == endingCodePoint || eof()) {\\n                    return new StringToken(string);\\n                }\\n                else if (newline(code)) {\\n                    parseerror();\\n                    reconsume();\\n                    return new BadStringToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (eof(next())) {\\n                        donothing();\\n                    }\\n                    else if (newline(next())) {\\n                        consume();\\n                    }\\n                    else {\\n                        string += stringFromCode(consumeEscape());\\n                    }\\n                }\\n                else {\\n                    string += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeAURLToken = function () {\\n            var token = new URLToken(\\\"\\\");\\n            while (whitespace(next()))\\n                consume();\\n            if (eof(next()))\\n                return token;\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return token;\\n                }\\n                else if (whitespace(code)) {\\n                    while (whitespace(next()))\\n                        consume();\\n                    if (next() == 0x29 || eof(next())) {\\n                        consume();\\n                        return token;\\n                    }\\n                    else {\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else if (code == 0x22 || code == 0x27 || code == 0x28 || nonprintable(code)) {\\n                    parseerror();\\n                    consumeTheRemnantsOfABadURL();\\n                    return new BadURLToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (startsWithAValidEscape()) {\\n                        token.value += stringFromCode(consumeEscape());\\n                    }\\n                    else {\\n                        parseerror();\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else {\\n                    token.value += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeEscape = function () {\\n            // Assume the the current character is the \\\\\\n            // and the next code point is not a newline.\\n            consume();\\n            if (hexdigit(code)) {\\n                // Consume 1-6 hex digits\\n                var digits = [code];\\n                for (var total = 0; total < 5; total++) {\\n                    if (hexdigit(next())) {\\n                        consume();\\n                        digits.push(code);\\n                    }\\n                    else {\\n                        break;\\n                    }\\n                }\\n                if (whitespace(next()))\\n                    consume();\\n                var value = parseInt(digits.map(function (x) { return String.fromCharCode(x); }).join(''), 16);\\n                if (value > maximumallowedcodepoint)\\n                    value = 0xfffd;\\n                return value;\\n            }\\n            else if (eof()) {\\n                return 0xfffd;\\n            }\\n            else {\\n                return code;\\n            }\\n        };\\n        var areAValidEscape = function (c1, c2) {\\n            if (c1 != 0x5c)\\n                return false;\\n            if (newline(c2))\\n                return false;\\n            return true;\\n        };\\n        var startsWithAValidEscape = function () {\\n            return areAValidEscape(code, next());\\n        };\\n        var wouldStartAnIdentifier = function (c1, c2, c3) {\\n            if (c1 == 0x2d) {\\n                return namestartchar(c2) || c2 == 0x2d || areAValidEscape(c2, c3);\\n            }\\n            else if (namestartchar(c1)) {\\n                return true;\\n            }\\n            else if (c1 == 0x5c) {\\n                return areAValidEscape(c1, c2);\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithAnIdentifier = function () {\\n            return wouldStartAnIdentifier(code, next(1), next(2));\\n        };\\n        var wouldStartANumber = function (c1, c2, c3) {\\n            if (c1 == 0x2b || c1 == 0x2d) {\\n                if (digit(c2))\\n                    return true;\\n                if (c2 == 0x2e && digit(c3))\\n                    return true;\\n                return false;\\n            }\\n            else if (c1 == 0x2e) {\\n                if (digit(c2))\\n                    return true;\\n                return false;\\n            }\\n            else if (digit(c1)) {\\n                return true;\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithANumber = function () {\\n            return wouldStartANumber(code, next(1), next(2));\\n        };\\n        var consumeAName = function () {\\n            var result = \\\"\\\";\\n            while (consume()) {\\n                if (namechar(code)) {\\n                    result += stringFromCode(code);\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    result += stringFromCode(consumeEscape());\\n                }\\n                else {\\n                    reconsume();\\n                    return result;\\n                }\\n            }\\n        };\\n        var consumeANumber = function () {\\n            var repr = [];\\n            var type = \\\"integer\\\";\\n            if (next() == 0x2b || next() == 0x2d) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            while (digit(next())) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            if (next(1) == 0x2e && digit(next(2))) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var c1 = next(1), c2 = next(2), c3 = next(3);\\n            if ((c1 == 0x45 || c1 == 0x65) && digit(c2)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            else if ((c1 == 0x45 || c1 == 0x65) && (c2 == 0x2b || c2 == 0x2d) && digit(c3)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var value = convertAStringToANumber(repr);\\n            return { type: type, value: value, repr: repr };\\n        };\\n        var convertAStringToANumber = function (string) {\\n            // CSS's number rules are identical to JS, afaik.\\n            return +string;\\n        };\\n        var consumeTheRemnantsOfABadURL = function () {\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return;\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    consumeEscape();\\n                    donothing();\\n                }\\n                else {\\n                    donothing();\\n                }\\n            }\\n        };\\n        var iterationCount = 0;\\n        while (!eof(next())) {\\n            tokens.push(consumeAToken());\\n            iterationCount++;\\n            if (iterationCount > str.length * 2)\\n                return \\\"I'm infinite-looping!\\\";\\n        }\\n        return tokens;\\n    }\\n    function CSSParserToken() { throw \\\"Abstract Base Class\\\"; }\\n    CSSParserToken.prototype.toJSON = function () {\\n        return { token: this.tokenType };\\n    };\\n    CSSParserToken.prototype.toString = function () { return this.tokenType; };\\n    CSSParserToken.prototype.toSource = function () { return '' + this; };\\n    function BadStringToken() { return this; }\\n    BadStringToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadStringToken.prototype.tokenType = \\\"BADSTRING\\\";\\n    function BadURLToken() { return this; }\\n    BadURLToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadURLToken.prototype.tokenType = \\\"BADURL\\\";\\n    function WhitespaceToken() { return this; }\\n    WhitespaceToken.prototype = Object.create(CSSParserToken.prototype);\\n    WhitespaceToken.prototype.tokenType = \\\"WHITESPACE\\\";\\n    WhitespaceToken.prototype.toString = function () { return \\\"WS\\\"; };\\n    WhitespaceToken.prototype.toSource = function () { return \\\" \\\"; };\\n    function CDOToken() { return this; }\\n    CDOToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDOToken.prototype.tokenType = \\\"CDO\\\";\\n    CDOToken.prototype.toSource = function () { return \\\"<!--\\\"; };\\n    function CDCToken() { return this; }\\n    CDCToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDCToken.prototype.tokenType = \\\"CDC\\\";\\n    CDCToken.prototype.toSource = function () { return \\\"-->\\\"; };\\n    function ColonToken() { return this; }\\n    ColonToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColonToken.prototype.tokenType = \\\":\\\";\\n    function SemicolonToken() { return this; }\\n    SemicolonToken.prototype = Object.create(CSSParserToken.prototype);\\n    SemicolonToken.prototype.tokenType = \\\";\\\";\\n    function CommaToken() { return this; }\\n    CommaToken.prototype = Object.create(CSSParserToken.prototype);\\n    CommaToken.prototype.tokenType = \\\",\\\";\\n    function GroupingToken() { throw \\\"Abstract Base Class\\\"; }\\n    GroupingToken.prototype = Object.create(CSSParserToken.prototype);\\n    function OpenCurlyToken() { this.value = \\\"{\\\"; this.mirror = \\\"}\\\"; return this; }\\n    OpenCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenCurlyToken.prototype.tokenType = \\\"{\\\";\\n    function CloseCurlyToken() { this.value = \\\"}\\\"; this.mirror = \\\"{\\\"; return this; }\\n    CloseCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseCurlyToken.prototype.tokenType = \\\"}\\\";\\n    function OpenSquareToken() { this.value = \\\"[\\\"; this.mirror = \\\"]\\\"; return this; }\\n    OpenSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenSquareToken.prototype.tokenType = \\\"[\\\";\\n    function CloseSquareToken() { this.value = \\\"]\\\"; this.mirror = \\\"[\\\"; return this; }\\n    CloseSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseSquareToken.prototype.tokenType = \\\"]\\\";\\n    function OpenParenToken() { this.value = \\\"(\\\"; this.mirror = \\\")\\\"; return this; }\\n    OpenParenToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenParenToken.prototype.tokenType = \\\"(\\\";\\n    function CloseParenToken() { this.value = \\\")\\\"; this.mirror = \\\"(\\\"; return this; }\\n    CloseParenToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseParenToken.prototype.tokenType = \\\")\\\";\\n    function IncludeMatchToken() { return this; }\\n    IncludeMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    IncludeMatchToken.prototype.tokenType = \\\"~=\\\";\\n    function DashMatchToken() { return this; }\\n    DashMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    DashMatchToken.prototype.tokenType = \\\"|=\\\";\\n    function PrefixMatchToken() { return this; }\\n    PrefixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    PrefixMatchToken.prototype.tokenType = \\\"^=\\\";\\n    function SuffixMatchToken() { return this; }\\n    SuffixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SuffixMatchToken.prototype.tokenType = \\\"$=\\\";\\n    function SubstringMatchToken() { return this; }\\n    SubstringMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SubstringMatchToken.prototype.tokenType = \\\"*=\\\";\\n    function ColumnToken() { return this; }\\n    ColumnToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColumnToken.prototype.tokenType = \\\"||\\\";\\n    function EOFToken() { return this; }\\n    EOFToken.prototype = Object.create(CSSParserToken.prototype);\\n    EOFToken.prototype.tokenType = \\\"EOF\\\";\\n    EOFToken.prototype.toSource = function () { return \\\"\\\"; };\\n    function DelimToken(code) {\\n        this.value = stringFromCode(code);\\n        return this;\\n    }\\n    DelimToken.prototype = Object.create(CSSParserToken.prototype);\\n    DelimToken.prototype.tokenType = \\\"DELIM\\\";\\n    DelimToken.prototype.toString = function () { return \\\"DELIM(\\\" + this.value + \\\")\\\"; };\\n    DelimToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    DelimToken.prototype.toSource = function () {\\n        if (this.value == \\\"\\\\\\\\\\\")\\n            return \\\"\\\\\\\\\\\\n\\\";\\n        else\\n            return this.value;\\n    };\\n    function StringValuedToken() { throw \\\"Abstract Base Class\\\"; }\\n    StringValuedToken.prototype = Object.create(CSSParserToken.prototype);\\n    StringValuedToken.prototype.ASCIIMatch = function (str) {\\n        return this.value.toLowerCase() == str.toLowerCase();\\n    };\\n    StringValuedToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    function IdentToken(val) {\\n        this.value = val;\\n    }\\n    IdentToken.prototype = Object.create(StringValuedToken.prototype);\\n    IdentToken.prototype.tokenType = \\\"IDENT\\\";\\n    IdentToken.prototype.toString = function () { return \\\"IDENT(\\\" + this.value + \\\")\\\"; };\\n    IdentToken.prototype.toSource = function () {\\n        return escapeIdent(this.value);\\n    };\\n    function FunctionToken(val) {\\n        this.value = val;\\n        this.mirror = \\\")\\\";\\n    }\\n    FunctionToken.prototype = Object.create(StringValuedToken.prototype);\\n    FunctionToken.prototype.tokenType = \\\"FUNCTION\\\";\\n    FunctionToken.prototype.toString = function () { return \\\"FUNCTION(\\\" + this.value + \\\")\\\"; };\\n    FunctionToken.prototype.toSource = function () {\\n        return escapeIdent(this.value) + \\\"(\\\";\\n    };\\n    function AtKeywordToken(val) {\\n        this.value = val;\\n    }\\n    AtKeywordToken.prototype = Object.create(StringValuedToken.prototype);\\n    AtKeywordToken.prototype.tokenType = \\\"AT-KEYWORD\\\";\\n    AtKeywordToken.prototype.toString = function () { return \\\"AT(\\\" + this.value + \\\")\\\"; };\\n    AtKeywordToken.prototype.toSource = function () {\\n        return \\\"@\\\" + escapeIdent(this.value);\\n    };\\n    function HashToken(val) {\\n        this.value = val;\\n        this.type = \\\"unrestricted\\\";\\n    }\\n    HashToken.prototype = Object.create(StringValuedToken.prototype);\\n    HashToken.prototype.tokenType = \\\"HASH\\\";\\n    HashToken.prototype.toString = function () { return \\\"HASH(\\\" + this.value + \\\")\\\"; };\\n    HashToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        return json;\\n    };\\n    HashToken.prototype.toSource = function () {\\n        if (this.type == \\\"id\\\") {\\n            return \\\"#\\\" + escapeIdent(this.value);\\n        }\\n        else {\\n            return \\\"#\\\" + escapeHash(this.value);\\n        }\\n    };\\n    function StringToken(val) {\\n        this.value = val;\\n    }\\n    StringToken.prototype = Object.create(StringValuedToken.prototype);\\n    StringToken.prototype.tokenType = \\\"STRING\\\";\\n    StringToken.prototype.toString = function () {\\n        return '\\\"' + escapeString(this.value) + '\\\"';\\n    };\\n    function URLToken(val) {\\n        this.value = val;\\n    }\\n    URLToken.prototype = Object.create(StringValuedToken.prototype);\\n    URLToken.prototype.tokenType = \\\"URL\\\";\\n    URLToken.prototype.toString = function () { return \\\"URL(\\\" + this.value + \\\")\\\"; };\\n    URLToken.prototype.toSource = function () {\\n        return 'url(\\\"' + escapeString(this.value) + '\\\")';\\n    };\\n    function NumberToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n    }\\n    NumberToken.prototype = Object.create(CSSParserToken.prototype);\\n    NumberToken.prototype.tokenType = \\\"NUMBER\\\";\\n    NumberToken.prototype.toString = function () {\\n        if (this.type == \\\"integer\\\")\\n            return \\\"INT(\\\" + this.value + \\\")\\\";\\n        return \\\"NUMBER(\\\" + this.value + \\\")\\\";\\n    };\\n    NumberToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    NumberToken.prototype.toSource = function () { return this.repr; };\\n    function PercentageToken() {\\n        this.value = null;\\n        this.repr = \\\"\\\";\\n    }\\n    PercentageToken.prototype = Object.create(CSSParserToken.prototype);\\n    PercentageToken.prototype.tokenType = \\\"PERCENTAGE\\\";\\n    PercentageToken.prototype.toString = function () { return \\\"PERCENTAGE(\\\" + this.value + \\\")\\\"; };\\n    PercentageToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    PercentageToken.prototype.toSource = function () { return this.repr + \\\"%\\\"; };\\n    function DimensionToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n        this.unit = \\\"\\\";\\n    }\\n    DimensionToken.prototype = Object.create(CSSParserToken.prototype);\\n    DimensionToken.prototype.tokenType = \\\"DIMENSION\\\";\\n    DimensionToken.prototype.toString = function () { return \\\"DIM(\\\" + this.value + \\\",\\\" + this.unit + \\\")\\\"; };\\n    DimensionToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        json.unit = this.unit;\\n        return json;\\n    };\\n    DimensionToken.prototype.toSource = function () {\\n        var source = this.repr;\\n        var unit = escapeIdent(this.unit);\\n        if (unit[0].toLowerCase() == \\\"e\\\" && (unit[1] == \\\"-\\\" || between(unit.charCodeAt(1), 0x30, 0x39))) {\\n            // Unit is ambiguous with scinot\\n            // Remove the leading \\\"e\\\", replace with escape.\\n            unit = \\\"\\\\\\\\65 \\\" + unit.slice(1, unit.length);\\n        }\\n        return source + unit;\\n    };\\n    function escapeIdent(string) {\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f ||\\n                (i == 0 && between(code, 0x30, 0x39)) ||\\n                (i == 1 && between(code, 0x30, 0x39) && firstcode == 0x2d)) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeHash(string) {\\n        // Escapes the contents of \\\"unrestricted\\\"-type hash tokens.\\n        // Won't preserve the ID-ness of \\\"id\\\"-type hash tokens;\\n        // use escapeIdent() for that.\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeString(string) {\\n        string = '' + string;\\n        var result = '';\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code == 0x22 || code == 0x5c) {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n            else {\\n                result += string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    // Exportation.\\n    exports.tokenize = tokenize;\\n    exports.IdentToken = IdentToken;\\n    exports.FunctionToken = FunctionToken;\\n    exports.AtKeywordToken = AtKeywordToken;\\n    exports.HashToken = HashToken;\\n    exports.StringToken = StringToken;\\n    exports.BadStringToken = BadStringToken;\\n    exports.URLToken = URLToken;\\n    exports.BadURLToken = BadURLToken;\\n    exports.DelimToken = DelimToken;\\n    exports.NumberToken = NumberToken;\\n    exports.PercentageToken = PercentageToken;\\n    exports.DimensionToken = DimensionToken;\\n    exports.IncludeMatchToken = IncludeMatchToken;\\n    exports.DashMatchToken = DashMatchToken;\\n    exports.PrefixMatchToken = PrefixMatchToken;\\n    exports.SuffixMatchToken = SuffixMatchToken;\\n    exports.SubstringMatchToken = SubstringMatchToken;\\n    exports.ColumnToken = ColumnToken;\\n    exports.WhitespaceToken = WhitespaceToken;\\n    exports.CDOToken = CDOToken;\\n    exports.CDCToken = CDCToken;\\n    exports.ColonToken = ColonToken;\\n    exports.SemicolonToken = SemicolonToken;\\n    exports.CommaToken = CommaToken;\\n    exports.OpenParenToken = OpenParenToken;\\n    exports.CloseParenToken = CloseParenToken;\\n    exports.OpenSquareToken = OpenSquareToken;\\n    exports.CloseSquareToken = CloseSquareToken;\\n    exports.OpenCurlyToken = OpenCurlyToken;\\n    exports.CloseCurlyToken = CloseCurlyToken;\\n    exports.EOFToken = EOFToken;\\n    exports.CSSParserToken = CSSParserToken;\\n    exports.GroupingToken = GroupingToken;\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/selectorParser.ts\\\":\\n/*!*********************************************!*\\\\\\n  !*** ./src/server/common/selectorParser.ts ***!\\n  \\\\*********************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.parseSelector = exports.customCSSNames = void 0;\\nconst cssParser_1 = __webpack_require__(/*! ./cssParser */ \\\"./src/server/common/cssParser.ts\\\");\\nexports.customCSSNames = new Set(['not', 'is', 'where', 'has', 'scope', 'light', 'visible', 'text', 'text-matches', 'text-is', 'has-text', 'above', 'below', 'right-of', 'left-of', 'near', 'nth-match']);\\nfunction parseSelector(selector) {\\n    const result = parseSelectorV1(selector);\\n    result.parts = result.parts.map(part => {\\n        if (Array.isArray(part))\\n            return part;\\n        if (part.name === 'css' || part.name === 'css:light') {\\n            if (part.name === 'css:light')\\n                part.body = ':light(' + part.body + ')';\\n            const parsedCSS = cssParser_1.parseCSS(part.body, exports.customCSSNames);\\n            return parsedCSS.selector;\\n        }\\n        return part;\\n    });\\n    return {\\n        parts: result.parts,\\n        capture: result.capture,\\n    };\\n}\\nexports.parseSelector = parseSelector;\\nfunction parseSelectorV1(selector) {\\n    let index = 0;\\n    let quote;\\n    let start = 0;\\n    const result = { parts: [] };\\n    const append = () => {\\n        const part = selector.substring(start, index).trim();\\n        const eqIndex = part.indexOf('=');\\n        let name;\\n        let body;\\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\\n            name = part.substring(0, eqIndex).trim();\\n            body = part.substring(eqIndex + 1);\\n        }\\n        else if (part.length > 1 && part[0] === '\\\"' && part[part.length - 1] === '\\\"') {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (part.length > 1 && part[0] === \\\"'\\\" && part[part.length - 1] === \\\"'\\\") {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (/^\\\\(*\\\\/\\\\//.test(part) || part.startsWith('..')) {\\n            // If selector starts with '//' or '//' prefixed with multiple opening\\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\\n            // If selector starts with '..', consider xpath as well.\\n            name = 'xpath';\\n            body = part;\\n        }\\n        else {\\n            name = 'css';\\n            body = part;\\n        }\\n        let capture = false;\\n        if (name[0] === '*') {\\n            capture = true;\\n            name = name.substring(1);\\n        }\\n        result.parts.push({ name, body });\\n        if (capture) {\\n            if (result.capture !== undefined)\\n                throw new Error(`Only one of the selectors can capture using * modifier`);\\n            result.capture = result.parts.length - 1;\\n        }\\n    };\\n    if (!selector.includes('>>')) {\\n        index = selector.length;\\n        append();\\n        return result;\\n    }\\n    while (index < selector.length) {\\n        const c = selector[index];\\n        if (c === '\\\\\\\\' && index + 1 < selector.length) {\\n            index += 2;\\n        }\\n        else if (c === quote) {\\n            quote = undefined;\\n            index++;\\n        }\\n        else if (!quote && (c === '\\\"' || c === '\\\\'' || c === '`')) {\\n            quote = c;\\n            index++;\\n        }\\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\\n            append();\\n            index += 2;\\n            start = index;\\n        }\\n        else {\\n            index++;\\n        }\\n    }\\n    append();\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/selectorEvaluator.ts\\\":\\n/*!**************************************************!*\\\\\\n  !*** ./src/server/injected/selectorEvaluator.ts ***!\\n  \\\\**************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.isVisible = exports.parentElementOrShadowHost = exports.elementMatchesText = exports.elementText = exports.createRegexTextMatcher = exports.createStrictTextMatcher = exports.createLaxTextMatcher = exports.SelectorEvaluatorImpl = void 0;\\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \\\"./src/server/common/selectorParser.ts\\\");\\nclass SelectorEvaluatorImpl {\\n    constructor(extraEngines) {\\n        this._engines = new Map();\\n        this._cacheQueryCSS = new Map();\\n        this._cacheMatches = new Map();\\n        this._cacheQuery = new Map();\\n        this._cacheMatchesSimple = new Map();\\n        this._cacheMatchesParents = new Map();\\n        this._cacheCallMatches = new Map();\\n        this._cacheCallQuery = new Map();\\n        this._cacheQuerySimple = new Map();\\n        this._cacheText = new Map();\\n        this._retainCacheCounter = 0;\\n        for (const [name, engine] of extraEngines)\\n            this._engines.set(name, engine);\\n        this._engines.set('not', notEngine);\\n        this._engines.set('is', isEngine);\\n        this._engines.set('where', isEngine);\\n        this._engines.set('has', hasEngine);\\n        this._engines.set('scope', scopeEngine);\\n        this._engines.set('light', lightEngine);\\n        this._engines.set('visible', visibleEngine);\\n        this._engines.set('text', textEngine);\\n        this._engines.set('text-is', textIsEngine);\\n        this._engines.set('text-matches', textMatchesEngine);\\n        this._engines.set('has-text', hasTextEngine);\\n        this._engines.set('right-of', createPositionEngine('right-of', boxRightOf));\\n        this._engines.set('left-of', createPositionEngine('left-of', boxLeftOf));\\n        this._engines.set('above', createPositionEngine('above', boxAbove));\\n        this._engines.set('below', createPositionEngine('below', boxBelow));\\n        this._engines.set('near', createPositionEngine('near', boxNear));\\n        this._engines.set('nth-match', nthMatchEngine);\\n        const allNames = Array.from(this._engines.keys());\\n        allNames.sort();\\n        const parserNames = Array.from(selectorParser_1.customCSSNames).slice();\\n        parserNames.sort();\\n        if (allNames.join('|') !== parserNames.join('|'))\\n            throw new Error(`Please keep customCSSNames in sync with evaluator engines`);\\n    }\\n    begin() {\\n        ++this._retainCacheCounter;\\n    }\\n    end() {\\n        --this._retainCacheCounter;\\n        if (!this._retainCacheCounter) {\\n            this._cacheQueryCSS.clear();\\n            this._cacheMatches.clear();\\n            this._cacheQuery.clear();\\n            this._cacheMatchesSimple.clear();\\n            this._cacheMatchesParents.clear();\\n            this._cacheCallMatches.clear();\\n            this._cacheCallQuery.clear();\\n            this._cacheQuerySimple.clear();\\n            this._cacheText.clear();\\n        }\\n    }\\n    _cached(cache, main, rest, cb) {\\n        if (!cache.has(main))\\n            cache.set(main, []);\\n        const entries = cache.get(main);\\n        const entry = entries.find(e => rest.every((value, index) => e.rest[index] === value));\\n        if (entry)\\n            return entry.result;\\n        const result = cb();\\n        entries.push({ rest, result });\\n        return result;\\n    }\\n    _checkSelector(s) {\\n        const wellFormed = typeof s === 'object' && s &&\\n            (Array.isArray(s) || ('simples' in s) && (s.simples.length));\\n        if (!wellFormed)\\n            throw new Error(`Malformed selector \\\"${s}\\\"`);\\n        return s;\\n    }\\n    matches(element, s, context) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheMatches, element, [selector, context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._matchesEngine(isEngine, element, selector, context);\\n                if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context))\\n                    return false;\\n                return this._matchesParents(element, selector, selector.simples.length - 2, context);\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    query(context, s) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheQuery, selector, [context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._queryEngine(isEngine, context, selector);\\n                // query() recursively calls itself, so we set up a new map for this particular query() call.\\n                const previousScoreMap = this._scoreMap;\\n                this._scoreMap = new Map();\\n                let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);\\n                elements = elements.filter(element => this._matchesParents(element, selector, selector.simples.length - 2, context));\\n                if (this._scoreMap.size) {\\n                    elements.sort((a, b) => {\\n                        const aScore = this._scoreMap.get(a);\\n                        const bScore = this._scoreMap.get(b);\\n                        if (aScore === bScore)\\n                            return 0;\\n                        if (aScore === undefined)\\n                            return 1;\\n                        if (bScore === undefined)\\n                            return -1;\\n                        return aScore - bScore;\\n                    });\\n                }\\n                this._scoreMap = previousScoreMap;\\n                return elements;\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    _markScore(element, score) {\\n        // HACK ALERT: temporary marks an element with a score, to be used\\n        // for sorting at the end of the query().\\n        if (this._scoreMap)\\n            this._scoreMap.set(element, score);\\n    }\\n    _matchesSimple(element, simple, context) {\\n        return this._cached(this._cacheMatchesSimple, element, [simple, context.scope, context.pierceShadow], () => {\\n            const isPossiblyScopeClause = simple.functions.some(f => f.name === 'scope' || f.name === 'is');\\n            if (!isPossiblyScopeClause && element === context.scope)\\n                return false;\\n            if (simple.css && !this._matchesCSS(element, simple.css))\\n                return false;\\n            for (const func of simple.functions) {\\n                if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context))\\n                    return false;\\n            }\\n            return true;\\n        });\\n    }\\n    _querySimple(context, simple) {\\n        if (!simple.functions.length)\\n            return this._queryCSS(context, simple.css || '*');\\n        return this._cached(this._cacheQuerySimple, simple, [context.scope, context.pierceShadow], () => {\\n            let css = simple.css;\\n            const funcs = simple.functions;\\n            if (css === '*' && funcs.length)\\n                css = undefined;\\n            let elements;\\n            let firstIndex = -1;\\n            if (css !== undefined) {\\n                elements = this._queryCSS(context, css);\\n            }\\n            else {\\n                firstIndex = funcs.findIndex(func => this._getEngine(func.name).query !== undefined);\\n                if (firstIndex === -1)\\n                    firstIndex = 0;\\n                elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches !== undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches === undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            return elements;\\n        });\\n    }\\n    _matchesParents(element, complex, index, context) {\\n        if (index < 0)\\n            return true;\\n        return this._cached(this._cacheMatchesParents, element, [complex, index, context.scope, context.pierceShadow], () => {\\n            const { selector: simple, combinator } = complex.simples[index];\\n            if (combinator === '>') {\\n                const parent = parentElementOrShadowHostInContext(element, context);\\n                if (!parent || !this._matchesSimple(parent, simple, context))\\n                    return false;\\n                return this._matchesParents(parent, complex, index - 1, context);\\n            }\\n            if (combinator === '+') {\\n                const previousSibling = previousSiblingInContext(element, context);\\n                if (!previousSibling || !this._matchesSimple(previousSibling, simple, context))\\n                    return false;\\n                return this._matchesParents(previousSibling, complex, index - 1, context);\\n            }\\n            if (combinator === '') {\\n                let parent = parentElementOrShadowHostInContext(element, context);\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '~') {\\n                let previousSibling = previousSiblingInContext(element, context);\\n                while (previousSibling) {\\n                    if (this._matchesSimple(previousSibling, simple, context)) {\\n                        if (this._matchesParents(previousSibling, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '~')\\n                            break;\\n                    }\\n                    previousSibling = previousSiblingInContext(previousSibling, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '>=') {\\n                let parent = element;\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            throw new Error(`Unsupported combinator \\\"${combinator}\\\"`);\\n        });\\n    }\\n    _matchesEngine(engine, element, args, context) {\\n        if (engine.matches)\\n            return this._callMatches(engine, element, args, context);\\n        if (engine.query)\\n            return this._callQuery(engine, args, context).includes(element);\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _queryEngine(engine, context, args) {\\n        if (engine.query)\\n            return this._callQuery(engine, args, context);\\n        if (engine.matches)\\n            return this._queryCSS(context, '*').filter(element => this._callMatches(engine, element, args, context));\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _callMatches(engine, element, args, context) {\\n        return this._cached(this._cacheCallMatches, element, [engine, context.scope, context.pierceShadow, ...args], () => {\\n            return engine.matches(element, args, context, this);\\n        });\\n    }\\n    _callQuery(engine, args, context) {\\n        return this._cached(this._cacheCallQuery, engine, [context.scope, context.pierceShadow, ...args], () => {\\n            return engine.query(context, args, this);\\n        });\\n    }\\n    _matchesCSS(element, css) {\\n        return element.matches(css);\\n    }\\n    _queryCSS(context, css) {\\n        return this._cached(this._cacheQueryCSS, css, [context.scope, context.pierceShadow], () => {\\n            let result = [];\\n            function query(root) {\\n                result = result.concat([...root.querySelectorAll(css)]);\\n                if (!context.pierceShadow)\\n                    return;\\n                if (root.shadowRoot)\\n                    query(root.shadowRoot);\\n                for (const element of root.querySelectorAll('*')) {\\n                    if (element.shadowRoot)\\n                        query(element.shadowRoot);\\n                }\\n            }\\n            query(context.scope);\\n            return result;\\n        });\\n    }\\n    _getEngine(name) {\\n        const engine = this._engines.get(name);\\n        if (!engine)\\n            throw new Error(`Unknown selector engine \\\"${name}\\\"`);\\n        return engine;\\n    }\\n}\\nexports.SelectorEvaluatorImpl = SelectorEvaluatorImpl;\\nconst isEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        return args.some(selector => evaluator.matches(element, selector, context));\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        let elements = [];\\n        for (const arg of args)\\n            elements = elements.concat(evaluator.query(context, arg));\\n        return args.length === 1 ? elements : sortInDOMOrder(elements);\\n    },\\n};\\nconst hasEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"has\\\" engine expects non-empty selector list`);\\n        return evaluator.query({ ...context, scope: element }, args).length > 0;\\n    },\\n};\\nconst scopeEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */)\\n            return element === context.scope.documentElement;\\n        return element === context.scope;\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */) {\\n            const root = context.scope.documentElement;\\n            return root ? [root] : [];\\n        }\\n        if (context.scope.nodeType === 1 /* Node.ELEMENT_NODE */)\\n            return [context.scope];\\n        return [];\\n    },\\n};\\nconst notEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"not\\\" engine expects non-empty selector list`);\\n        return !evaluator.matches(element, args, context);\\n    },\\n};\\nconst lightEngine = {\\n    query(context, args, evaluator) {\\n        return evaluator.query({ ...context, pierceShadow: false }, args);\\n    },\\n    matches(element, args, context, evaluator) {\\n        return evaluator.matches(element, args, { ...context, pierceShadow: false });\\n    }\\n};\\nconst visibleEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length)\\n            throw new Error(`\\\"visible\\\" engine expects no arguments`);\\n        return isVisible(element);\\n    }\\n};\\nconst textEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text\\\" engine expects a single string`);\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst textIsEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text-is\\\" engine expects a single string`);\\n        const matcher = createStrictTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) !== 'none';\\n    },\\n};\\nconst textMatchesEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0 || typeof args[0] !== 'string' || args.length > 2 || (args.length === 2 && typeof args[1] !== 'string'))\\n            throw new Error(`\\\"text-matches\\\" engine expects a regexp body and optional regexp flags`);\\n        const matcher = createRegexTextMatcher(args[0], args.length === 2 ? args[1] : undefined);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst hasTextEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"has-text\\\" engine expects a single string`);\\n        if (shouldSkipForTextMatching(element))\\n            return false;\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return matcher(elementText(evaluator, element));\\n    },\\n};\\nfunction createLaxTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n    return (elementText) => {\\n        const s = elementText.full.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n        return s.includes(text);\\n    };\\n}\\nexports.createLaxTextMatcher = createLaxTextMatcher;\\nfunction createStrictTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ');\\n    return (elementText) => {\\n        return elementText.immediate.some(s => s.trim().replace(/\\\\s+/g, ' ') === text);\\n    };\\n}\\nexports.createStrictTextMatcher = createStrictTextMatcher;\\nfunction createRegexTextMatcher(source, flags) {\\n    const re = new RegExp(source, flags);\\n    return (elementText) => {\\n        return re.test(elementText.full);\\n    };\\n}\\nexports.createRegexTextMatcher = createRegexTextMatcher;\\nfunction shouldSkipForTextMatching(element) {\\n    return element.nodeName === 'SCRIPT' || element.nodeName === 'STYLE' || document.head && document.head.contains(element);\\n}\\nfunction elementText(evaluator, root) {\\n    let value = evaluator._cacheText.get(root);\\n    if (value === undefined) {\\n        value = { full: '', immediate: [] };\\n        if (!shouldSkipForTextMatching(root)) {\\n            let currentImmediate = '';\\n            if ((root instanceof HTMLInputElement) && (root.type === 'submit' || root.type === 'button')) {\\n                value = { full: root.value, immediate: [root.value] };\\n            }\\n            else {\\n                for (let child = root.firstChild; child; child = child.nextSibling) {\\n                    if (child.nodeType === Node.TEXT_NODE) {\\n                        value.full += child.nodeValue || '';\\n                        currentImmediate += child.nodeValue || '';\\n                    }\\n                    else {\\n                        if (currentImmediate)\\n                            value.immediate.push(currentImmediate);\\n                        currentImmediate = '';\\n                        if (child.nodeType === Node.ELEMENT_NODE)\\n                            value.full += elementText(evaluator, child).full;\\n                    }\\n                }\\n                if (currentImmediate)\\n                    value.immediate.push(currentImmediate);\\n                if (root.shadowRoot)\\n                    value.full += elementText(evaluator, root.shadowRoot).full;\\n            }\\n        }\\n        evaluator._cacheText.set(root, value);\\n    }\\n    return value;\\n}\\nexports.elementText = elementText;\\nfunction elementMatchesText(evaluator, element, matcher) {\\n    if (shouldSkipForTextMatching(element))\\n        return 'none';\\n    if (!matcher(elementText(evaluator, element)))\\n        return 'none';\\n    for (let child = element.firstChild; child; child = child.nextSibling) {\\n        if (child.nodeType === Node.ELEMENT_NODE && matcher(elementText(evaluator, child)))\\n            return 'selfAndChildren';\\n    }\\n    if (element.shadowRoot && matcher(elementText(evaluator, element.shadowRoot)))\\n        return 'selfAndChildren';\\n    return 'self';\\n}\\nexports.elementMatchesText = elementMatchesText;\\nfunction boxRightOf(box1, box2) {\\n    if (box1.left < box2.right)\\n        return;\\n    return (box1.left - box2.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxLeftOf(box1, box2) {\\n    if (box1.right > box2.left)\\n        return;\\n    return (box2.left - box1.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxAbove(box1, box2) {\\n    if (box1.bottom > box2.top)\\n        return;\\n    return (box2.top - box1.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxBelow(box1, box2) {\\n    if (box1.top < box2.bottom)\\n        return;\\n    return (box1.top - box2.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxNear(box1, box2) {\\n    const kThreshold = 50;\\n    let score = 0;\\n    if (box1.left - box2.right >= 0)\\n        score += box1.left - box2.right;\\n    if (box2.left - box1.right >= 0)\\n        score += box2.left - box1.right;\\n    if (box2.top - box1.bottom >= 0)\\n        score += box2.top - box1.bottom;\\n    if (box1.top - box2.bottom >= 0)\\n        score += box1.top - box2.bottom;\\n    return score > kThreshold ? undefined : score;\\n}\\nfunction createPositionEngine(name, scorer) {\\n    return {\\n        matches(element, args, context, evaluator) {\\n            if (!args.length)\\n                throw new Error(`\\\"${name}\\\" engine expects a selector list`);\\n            const box = element.getBoundingClientRect();\\n            let bestScore;\\n            for (const e of evaluator.query(context, args)) {\\n                if (e === element)\\n                    continue;\\n                const score = scorer(box, e.getBoundingClientRect());\\n                if (score === undefined)\\n                    continue;\\n                if (bestScore === undefined || score < bestScore)\\n                    bestScore = score;\\n            }\\n            if (bestScore === undefined)\\n                return false;\\n            evaluator._markScore(element, bestScore);\\n            return true;\\n        }\\n    };\\n}\\nconst nthMatchEngine = {\\n    query(context, args, evaluator) {\\n        let index = args[args.length - 1];\\n        if (args.length < 2)\\n            throw new Error(`\\\"nth-match\\\" engine expects non-empty selector list and an index argument`);\\n        if (typeof index !== 'number' || index < 1)\\n            throw new Error(`\\\"nth-match\\\" engine expects a one-based index as the last argument`);\\n        const elements = isEngine.query(context, args.slice(0, args.length - 1), evaluator);\\n        index--; // one-based\\n        return index < elements.length ? [elements[index]] : [];\\n    },\\n};\\nfunction parentElementOrShadowHost(element) {\\n    if (element.parentElement)\\n        return element.parentElement;\\n    if (!element.parentNode)\\n        return;\\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\\n        return element.parentNode.host;\\n}\\nexports.parentElementOrShadowHost = parentElementOrShadowHost;\\nfunction parentElementOrShadowHostInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    if (!context.pierceShadow)\\n        return element.parentElement || undefined;\\n    return parentElementOrShadowHost(element);\\n}\\nfunction previousSiblingInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    return element.previousElementSibling || undefined;\\n}\\nfunction isVisible(element) {\\n    // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.\\n    if (!element.ownerDocument || !element.ownerDocument.defaultView)\\n        return true;\\n    const style = element.ownerDocument.defaultView.getComputedStyle(element);\\n    if (!style || style.visibility === 'hidden')\\n        return false;\\n    const rect = element.getBoundingClientRect();\\n    return rect.width > 0 && rect.height > 0;\\n}\\nexports.isVisible = isVisible;\\nfunction sortInDOMOrder(elements) {\\n    const elementToEntry = new Map();\\n    const roots = [];\\n    const result = [];\\n    function append(element) {\\n        let entry = elementToEntry.get(element);\\n        if (entry)\\n            return entry;\\n        const parent = parentElementOrShadowHost(element);\\n        if (parent) {\\n            const parentEntry = append(parent);\\n            parentEntry.children.push(element);\\n        }\\n        else {\\n            roots.push(element);\\n        }\\n        entry = { children: [], taken: false };\\n        elementToEntry.set(element, entry);\\n        return entry;\\n    }\\n    elements.forEach(e => append(e).taken = true);\\n    function visit(element) {\\n        const entry = elementToEntry.get(element);\\n        if (entry.taken)\\n            result.push(element);\\n        if (entry.children.length > 1) {\\n            const set = new Set(entry.children);\\n            entry.children = [];\\n            let child = element.firstElementChild;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n            child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n        }\\n        entry.children.forEach(visit);\\n    }\\n    roots.forEach(visit);\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/supplements/injected/consoleApi.ts\\\":\\n/*!*******************************************************!*\\\\\\n  !*** ./src/server/supplements/injected/consoleApi.ts ***!\\n  \\\\*******************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.ConsoleAPI = void 0;\\nconst selectorGenerator_1 = __webpack_require__(/*! ./selectorGenerator */ \\\"./src/server/supplements/injected/selectorGenerator.ts\\\");\\nclass ConsoleAPI {\\n    constructor(injectedScript) {\\n        this._injectedScript = injectedScript;\\n        if (window.playwright)\\n            return;\\n        window.playwright = {\\n            $: (selector) => this._querySelector(selector),\\n            $$: (selector) => this._querySelectorAll(selector),\\n            inspect: (selector) => this._inspect(selector),\\n            selector: (element) => this._selector(element),\\n            resume: () => this._resume(),\\n        };\\n    }\\n    _querySelector(selector) {\\n        if (typeof selector !== 'string')\\n            throw new Error(`Usage: playwright.query('Playwright >> selector').`);\\n        const parsed = this._injectedScript.parseSelector(selector);\\n        return this._injectedScript.querySelector(parsed, document);\\n    }\\n    _querySelectorAll(selector) {\\n        if (typeof selector !== 'string')\\n            throw new Error(`Usage: playwright.$$('Playwright >> selector').`);\\n        const parsed = this._injectedScript.parseSelector(selector);\\n        return this._injectedScript.querySelectorAll(parsed, document);\\n    }\\n    _inspect(selector) {\\n        if (typeof selector !== 'string')\\n            throw new Error(`Usage: playwright.inspect('Playwright >> selector').`);\\n        window.inspect(this._querySelector(selector));\\n    }\\n    _selector(element) {\\n        if (!(element instanceof Element))\\n            throw new Error(`Usage: playwright.selector(element).`);\\n        return selectorGenerator_1.generateSelector(this._injectedScript, element).selector;\\n    }\\n    _resume() {\\n        window._playwrightResume().catch(() => { });\\n    }\\n}\\nexports.ConsoleAPI = ConsoleAPI;\\nexports.default = ConsoleAPI;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/supplements/injected/selectorGenerator.ts\\\":\\n/*!**************************************************************!*\\\\\\n  !*** ./src/server/supplements/injected/selectorGenerator.ts ***!\\n  \\\\**************************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.generateSelector = exports.querySelector = void 0;\\nconst selectorEvaluator_1 = __webpack_require__(/*! ../../injected/selectorEvaluator */ \\\"./src/server/injected/selectorEvaluator.ts\\\");\\nconst cacheAllowText = new Map();\\nconst cacheDisallowText = new Map();\\nfunction querySelector(injectedScript, selector, ownerDocument) {\\n    try {\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        return {\\n            selector,\\n            elements: injectedScript.querySelectorAll(parsedSelector, ownerDocument)\\n        };\\n    }\\n    catch (e) {\\n        return {\\n            selector,\\n            elements: [],\\n        };\\n    }\\n}\\nexports.querySelector = querySelector;\\nfunction generateSelector(injectedScript, targetElement) {\\n    injectedScript._evaluator.begin();\\n    try {\\n        targetElement = targetElement.closest('button,select,input,[role=button],[role=checkbox],[role=radio]') || targetElement;\\n        const targetTokens = generateSelectorFor(injectedScript, targetElement);\\n        const bestTokens = targetTokens || [cssFallback(injectedScript, targetElement)];\\n        const selector = joinTokens(bestTokens);\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        return {\\n            selector,\\n            elements: injectedScript.querySelectorAll(parsedSelector, targetElement.ownerDocument)\\n        };\\n    }\\n    finally {\\n        cacheAllowText.clear();\\n        cacheDisallowText.clear();\\n        injectedScript._evaluator.end();\\n    }\\n}\\nexports.generateSelector = generateSelector;\\nfunction filterRegexTokens(textCandidates) {\\n    // Filter out regex-based selectors for better performance.\\n    return textCandidates.filter(c => c[0].selector[0] !== '/');\\n}\\nfunction generateSelectorFor(injectedScript, targetElement) {\\n    if (targetElement.ownerDocument.documentElement === targetElement)\\n        return [{ engine: 'css', selector: 'html', score: 1 }];\\n    const calculate = (element, allowText) => {\\n        const allowNthMatch = element === targetElement;\\n        let textCandidates = allowText ? buildTextCandidates(injectedScript, element, element === targetElement).map(token => [token]) : [];\\n        if (element !== targetElement) {\\n            // Do not use regex for parent elements (for performance).\\n            textCandidates = filterRegexTokens(textCandidates);\\n        }\\n        const noTextCandidates = buildCandidates(injectedScript, element).map(token => [token]);\\n        // First check all text and non-text candidates for the element.\\n        let result = chooseFirstSelector(injectedScript, targetElement.ownerDocument, element, [...textCandidates, ...noTextCandidates], allowNthMatch);\\n        // Do not use regex for chained selectors (for performance).\\n        textCandidates = filterRegexTokens(textCandidates);\\n        const checkWithText = (textCandidatesToUse) => {\\n            // Use the deepest possible text selector - works pretty good and saves on compute time.\\n            const allowParentText = allowText && !textCandidatesToUse.length;\\n            const candidates = [...textCandidatesToUse, ...noTextCandidates].filter(c => {\\n                if (!result)\\n                    return true;\\n                return combineScores(c) < combineScores(result);\\n            });\\n            // This is best theoretically possible candidate from the current parent.\\n            // We use the fact that widening the scope to grand-parent makes any selector\\n            // even less likely to match.\\n            let bestPossibleInParent = candidates[0];\\n            if (!bestPossibleInParent)\\n                return;\\n            for (let parent = parentElementOrShadowHost(element); parent; parent = parentElementOrShadowHost(parent)) {\\n                const parentTokens = calculateCached(parent, allowParentText);\\n                if (!parentTokens)\\n                    continue;\\n                // Even the best selector won't be too good - skip this parent.\\n                if (result && combineScores([...parentTokens, ...bestPossibleInParent]) >= combineScores(result))\\n                    continue;\\n                // Update the best candidate that finds \\\"element\\\" in the \\\"parent\\\".\\n                bestPossibleInParent = chooseFirstSelector(injectedScript, parent, element, candidates, allowNthMatch);\\n                if (!bestPossibleInParent)\\n                    return;\\n                const combined = [...parentTokens, ...bestPossibleInParent];\\n                if (!result || combineScores(combined) < combineScores(result))\\n                    result = combined;\\n            }\\n        };\\n        checkWithText(textCandidates);\\n        // Allow skipping text on the target element, and using text on one of the parents.\\n        if (element === targetElement && textCandidates.length)\\n            checkWithText([]);\\n        return result;\\n    };\\n    const calculateCached = (element, allowText) => {\\n        const cache = allowText ? cacheAllowText : cacheDisallowText;\\n        let value = cache.get(element);\\n        if (value === undefined) {\\n            value = calculate(element, allowText);\\n            cache.set(element, value);\\n        }\\n        return value;\\n    };\\n    return calculateCached(targetElement, true);\\n}\\nfunction buildCandidates(injectedScript, element) {\\n    const candidates = [];\\n    for (const attribute of ['data-testid', 'data-test-id', 'data-test']) {\\n        if (element.hasAttribute(attribute))\\n            candidates.push({ engine: 'css', selector: `[${attribute}=${quoteString(element.getAttribute(attribute))}]`, score: 1 });\\n    }\\n    if (element.nodeName === 'INPUT') {\\n        const input = element;\\n        if (input.placeholder)\\n            candidates.push({ engine: 'css', selector: `[placeholder=${quoteString(input.placeholder)}]`, score: 10 });\\n    }\\n    if (element.hasAttribute('aria-label'))\\n        candidates.push({ engine: 'css', selector: `[aria-label=${quoteString(element.getAttribute('aria-label'))}]`, score: 10 });\\n    if (element.getAttribute('alt') && ['APPLET', 'AREA', 'IMG', 'INPUT'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[alt=${quoteString(element.getAttribute('alt'))}]`, score: 10 });\\n    if (element.hasAttribute('role'))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLocaleLowerCase()}[role=${quoteString(element.getAttribute('role'))}]`, score: 50 });\\n    if (element.getAttribute('name') && ['BUTTON', 'FORM', 'FIELDSET', 'IFRAME', 'INPUT', 'KEYGEN', 'OBJECT', 'OUTPUT', 'SELECT', 'TEXTAREA', 'MAP', 'META', 'PARAM'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[name=${quoteString(element.getAttribute('name'))}]`, score: 50 });\\n    if (['INPUT', 'TEXTAREA'].includes(element.nodeName) && element.getAttribute('type') !== 'hidden') {\\n        if (element.getAttribute('type'))\\n            candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[type=${quoteString(element.getAttribute('type'))}]`, score: 50 });\\n    }\\n    if (['INPUT', 'TEXTAREA', 'SELECT'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: element.nodeName.toLowerCase(), score: 50 });\\n    const idAttr = element.getAttribute('id');\\n    if (idAttr && !isGuidLike(idAttr))\\n        candidates.push({ engine: 'css', selector: `#${idAttr}`, score: 100 });\\n    candidates.push({ engine: 'css', selector: element.nodeName.toLocaleLowerCase(), score: 200 });\\n    return candidates;\\n}\\nfunction buildTextCandidates(injectedScript, element, allowHasText) {\\n    if (element.nodeName === 'SELECT')\\n        return [];\\n    const text = selectorEvaluator_1.elementText(injectedScript._evaluator, element).full.trim().replace(/\\\\s+/g, ' ').substring(0, 80);\\n    if (!text)\\n        return [];\\n    const candidates = [];\\n    let escaped = text;\\n    if (text.includes('\\\"') || text.includes('>>') || text[0] === '/')\\n        escaped = `/.*${escapeForRegex(text)}.*/`;\\n    candidates.push({ engine: 'text', selector: escaped, score: 10 });\\n    if (allowHasText && escaped === text) {\\n        let prefix = element.nodeName.toLocaleLowerCase();\\n        if (element.hasAttribute('role'))\\n            prefix += `[role=${quoteString(element.getAttribute('role'))}]`;\\n        candidates.push({ engine: 'css', selector: `${prefix}:has-text(\\\"${text}\\\")`, score: 30 });\\n    }\\n    return candidates;\\n}\\nfunction parentElementOrShadowHost(element) {\\n    if (element.parentElement)\\n        return element.parentElement;\\n    if (!element.parentNode)\\n        return null;\\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\\n        return element.parentNode.host;\\n    return null;\\n}\\nfunction cssFallback(injectedScript, targetElement) {\\n    const kFallbackScore = 10000000;\\n    const root = targetElement.ownerDocument;\\n    const tokens = [];\\n    function uniqueCSSSelector(prefix) {\\n        const path = tokens.slice();\\n        if (prefix)\\n            path.unshift(prefix);\\n        const selector = path.join(' ');\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        const node = injectedScript.querySelector(parsedSelector, targetElement.ownerDocument);\\n        return node === targetElement ? selector : undefined;\\n    }\\n    for (let element = targetElement; element && element !== root; element = parentElementOrShadowHost(element)) {\\n        const nodeName = element.nodeName.toLowerCase();\\n        // Element ID is the strongest signal, use it.\\n        let bestTokenForLevel = '';\\n        if (element.id) {\\n            const token = /^[a-zA-Z][a-zA-Z0-9\\\\-\\\\_]+$/.test(element.id) ? '#' + element.id : `[id=\\\"${element.id}\\\"]`;\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            bestTokenForLevel = token;\\n        }\\n        const parent = element.parentNode;\\n        // Combine class names until unique.\\n        const classes = Array.from(element.classList);\\n        for (let i = 0; i < classes.length; ++i) {\\n            const token = '.' + classes.slice(0, i + 1).join('.');\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            // Even if not unique, does this subset of classes uniquely identify node as a child?\\n            if (!bestTokenForLevel && parent) {\\n                const sameClassSiblings = parent.querySelectorAll(token);\\n                if (sameClassSiblings.length === 1)\\n                    bestTokenForLevel = token;\\n            }\\n        }\\n        // Ordinal is the weakest signal.\\n        if (parent) {\\n            const siblings = Array.from(parent.children);\\n            const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\\n            const token = sameTagSiblings.indexOf(element) === 0 ? nodeName : `${nodeName}:nth-child(${1 + siblings.indexOf(element)})`;\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            if (!bestTokenForLevel)\\n                bestTokenForLevel = token;\\n        }\\n        else if (!bestTokenForLevel) {\\n            bestTokenForLevel = nodeName;\\n        }\\n        tokens.unshift(bestTokenForLevel);\\n    }\\n    return { engine: 'css', selector: uniqueCSSSelector(), score: kFallbackScore };\\n}\\nfunction escapeForRegex(text) {\\n    return text.replace(/[.*+?^>${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n}\\nfunction quoteString(text) {\\n    return `\\\"${text.replaceAll(/\\\"/g, '\\\\\\\\\\\"').replaceAll(/\\\\n/g, '\\\\\\\\n')}\\\"`;\\n}\\nfunction joinTokens(tokens) {\\n    const parts = [];\\n    let lastEngine = '';\\n    for (const { engine, selector } of tokens) {\\n        if (parts.length && (lastEngine !== 'css' || engine !== 'css' || selector.startsWith(':nth-match(')))\\n            parts.push('>>');\\n        lastEngine = engine;\\n        if (engine === 'css')\\n            parts.push(selector);\\n        else\\n            parts.push(`${engine}=${selector}`);\\n    }\\n    return parts.join(' ');\\n}\\nfunction combineScores(tokens) {\\n    let score = 0;\\n    for (let i = 0; i < tokens.length; i++)\\n        score += tokens[i].score * (tokens.length - i);\\n    return score;\\n}\\nfunction chooseFirstSelector(injectedScript, scope, targetElement, selectors, allowNthMatch) {\\n    const joined = selectors.map(tokens => ({ tokens, score: combineScores(tokens) }));\\n    joined.sort((a, b) => a.score - b.score);\\n    let bestWithIndex = null;\\n    for (const { tokens } of joined) {\\n        const parsedSelector = injectedScript.parseSelector(joinTokens(tokens));\\n        const result = injectedScript.querySelectorAll(parsedSelector, scope);\\n        const index = result.indexOf(targetElement);\\n        if (index === 0) {\\n            // We are the first match - found the best selector.\\n            return tokens;\\n        }\\n        // Otherwise, perhaps we can get nth-match?\\n        if (!allowNthMatch || bestWithIndex || index === -1 || result.length > 5)\\n            continue;\\n        // To use nth-match, we must convert everything to css.\\n        const allCss = tokens.map(token => {\\n            if (token.engine !== 'text')\\n                return token;\\n            if (token.selector.startsWith('/') && token.selector.endsWith('/'))\\n                return { engine: 'css', selector: `:text-matches(\\\"${token.selector.substring(1, token.selector.length - 1)}\\\")`, score: token.score };\\n            return { engine: 'css', selector: `:text(\\\"${token.selector}\\\")`, score: token.score };\\n        });\\n        const combined = joinTokens(allCss);\\n        bestWithIndex = [{ engine: 'css', selector: `:nth-match(${combined}, ${index + 1})`, score: combineScores(allCss) + 1000 }];\\n    }\\n    return bestWithIndex;\\n}\\nfunction isGuidLike(id) {\\n    let lastCharacterType;\\n    let transitionCount = 0;\\n    for (let i = 0; i < id.length; ++i) {\\n        const c = id[i];\\n        let characterType;\\n        if (c === '-' || c === '_')\\n            continue;\\n        if (c >= 'a' && c <= 'z')\\n            characterType = 'lower';\\n        else if (c >= 'A' && c <= 'Z')\\n            characterType = 'upper';\\n        else if (c >= '0' && c <= '9')\\n            characterType = 'digit';\\n        else\\n            characterType = 'other';\\n        if (characterType === 'lower' && lastCharacterType === 'upper') {\\n            lastCharacterType = characterType;\\n            continue;\\n        }\\n        if (lastCharacterType && lastCharacterType !== characterType)\\n            ++transitionCount;\\n        lastCharacterType = characterType;\\n    }\\n    return transitionCount >= id.length / 4;\\n}\\n\\n\\n/***/ })\\n\\n/******/ })[\\\"default\\\"];\";\n//# sourceMappingURL=consoleApiSource.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.source = void 0;\nexports.source = \"var pwExport =\\n/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/server/injected/injectedScript.ts\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./node_modules/webpack/buildin/global.js\\\":\\n/*!***********************************!*\\\\\\n  !*** (webpack)/buildin/global.js ***!\\n  \\\\***********************************/\\n/*! no static exports found */\\n/***/ (function(module, exports) {\\n\\nvar g;\\n\\n// This works in non-strict mode\\ng = (function() {\\n\\treturn this;\\n})();\\n\\ntry {\\n\\t// This works if eval is allowed (see CSP)\\n\\tg = g || new Function(\\\"return this\\\")();\\n} catch (e) {\\n\\t// This works if the window reference is available\\n\\tif (typeof window === \\\"object\\\") g = window;\\n}\\n\\n// g can still be undefined, but nothing to do about it...\\n// We return undefined, instead of nothing here, so it's\\n// easier to handle this case. if(!global) { ...}\\n\\nmodule.exports = g;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/cssParser.ts\\\":\\n/*!****************************************!*\\\\\\n  !*** ./src/server/common/cssParser.ts ***!\\n  \\\\****************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\\"default\\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\\"default\\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\\"default\\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.serializeSelector = exports.parseCSS = void 0;\\nconst css = __importStar(__webpack_require__(/*! ./cssTokenizer */ \\\"./src/server/common/cssTokenizer.js\\\"));\\nfunction parseCSS(selector, customNames) {\\n    let tokens;\\n    try {\\n        tokens = css.tokenize(selector);\\n        if (!(tokens[tokens.length - 1] instanceof css.EOFToken))\\n            tokens.push(new css.EOFToken());\\n    }\\n    catch (e) {\\n        const newMessage = e.message + ` while parsing selector \\\"${selector}\\\"`;\\n        const index = (e.stack || '').indexOf(e.message);\\n        if (index !== -1)\\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\\n        e.message = newMessage;\\n        throw e;\\n    }\\n    const unsupportedToken = tokens.find(token => {\\n        return (token instanceof css.AtKeywordToken) ||\\n            (token instanceof css.BadStringToken) ||\\n            (token instanceof css.BadURLToken) ||\\n            (token instanceof css.ColumnToken) ||\\n            (token instanceof css.CDOToken) ||\\n            (token instanceof css.CDCToken) ||\\n            (token instanceof css.SemicolonToken) ||\\n            // TODO: Consider using these for something, e.g. to escape complex strings.\\n            // For example :xpath{ (//div/bar[@attr=\\\"foo\\\"])[2]/baz }\\n            // Or this way :xpath( {complex-xpath-goes-here(\\\"hello\\\")} )\\n            (token instanceof css.OpenCurlyToken) ||\\n            (token instanceof css.CloseCurlyToken) ||\\n            // TODO: Consider treating these as strings?\\n            (token instanceof css.URLToken) ||\\n            (token instanceof css.PercentageToken);\\n    });\\n    if (unsupportedToken)\\n        throw new Error(`Unsupported token \\\"${unsupportedToken.toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    let pos = 0;\\n    const names = new Set();\\n    function unexpected() {\\n        return new Error(`Unexpected token \\\"${tokens[pos].toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    }\\n    function skipWhitespace() {\\n        while (tokens[pos] instanceof css.WhitespaceToken)\\n            pos++;\\n    }\\n    function isIdent(p = pos) {\\n        return tokens[p] instanceof css.IdentToken;\\n    }\\n    function isString(p = pos) {\\n        return tokens[p] instanceof css.StringToken;\\n    }\\n    function isNumber(p = pos) {\\n        return tokens[p] instanceof css.NumberToken;\\n    }\\n    function isComma(p = pos) {\\n        return tokens[p] instanceof css.CommaToken;\\n    }\\n    function isCloseParen(p = pos) {\\n        return tokens[p] instanceof css.CloseParenToken;\\n    }\\n    function isStar(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && tokens[p].value === '*';\\n    }\\n    function isEOF(p = pos) {\\n        return tokens[p] instanceof css.EOFToken;\\n    }\\n    function isClauseCombinator(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && (['>', '+', '~'].includes(tokens[p].value));\\n    }\\n    function isSelectorClauseEnd(p = pos) {\\n        return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || (tokens[p] instanceof css.WhitespaceToken);\\n    }\\n    function consumeFunctionArguments() {\\n        const result = [consumeArgument()];\\n        while (true) {\\n            skipWhitespace();\\n            if (!isComma())\\n                break;\\n            pos++;\\n            result.push(consumeArgument());\\n        }\\n        return result;\\n    }\\n    function consumeArgument() {\\n        skipWhitespace();\\n        if (isNumber())\\n            return tokens[pos++].value;\\n        if (isString())\\n            return tokens[pos++].value;\\n        return consumeComplexSelector();\\n    }\\n    function consumeComplexSelector() {\\n        skipWhitespace();\\n        const result = { simples: [{ selector: consumeSimpleSelector(), combinator: '' }] };\\n        while (true) {\\n            skipWhitespace();\\n            if (isClauseCombinator()) {\\n                result.simples[result.simples.length - 1].combinator = tokens[pos++].value;\\n                skipWhitespace();\\n            }\\n            else if (isSelectorClauseEnd()) {\\n                break;\\n            }\\n            result.simples.push({ combinator: '', selector: consumeSimpleSelector() });\\n        }\\n        return result;\\n    }\\n    function consumeSimpleSelector() {\\n        let rawCSSString = '';\\n        const functions = [];\\n        while (!isSelectorClauseEnd()) {\\n            if (isIdent() || isStar()) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if (tokens[pos] instanceof css.HashToken) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if ((tokens[pos] instanceof css.DelimToken) && tokens[pos].value === '.') {\\n                pos++;\\n                if (isIdent())\\n                    rawCSSString += '.' + tokens[pos++].toSource();\\n                else\\n                    throw unexpected();\\n            }\\n            else if (tokens[pos] instanceof css.ColonToken) {\\n                pos++;\\n                if (isIdent()) {\\n                    if (!customNames.has(tokens[pos].value.toLowerCase())) {\\n                        rawCSSString += ':' + tokens[pos++].toSource();\\n                    }\\n                    else {\\n                        const name = tokens[pos++].value.toLowerCase();\\n                        functions.push({ name, args: [] });\\n                        names.add(name);\\n                    }\\n                }\\n                else if (tokens[pos] instanceof css.FunctionToken) {\\n                    const name = tokens[pos++].value.toLowerCase();\\n                    if (!customNames.has(name)) {\\n                        rawCSSString += `:${name}(${consumeBuiltinFunctionArguments()})`;\\n                    }\\n                    else {\\n                        functions.push({ name, args: consumeFunctionArguments() });\\n                        names.add(name);\\n                    }\\n                    skipWhitespace();\\n                    if (!isCloseParen())\\n                        throw unexpected();\\n                    pos++;\\n                }\\n                else {\\n                    throw unexpected();\\n                }\\n            }\\n            else if (tokens[pos] instanceof css.OpenSquareToken) {\\n                rawCSSString += '[';\\n                pos++;\\n                while (!(tokens[pos] instanceof css.CloseSquareToken) && !isEOF())\\n                    rawCSSString += tokens[pos++].toSource();\\n                if (!(tokens[pos] instanceof css.CloseSquareToken))\\n                    throw unexpected();\\n                rawCSSString += ']';\\n                pos++;\\n            }\\n            else {\\n                throw unexpected();\\n            }\\n        }\\n        if (!rawCSSString && !functions.length)\\n            throw unexpected();\\n        return { css: rawCSSString || undefined, functions };\\n    }\\n    function consumeBuiltinFunctionArguments() {\\n        let s = '';\\n        while (!isCloseParen() && !isEOF())\\n            s += tokens[pos++].toSource();\\n        return s;\\n    }\\n    const result = consumeFunctionArguments();\\n    if (!isEOF())\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    if (result.some(arg => typeof arg !== 'object' || !('simples' in arg)))\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    return { selector: result, names: Array.from(names) };\\n}\\nexports.parseCSS = parseCSS;\\nfunction serializeSelector(args) {\\n    return args.map(arg => {\\n        if (typeof arg === 'string')\\n            return `\\\"${arg}\\\"`;\\n        if (typeof arg === 'number')\\n            return String(arg);\\n        return arg.simples.map(({ selector, combinator }) => {\\n            let s = selector.css || '';\\n            s = s + selector.functions.map(func => `:${func.name}(${serializeSelector(func.args)})`).join('');\\n            if (combinator)\\n                s += ' ' + combinator;\\n            return s;\\n        }).join(' ');\\n    }).join(', ');\\n}\\nexports.serializeSelector = serializeSelector;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/cssTokenizer.js\\\":\\n/*!*******************************************!*\\\\\\n  !*** ./src/server/common/cssTokenizer.js ***!\\n  \\\\*******************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\\n/*\\n * Original at https://github.com/tabatkins/parse-css\\n * licensed under http://creativecommons.org/publicdomain/zero/1.0/\\n *\\n * Modifications copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\n// Changes from https://github.com/tabatkins/parse-css\\n//   - Tabs are replaced with two spaces.\\n//   - Everything not related to tokenizing - below the first exports block - is removed.\\n// @ts-nocheck\\n(function (root, factory) {\\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\\n    // Rhino, and plain browser loading.\\n    if (true) {\\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\\n\\t\\t\\t\\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n    }\\n    else {}\\n}(this, function (exports) {\\n    var between = function (num, first, last) { return num >= first && num <= last; };\\n    function digit(code) { return between(code, 0x30, 0x39); }\\n    function hexdigit(code) { return digit(code) || between(code, 0x41, 0x46) || between(code, 0x61, 0x66); }\\n    function uppercaseletter(code) { return between(code, 0x41, 0x5a); }\\n    function lowercaseletter(code) { return between(code, 0x61, 0x7a); }\\n    function letter(code) { return uppercaseletter(code) || lowercaseletter(code); }\\n    function nonascii(code) { return code >= 0x80; }\\n    function namestartchar(code) { return letter(code) || nonascii(code) || code == 0x5f; }\\n    function namechar(code) { return namestartchar(code) || digit(code) || code == 0x2d; }\\n    function nonprintable(code) { return between(code, 0, 8) || code == 0xb || between(code, 0xe, 0x1f) || code == 0x7f; }\\n    function newline(code) { return code == 0xa; }\\n    function whitespace(code) { return newline(code) || code == 9 || code == 0x20; }\\n    function badescape(code) { return newline(code) || isNaN(code); }\\n    var maximumallowedcodepoint = 0x10ffff;\\n    var InvalidCharacterError = function (message) {\\n        this.message = message;\\n    };\\n    InvalidCharacterError.prototype = new Error;\\n    InvalidCharacterError.prototype.name = 'InvalidCharacterError';\\n    function preprocess(str) {\\n        // Turn a string into an array of code points,\\n        // following the preprocessing cleanup rules.\\n        var codepoints = [];\\n        for (var i = 0; i < str.length; i++) {\\n            var code = str.charCodeAt(i);\\n            if (code == 0xd && str.charCodeAt(i + 1) == 0xa) {\\n                code = 0xa;\\n                i++;\\n            }\\n            if (code == 0xd || code == 0xc)\\n                code = 0xa;\\n            if (code == 0x0)\\n                code = 0xfffd;\\n            if (between(code, 0xd800, 0xdbff) && between(str.charCodeAt(i + 1), 0xdc00, 0xdfff)) {\\n                // Decode a surrogate pair into an astral codepoint.\\n                var lead = code - 0xd800;\\n                var trail = str.charCodeAt(i + 1) - 0xdc00;\\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\\n                i++;\\n            }\\n            codepoints.push(code);\\n        }\\n        return codepoints;\\n    }\\n    function stringFromCode(code) {\\n        if (code <= 0xffff)\\n            return String.fromCharCode(code);\\n        // Otherwise, encode astral char as surrogate pair.\\n        code -= Math.pow(2, 16);\\n        var lead = Math.floor(code / Math.pow(2, 10)) + 0xd800;\\n        var trail = code % Math.pow(2, 10) + 0xdc00;\\n        return String.fromCharCode(lead) + String.fromCharCode(trail);\\n    }\\n    function tokenize(str) {\\n        str = preprocess(str);\\n        var i = -1;\\n        var tokens = [];\\n        var code;\\n        // Line number information.\\n        var line = 0;\\n        var column = 0;\\n        // The only use of lastLineLength is in reconsume().\\n        var lastLineLength = 0;\\n        var incrLineno = function () {\\n            line += 1;\\n            lastLineLength = column;\\n            column = 0;\\n        };\\n        var locStart = { line: line, column: column };\\n        var codepoint = function (i) {\\n            if (i >= str.length) {\\n                return -1;\\n            }\\n            return str[i];\\n        };\\n        var next = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            if (num > 3)\\n                throw \\\"Spec Error: no more than three codepoints of lookahead.\\\";\\n            return codepoint(i + num);\\n        };\\n        var consume = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            i += num;\\n            code = codepoint(i);\\n            if (newline(code))\\n                incrLineno();\\n            else\\n                column += num;\\n            //console.log('Consume '+i+' '+String.fromCharCode(code) + ' 0x' + code.toString(16));\\n            return true;\\n        };\\n        var reconsume = function () {\\n            i -= 1;\\n            if (newline(code)) {\\n                line -= 1;\\n                column = lastLineLength;\\n            }\\n            else {\\n                column -= 1;\\n            }\\n            locStart.line = line;\\n            locStart.column = column;\\n            return true;\\n        };\\n        var eof = function (codepoint) {\\n            if (codepoint === undefined)\\n                codepoint = code;\\n            return codepoint == -1;\\n        };\\n        var donothing = function () { };\\n        var parseerror = function () { console.log(\\\"Parse error at index \\\" + i + \\\", processing codepoint 0x\\\" + code.toString(16) + \\\".\\\"); return true; };\\n        var consumeAToken = function () {\\n            consumeComments();\\n            consume();\\n            if (whitespace(code)) {\\n                while (whitespace(next()))\\n                    consume();\\n                return new WhitespaceToken;\\n            }\\n            else if (code == 0x22)\\n                return consumeAStringToken();\\n            else if (code == 0x23) {\\n                if (namechar(next()) || areAValidEscape(next(1), next(2))) {\\n                    var token = new HashToken();\\n                    if (wouldStartAnIdentifier(next(1), next(2), next(3)))\\n                        token.type = \\\"id\\\";\\n                    token.value = consumeAName();\\n                    return token;\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x24) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SuffixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x27)\\n                return consumeAStringToken();\\n            else if (code == 0x28)\\n                return new OpenParenToken();\\n            else if (code == 0x29)\\n                return new CloseParenToken();\\n            else if (code == 0x2a) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SubstringMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2b) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2c)\\n                return new CommaToken();\\n            else if (code == 0x2d) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else if (next(1) == 0x2d && next(2) == 0x3e) {\\n                    consume(2);\\n                    return new CDCToken();\\n                }\\n                else if (startsWithAnIdentifier()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2e) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x3a)\\n                return new ColonToken;\\n            else if (code == 0x3b)\\n                return new SemicolonToken;\\n            else if (code == 0x3c) {\\n                if (next(1) == 0x21 && next(2) == 0x2d && next(3) == 0x2d) {\\n                    consume(3);\\n                    return new CDOToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x40) {\\n                if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                    return new AtKeywordToken(consumeAName());\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5b)\\n                return new OpenSquareToken();\\n            else if (code == 0x5c) {\\n                if (startsWithAValidEscape()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    parseerror();\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5d)\\n                return new CloseSquareToken();\\n            else if (code == 0x5e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new PrefixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7b)\\n                return new OpenCurlyToken();\\n            else if (code == 0x7c) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new DashMatchToken();\\n                }\\n                else if (next() == 0x7c) {\\n                    consume();\\n                    return new ColumnToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7d)\\n                return new CloseCurlyToken();\\n            else if (code == 0x7e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new IncludeMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (digit(code)) {\\n                reconsume();\\n                return consumeANumericToken();\\n            }\\n            else if (namestartchar(code)) {\\n                reconsume();\\n                return consumeAnIdentlikeToken();\\n            }\\n            else if (eof())\\n                return new EOFToken();\\n            else\\n                return new DelimToken(code);\\n        };\\n        var consumeComments = function () {\\n            while (next(1) == 0x2f && next(2) == 0x2a) {\\n                consume(2);\\n                while (true) {\\n                    consume();\\n                    if (code == 0x2a && next() == 0x2f) {\\n                        consume();\\n                        break;\\n                    }\\n                    else if (eof()) {\\n                        parseerror();\\n                        return;\\n                    }\\n                }\\n            }\\n        };\\n        var consumeANumericToken = function () {\\n            var num = consumeANumber();\\n            if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                var token = new DimensionToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                token.unit = consumeAName();\\n                return token;\\n            }\\n            else if (next() == 0x25) {\\n                consume();\\n                var token = new PercentageToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                return token;\\n            }\\n            else {\\n                var token = new NumberToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                return token;\\n            }\\n        };\\n        var consumeAnIdentlikeToken = function () {\\n            var str = consumeAName();\\n            if (str.toLowerCase() == \\\"url\\\" && next() == 0x28) {\\n                consume();\\n                while (whitespace(next(1)) && whitespace(next(2)))\\n                    consume();\\n                if (next() == 0x22 || next() == 0x27) {\\n                    return new FunctionToken(str);\\n                }\\n                else if (whitespace(next()) && (next(2) == 0x22 || next(2) == 0x27)) {\\n                    return new FunctionToken(str);\\n                }\\n                else {\\n                    return consumeAURLToken();\\n                }\\n            }\\n            else if (next() == 0x28) {\\n                consume();\\n                return new FunctionToken(str);\\n            }\\n            else {\\n                return new IdentToken(str);\\n            }\\n        };\\n        var consumeAStringToken = function (endingCodePoint) {\\n            if (endingCodePoint === undefined)\\n                endingCodePoint = code;\\n            var string = \\\"\\\";\\n            while (consume()) {\\n                if (code == endingCodePoint || eof()) {\\n                    return new StringToken(string);\\n                }\\n                else if (newline(code)) {\\n                    parseerror();\\n                    reconsume();\\n                    return new BadStringToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (eof(next())) {\\n                        donothing();\\n                    }\\n                    else if (newline(next())) {\\n                        consume();\\n                    }\\n                    else {\\n                        string += stringFromCode(consumeEscape());\\n                    }\\n                }\\n                else {\\n                    string += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeAURLToken = function () {\\n            var token = new URLToken(\\\"\\\");\\n            while (whitespace(next()))\\n                consume();\\n            if (eof(next()))\\n                return token;\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return token;\\n                }\\n                else if (whitespace(code)) {\\n                    while (whitespace(next()))\\n                        consume();\\n                    if (next() == 0x29 || eof(next())) {\\n                        consume();\\n                        return token;\\n                    }\\n                    else {\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else if (code == 0x22 || code == 0x27 || code == 0x28 || nonprintable(code)) {\\n                    parseerror();\\n                    consumeTheRemnantsOfABadURL();\\n                    return new BadURLToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (startsWithAValidEscape()) {\\n                        token.value += stringFromCode(consumeEscape());\\n                    }\\n                    else {\\n                        parseerror();\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else {\\n                    token.value += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeEscape = function () {\\n            // Assume the the current character is the \\\\\\n            // and the next code point is not a newline.\\n            consume();\\n            if (hexdigit(code)) {\\n                // Consume 1-6 hex digits\\n                var digits = [code];\\n                for (var total = 0; total < 5; total++) {\\n                    if (hexdigit(next())) {\\n                        consume();\\n                        digits.push(code);\\n                    }\\n                    else {\\n                        break;\\n                    }\\n                }\\n                if (whitespace(next()))\\n                    consume();\\n                var value = parseInt(digits.map(function (x) { return String.fromCharCode(x); }).join(''), 16);\\n                if (value > maximumallowedcodepoint)\\n                    value = 0xfffd;\\n                return value;\\n            }\\n            else if (eof()) {\\n                return 0xfffd;\\n            }\\n            else {\\n                return code;\\n            }\\n        };\\n        var areAValidEscape = function (c1, c2) {\\n            if (c1 != 0x5c)\\n                return false;\\n            if (newline(c2))\\n                return false;\\n            return true;\\n        };\\n        var startsWithAValidEscape = function () {\\n            return areAValidEscape(code, next());\\n        };\\n        var wouldStartAnIdentifier = function (c1, c2, c3) {\\n            if (c1 == 0x2d) {\\n                return namestartchar(c2) || c2 == 0x2d || areAValidEscape(c2, c3);\\n            }\\n            else if (namestartchar(c1)) {\\n                return true;\\n            }\\n            else if (c1 == 0x5c) {\\n                return areAValidEscape(c1, c2);\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithAnIdentifier = function () {\\n            return wouldStartAnIdentifier(code, next(1), next(2));\\n        };\\n        var wouldStartANumber = function (c1, c2, c3) {\\n            if (c1 == 0x2b || c1 == 0x2d) {\\n                if (digit(c2))\\n                    return true;\\n                if (c2 == 0x2e && digit(c3))\\n                    return true;\\n                return false;\\n            }\\n            else if (c1 == 0x2e) {\\n                if (digit(c2))\\n                    return true;\\n                return false;\\n            }\\n            else if (digit(c1)) {\\n                return true;\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithANumber = function () {\\n            return wouldStartANumber(code, next(1), next(2));\\n        };\\n        var consumeAName = function () {\\n            var result = \\\"\\\";\\n            while (consume()) {\\n                if (namechar(code)) {\\n                    result += stringFromCode(code);\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    result += stringFromCode(consumeEscape());\\n                }\\n                else {\\n                    reconsume();\\n                    return result;\\n                }\\n            }\\n        };\\n        var consumeANumber = function () {\\n            var repr = [];\\n            var type = \\\"integer\\\";\\n            if (next() == 0x2b || next() == 0x2d) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            while (digit(next())) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            if (next(1) == 0x2e && digit(next(2))) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var c1 = next(1), c2 = next(2), c3 = next(3);\\n            if ((c1 == 0x45 || c1 == 0x65) && digit(c2)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            else if ((c1 == 0x45 || c1 == 0x65) && (c2 == 0x2b || c2 == 0x2d) && digit(c3)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var value = convertAStringToANumber(repr);\\n            return { type: type, value: value, repr: repr };\\n        };\\n        var convertAStringToANumber = function (string) {\\n            // CSS's number rules are identical to JS, afaik.\\n            return +string;\\n        };\\n        var consumeTheRemnantsOfABadURL = function () {\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return;\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    consumeEscape();\\n                    donothing();\\n                }\\n                else {\\n                    donothing();\\n                }\\n            }\\n        };\\n        var iterationCount = 0;\\n        while (!eof(next())) {\\n            tokens.push(consumeAToken());\\n            iterationCount++;\\n            if (iterationCount > str.length * 2)\\n                return \\\"I'm infinite-looping!\\\";\\n        }\\n        return tokens;\\n    }\\n    function CSSParserToken() { throw \\\"Abstract Base Class\\\"; }\\n    CSSParserToken.prototype.toJSON = function () {\\n        return { token: this.tokenType };\\n    };\\n    CSSParserToken.prototype.toString = function () { return this.tokenType; };\\n    CSSParserToken.prototype.toSource = function () { return '' + this; };\\n    function BadStringToken() { return this; }\\n    BadStringToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadStringToken.prototype.tokenType = \\\"BADSTRING\\\";\\n    function BadURLToken() { return this; }\\n    BadURLToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadURLToken.prototype.tokenType = \\\"BADURL\\\";\\n    function WhitespaceToken() { return this; }\\n    WhitespaceToken.prototype = Object.create(CSSParserToken.prototype);\\n    WhitespaceToken.prototype.tokenType = \\\"WHITESPACE\\\";\\n    WhitespaceToken.prototype.toString = function () { return \\\"WS\\\"; };\\n    WhitespaceToken.prototype.toSource = function () { return \\\" \\\"; };\\n    function CDOToken() { return this; }\\n    CDOToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDOToken.prototype.tokenType = \\\"CDO\\\";\\n    CDOToken.prototype.toSource = function () { return \\\"<!--\\\"; };\\n    function CDCToken() { return this; }\\n    CDCToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDCToken.prototype.tokenType = \\\"CDC\\\";\\n    CDCToken.prototype.toSource = function () { return \\\"-->\\\"; };\\n    function ColonToken() { return this; }\\n    ColonToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColonToken.prototype.tokenType = \\\":\\\";\\n    function SemicolonToken() { return this; }\\n    SemicolonToken.prototype = Object.create(CSSParserToken.prototype);\\n    SemicolonToken.prototype.tokenType = \\\";\\\";\\n    function CommaToken() { return this; }\\n    CommaToken.prototype = Object.create(CSSParserToken.prototype);\\n    CommaToken.prototype.tokenType = \\\",\\\";\\n    function GroupingToken() { throw \\\"Abstract Base Class\\\"; }\\n    GroupingToken.prototype = Object.create(CSSParserToken.prototype);\\n    function OpenCurlyToken() { this.value = \\\"{\\\"; this.mirror = \\\"}\\\"; return this; }\\n    OpenCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenCurlyToken.prototype.tokenType = \\\"{\\\";\\n    function CloseCurlyToken() { this.value = \\\"}\\\"; this.mirror = \\\"{\\\"; return this; }\\n    CloseCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseCurlyToken.prototype.tokenType = \\\"}\\\";\\n    function OpenSquareToken() { this.value = \\\"[\\\"; this.mirror = \\\"]\\\"; return this; }\\n    OpenSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenSquareToken.prototype.tokenType = \\\"[\\\";\\n    function CloseSquareToken() { this.value = \\\"]\\\"; this.mirror = \\\"[\\\"; return this; }\\n    CloseSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseSquareToken.prototype.tokenType = \\\"]\\\";\\n    function OpenParenToken() { this.value = \\\"(\\\"; this.mirror = \\\")\\\"; return this; }\\n    OpenParenToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenParenToken.prototype.tokenType = \\\"(\\\";\\n    function CloseParenToken() { this.value = \\\")\\\"; this.mirror = \\\"(\\\"; return this; }\\n    CloseParenToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseParenToken.prototype.tokenType = \\\")\\\";\\n    function IncludeMatchToken() { return this; }\\n    IncludeMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    IncludeMatchToken.prototype.tokenType = \\\"~=\\\";\\n    function DashMatchToken() { return this; }\\n    DashMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    DashMatchToken.prototype.tokenType = \\\"|=\\\";\\n    function PrefixMatchToken() { return this; }\\n    PrefixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    PrefixMatchToken.prototype.tokenType = \\\"^=\\\";\\n    function SuffixMatchToken() { return this; }\\n    SuffixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SuffixMatchToken.prototype.tokenType = \\\"$=\\\";\\n    function SubstringMatchToken() { return this; }\\n    SubstringMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SubstringMatchToken.prototype.tokenType = \\\"*=\\\";\\n    function ColumnToken() { return this; }\\n    ColumnToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColumnToken.prototype.tokenType = \\\"||\\\";\\n    function EOFToken() { return this; }\\n    EOFToken.prototype = Object.create(CSSParserToken.prototype);\\n    EOFToken.prototype.tokenType = \\\"EOF\\\";\\n    EOFToken.prototype.toSource = function () { return \\\"\\\"; };\\n    function DelimToken(code) {\\n        this.value = stringFromCode(code);\\n        return this;\\n    }\\n    DelimToken.prototype = Object.create(CSSParserToken.prototype);\\n    DelimToken.prototype.tokenType = \\\"DELIM\\\";\\n    DelimToken.prototype.toString = function () { return \\\"DELIM(\\\" + this.value + \\\")\\\"; };\\n    DelimToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    DelimToken.prototype.toSource = function () {\\n        if (this.value == \\\"\\\\\\\\\\\")\\n            return \\\"\\\\\\\\\\\\n\\\";\\n        else\\n            return this.value;\\n    };\\n    function StringValuedToken() { throw \\\"Abstract Base Class\\\"; }\\n    StringValuedToken.prototype = Object.create(CSSParserToken.prototype);\\n    StringValuedToken.prototype.ASCIIMatch = function (str) {\\n        return this.value.toLowerCase() == str.toLowerCase();\\n    };\\n    StringValuedToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    function IdentToken(val) {\\n        this.value = val;\\n    }\\n    IdentToken.prototype = Object.create(StringValuedToken.prototype);\\n    IdentToken.prototype.tokenType = \\\"IDENT\\\";\\n    IdentToken.prototype.toString = function () { return \\\"IDENT(\\\" + this.value + \\\")\\\"; };\\n    IdentToken.prototype.toSource = function () {\\n        return escapeIdent(this.value);\\n    };\\n    function FunctionToken(val) {\\n        this.value = val;\\n        this.mirror = \\\")\\\";\\n    }\\n    FunctionToken.prototype = Object.create(StringValuedToken.prototype);\\n    FunctionToken.prototype.tokenType = \\\"FUNCTION\\\";\\n    FunctionToken.prototype.toString = function () { return \\\"FUNCTION(\\\" + this.value + \\\")\\\"; };\\n    FunctionToken.prototype.toSource = function () {\\n        return escapeIdent(this.value) + \\\"(\\\";\\n    };\\n    function AtKeywordToken(val) {\\n        this.value = val;\\n    }\\n    AtKeywordToken.prototype = Object.create(StringValuedToken.prototype);\\n    AtKeywordToken.prototype.tokenType = \\\"AT-KEYWORD\\\";\\n    AtKeywordToken.prototype.toString = function () { return \\\"AT(\\\" + this.value + \\\")\\\"; };\\n    AtKeywordToken.prototype.toSource = function () {\\n        return \\\"@\\\" + escapeIdent(this.value);\\n    };\\n    function HashToken(val) {\\n        this.value = val;\\n        this.type = \\\"unrestricted\\\";\\n    }\\n    HashToken.prototype = Object.create(StringValuedToken.prototype);\\n    HashToken.prototype.tokenType = \\\"HASH\\\";\\n    HashToken.prototype.toString = function () { return \\\"HASH(\\\" + this.value + \\\")\\\"; };\\n    HashToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        return json;\\n    };\\n    HashToken.prototype.toSource = function () {\\n        if (this.type == \\\"id\\\") {\\n            return \\\"#\\\" + escapeIdent(this.value);\\n        }\\n        else {\\n            return \\\"#\\\" + escapeHash(this.value);\\n        }\\n    };\\n    function StringToken(val) {\\n        this.value = val;\\n    }\\n    StringToken.prototype = Object.create(StringValuedToken.prototype);\\n    StringToken.prototype.tokenType = \\\"STRING\\\";\\n    StringToken.prototype.toString = function () {\\n        return '\\\"' + escapeString(this.value) + '\\\"';\\n    };\\n    function URLToken(val) {\\n        this.value = val;\\n    }\\n    URLToken.prototype = Object.create(StringValuedToken.prototype);\\n    URLToken.prototype.tokenType = \\\"URL\\\";\\n    URLToken.prototype.toString = function () { return \\\"URL(\\\" + this.value + \\\")\\\"; };\\n    URLToken.prototype.toSource = function () {\\n        return 'url(\\\"' + escapeString(this.value) + '\\\")';\\n    };\\n    function NumberToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n    }\\n    NumberToken.prototype = Object.create(CSSParserToken.prototype);\\n    NumberToken.prototype.tokenType = \\\"NUMBER\\\";\\n    NumberToken.prototype.toString = function () {\\n        if (this.type == \\\"integer\\\")\\n            return \\\"INT(\\\" + this.value + \\\")\\\";\\n        return \\\"NUMBER(\\\" + this.value + \\\")\\\";\\n    };\\n    NumberToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    NumberToken.prototype.toSource = function () { return this.repr; };\\n    function PercentageToken() {\\n        this.value = null;\\n        this.repr = \\\"\\\";\\n    }\\n    PercentageToken.prototype = Object.create(CSSParserToken.prototype);\\n    PercentageToken.prototype.tokenType = \\\"PERCENTAGE\\\";\\n    PercentageToken.prototype.toString = function () { return \\\"PERCENTAGE(\\\" + this.value + \\\")\\\"; };\\n    PercentageToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    PercentageToken.prototype.toSource = function () { return this.repr + \\\"%\\\"; };\\n    function DimensionToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n        this.unit = \\\"\\\";\\n    }\\n    DimensionToken.prototype = Object.create(CSSParserToken.prototype);\\n    DimensionToken.prototype.tokenType = \\\"DIMENSION\\\";\\n    DimensionToken.prototype.toString = function () { return \\\"DIM(\\\" + this.value + \\\",\\\" + this.unit + \\\")\\\"; };\\n    DimensionToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        json.unit = this.unit;\\n        return json;\\n    };\\n    DimensionToken.prototype.toSource = function () {\\n        var source = this.repr;\\n        var unit = escapeIdent(this.unit);\\n        if (unit[0].toLowerCase() == \\\"e\\\" && (unit[1] == \\\"-\\\" || between(unit.charCodeAt(1), 0x30, 0x39))) {\\n            // Unit is ambiguous with scinot\\n            // Remove the leading \\\"e\\\", replace with escape.\\n            unit = \\\"\\\\\\\\65 \\\" + unit.slice(1, unit.length);\\n        }\\n        return source + unit;\\n    };\\n    function escapeIdent(string) {\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f ||\\n                (i == 0 && between(code, 0x30, 0x39)) ||\\n                (i == 1 && between(code, 0x30, 0x39) && firstcode == 0x2d)) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeHash(string) {\\n        // Escapes the contents of \\\"unrestricted\\\"-type hash tokens.\\n        // Won't preserve the ID-ness of \\\"id\\\"-type hash tokens;\\n        // use escapeIdent() for that.\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeString(string) {\\n        string = '' + string;\\n        var result = '';\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code == 0x22 || code == 0x5c) {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n            else {\\n                result += string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    // Exportation.\\n    exports.tokenize = tokenize;\\n    exports.IdentToken = IdentToken;\\n    exports.FunctionToken = FunctionToken;\\n    exports.AtKeywordToken = AtKeywordToken;\\n    exports.HashToken = HashToken;\\n    exports.StringToken = StringToken;\\n    exports.BadStringToken = BadStringToken;\\n    exports.URLToken = URLToken;\\n    exports.BadURLToken = BadURLToken;\\n    exports.DelimToken = DelimToken;\\n    exports.NumberToken = NumberToken;\\n    exports.PercentageToken = PercentageToken;\\n    exports.DimensionToken = DimensionToken;\\n    exports.IncludeMatchToken = IncludeMatchToken;\\n    exports.DashMatchToken = DashMatchToken;\\n    exports.PrefixMatchToken = PrefixMatchToken;\\n    exports.SuffixMatchToken = SuffixMatchToken;\\n    exports.SubstringMatchToken = SubstringMatchToken;\\n    exports.ColumnToken = ColumnToken;\\n    exports.WhitespaceToken = WhitespaceToken;\\n    exports.CDOToken = CDOToken;\\n    exports.CDCToken = CDCToken;\\n    exports.ColonToken = ColonToken;\\n    exports.SemicolonToken = SemicolonToken;\\n    exports.CommaToken = CommaToken;\\n    exports.OpenParenToken = OpenParenToken;\\n    exports.CloseParenToken = CloseParenToken;\\n    exports.OpenSquareToken = OpenSquareToken;\\n    exports.CloseSquareToken = CloseSquareToken;\\n    exports.OpenCurlyToken = OpenCurlyToken;\\n    exports.CloseCurlyToken = CloseCurlyToken;\\n    exports.EOFToken = EOFToken;\\n    exports.CSSParserToken = CSSParserToken;\\n    exports.GroupingToken = GroupingToken;\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/selectorParser.ts\\\":\\n/*!*********************************************!*\\\\\\n  !*** ./src/server/common/selectorParser.ts ***!\\n  \\\\*********************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.parseSelector = exports.customCSSNames = void 0;\\nconst cssParser_1 = __webpack_require__(/*! ./cssParser */ \\\"./src/server/common/cssParser.ts\\\");\\nexports.customCSSNames = new Set(['not', 'is', 'where', 'has', 'scope', 'light', 'visible', 'text', 'text-matches', 'text-is', 'has-text', 'above', 'below', 'right-of', 'left-of', 'near', 'nth-match']);\\nfunction parseSelector(selector) {\\n    const result = parseSelectorV1(selector);\\n    result.parts = result.parts.map(part => {\\n        if (Array.isArray(part))\\n            return part;\\n        if (part.name === 'css' || part.name === 'css:light') {\\n            if (part.name === 'css:light')\\n                part.body = ':light(' + part.body + ')';\\n            const parsedCSS = cssParser_1.parseCSS(part.body, exports.customCSSNames);\\n            return parsedCSS.selector;\\n        }\\n        return part;\\n    });\\n    return {\\n        parts: result.parts,\\n        capture: result.capture,\\n    };\\n}\\nexports.parseSelector = parseSelector;\\nfunction parseSelectorV1(selector) {\\n    let index = 0;\\n    let quote;\\n    let start = 0;\\n    const result = { parts: [] };\\n    const append = () => {\\n        const part = selector.substring(start, index).trim();\\n        const eqIndex = part.indexOf('=');\\n        let name;\\n        let body;\\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\\n            name = part.substring(0, eqIndex).trim();\\n            body = part.substring(eqIndex + 1);\\n        }\\n        else if (part.length > 1 && part[0] === '\\\"' && part[part.length - 1] === '\\\"') {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (part.length > 1 && part[0] === \\\"'\\\" && part[part.length - 1] === \\\"'\\\") {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (/^\\\\(*\\\\/\\\\//.test(part) || part.startsWith('..')) {\\n            // If selector starts with '//' or '//' prefixed with multiple opening\\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\\n            // If selector starts with '..', consider xpath as well.\\n            name = 'xpath';\\n            body = part;\\n        }\\n        else {\\n            name = 'css';\\n            body = part;\\n        }\\n        let capture = false;\\n        if (name[0] === '*') {\\n            capture = true;\\n            name = name.substring(1);\\n        }\\n        result.parts.push({ name, body });\\n        if (capture) {\\n            if (result.capture !== undefined)\\n                throw new Error(`Only one of the selectors can capture using * modifier`);\\n            result.capture = result.parts.length - 1;\\n        }\\n    };\\n    if (!selector.includes('>>')) {\\n        index = selector.length;\\n        append();\\n        return result;\\n    }\\n    while (index < selector.length) {\\n        const c = selector[index];\\n        if (c === '\\\\\\\\' && index + 1 < selector.length) {\\n            index += 2;\\n        }\\n        else if (c === quote) {\\n            quote = undefined;\\n            index++;\\n        }\\n        else if (!quote && (c === '\\\"' || c === '\\\\'' || c === '`')) {\\n            quote = c;\\n            index++;\\n        }\\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\\n            append();\\n            index += 2;\\n            start = index;\\n        }\\n        else {\\n            index++;\\n        }\\n    }\\n    append();\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/injectedScript.ts\\\":\\n/*!***********************************************!*\\\\\\n  !*** ./src/server/injected/injectedScript.ts ***!\\n  \\\\***********************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n/* WEBPACK VAR INJECTION */(function(global) {\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.InjectedScript = void 0;\\nconst xpathSelectorEngine_1 = __webpack_require__(/*! ./xpathSelectorEngine */ \\\"./src/server/injected/xpathSelectorEngine.ts\\\");\\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \\\"./src/server/common/selectorParser.ts\\\");\\nconst selectorEvaluator_1 = __webpack_require__(/*! ./selectorEvaluator */ \\\"./src/server/injected/selectorEvaluator.ts\\\");\\nclass InjectedScript {\\n    constructor(stableRafCount, replaceRafWithTimeout, customEngines) {\\n        this._enginesV1 = new Map();\\n        this._enginesV1.set('xpath', xpathSelectorEngine_1.XPathEngine);\\n        this._enginesV1.set('xpath:light', xpathSelectorEngine_1.XPathEngine);\\n        this._enginesV1.set('text', this._createTextEngine(true));\\n        this._enginesV1.set('text:light', this._createTextEngine(false));\\n        this._enginesV1.set('id', this._createAttributeEngine('id', true));\\n        this._enginesV1.set('id:light', this._createAttributeEngine('id', false));\\n        this._enginesV1.set('data-testid', this._createAttributeEngine('data-testid', true));\\n        this._enginesV1.set('data-testid:light', this._createAttributeEngine('data-testid', false));\\n        this._enginesV1.set('data-test-id', this._createAttributeEngine('data-test-id', true));\\n        this._enginesV1.set('data-test-id:light', this._createAttributeEngine('data-test-id', false));\\n        this._enginesV1.set('data-test', this._createAttributeEngine('data-test', true));\\n        this._enginesV1.set('data-test:light', this._createAttributeEngine('data-test', false));\\n        for (const { name, engine } of customEngines)\\n            this._enginesV1.set(name, engine);\\n        // No custom engines in V2 for now.\\n        this._evaluator = new selectorEvaluator_1.SelectorEvaluatorImpl(new Map());\\n        this._stableRafCount = stableRafCount;\\n        this._replaceRafWithTimeout = replaceRafWithTimeout;\\n    }\\n    parseSelector(selector) {\\n        const result = selectorParser_1.parseSelector(selector);\\n        for (const part of result.parts) {\\n            if (!Array.isArray(part) && !this._enginesV1.has(part.name))\\n                throw new Error(`Unknown engine \\\"${part.name}\\\" while parsing selector ${selector}`);\\n        }\\n        return result;\\n    }\\n    querySelector(selector, root) {\\n        if (!root['querySelector'])\\n            throw new Error('Node is not queryable.');\\n        this._evaluator.begin();\\n        try {\\n            return this._querySelectorRecursively(root, selector, 0);\\n        }\\n        finally {\\n            this._evaluator.end();\\n        }\\n    }\\n    _querySelectorRecursively(root, selector, index) {\\n        const current = selector.parts[index];\\n        if (index === selector.parts.length - 1)\\n            return this._queryEngine(current, root);\\n        const all = this._queryEngineAll(current, root);\\n        for (const next of all) {\\n            const result = this._querySelectorRecursively(next, selector, index + 1);\\n            if (result)\\n                return selector.capture === index ? next : result;\\n        }\\n    }\\n    querySelectorAll(selector, root) {\\n        if (!root['querySelectorAll'])\\n            throw new Error('Node is not queryable.');\\n        this._evaluator.begin();\\n        try {\\n            const capture = selector.capture === undefined ? selector.parts.length - 1 : selector.capture;\\n            // Query all elements up to the capture.\\n            const partsToQueryAll = selector.parts.slice(0, capture + 1);\\n            // Check they have a descendant matching everything after the capture.\\n            const partsToCheckOne = selector.parts.slice(capture + 1);\\n            let set = new Set([root]);\\n            for (const part of partsToQueryAll) {\\n                const newSet = new Set();\\n                for (const prev of set) {\\n                    for (const next of this._queryEngineAll(part, prev)) {\\n                        if (newSet.has(next))\\n                            continue;\\n                        newSet.add(next);\\n                    }\\n                }\\n                set = newSet;\\n            }\\n            let result = Array.from(set);\\n            if (partsToCheckOne.length) {\\n                const partial = { parts: partsToCheckOne };\\n                result = result.filter(e => !!this._querySelectorRecursively(e, partial, 0));\\n            }\\n            return result;\\n        }\\n        finally {\\n            this._evaluator.end();\\n        }\\n    }\\n    _queryEngine(part, root) {\\n        if (Array.isArray(part))\\n            return this._evaluator.query({ scope: root, pierceShadow: true }, part)[0];\\n        return this._enginesV1.get(part.name).query(root, part.body);\\n    }\\n    _queryEngineAll(part, root) {\\n        if (Array.isArray(part))\\n            return this._evaluator.query({ scope: root, pierceShadow: true }, part);\\n        return this._enginesV1.get(part.name).queryAll(root, part.body);\\n    }\\n    _createAttributeEngine(attribute, shadow) {\\n        const toCSS = (selector) => {\\n            const css = `[${attribute}=${JSON.stringify(selector)}]`;\\n            return [{ simples: [{ selector: { css, functions: [] }, combinator: '' }] }];\\n        };\\n        return {\\n            query: (root, selector) => {\\n                return this._evaluator.query({ scope: root, pierceShadow: shadow }, toCSS(selector))[0];\\n            },\\n            queryAll: (root, selector) => {\\n                return this._evaluator.query({ scope: root, pierceShadow: shadow }, toCSS(selector));\\n            }\\n        };\\n    }\\n    _createTextEngine(shadow) {\\n        const queryList = (root, selector, single) => {\\n            const { matcher, kind } = createTextMatcher(selector);\\n            const result = [];\\n            let lastDidNotMatchSelf = null;\\n            const checkElement = (element) => {\\n                // TODO: replace contains() with something shadow-dom-aware?\\n                if (kind === 'lax' && lastDidNotMatchSelf && lastDidNotMatchSelf.contains(element))\\n                    return false;\\n                const matches = selectorEvaluator_1.elementMatchesText(this._evaluator, element, matcher);\\n                if (matches === 'none')\\n                    lastDidNotMatchSelf = element;\\n                if (matches === 'self' || (matches === 'selfAndChildren' && kind === 'strict'))\\n                    result.push(element);\\n                return single && result.length > 0;\\n            };\\n            if (root.nodeType === Node.ELEMENT_NODE && checkElement(root))\\n                return result;\\n            const elements = this._evaluator._queryCSS({ scope: root, pierceShadow: shadow }, '*');\\n            for (const element of elements) {\\n                if (checkElement(element))\\n                    return result;\\n            }\\n            return result;\\n        };\\n        return {\\n            query: (root, selector) => {\\n                return queryList(root, selector, true)[0];\\n            },\\n            queryAll: (root, selector) => {\\n                return queryList(root, selector, false);\\n            }\\n        };\\n    }\\n    extend(source, params) {\\n        const constrFunction = global.eval(`\\n    (() => {\\n      ${source}\\n      return pwExport;\\n    })()`);\\n        return new constrFunction(this, params);\\n    }\\n    isVisible(element) {\\n        return selectorEvaluator_1.isVisible(element);\\n    }\\n    pollRaf(predicate) {\\n        return this._runAbortableTask(progress => {\\n            let fulfill;\\n            let reject;\\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\\n            const onRaf = () => {\\n                if (progress.aborted)\\n                    return;\\n                try {\\n                    const continuePolling = Symbol('continuePolling');\\n                    const success = predicate(progress, continuePolling);\\n                    if (success !== continuePolling)\\n                        fulfill(success);\\n                    else\\n                        requestAnimationFrame(onRaf);\\n                }\\n                catch (e) {\\n                    reject(e);\\n                }\\n            };\\n            onRaf();\\n            return result;\\n        });\\n    }\\n    pollInterval(pollInterval, predicate) {\\n        return this._runAbortableTask(progress => {\\n            let fulfill;\\n            let reject;\\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\\n            const onTimeout = () => {\\n                if (progress.aborted)\\n                    return;\\n                try {\\n                    const continuePolling = Symbol('continuePolling');\\n                    const success = predicate(progress, continuePolling);\\n                    if (success !== continuePolling)\\n                        fulfill(success);\\n                    else\\n                        setTimeout(onTimeout, pollInterval);\\n                }\\n                catch (e) {\\n                    reject(e);\\n                }\\n            };\\n            onTimeout();\\n            return result;\\n        });\\n    }\\n    _runAbortableTask(task) {\\n        let unsentLogs = [];\\n        let takeNextLogsCallback;\\n        let taskFinished = false;\\n        const logReady = () => {\\n            if (!takeNextLogsCallback)\\n                return;\\n            takeNextLogsCallback(unsentLogs);\\n            unsentLogs = [];\\n            takeNextLogsCallback = undefined;\\n        };\\n        const takeNextLogs = () => new Promise(fulfill => {\\n            takeNextLogsCallback = fulfill;\\n            if (unsentLogs.length || taskFinished)\\n                logReady();\\n        });\\n        let lastLog = '';\\n        const progress = {\\n            aborted: false,\\n            log: (message) => {\\n                lastLog = message;\\n                unsentLogs.push(message);\\n                logReady();\\n            },\\n            logRepeating: (message) => {\\n                if (message !== lastLog)\\n                    progress.log(message);\\n            },\\n        };\\n        const run = () => {\\n            const result = task(progress);\\n            // After the task has finished, there should be no more logs.\\n            // Release any pending `takeNextLogs` call, and do not block any future ones.\\n            // This prevents non-finished protocol evaluation calls and memory leaks.\\n            result.finally(() => {\\n                taskFinished = true;\\n                logReady();\\n            });\\n            return result;\\n        };\\n        return {\\n            takeNextLogs,\\n            run,\\n            cancel: () => { progress.aborted = true; },\\n            takeLastLogs: () => unsentLogs,\\n        };\\n    }\\n    getElementBorderWidth(node) {\\n        if (node.nodeType !== Node.ELEMENT_NODE || !node.ownerDocument || !node.ownerDocument.defaultView)\\n            return { left: 0, top: 0 };\\n        const style = node.ownerDocument.defaultView.getComputedStyle(node);\\n        return { left: parseInt(style.borderLeftWidth || '', 10), top: parseInt(style.borderTopWidth || '', 10) };\\n    }\\n    _retarget(node, behavior) {\\n        let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\\n        if (!element)\\n            return null;\\n        element = element.closest('button, [role=button], [role=checkbox], [role=radio]') || element;\\n        if (behavior === 'follow-label') {\\n            if (!element.matches('input, textarea, button, select, [role=button], [role=checkbox], [role=radio]') &&\\n                !element.isContentEditable) {\\n                // Go up to the label that might be connected to the input/textarea.\\n                element = element.closest('label') || element;\\n            }\\n            if (element.nodeName === 'LABEL')\\n                element = element.control || element;\\n        }\\n        return element;\\n    }\\n    waitForElementStatesAndPerformAction(node, states, callback) {\\n        let lastRect;\\n        let counter = 0;\\n        let samePositionCounter = 0;\\n        let lastTime = 0;\\n        const predicate = (progress, continuePolling) => {\\n            for (const state of states) {\\n                if (state !== 'stable') {\\n                    const result = this.checkElementState(node, state);\\n                    if (typeof result !== 'boolean')\\n                        return result;\\n                    if (!result) {\\n                        progress.logRepeating(`    element is not ${state} - waiting...`);\\n                        return continuePolling;\\n                    }\\n                    continue;\\n                }\\n                const element = this._retarget(node, 'no-follow-label');\\n                if (!element)\\n                    return 'error:notconnected';\\n                // First raf happens in the same animation frame as evaluation, so it does not produce\\n                // any client rect difference compared to synchronous call. We skip the synchronous call\\n                // and only force layout during actual rafs as a small optimisation.\\n                if (++counter === 1)\\n                    return continuePolling;\\n                // Drop frames that are shorter than 16ms - WebKit Win bug.\\n                const time = performance.now();\\n                if (this._stableRafCount > 1 && time - lastTime < 15)\\n                    return continuePolling;\\n                lastTime = time;\\n                const clientRect = element.getBoundingClientRect();\\n                const rect = { x: clientRect.top, y: clientRect.left, width: clientRect.width, height: clientRect.height };\\n                const samePosition = lastRect && rect.x === lastRect.x && rect.y === lastRect.y && rect.width === lastRect.width && rect.height === lastRect.height;\\n                if (samePosition)\\n                    ++samePositionCounter;\\n                else\\n                    samePositionCounter = 0;\\n                const isStable = samePositionCounter >= this._stableRafCount;\\n                const isStableForLogs = isStable || !lastRect;\\n                lastRect = rect;\\n                if (!isStableForLogs)\\n                    progress.logRepeating(`    element is not stable - waiting...`);\\n                if (!isStable)\\n                    return continuePolling;\\n            }\\n            return callback(node, progress, continuePolling);\\n        };\\n        if (this._replaceRafWithTimeout)\\n            return this.pollInterval(16, predicate);\\n        else\\n            return this.pollRaf(predicate);\\n    }\\n    checkElementState(node, state) {\\n        const element = this._retarget(node, ['stable', 'visible', 'hidden'].includes(state) ? 'no-follow-label' : 'follow-label');\\n        if (!element || !element.isConnected) {\\n            if (state === 'hidden')\\n                return true;\\n            return 'error:notconnected';\\n        }\\n        if (state === 'visible')\\n            return this.isVisible(element);\\n        if (state === 'hidden')\\n            return !this.isVisible(element);\\n        const disabled = ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA'].includes(element.nodeName) && element.hasAttribute('disabled');\\n        if (state === 'disabled')\\n            return disabled;\\n        if (state === 'enabled')\\n            return !disabled;\\n        const editable = !(['INPUT', 'TEXTAREA', 'SELECT'].includes(element.nodeName) && element.hasAttribute('readonly'));\\n        if (state === 'editable')\\n            return !disabled && editable;\\n        if (state === 'checked') {\\n            if (element.getAttribute('role') === 'checkbox')\\n                return element.getAttribute('aria-checked') === 'true';\\n            if (element.nodeName !== 'INPUT')\\n                return 'error:notcheckbox';\\n            if (!['radio', 'checkbox'].includes(element.type.toLowerCase()))\\n                return 'error:notcheckbox';\\n            return element.checked;\\n        }\\n        throw new Error(`Unexpected element state \\\"${state}\\\"`);\\n    }\\n    selectOptions(optionsToSelect, node, progress, continuePolling) {\\n        const element = this._retarget(node, 'follow-label');\\n        if (!element)\\n            return 'error:notconnected';\\n        if (element.nodeName.toLowerCase() !== 'select')\\n            return 'error:notselect';\\n        const select = element;\\n        const options = Array.from(select.options);\\n        const selectedOptions = [];\\n        let remainingOptionsToSelect = optionsToSelect.slice();\\n        for (let index = 0; index < options.length; index++) {\\n            const option = options[index];\\n            const filter = (optionToSelect) => {\\n                if (optionToSelect instanceof Node)\\n                    return option === optionToSelect;\\n                let matches = true;\\n                if (optionToSelect.value !== undefined)\\n                    matches = matches && optionToSelect.value === option.value;\\n                if (optionToSelect.label !== undefined)\\n                    matches = matches && optionToSelect.label === option.label;\\n                if (optionToSelect.index !== undefined)\\n                    matches = matches && optionToSelect.index === index;\\n                return matches;\\n            };\\n            if (!remainingOptionsToSelect.some(filter))\\n                continue;\\n            selectedOptions.push(option);\\n            if (select.multiple) {\\n                remainingOptionsToSelect = remainingOptionsToSelect.filter(o => !filter(o));\\n            }\\n            else {\\n                remainingOptionsToSelect = [];\\n                break;\\n            }\\n        }\\n        if (remainingOptionsToSelect.length) {\\n            progress.logRepeating('    did not find some options - waiting... ');\\n            return continuePolling;\\n        }\\n        select.value = undefined;\\n        selectedOptions.forEach(option => option.selected = true);\\n        progress.log('    selected specified option(s)');\\n        select.dispatchEvent(new Event('input', { 'bubbles': true }));\\n        select.dispatchEvent(new Event('change', { 'bubbles': true }));\\n        return selectedOptions.map(option => option.value);\\n    }\\n    fill(value, node, progress) {\\n        const element = this._retarget(node, 'follow-label');\\n        if (!element)\\n            return 'error:notconnected';\\n        if (element.nodeName.toLowerCase() === 'input') {\\n            const input = element;\\n            const type = input.type.toLowerCase();\\n            const kDateTypes = new Set(['date', 'time', 'datetime', 'datetime-local', 'month', 'week']);\\n            const kTextInputTypes = new Set(['', 'email', 'number', 'password', 'search', 'tel', 'text', 'url']);\\n            if (!kTextInputTypes.has(type) && !kDateTypes.has(type)) {\\n                progress.log(`    input of type \\\"${type}\\\" cannot be filled`);\\n                return 'error:notfillableinputtype';\\n            }\\n            if (type === 'number') {\\n                value = value.trim();\\n                if (isNaN(Number(value)))\\n                    return 'error:notfillablenumberinput';\\n            }\\n            if (kDateTypes.has(type)) {\\n                value = value.trim();\\n                input.focus();\\n                input.value = value;\\n                if (input.value !== value)\\n                    return 'error:notvaliddate';\\n                element.dispatchEvent(new Event('input', { 'bubbles': true }));\\n                element.dispatchEvent(new Event('change', { 'bubbles': true }));\\n                return 'done'; // We have already changed the value, no need to input it.\\n            }\\n        }\\n        else if (element.nodeName.toLowerCase() === 'textarea') {\\n            // Nothing to check here.\\n        }\\n        else if (!element.isContentEditable) {\\n            return 'error:notfillableelement';\\n        }\\n        this.selectText(element);\\n        return 'needsinput'; // Still need to input the value.\\n    }\\n    selectText(node) {\\n        const element = this._retarget(node, 'follow-label');\\n        if (!element)\\n            return 'error:notconnected';\\n        if (element.nodeName.toLowerCase() === 'input') {\\n            const input = element;\\n            input.select();\\n            input.focus();\\n            return 'done';\\n        }\\n        if (element.nodeName.toLowerCase() === 'textarea') {\\n            const textarea = element;\\n            textarea.selectionStart = 0;\\n            textarea.selectionEnd = textarea.value.length;\\n            textarea.focus();\\n            return 'done';\\n        }\\n        const range = element.ownerDocument.createRange();\\n        range.selectNodeContents(element);\\n        const selection = element.ownerDocument.defaultView.getSelection();\\n        if (selection) {\\n            selection.removeAllRanges();\\n            selection.addRange(range);\\n        }\\n        element.focus();\\n        return 'done';\\n    }\\n    focusNode(node, resetSelectionIfNotFocused) {\\n        if (!node.isConnected)\\n            return 'error:notconnected';\\n        if (node.nodeType !== Node.ELEMENT_NODE)\\n            return 'error:notelement';\\n        const wasFocused = node.getRootNode().activeElement === node && node.ownerDocument && node.ownerDocument.hasFocus();\\n        node.focus();\\n        if (resetSelectionIfNotFocused && !wasFocused && node.nodeName.toLowerCase() === 'input') {\\n            try {\\n                const input = node;\\n                input.setSelectionRange(0, 0);\\n            }\\n            catch (e) {\\n                // Some inputs do not allow selection.\\n            }\\n        }\\n        return 'done';\\n    }\\n    setInputFiles(node, payloads) {\\n        if (node.nodeType !== Node.ELEMENT_NODE)\\n            return 'Node is not of type HTMLElement';\\n        const element = node;\\n        if (element.nodeName !== 'INPUT')\\n            return 'Not an <input> element';\\n        const input = element;\\n        const type = (input.getAttribute('type') || '').toLowerCase();\\n        if (type !== 'file')\\n            return 'Not an input[type=file] element';\\n        const files = payloads.map(file => {\\n            const bytes = Uint8Array.from(atob(file.buffer), c => c.charCodeAt(0));\\n            return new File([bytes], file.name, { type: file.mimeType });\\n        });\\n        const dt = new DataTransfer();\\n        for (const file of files)\\n            dt.items.add(file);\\n        input.files = dt.files;\\n        input.dispatchEvent(new Event('input', { 'bubbles': true }));\\n        input.dispatchEvent(new Event('change', { 'bubbles': true }));\\n    }\\n    checkHitTargetAt(node, point) {\\n        let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\\n        if (!element || !element.isConnected)\\n            return 'error:notconnected';\\n        element = element.closest('button, [role=button]') || element;\\n        let hitElement = this.deepElementFromPoint(document, point.x, point.y);\\n        const hitParents = [];\\n        while (hitElement && hitElement !== element) {\\n            hitParents.push(hitElement);\\n            hitElement = selectorEvaluator_1.parentElementOrShadowHost(hitElement);\\n        }\\n        if (hitElement === element)\\n            return 'done';\\n        const hitTargetDescription = this.previewNode(hitParents[0]);\\n        // Root is the topmost element in the hitTarget's chain that is not in the\\n        // element's chain. For example, it might be a dialog element that overlays\\n        // the target.\\n        let rootHitTargetDescription;\\n        while (element) {\\n            const index = hitParents.indexOf(element);\\n            if (index !== -1) {\\n                if (index > 1)\\n                    rootHitTargetDescription = this.previewNode(hitParents[index - 1]);\\n                break;\\n            }\\n            element = selectorEvaluator_1.parentElementOrShadowHost(element);\\n        }\\n        if (rootHitTargetDescription)\\n            return { hitTargetDescription: `${hitTargetDescription} from ${rootHitTargetDescription} subtree` };\\n        return { hitTargetDescription };\\n    }\\n    dispatchEvent(node, type, eventInit) {\\n        let event;\\n        eventInit = { bubbles: true, cancelable: true, composed: true, ...eventInit };\\n        switch (eventType.get(type)) {\\n            case 'mouse':\\n                event = new MouseEvent(type, eventInit);\\n                break;\\n            case 'keyboard':\\n                event = new KeyboardEvent(type, eventInit);\\n                break;\\n            case 'touch':\\n                event = new TouchEvent(type, eventInit);\\n                break;\\n            case 'pointer':\\n                event = new PointerEvent(type, eventInit);\\n                break;\\n            case 'focus':\\n                event = new FocusEvent(type, eventInit);\\n                break;\\n            case 'drag':\\n                event = new DragEvent(type, eventInit);\\n                break;\\n            default:\\n                event = new Event(type, eventInit);\\n                break;\\n        }\\n        node.dispatchEvent(event);\\n    }\\n    deepElementFromPoint(document, x, y) {\\n        let container = document;\\n        let element;\\n        while (container) {\\n            const innerElement = container.elementFromPoint(x, y);\\n            if (!innerElement || element === innerElement)\\n                break;\\n            element = innerElement;\\n            container = element.shadowRoot;\\n        }\\n        return element;\\n    }\\n    previewNode(node) {\\n        if (node.nodeType === Node.TEXT_NODE)\\n            return oneLine(`#text=${node.nodeValue || ''}`);\\n        if (node.nodeType !== Node.ELEMENT_NODE)\\n            return oneLine(`<${node.nodeName.toLowerCase()} />`);\\n        const element = node;\\n        const attrs = [];\\n        for (let i = 0; i < element.attributes.length; i++) {\\n            const { name, value } = element.attributes[i];\\n            if (name === 'style')\\n                continue;\\n            if (!value && booleanAttributes.has(name))\\n                attrs.push(` ${name}`);\\n            else\\n                attrs.push(` ${name}=\\\"${value}\\\"`);\\n        }\\n        attrs.sort((a, b) => a.length - b.length);\\n        let attrText = attrs.join('');\\n        if (attrText.length > 50)\\n            attrText = attrText.substring(0, 49) + '\\\\u2026';\\n        if (autoClosingTags.has(element.nodeName))\\n            return oneLine(`<${element.nodeName.toLowerCase()}${attrText}/>`);\\n        const children = element.childNodes;\\n        let onlyText = false;\\n        if (children.length <= 5) {\\n            onlyText = true;\\n            for (let i = 0; i < children.length; i++)\\n                onlyText = onlyText && children[i].nodeType === Node.TEXT_NODE;\\n        }\\n        let text = onlyText ? (element.textContent || '') : (children.length ? '\\\\u2026' : '');\\n        if (text.length > 50)\\n            text = text.substring(0, 49) + '\\\\u2026';\\n        return oneLine(`<${element.nodeName.toLowerCase()}${attrText}>${text}</${element.nodeName.toLowerCase()}>`);\\n    }\\n}\\nexports.InjectedScript = InjectedScript;\\nconst autoClosingTags = new Set(['AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT', 'KEYGEN', 'LINK', 'MENUITEM', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR']);\\nconst booleanAttributes = new Set(['checked', 'selected', 'disabled', 'readonly', 'multiple']);\\nfunction oneLine(s) {\\n    return s.replace(/\\\\n/g, '').replace(/\\\\t/g, '');\\n}\\nconst eventType = new Map([\\n    ['auxclick', 'mouse'],\\n    ['click', 'mouse'],\\n    ['dblclick', 'mouse'],\\n    ['mousedown', 'mouse'],\\n    ['mouseeenter', 'mouse'],\\n    ['mouseleave', 'mouse'],\\n    ['mousemove', 'mouse'],\\n    ['mouseout', 'mouse'],\\n    ['mouseover', 'mouse'],\\n    ['mouseup', 'mouse'],\\n    ['mouseleave', 'mouse'],\\n    ['mousewheel', 'mouse'],\\n    ['keydown', 'keyboard'],\\n    ['keyup', 'keyboard'],\\n    ['keypress', 'keyboard'],\\n    ['textInput', 'keyboard'],\\n    ['touchstart', 'touch'],\\n    ['touchmove', 'touch'],\\n    ['touchend', 'touch'],\\n    ['touchcancel', 'touch'],\\n    ['pointerover', 'pointer'],\\n    ['pointerout', 'pointer'],\\n    ['pointerenter', 'pointer'],\\n    ['pointerleave', 'pointer'],\\n    ['pointerdown', 'pointer'],\\n    ['pointerup', 'pointer'],\\n    ['pointermove', 'pointer'],\\n    ['pointercancel', 'pointer'],\\n    ['gotpointercapture', 'pointer'],\\n    ['lostpointercapture', 'pointer'],\\n    ['focus', 'focus'],\\n    ['blur', 'focus'],\\n    ['drag', 'drag'],\\n    ['dragstart', 'drag'],\\n    ['dragend', 'drag'],\\n    ['dragover', 'drag'],\\n    ['dragenter', 'drag'],\\n    ['dragleave', 'drag'],\\n    ['dragexit', 'drag'],\\n    ['drop', 'drag'],\\n]);\\nfunction unescape(s) {\\n    if (!s.includes('\\\\\\\\'))\\n        return s;\\n    const r = [];\\n    let i = 0;\\n    while (i < s.length) {\\n        if (s[i] === '\\\\\\\\' && i + 1 < s.length)\\n            i++;\\n        r.push(s[i++]);\\n    }\\n    return r.join('');\\n}\\nfunction createTextMatcher(selector) {\\n    if (selector[0] === '/' && selector.lastIndexOf('/') > 0) {\\n        const lastSlash = selector.lastIndexOf('/');\\n        const matcher = selectorEvaluator_1.createRegexTextMatcher(selector.substring(1, lastSlash), selector.substring(lastSlash + 1));\\n        return { matcher, kind: 'regex' };\\n    }\\n    let strict = false;\\n    if (selector.length > 1 && selector[0] === '\\\"' && selector[selector.length - 1] === '\\\"') {\\n        selector = unescape(selector.substring(1, selector.length - 1));\\n        strict = true;\\n    }\\n    if (selector.length > 1 && selector[0] === \\\"'\\\" && selector[selector.length - 1] === \\\"'\\\") {\\n        selector = unescape(selector.substring(1, selector.length - 1));\\n        strict = true;\\n    }\\n    const matcher = strict ? selectorEvaluator_1.createStrictTextMatcher(selector) : selectorEvaluator_1.createLaxTextMatcher(selector);\\n    return { matcher, kind: strict ? 'strict' : 'lax' };\\n}\\nexports.default = InjectedScript;\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \\\"./node_modules/webpack/buildin/global.js\\\")))\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/selectorEvaluator.ts\\\":\\n/*!**************************************************!*\\\\\\n  !*** ./src/server/injected/selectorEvaluator.ts ***!\\n  \\\\**************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.isVisible = exports.parentElementOrShadowHost = exports.elementMatchesText = exports.elementText = exports.createRegexTextMatcher = exports.createStrictTextMatcher = exports.createLaxTextMatcher = exports.SelectorEvaluatorImpl = void 0;\\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \\\"./src/server/common/selectorParser.ts\\\");\\nclass SelectorEvaluatorImpl {\\n    constructor(extraEngines) {\\n        this._engines = new Map();\\n        this._cacheQueryCSS = new Map();\\n        this._cacheMatches = new Map();\\n        this._cacheQuery = new Map();\\n        this._cacheMatchesSimple = new Map();\\n        this._cacheMatchesParents = new Map();\\n        this._cacheCallMatches = new Map();\\n        this._cacheCallQuery = new Map();\\n        this._cacheQuerySimple = new Map();\\n        this._cacheText = new Map();\\n        this._retainCacheCounter = 0;\\n        for (const [name, engine] of extraEngines)\\n            this._engines.set(name, engine);\\n        this._engines.set('not', notEngine);\\n        this._engines.set('is', isEngine);\\n        this._engines.set('where', isEngine);\\n        this._engines.set('has', hasEngine);\\n        this._engines.set('scope', scopeEngine);\\n        this._engines.set('light', lightEngine);\\n        this._engines.set('visible', visibleEngine);\\n        this._engines.set('text', textEngine);\\n        this._engines.set('text-is', textIsEngine);\\n        this._engines.set('text-matches', textMatchesEngine);\\n        this._engines.set('has-text', hasTextEngine);\\n        this._engines.set('right-of', createPositionEngine('right-of', boxRightOf));\\n        this._engines.set('left-of', createPositionEngine('left-of', boxLeftOf));\\n        this._engines.set('above', createPositionEngine('above', boxAbove));\\n        this._engines.set('below', createPositionEngine('below', boxBelow));\\n        this._engines.set('near', createPositionEngine('near', boxNear));\\n        this._engines.set('nth-match', nthMatchEngine);\\n        const allNames = Array.from(this._engines.keys());\\n        allNames.sort();\\n        const parserNames = Array.from(selectorParser_1.customCSSNames).slice();\\n        parserNames.sort();\\n        if (allNames.join('|') !== parserNames.join('|'))\\n            throw new Error(`Please keep customCSSNames in sync with evaluator engines`);\\n    }\\n    begin() {\\n        ++this._retainCacheCounter;\\n    }\\n    end() {\\n        --this._retainCacheCounter;\\n        if (!this._retainCacheCounter) {\\n            this._cacheQueryCSS.clear();\\n            this._cacheMatches.clear();\\n            this._cacheQuery.clear();\\n            this._cacheMatchesSimple.clear();\\n            this._cacheMatchesParents.clear();\\n            this._cacheCallMatches.clear();\\n            this._cacheCallQuery.clear();\\n            this._cacheQuerySimple.clear();\\n            this._cacheText.clear();\\n        }\\n    }\\n    _cached(cache, main, rest, cb) {\\n        if (!cache.has(main))\\n            cache.set(main, []);\\n        const entries = cache.get(main);\\n        const entry = entries.find(e => rest.every((value, index) => e.rest[index] === value));\\n        if (entry)\\n            return entry.result;\\n        const result = cb();\\n        entries.push({ rest, result });\\n        return result;\\n    }\\n    _checkSelector(s) {\\n        const wellFormed = typeof s === 'object' && s &&\\n            (Array.isArray(s) || ('simples' in s) && (s.simples.length));\\n        if (!wellFormed)\\n            throw new Error(`Malformed selector \\\"${s}\\\"`);\\n        return s;\\n    }\\n    matches(element, s, context) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheMatches, element, [selector, context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._matchesEngine(isEngine, element, selector, context);\\n                if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context))\\n                    return false;\\n                return this._matchesParents(element, selector, selector.simples.length - 2, context);\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    query(context, s) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheQuery, selector, [context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._queryEngine(isEngine, context, selector);\\n                // query() recursively calls itself, so we set up a new map for this particular query() call.\\n                const previousScoreMap = this._scoreMap;\\n                this._scoreMap = new Map();\\n                let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);\\n                elements = elements.filter(element => this._matchesParents(element, selector, selector.simples.length - 2, context));\\n                if (this._scoreMap.size) {\\n                    elements.sort((a, b) => {\\n                        const aScore = this._scoreMap.get(a);\\n                        const bScore = this._scoreMap.get(b);\\n                        if (aScore === bScore)\\n                            return 0;\\n                        if (aScore === undefined)\\n                            return 1;\\n                        if (bScore === undefined)\\n                            return -1;\\n                        return aScore - bScore;\\n                    });\\n                }\\n                this._scoreMap = previousScoreMap;\\n                return elements;\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    _markScore(element, score) {\\n        // HACK ALERT: temporary marks an element with a score, to be used\\n        // for sorting at the end of the query().\\n        if (this._scoreMap)\\n            this._scoreMap.set(element, score);\\n    }\\n    _matchesSimple(element, simple, context) {\\n        return this._cached(this._cacheMatchesSimple, element, [simple, context.scope, context.pierceShadow], () => {\\n            const isPossiblyScopeClause = simple.functions.some(f => f.name === 'scope' || f.name === 'is');\\n            if (!isPossiblyScopeClause && element === context.scope)\\n                return false;\\n            if (simple.css && !this._matchesCSS(element, simple.css))\\n                return false;\\n            for (const func of simple.functions) {\\n                if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context))\\n                    return false;\\n            }\\n            return true;\\n        });\\n    }\\n    _querySimple(context, simple) {\\n        if (!simple.functions.length)\\n            return this._queryCSS(context, simple.css || '*');\\n        return this._cached(this._cacheQuerySimple, simple, [context.scope, context.pierceShadow], () => {\\n            let css = simple.css;\\n            const funcs = simple.functions;\\n            if (css === '*' && funcs.length)\\n                css = undefined;\\n            let elements;\\n            let firstIndex = -1;\\n            if (css !== undefined) {\\n                elements = this._queryCSS(context, css);\\n            }\\n            else {\\n                firstIndex = funcs.findIndex(func => this._getEngine(func.name).query !== undefined);\\n                if (firstIndex === -1)\\n                    firstIndex = 0;\\n                elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches !== undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches === undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            return elements;\\n        });\\n    }\\n    _matchesParents(element, complex, index, context) {\\n        if (index < 0)\\n            return true;\\n        return this._cached(this._cacheMatchesParents, element, [complex, index, context.scope, context.pierceShadow], () => {\\n            const { selector: simple, combinator } = complex.simples[index];\\n            if (combinator === '>') {\\n                const parent = parentElementOrShadowHostInContext(element, context);\\n                if (!parent || !this._matchesSimple(parent, simple, context))\\n                    return false;\\n                return this._matchesParents(parent, complex, index - 1, context);\\n            }\\n            if (combinator === '+') {\\n                const previousSibling = previousSiblingInContext(element, context);\\n                if (!previousSibling || !this._matchesSimple(previousSibling, simple, context))\\n                    return false;\\n                return this._matchesParents(previousSibling, complex, index - 1, context);\\n            }\\n            if (combinator === '') {\\n                let parent = parentElementOrShadowHostInContext(element, context);\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '~') {\\n                let previousSibling = previousSiblingInContext(element, context);\\n                while (previousSibling) {\\n                    if (this._matchesSimple(previousSibling, simple, context)) {\\n                        if (this._matchesParents(previousSibling, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '~')\\n                            break;\\n                    }\\n                    previousSibling = previousSiblingInContext(previousSibling, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '>=') {\\n                let parent = element;\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            throw new Error(`Unsupported combinator \\\"${combinator}\\\"`);\\n        });\\n    }\\n    _matchesEngine(engine, element, args, context) {\\n        if (engine.matches)\\n            return this._callMatches(engine, element, args, context);\\n        if (engine.query)\\n            return this._callQuery(engine, args, context).includes(element);\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _queryEngine(engine, context, args) {\\n        if (engine.query)\\n            return this._callQuery(engine, args, context);\\n        if (engine.matches)\\n            return this._queryCSS(context, '*').filter(element => this._callMatches(engine, element, args, context));\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _callMatches(engine, element, args, context) {\\n        return this._cached(this._cacheCallMatches, element, [engine, context.scope, context.pierceShadow, ...args], () => {\\n            return engine.matches(element, args, context, this);\\n        });\\n    }\\n    _callQuery(engine, args, context) {\\n        return this._cached(this._cacheCallQuery, engine, [context.scope, context.pierceShadow, ...args], () => {\\n            return engine.query(context, args, this);\\n        });\\n    }\\n    _matchesCSS(element, css) {\\n        return element.matches(css);\\n    }\\n    _queryCSS(context, css) {\\n        return this._cached(this._cacheQueryCSS, css, [context.scope, context.pierceShadow], () => {\\n            let result = [];\\n            function query(root) {\\n                result = result.concat([...root.querySelectorAll(css)]);\\n                if (!context.pierceShadow)\\n                    return;\\n                if (root.shadowRoot)\\n                    query(root.shadowRoot);\\n                for (const element of root.querySelectorAll('*')) {\\n                    if (element.shadowRoot)\\n                        query(element.shadowRoot);\\n                }\\n            }\\n            query(context.scope);\\n            return result;\\n        });\\n    }\\n    _getEngine(name) {\\n        const engine = this._engines.get(name);\\n        if (!engine)\\n            throw new Error(`Unknown selector engine \\\"${name}\\\"`);\\n        return engine;\\n    }\\n}\\nexports.SelectorEvaluatorImpl = SelectorEvaluatorImpl;\\nconst isEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        return args.some(selector => evaluator.matches(element, selector, context));\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        let elements = [];\\n        for (const arg of args)\\n            elements = elements.concat(evaluator.query(context, arg));\\n        return args.length === 1 ? elements : sortInDOMOrder(elements);\\n    },\\n};\\nconst hasEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"has\\\" engine expects non-empty selector list`);\\n        return evaluator.query({ ...context, scope: element }, args).length > 0;\\n    },\\n};\\nconst scopeEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */)\\n            return element === context.scope.documentElement;\\n        return element === context.scope;\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */) {\\n            const root = context.scope.documentElement;\\n            return root ? [root] : [];\\n        }\\n        if (context.scope.nodeType === 1 /* Node.ELEMENT_NODE */)\\n            return [context.scope];\\n        return [];\\n    },\\n};\\nconst notEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"not\\\" engine expects non-empty selector list`);\\n        return !evaluator.matches(element, args, context);\\n    },\\n};\\nconst lightEngine = {\\n    query(context, args, evaluator) {\\n        return evaluator.query({ ...context, pierceShadow: false }, args);\\n    },\\n    matches(element, args, context, evaluator) {\\n        return evaluator.matches(element, args, { ...context, pierceShadow: false });\\n    }\\n};\\nconst visibleEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length)\\n            throw new Error(`\\\"visible\\\" engine expects no arguments`);\\n        return isVisible(element);\\n    }\\n};\\nconst textEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text\\\" engine expects a single string`);\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst textIsEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text-is\\\" engine expects a single string`);\\n        const matcher = createStrictTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) !== 'none';\\n    },\\n};\\nconst textMatchesEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0 || typeof args[0] !== 'string' || args.length > 2 || (args.length === 2 && typeof args[1] !== 'string'))\\n            throw new Error(`\\\"text-matches\\\" engine expects a regexp body and optional regexp flags`);\\n        const matcher = createRegexTextMatcher(args[0], args.length === 2 ? args[1] : undefined);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst hasTextEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"has-text\\\" engine expects a single string`);\\n        if (shouldSkipForTextMatching(element))\\n            return false;\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return matcher(elementText(evaluator, element));\\n    },\\n};\\nfunction createLaxTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n    return (elementText) => {\\n        const s = elementText.full.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n        return s.includes(text);\\n    };\\n}\\nexports.createLaxTextMatcher = createLaxTextMatcher;\\nfunction createStrictTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ');\\n    return (elementText) => {\\n        return elementText.immediate.some(s => s.trim().replace(/\\\\s+/g, ' ') === text);\\n    };\\n}\\nexports.createStrictTextMatcher = createStrictTextMatcher;\\nfunction createRegexTextMatcher(source, flags) {\\n    const re = new RegExp(source, flags);\\n    return (elementText) => {\\n        return re.test(elementText.full);\\n    };\\n}\\nexports.createRegexTextMatcher = createRegexTextMatcher;\\nfunction shouldSkipForTextMatching(element) {\\n    return element.nodeName === 'SCRIPT' || element.nodeName === 'STYLE' || document.head && document.head.contains(element);\\n}\\nfunction elementText(evaluator, root) {\\n    let value = evaluator._cacheText.get(root);\\n    if (value === undefined) {\\n        value = { full: '', immediate: [] };\\n        if (!shouldSkipForTextMatching(root)) {\\n            let currentImmediate = '';\\n            if ((root instanceof HTMLInputElement) && (root.type === 'submit' || root.type === 'button')) {\\n                value = { full: root.value, immediate: [root.value] };\\n            }\\n            else {\\n                for (let child = root.firstChild; child; child = child.nextSibling) {\\n                    if (child.nodeType === Node.TEXT_NODE) {\\n                        value.full += child.nodeValue || '';\\n                        currentImmediate += child.nodeValue || '';\\n                    }\\n                    else {\\n                        if (currentImmediate)\\n                            value.immediate.push(currentImmediate);\\n                        currentImmediate = '';\\n                        if (child.nodeType === Node.ELEMENT_NODE)\\n                            value.full += elementText(evaluator, child).full;\\n                    }\\n                }\\n                if (currentImmediate)\\n                    value.immediate.push(currentImmediate);\\n                if (root.shadowRoot)\\n                    value.full += elementText(evaluator, root.shadowRoot).full;\\n            }\\n        }\\n        evaluator._cacheText.set(root, value);\\n    }\\n    return value;\\n}\\nexports.elementText = elementText;\\nfunction elementMatchesText(evaluator, element, matcher) {\\n    if (shouldSkipForTextMatching(element))\\n        return 'none';\\n    if (!matcher(elementText(evaluator, element)))\\n        return 'none';\\n    for (let child = element.firstChild; child; child = child.nextSibling) {\\n        if (child.nodeType === Node.ELEMENT_NODE && matcher(elementText(evaluator, child)))\\n            return 'selfAndChildren';\\n    }\\n    if (element.shadowRoot && matcher(elementText(evaluator, element.shadowRoot)))\\n        return 'selfAndChildren';\\n    return 'self';\\n}\\nexports.elementMatchesText = elementMatchesText;\\nfunction boxRightOf(box1, box2) {\\n    if (box1.left < box2.right)\\n        return;\\n    return (box1.left - box2.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxLeftOf(box1, box2) {\\n    if (box1.right > box2.left)\\n        return;\\n    return (box2.left - box1.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxAbove(box1, box2) {\\n    if (box1.bottom > box2.top)\\n        return;\\n    return (box2.top - box1.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxBelow(box1, box2) {\\n    if (box1.top < box2.bottom)\\n        return;\\n    return (box1.top - box2.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxNear(box1, box2) {\\n    const kThreshold = 50;\\n    let score = 0;\\n    if (box1.left - box2.right >= 0)\\n        score += box1.left - box2.right;\\n    if (box2.left - box1.right >= 0)\\n        score += box2.left - box1.right;\\n    if (box2.top - box1.bottom >= 0)\\n        score += box2.top - box1.bottom;\\n    if (box1.top - box2.bottom >= 0)\\n        score += box1.top - box2.bottom;\\n    return score > kThreshold ? undefined : score;\\n}\\nfunction createPositionEngine(name, scorer) {\\n    return {\\n        matches(element, args, context, evaluator) {\\n            if (!args.length)\\n                throw new Error(`\\\"${name}\\\" engine expects a selector list`);\\n            const box = element.getBoundingClientRect();\\n            let bestScore;\\n            for (const e of evaluator.query(context, args)) {\\n                if (e === element)\\n                    continue;\\n                const score = scorer(box, e.getBoundingClientRect());\\n                if (score === undefined)\\n                    continue;\\n                if (bestScore === undefined || score < bestScore)\\n                    bestScore = score;\\n            }\\n            if (bestScore === undefined)\\n                return false;\\n            evaluator._markScore(element, bestScore);\\n            return true;\\n        }\\n    };\\n}\\nconst nthMatchEngine = {\\n    query(context, args, evaluator) {\\n        let index = args[args.length - 1];\\n        if (args.length < 2)\\n            throw new Error(`\\\"nth-match\\\" engine expects non-empty selector list and an index argument`);\\n        if (typeof index !== 'number' || index < 1)\\n            throw new Error(`\\\"nth-match\\\" engine expects a one-based index as the last argument`);\\n        const elements = isEngine.query(context, args.slice(0, args.length - 1), evaluator);\\n        index--; // one-based\\n        return index < elements.length ? [elements[index]] : [];\\n    },\\n};\\nfunction parentElementOrShadowHost(element) {\\n    if (element.parentElement)\\n        return element.parentElement;\\n    if (!element.parentNode)\\n        return;\\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\\n        return element.parentNode.host;\\n}\\nexports.parentElementOrShadowHost = parentElementOrShadowHost;\\nfunction parentElementOrShadowHostInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    if (!context.pierceShadow)\\n        return element.parentElement || undefined;\\n    return parentElementOrShadowHost(element);\\n}\\nfunction previousSiblingInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    return element.previousElementSibling || undefined;\\n}\\nfunction isVisible(element) {\\n    // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.\\n    if (!element.ownerDocument || !element.ownerDocument.defaultView)\\n        return true;\\n    const style = element.ownerDocument.defaultView.getComputedStyle(element);\\n    if (!style || style.visibility === 'hidden')\\n        return false;\\n    const rect = element.getBoundingClientRect();\\n    return rect.width > 0 && rect.height > 0;\\n}\\nexports.isVisible = isVisible;\\nfunction sortInDOMOrder(elements) {\\n    const elementToEntry = new Map();\\n    const roots = [];\\n    const result = [];\\n    function append(element) {\\n        let entry = elementToEntry.get(element);\\n        if (entry)\\n            return entry;\\n        const parent = parentElementOrShadowHost(element);\\n        if (parent) {\\n            const parentEntry = append(parent);\\n            parentEntry.children.push(element);\\n        }\\n        else {\\n            roots.push(element);\\n        }\\n        entry = { children: [], taken: false };\\n        elementToEntry.set(element, entry);\\n        return entry;\\n    }\\n    elements.forEach(e => append(e).taken = true);\\n    function visit(element) {\\n        const entry = elementToEntry.get(element);\\n        if (entry.taken)\\n            result.push(element);\\n        if (entry.children.length > 1) {\\n            const set = new Set(entry.children);\\n            entry.children = [];\\n            let child = element.firstElementChild;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n            child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n        }\\n        entry.children.forEach(visit);\\n    }\\n    roots.forEach(visit);\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/xpathSelectorEngine.ts\\\":\\n/*!****************************************************!*\\\\\\n  !*** ./src/server/injected/xpathSelectorEngine.ts ***!\\n  \\\\****************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.XPathEngine = void 0;\\nexports.XPathEngine = {\\n    query(root, selector) {\\n        if (selector.startsWith('/'))\\n            selector = '.' + selector;\\n        const document = root instanceof Document ? root : root.ownerDocument;\\n        if (!document)\\n            return;\\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\\n            if (node.nodeType === Node.ELEMENT_NODE)\\n                return node;\\n        }\\n    },\\n    queryAll(root, selector) {\\n        if (selector.startsWith('/'))\\n            selector = '.' + selector;\\n        const result = [];\\n        const document = root instanceof Document ? root : root.ownerDocument;\\n        if (!document)\\n            return result;\\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\\n            if (node.nodeType === Node.ELEMENT_NODE)\\n                result.push(node);\\n        }\\n        return result;\\n    }\\n};\\n\\n\\n/***/ })\\n\\n/******/ })[\\\"default\\\"];\";\n//# sourceMappingURL=injectedScriptSource.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.source = void 0;\nexports.source = \"var pwExport =\\n/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/server/supplements/injected/recorder.ts\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./src/server/common/cssParser.ts\\\":\\n/*!****************************************!*\\\\\\n  !*** ./src/server/common/cssParser.ts ***!\\n  \\\\****************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\\"default\\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\\"default\\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\\"default\\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.serializeSelector = exports.parseCSS = void 0;\\nconst css = __importStar(__webpack_require__(/*! ./cssTokenizer */ \\\"./src/server/common/cssTokenizer.js\\\"));\\nfunction parseCSS(selector, customNames) {\\n    let tokens;\\n    try {\\n        tokens = css.tokenize(selector);\\n        if (!(tokens[tokens.length - 1] instanceof css.EOFToken))\\n            tokens.push(new css.EOFToken());\\n    }\\n    catch (e) {\\n        const newMessage = e.message + ` while parsing selector \\\"${selector}\\\"`;\\n        const index = (e.stack || '').indexOf(e.message);\\n        if (index !== -1)\\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\\n        e.message = newMessage;\\n        throw e;\\n    }\\n    const unsupportedToken = tokens.find(token => {\\n        return (token instanceof css.AtKeywordToken) ||\\n            (token instanceof css.BadStringToken) ||\\n            (token instanceof css.BadURLToken) ||\\n            (token instanceof css.ColumnToken) ||\\n            (token instanceof css.CDOToken) ||\\n            (token instanceof css.CDCToken) ||\\n            (token instanceof css.SemicolonToken) ||\\n            // TODO: Consider using these for something, e.g. to escape complex strings.\\n            // For example :xpath{ (//div/bar[@attr=\\\"foo\\\"])[2]/baz }\\n            // Or this way :xpath( {complex-xpath-goes-here(\\\"hello\\\")} )\\n            (token instanceof css.OpenCurlyToken) ||\\n            (token instanceof css.CloseCurlyToken) ||\\n            // TODO: Consider treating these as strings?\\n            (token instanceof css.URLToken) ||\\n            (token instanceof css.PercentageToken);\\n    });\\n    if (unsupportedToken)\\n        throw new Error(`Unsupported token \\\"${unsupportedToken.toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    let pos = 0;\\n    const names = new Set();\\n    function unexpected() {\\n        return new Error(`Unexpected token \\\"${tokens[pos].toSource()}\\\" while parsing selector \\\"${selector}\\\"`);\\n    }\\n    function skipWhitespace() {\\n        while (tokens[pos] instanceof css.WhitespaceToken)\\n            pos++;\\n    }\\n    function isIdent(p = pos) {\\n        return tokens[p] instanceof css.IdentToken;\\n    }\\n    function isString(p = pos) {\\n        return tokens[p] instanceof css.StringToken;\\n    }\\n    function isNumber(p = pos) {\\n        return tokens[p] instanceof css.NumberToken;\\n    }\\n    function isComma(p = pos) {\\n        return tokens[p] instanceof css.CommaToken;\\n    }\\n    function isCloseParen(p = pos) {\\n        return tokens[p] instanceof css.CloseParenToken;\\n    }\\n    function isStar(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && tokens[p].value === '*';\\n    }\\n    function isEOF(p = pos) {\\n        return tokens[p] instanceof css.EOFToken;\\n    }\\n    function isClauseCombinator(p = pos) {\\n        return (tokens[p] instanceof css.DelimToken) && (['>', '+', '~'].includes(tokens[p].value));\\n    }\\n    function isSelectorClauseEnd(p = pos) {\\n        return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || (tokens[p] instanceof css.WhitespaceToken);\\n    }\\n    function consumeFunctionArguments() {\\n        const result = [consumeArgument()];\\n        while (true) {\\n            skipWhitespace();\\n            if (!isComma())\\n                break;\\n            pos++;\\n            result.push(consumeArgument());\\n        }\\n        return result;\\n    }\\n    function consumeArgument() {\\n        skipWhitespace();\\n        if (isNumber())\\n            return tokens[pos++].value;\\n        if (isString())\\n            return tokens[pos++].value;\\n        return consumeComplexSelector();\\n    }\\n    function consumeComplexSelector() {\\n        skipWhitespace();\\n        const result = { simples: [{ selector: consumeSimpleSelector(), combinator: '' }] };\\n        while (true) {\\n            skipWhitespace();\\n            if (isClauseCombinator()) {\\n                result.simples[result.simples.length - 1].combinator = tokens[pos++].value;\\n                skipWhitespace();\\n            }\\n            else if (isSelectorClauseEnd()) {\\n                break;\\n            }\\n            result.simples.push({ combinator: '', selector: consumeSimpleSelector() });\\n        }\\n        return result;\\n    }\\n    function consumeSimpleSelector() {\\n        let rawCSSString = '';\\n        const functions = [];\\n        while (!isSelectorClauseEnd()) {\\n            if (isIdent() || isStar()) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if (tokens[pos] instanceof css.HashToken) {\\n                rawCSSString += tokens[pos++].toSource();\\n            }\\n            else if ((tokens[pos] instanceof css.DelimToken) && tokens[pos].value === '.') {\\n                pos++;\\n                if (isIdent())\\n                    rawCSSString += '.' + tokens[pos++].toSource();\\n                else\\n                    throw unexpected();\\n            }\\n            else if (tokens[pos] instanceof css.ColonToken) {\\n                pos++;\\n                if (isIdent()) {\\n                    if (!customNames.has(tokens[pos].value.toLowerCase())) {\\n                        rawCSSString += ':' + tokens[pos++].toSource();\\n                    }\\n                    else {\\n                        const name = tokens[pos++].value.toLowerCase();\\n                        functions.push({ name, args: [] });\\n                        names.add(name);\\n                    }\\n                }\\n                else if (tokens[pos] instanceof css.FunctionToken) {\\n                    const name = tokens[pos++].value.toLowerCase();\\n                    if (!customNames.has(name)) {\\n                        rawCSSString += `:${name}(${consumeBuiltinFunctionArguments()})`;\\n                    }\\n                    else {\\n                        functions.push({ name, args: consumeFunctionArguments() });\\n                        names.add(name);\\n                    }\\n                    skipWhitespace();\\n                    if (!isCloseParen())\\n                        throw unexpected();\\n                    pos++;\\n                }\\n                else {\\n                    throw unexpected();\\n                }\\n            }\\n            else if (tokens[pos] instanceof css.OpenSquareToken) {\\n                rawCSSString += '[';\\n                pos++;\\n                while (!(tokens[pos] instanceof css.CloseSquareToken) && !isEOF())\\n                    rawCSSString += tokens[pos++].toSource();\\n                if (!(tokens[pos] instanceof css.CloseSquareToken))\\n                    throw unexpected();\\n                rawCSSString += ']';\\n                pos++;\\n            }\\n            else {\\n                throw unexpected();\\n            }\\n        }\\n        if (!rawCSSString && !functions.length)\\n            throw unexpected();\\n        return { css: rawCSSString || undefined, functions };\\n    }\\n    function consumeBuiltinFunctionArguments() {\\n        let s = '';\\n        while (!isCloseParen() && !isEOF())\\n            s += tokens[pos++].toSource();\\n        return s;\\n    }\\n    const result = consumeFunctionArguments();\\n    if (!isEOF())\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    if (result.some(arg => typeof arg !== 'object' || !('simples' in arg)))\\n        throw new Error(`Error while parsing selector \\\"${selector}\\\"`);\\n    return { selector: result, names: Array.from(names) };\\n}\\nexports.parseCSS = parseCSS;\\nfunction serializeSelector(args) {\\n    return args.map(arg => {\\n        if (typeof arg === 'string')\\n            return `\\\"${arg}\\\"`;\\n        if (typeof arg === 'number')\\n            return String(arg);\\n        return arg.simples.map(({ selector, combinator }) => {\\n            let s = selector.css || '';\\n            s = s + selector.functions.map(func => `:${func.name}(${serializeSelector(func.args)})`).join('');\\n            if (combinator)\\n                s += ' ' + combinator;\\n            return s;\\n        }).join(' ');\\n    }).join(', ');\\n}\\nexports.serializeSelector = serializeSelector;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/cssTokenizer.js\\\":\\n/*!*******************************************!*\\\\\\n  !*** ./src/server/common/cssTokenizer.js ***!\\n  \\\\*******************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\\n/*\\n * Original at https://github.com/tabatkins/parse-css\\n * licensed under http://creativecommons.org/publicdomain/zero/1.0/\\n *\\n * Modifications copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\n// Changes from https://github.com/tabatkins/parse-css\\n//   - Tabs are replaced with two spaces.\\n//   - Everything not related to tokenizing - below the first exports block - is removed.\\n// @ts-nocheck\\n(function (root, factory) {\\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\\n    // Rhino, and plain browser loading.\\n    if (true) {\\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\\n\\t\\t\\t\\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\\n\\t\\t\\t\\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\\n    }\\n    else {}\\n}(this, function (exports) {\\n    var between = function (num, first, last) { return num >= first && num <= last; };\\n    function digit(code) { return between(code, 0x30, 0x39); }\\n    function hexdigit(code) { return digit(code) || between(code, 0x41, 0x46) || between(code, 0x61, 0x66); }\\n    function uppercaseletter(code) { return between(code, 0x41, 0x5a); }\\n    function lowercaseletter(code) { return between(code, 0x61, 0x7a); }\\n    function letter(code) { return uppercaseletter(code) || lowercaseletter(code); }\\n    function nonascii(code) { return code >= 0x80; }\\n    function namestartchar(code) { return letter(code) || nonascii(code) || code == 0x5f; }\\n    function namechar(code) { return namestartchar(code) || digit(code) || code == 0x2d; }\\n    function nonprintable(code) { return between(code, 0, 8) || code == 0xb || between(code, 0xe, 0x1f) || code == 0x7f; }\\n    function newline(code) { return code == 0xa; }\\n    function whitespace(code) { return newline(code) || code == 9 || code == 0x20; }\\n    function badescape(code) { return newline(code) || isNaN(code); }\\n    var maximumallowedcodepoint = 0x10ffff;\\n    var InvalidCharacterError = function (message) {\\n        this.message = message;\\n    };\\n    InvalidCharacterError.prototype = new Error;\\n    InvalidCharacterError.prototype.name = 'InvalidCharacterError';\\n    function preprocess(str) {\\n        // Turn a string into an array of code points,\\n        // following the preprocessing cleanup rules.\\n        var codepoints = [];\\n        for (var i = 0; i < str.length; i++) {\\n            var code = str.charCodeAt(i);\\n            if (code == 0xd && str.charCodeAt(i + 1) == 0xa) {\\n                code = 0xa;\\n                i++;\\n            }\\n            if (code == 0xd || code == 0xc)\\n                code = 0xa;\\n            if (code == 0x0)\\n                code = 0xfffd;\\n            if (between(code, 0xd800, 0xdbff) && between(str.charCodeAt(i + 1), 0xdc00, 0xdfff)) {\\n                // Decode a surrogate pair into an astral codepoint.\\n                var lead = code - 0xd800;\\n                var trail = str.charCodeAt(i + 1) - 0xdc00;\\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\\n                i++;\\n            }\\n            codepoints.push(code);\\n        }\\n        return codepoints;\\n    }\\n    function stringFromCode(code) {\\n        if (code <= 0xffff)\\n            return String.fromCharCode(code);\\n        // Otherwise, encode astral char as surrogate pair.\\n        code -= Math.pow(2, 16);\\n        var lead = Math.floor(code / Math.pow(2, 10)) + 0xd800;\\n        var trail = code % Math.pow(2, 10) + 0xdc00;\\n        return String.fromCharCode(lead) + String.fromCharCode(trail);\\n    }\\n    function tokenize(str) {\\n        str = preprocess(str);\\n        var i = -1;\\n        var tokens = [];\\n        var code;\\n        // Line number information.\\n        var line = 0;\\n        var column = 0;\\n        // The only use of lastLineLength is in reconsume().\\n        var lastLineLength = 0;\\n        var incrLineno = function () {\\n            line += 1;\\n            lastLineLength = column;\\n            column = 0;\\n        };\\n        var locStart = { line: line, column: column };\\n        var codepoint = function (i) {\\n            if (i >= str.length) {\\n                return -1;\\n            }\\n            return str[i];\\n        };\\n        var next = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            if (num > 3)\\n                throw \\\"Spec Error: no more than three codepoints of lookahead.\\\";\\n            return codepoint(i + num);\\n        };\\n        var consume = function (num) {\\n            if (num === undefined)\\n                num = 1;\\n            i += num;\\n            code = codepoint(i);\\n            if (newline(code))\\n                incrLineno();\\n            else\\n                column += num;\\n            //console.log('Consume '+i+' '+String.fromCharCode(code) + ' 0x' + code.toString(16));\\n            return true;\\n        };\\n        var reconsume = function () {\\n            i -= 1;\\n            if (newline(code)) {\\n                line -= 1;\\n                column = lastLineLength;\\n            }\\n            else {\\n                column -= 1;\\n            }\\n            locStart.line = line;\\n            locStart.column = column;\\n            return true;\\n        };\\n        var eof = function (codepoint) {\\n            if (codepoint === undefined)\\n                codepoint = code;\\n            return codepoint == -1;\\n        };\\n        var donothing = function () { };\\n        var parseerror = function () { console.log(\\\"Parse error at index \\\" + i + \\\", processing codepoint 0x\\\" + code.toString(16) + \\\".\\\"); return true; };\\n        var consumeAToken = function () {\\n            consumeComments();\\n            consume();\\n            if (whitespace(code)) {\\n                while (whitespace(next()))\\n                    consume();\\n                return new WhitespaceToken;\\n            }\\n            else if (code == 0x22)\\n                return consumeAStringToken();\\n            else if (code == 0x23) {\\n                if (namechar(next()) || areAValidEscape(next(1), next(2))) {\\n                    var token = new HashToken();\\n                    if (wouldStartAnIdentifier(next(1), next(2), next(3)))\\n                        token.type = \\\"id\\\";\\n                    token.value = consumeAName();\\n                    return token;\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x24) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SuffixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x27)\\n                return consumeAStringToken();\\n            else if (code == 0x28)\\n                return new OpenParenToken();\\n            else if (code == 0x29)\\n                return new CloseParenToken();\\n            else if (code == 0x2a) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new SubstringMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2b) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2c)\\n                return new CommaToken();\\n            else if (code == 0x2d) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else if (next(1) == 0x2d && next(2) == 0x3e) {\\n                    consume(2);\\n                    return new CDCToken();\\n                }\\n                else if (startsWithAnIdentifier()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x2e) {\\n                if (startsWithANumber()) {\\n                    reconsume();\\n                    return consumeANumericToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x3a)\\n                return new ColonToken;\\n            else if (code == 0x3b)\\n                return new SemicolonToken;\\n            else if (code == 0x3c) {\\n                if (next(1) == 0x21 && next(2) == 0x2d && next(3) == 0x2d) {\\n                    consume(3);\\n                    return new CDOToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x40) {\\n                if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                    return new AtKeywordToken(consumeAName());\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5b)\\n                return new OpenSquareToken();\\n            else if (code == 0x5c) {\\n                if (startsWithAValidEscape()) {\\n                    reconsume();\\n                    return consumeAnIdentlikeToken();\\n                }\\n                else {\\n                    parseerror();\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x5d)\\n                return new CloseSquareToken();\\n            else if (code == 0x5e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new PrefixMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7b)\\n                return new OpenCurlyToken();\\n            else if (code == 0x7c) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new DashMatchToken();\\n                }\\n                else if (next() == 0x7c) {\\n                    consume();\\n                    return new ColumnToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (code == 0x7d)\\n                return new CloseCurlyToken();\\n            else if (code == 0x7e) {\\n                if (next() == 0x3d) {\\n                    consume();\\n                    return new IncludeMatchToken();\\n                }\\n                else {\\n                    return new DelimToken(code);\\n                }\\n            }\\n            else if (digit(code)) {\\n                reconsume();\\n                return consumeANumericToken();\\n            }\\n            else if (namestartchar(code)) {\\n                reconsume();\\n                return consumeAnIdentlikeToken();\\n            }\\n            else if (eof())\\n                return new EOFToken();\\n            else\\n                return new DelimToken(code);\\n        };\\n        var consumeComments = function () {\\n            while (next(1) == 0x2f && next(2) == 0x2a) {\\n                consume(2);\\n                while (true) {\\n                    consume();\\n                    if (code == 0x2a && next() == 0x2f) {\\n                        consume();\\n                        break;\\n                    }\\n                    else if (eof()) {\\n                        parseerror();\\n                        return;\\n                    }\\n                }\\n            }\\n        };\\n        var consumeANumericToken = function () {\\n            var num = consumeANumber();\\n            if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\\n                var token = new DimensionToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                token.unit = consumeAName();\\n                return token;\\n            }\\n            else if (next() == 0x25) {\\n                consume();\\n                var token = new PercentageToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                return token;\\n            }\\n            else {\\n                var token = new NumberToken();\\n                token.value = num.value;\\n                token.repr = num.repr;\\n                token.type = num.type;\\n                return token;\\n            }\\n        };\\n        var consumeAnIdentlikeToken = function () {\\n            var str = consumeAName();\\n            if (str.toLowerCase() == \\\"url\\\" && next() == 0x28) {\\n                consume();\\n                while (whitespace(next(1)) && whitespace(next(2)))\\n                    consume();\\n                if (next() == 0x22 || next() == 0x27) {\\n                    return new FunctionToken(str);\\n                }\\n                else if (whitespace(next()) && (next(2) == 0x22 || next(2) == 0x27)) {\\n                    return new FunctionToken(str);\\n                }\\n                else {\\n                    return consumeAURLToken();\\n                }\\n            }\\n            else if (next() == 0x28) {\\n                consume();\\n                return new FunctionToken(str);\\n            }\\n            else {\\n                return new IdentToken(str);\\n            }\\n        };\\n        var consumeAStringToken = function (endingCodePoint) {\\n            if (endingCodePoint === undefined)\\n                endingCodePoint = code;\\n            var string = \\\"\\\";\\n            while (consume()) {\\n                if (code == endingCodePoint || eof()) {\\n                    return new StringToken(string);\\n                }\\n                else if (newline(code)) {\\n                    parseerror();\\n                    reconsume();\\n                    return new BadStringToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (eof(next())) {\\n                        donothing();\\n                    }\\n                    else if (newline(next())) {\\n                        consume();\\n                    }\\n                    else {\\n                        string += stringFromCode(consumeEscape());\\n                    }\\n                }\\n                else {\\n                    string += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeAURLToken = function () {\\n            var token = new URLToken(\\\"\\\");\\n            while (whitespace(next()))\\n                consume();\\n            if (eof(next()))\\n                return token;\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return token;\\n                }\\n                else if (whitespace(code)) {\\n                    while (whitespace(next()))\\n                        consume();\\n                    if (next() == 0x29 || eof(next())) {\\n                        consume();\\n                        return token;\\n                    }\\n                    else {\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else if (code == 0x22 || code == 0x27 || code == 0x28 || nonprintable(code)) {\\n                    parseerror();\\n                    consumeTheRemnantsOfABadURL();\\n                    return new BadURLToken();\\n                }\\n                else if (code == 0x5c) {\\n                    if (startsWithAValidEscape()) {\\n                        token.value += stringFromCode(consumeEscape());\\n                    }\\n                    else {\\n                        parseerror();\\n                        consumeTheRemnantsOfABadURL();\\n                        return new BadURLToken();\\n                    }\\n                }\\n                else {\\n                    token.value += stringFromCode(code);\\n                }\\n            }\\n        };\\n        var consumeEscape = function () {\\n            // Assume the the current character is the \\\\\\n            // and the next code point is not a newline.\\n            consume();\\n            if (hexdigit(code)) {\\n                // Consume 1-6 hex digits\\n                var digits = [code];\\n                for (var total = 0; total < 5; total++) {\\n                    if (hexdigit(next())) {\\n                        consume();\\n                        digits.push(code);\\n                    }\\n                    else {\\n                        break;\\n                    }\\n                }\\n                if (whitespace(next()))\\n                    consume();\\n                var value = parseInt(digits.map(function (x) { return String.fromCharCode(x); }).join(''), 16);\\n                if (value > maximumallowedcodepoint)\\n                    value = 0xfffd;\\n                return value;\\n            }\\n            else if (eof()) {\\n                return 0xfffd;\\n            }\\n            else {\\n                return code;\\n            }\\n        };\\n        var areAValidEscape = function (c1, c2) {\\n            if (c1 != 0x5c)\\n                return false;\\n            if (newline(c2))\\n                return false;\\n            return true;\\n        };\\n        var startsWithAValidEscape = function () {\\n            return areAValidEscape(code, next());\\n        };\\n        var wouldStartAnIdentifier = function (c1, c2, c3) {\\n            if (c1 == 0x2d) {\\n                return namestartchar(c2) || c2 == 0x2d || areAValidEscape(c2, c3);\\n            }\\n            else if (namestartchar(c1)) {\\n                return true;\\n            }\\n            else if (c1 == 0x5c) {\\n                return areAValidEscape(c1, c2);\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithAnIdentifier = function () {\\n            return wouldStartAnIdentifier(code, next(1), next(2));\\n        };\\n        var wouldStartANumber = function (c1, c2, c3) {\\n            if (c1 == 0x2b || c1 == 0x2d) {\\n                if (digit(c2))\\n                    return true;\\n                if (c2 == 0x2e && digit(c3))\\n                    return true;\\n                return false;\\n            }\\n            else if (c1 == 0x2e) {\\n                if (digit(c2))\\n                    return true;\\n                return false;\\n            }\\n            else if (digit(c1)) {\\n                return true;\\n            }\\n            else {\\n                return false;\\n            }\\n        };\\n        var startsWithANumber = function () {\\n            return wouldStartANumber(code, next(1), next(2));\\n        };\\n        var consumeAName = function () {\\n            var result = \\\"\\\";\\n            while (consume()) {\\n                if (namechar(code)) {\\n                    result += stringFromCode(code);\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    result += stringFromCode(consumeEscape());\\n                }\\n                else {\\n                    reconsume();\\n                    return result;\\n                }\\n            }\\n        };\\n        var consumeANumber = function () {\\n            var repr = [];\\n            var type = \\\"integer\\\";\\n            if (next() == 0x2b || next() == 0x2d) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            while (digit(next())) {\\n                consume();\\n                repr += stringFromCode(code);\\n            }\\n            if (next(1) == 0x2e && digit(next(2))) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var c1 = next(1), c2 = next(2), c3 = next(3);\\n            if ((c1 == 0x45 || c1 == 0x65) && digit(c2)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            else if ((c1 == 0x45 || c1 == 0x65) && (c2 == 0x2b || c2 == 0x2d) && digit(c3)) {\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                consume();\\n                repr += stringFromCode(code);\\n                type = \\\"number\\\";\\n                while (digit(next())) {\\n                    consume();\\n                    repr += stringFromCode(code);\\n                }\\n            }\\n            var value = convertAStringToANumber(repr);\\n            return { type: type, value: value, repr: repr };\\n        };\\n        var convertAStringToANumber = function (string) {\\n            // CSS's number rules are identical to JS, afaik.\\n            return +string;\\n        };\\n        var consumeTheRemnantsOfABadURL = function () {\\n            while (consume()) {\\n                if (code == 0x29 || eof()) {\\n                    return;\\n                }\\n                else if (startsWithAValidEscape()) {\\n                    consumeEscape();\\n                    donothing();\\n                }\\n                else {\\n                    donothing();\\n                }\\n            }\\n        };\\n        var iterationCount = 0;\\n        while (!eof(next())) {\\n            tokens.push(consumeAToken());\\n            iterationCount++;\\n            if (iterationCount > str.length * 2)\\n                return \\\"I'm infinite-looping!\\\";\\n        }\\n        return tokens;\\n    }\\n    function CSSParserToken() { throw \\\"Abstract Base Class\\\"; }\\n    CSSParserToken.prototype.toJSON = function () {\\n        return { token: this.tokenType };\\n    };\\n    CSSParserToken.prototype.toString = function () { return this.tokenType; };\\n    CSSParserToken.prototype.toSource = function () { return '' + this; };\\n    function BadStringToken() { return this; }\\n    BadStringToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadStringToken.prototype.tokenType = \\\"BADSTRING\\\";\\n    function BadURLToken() { return this; }\\n    BadURLToken.prototype = Object.create(CSSParserToken.prototype);\\n    BadURLToken.prototype.tokenType = \\\"BADURL\\\";\\n    function WhitespaceToken() { return this; }\\n    WhitespaceToken.prototype = Object.create(CSSParserToken.prototype);\\n    WhitespaceToken.prototype.tokenType = \\\"WHITESPACE\\\";\\n    WhitespaceToken.prototype.toString = function () { return \\\"WS\\\"; };\\n    WhitespaceToken.prototype.toSource = function () { return \\\" \\\"; };\\n    function CDOToken() { return this; }\\n    CDOToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDOToken.prototype.tokenType = \\\"CDO\\\";\\n    CDOToken.prototype.toSource = function () { return \\\"<!--\\\"; };\\n    function CDCToken() { return this; }\\n    CDCToken.prototype = Object.create(CSSParserToken.prototype);\\n    CDCToken.prototype.tokenType = \\\"CDC\\\";\\n    CDCToken.prototype.toSource = function () { return \\\"-->\\\"; };\\n    function ColonToken() { return this; }\\n    ColonToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColonToken.prototype.tokenType = \\\":\\\";\\n    function SemicolonToken() { return this; }\\n    SemicolonToken.prototype = Object.create(CSSParserToken.prototype);\\n    SemicolonToken.prototype.tokenType = \\\";\\\";\\n    function CommaToken() { return this; }\\n    CommaToken.prototype = Object.create(CSSParserToken.prototype);\\n    CommaToken.prototype.tokenType = \\\",\\\";\\n    function GroupingToken() { throw \\\"Abstract Base Class\\\"; }\\n    GroupingToken.prototype = Object.create(CSSParserToken.prototype);\\n    function OpenCurlyToken() { this.value = \\\"{\\\"; this.mirror = \\\"}\\\"; return this; }\\n    OpenCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenCurlyToken.prototype.tokenType = \\\"{\\\";\\n    function CloseCurlyToken() { this.value = \\\"}\\\"; this.mirror = \\\"{\\\"; return this; }\\n    CloseCurlyToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseCurlyToken.prototype.tokenType = \\\"}\\\";\\n    function OpenSquareToken() { this.value = \\\"[\\\"; this.mirror = \\\"]\\\"; return this; }\\n    OpenSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenSquareToken.prototype.tokenType = \\\"[\\\";\\n    function CloseSquareToken() { this.value = \\\"]\\\"; this.mirror = \\\"[\\\"; return this; }\\n    CloseSquareToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseSquareToken.prototype.tokenType = \\\"]\\\";\\n    function OpenParenToken() { this.value = \\\"(\\\"; this.mirror = \\\")\\\"; return this; }\\n    OpenParenToken.prototype = Object.create(GroupingToken.prototype);\\n    OpenParenToken.prototype.tokenType = \\\"(\\\";\\n    function CloseParenToken() { this.value = \\\")\\\"; this.mirror = \\\"(\\\"; return this; }\\n    CloseParenToken.prototype = Object.create(GroupingToken.prototype);\\n    CloseParenToken.prototype.tokenType = \\\")\\\";\\n    function IncludeMatchToken() { return this; }\\n    IncludeMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    IncludeMatchToken.prototype.tokenType = \\\"~=\\\";\\n    function DashMatchToken() { return this; }\\n    DashMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    DashMatchToken.prototype.tokenType = \\\"|=\\\";\\n    function PrefixMatchToken() { return this; }\\n    PrefixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    PrefixMatchToken.prototype.tokenType = \\\"^=\\\";\\n    function SuffixMatchToken() { return this; }\\n    SuffixMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SuffixMatchToken.prototype.tokenType = \\\"$=\\\";\\n    function SubstringMatchToken() { return this; }\\n    SubstringMatchToken.prototype = Object.create(CSSParserToken.prototype);\\n    SubstringMatchToken.prototype.tokenType = \\\"*=\\\";\\n    function ColumnToken() { return this; }\\n    ColumnToken.prototype = Object.create(CSSParserToken.prototype);\\n    ColumnToken.prototype.tokenType = \\\"||\\\";\\n    function EOFToken() { return this; }\\n    EOFToken.prototype = Object.create(CSSParserToken.prototype);\\n    EOFToken.prototype.tokenType = \\\"EOF\\\";\\n    EOFToken.prototype.toSource = function () { return \\\"\\\"; };\\n    function DelimToken(code) {\\n        this.value = stringFromCode(code);\\n        return this;\\n    }\\n    DelimToken.prototype = Object.create(CSSParserToken.prototype);\\n    DelimToken.prototype.tokenType = \\\"DELIM\\\";\\n    DelimToken.prototype.toString = function () { return \\\"DELIM(\\\" + this.value + \\\")\\\"; };\\n    DelimToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    DelimToken.prototype.toSource = function () {\\n        if (this.value == \\\"\\\\\\\\\\\")\\n            return \\\"\\\\\\\\\\\\n\\\";\\n        else\\n            return this.value;\\n    };\\n    function StringValuedToken() { throw \\\"Abstract Base Class\\\"; }\\n    StringValuedToken.prototype = Object.create(CSSParserToken.prototype);\\n    StringValuedToken.prototype.ASCIIMatch = function (str) {\\n        return this.value.toLowerCase() == str.toLowerCase();\\n    };\\n    StringValuedToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        return json;\\n    };\\n    function IdentToken(val) {\\n        this.value = val;\\n    }\\n    IdentToken.prototype = Object.create(StringValuedToken.prototype);\\n    IdentToken.prototype.tokenType = \\\"IDENT\\\";\\n    IdentToken.prototype.toString = function () { return \\\"IDENT(\\\" + this.value + \\\")\\\"; };\\n    IdentToken.prototype.toSource = function () {\\n        return escapeIdent(this.value);\\n    };\\n    function FunctionToken(val) {\\n        this.value = val;\\n        this.mirror = \\\")\\\";\\n    }\\n    FunctionToken.prototype = Object.create(StringValuedToken.prototype);\\n    FunctionToken.prototype.tokenType = \\\"FUNCTION\\\";\\n    FunctionToken.prototype.toString = function () { return \\\"FUNCTION(\\\" + this.value + \\\")\\\"; };\\n    FunctionToken.prototype.toSource = function () {\\n        return escapeIdent(this.value) + \\\"(\\\";\\n    };\\n    function AtKeywordToken(val) {\\n        this.value = val;\\n    }\\n    AtKeywordToken.prototype = Object.create(StringValuedToken.prototype);\\n    AtKeywordToken.prototype.tokenType = \\\"AT-KEYWORD\\\";\\n    AtKeywordToken.prototype.toString = function () { return \\\"AT(\\\" + this.value + \\\")\\\"; };\\n    AtKeywordToken.prototype.toSource = function () {\\n        return \\\"@\\\" + escapeIdent(this.value);\\n    };\\n    function HashToken(val) {\\n        this.value = val;\\n        this.type = \\\"unrestricted\\\";\\n    }\\n    HashToken.prototype = Object.create(StringValuedToken.prototype);\\n    HashToken.prototype.tokenType = \\\"HASH\\\";\\n    HashToken.prototype.toString = function () { return \\\"HASH(\\\" + this.value + \\\")\\\"; };\\n    HashToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        return json;\\n    };\\n    HashToken.prototype.toSource = function () {\\n        if (this.type == \\\"id\\\") {\\n            return \\\"#\\\" + escapeIdent(this.value);\\n        }\\n        else {\\n            return \\\"#\\\" + escapeHash(this.value);\\n        }\\n    };\\n    function StringToken(val) {\\n        this.value = val;\\n    }\\n    StringToken.prototype = Object.create(StringValuedToken.prototype);\\n    StringToken.prototype.tokenType = \\\"STRING\\\";\\n    StringToken.prototype.toString = function () {\\n        return '\\\"' + escapeString(this.value) + '\\\"';\\n    };\\n    function URLToken(val) {\\n        this.value = val;\\n    }\\n    URLToken.prototype = Object.create(StringValuedToken.prototype);\\n    URLToken.prototype.tokenType = \\\"URL\\\";\\n    URLToken.prototype.toString = function () { return \\\"URL(\\\" + this.value + \\\")\\\"; };\\n    URLToken.prototype.toSource = function () {\\n        return 'url(\\\"' + escapeString(this.value) + '\\\")';\\n    };\\n    function NumberToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n    }\\n    NumberToken.prototype = Object.create(CSSParserToken.prototype);\\n    NumberToken.prototype.tokenType = \\\"NUMBER\\\";\\n    NumberToken.prototype.toString = function () {\\n        if (this.type == \\\"integer\\\")\\n            return \\\"INT(\\\" + this.value + \\\")\\\";\\n        return \\\"NUMBER(\\\" + this.value + \\\")\\\";\\n    };\\n    NumberToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    NumberToken.prototype.toSource = function () { return this.repr; };\\n    function PercentageToken() {\\n        this.value = null;\\n        this.repr = \\\"\\\";\\n    }\\n    PercentageToken.prototype = Object.create(CSSParserToken.prototype);\\n    PercentageToken.prototype.tokenType = \\\"PERCENTAGE\\\";\\n    PercentageToken.prototype.toString = function () { return \\\"PERCENTAGE(\\\" + this.value + \\\")\\\"; };\\n    PercentageToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.repr = this.repr;\\n        return json;\\n    };\\n    PercentageToken.prototype.toSource = function () { return this.repr + \\\"%\\\"; };\\n    function DimensionToken() {\\n        this.value = null;\\n        this.type = \\\"integer\\\";\\n        this.repr = \\\"\\\";\\n        this.unit = \\\"\\\";\\n    }\\n    DimensionToken.prototype = Object.create(CSSParserToken.prototype);\\n    DimensionToken.prototype.tokenType = \\\"DIMENSION\\\";\\n    DimensionToken.prototype.toString = function () { return \\\"DIM(\\\" + this.value + \\\",\\\" + this.unit + \\\")\\\"; };\\n    DimensionToken.prototype.toJSON = function () {\\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\\n        json.value = this.value;\\n        json.type = this.type;\\n        json.repr = this.repr;\\n        json.unit = this.unit;\\n        return json;\\n    };\\n    DimensionToken.prototype.toSource = function () {\\n        var source = this.repr;\\n        var unit = escapeIdent(this.unit);\\n        if (unit[0].toLowerCase() == \\\"e\\\" && (unit[1] == \\\"-\\\" || between(unit.charCodeAt(1), 0x30, 0x39))) {\\n            // Unit is ambiguous with scinot\\n            // Remove the leading \\\"e\\\", replace with escape.\\n            unit = \\\"\\\\\\\\65 \\\" + unit.slice(1, unit.length);\\n        }\\n        return source + unit;\\n    };\\n    function escapeIdent(string) {\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f ||\\n                (i == 0 && between(code, 0x30, 0x39)) ||\\n                (i == 1 && between(code, 0x30, 0x39) && firstcode == 0x2d)) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeHash(string) {\\n        // Escapes the contents of \\\"unrestricted\\\"-type hash tokens.\\n        // Won't preserve the ID-ness of \\\"id\\\"-type hash tokens;\\n        // use escapeIdent() for that.\\n        string = '' + string;\\n        var result = '';\\n        var firstcode = string.charCodeAt(0);\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (code >= 0x80 ||\\n                code == 0x2d ||\\n                code == 0x5f ||\\n                between(code, 0x30, 0x39) ||\\n                between(code, 0x41, 0x5a) ||\\n                between(code, 0x61, 0x7a)) {\\n                result += string[i];\\n            }\\n            else {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n        }\\n        return result;\\n    }\\n    function escapeString(string) {\\n        string = '' + string;\\n        var result = '';\\n        for (var i = 0; i < string.length; i++) {\\n            var code = string.charCodeAt(i);\\n            if (code == 0x0) {\\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\\n            }\\n            if (between(code, 0x1, 0x1f) || code == 0x7f) {\\n                result += '\\\\\\\\' + code.toString(16) + ' ';\\n            }\\n            else if (code == 0x22 || code == 0x5c) {\\n                result += '\\\\\\\\' + string[i];\\n            }\\n            else {\\n                result += string[i];\\n            }\\n        }\\n        return result;\\n    }\\n    // Exportation.\\n    exports.tokenize = tokenize;\\n    exports.IdentToken = IdentToken;\\n    exports.FunctionToken = FunctionToken;\\n    exports.AtKeywordToken = AtKeywordToken;\\n    exports.HashToken = HashToken;\\n    exports.StringToken = StringToken;\\n    exports.BadStringToken = BadStringToken;\\n    exports.URLToken = URLToken;\\n    exports.BadURLToken = BadURLToken;\\n    exports.DelimToken = DelimToken;\\n    exports.NumberToken = NumberToken;\\n    exports.PercentageToken = PercentageToken;\\n    exports.DimensionToken = DimensionToken;\\n    exports.IncludeMatchToken = IncludeMatchToken;\\n    exports.DashMatchToken = DashMatchToken;\\n    exports.PrefixMatchToken = PrefixMatchToken;\\n    exports.SuffixMatchToken = SuffixMatchToken;\\n    exports.SubstringMatchToken = SubstringMatchToken;\\n    exports.ColumnToken = ColumnToken;\\n    exports.WhitespaceToken = WhitespaceToken;\\n    exports.CDOToken = CDOToken;\\n    exports.CDCToken = CDCToken;\\n    exports.ColonToken = ColonToken;\\n    exports.SemicolonToken = SemicolonToken;\\n    exports.CommaToken = CommaToken;\\n    exports.OpenParenToken = OpenParenToken;\\n    exports.CloseParenToken = CloseParenToken;\\n    exports.OpenSquareToken = OpenSquareToken;\\n    exports.CloseSquareToken = CloseSquareToken;\\n    exports.OpenCurlyToken = OpenCurlyToken;\\n    exports.CloseCurlyToken = CloseCurlyToken;\\n    exports.EOFToken = EOFToken;\\n    exports.CSSParserToken = CSSParserToken;\\n    exports.GroupingToken = GroupingToken;\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/selectorParser.ts\\\":\\n/*!*********************************************!*\\\\\\n  !*** ./src/server/common/selectorParser.ts ***!\\n  \\\\*********************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.parseSelector = exports.customCSSNames = void 0;\\nconst cssParser_1 = __webpack_require__(/*! ./cssParser */ \\\"./src/server/common/cssParser.ts\\\");\\nexports.customCSSNames = new Set(['not', 'is', 'where', 'has', 'scope', 'light', 'visible', 'text', 'text-matches', 'text-is', 'has-text', 'above', 'below', 'right-of', 'left-of', 'near', 'nth-match']);\\nfunction parseSelector(selector) {\\n    const result = parseSelectorV1(selector);\\n    result.parts = result.parts.map(part => {\\n        if (Array.isArray(part))\\n            return part;\\n        if (part.name === 'css' || part.name === 'css:light') {\\n            if (part.name === 'css:light')\\n                part.body = ':light(' + part.body + ')';\\n            const parsedCSS = cssParser_1.parseCSS(part.body, exports.customCSSNames);\\n            return parsedCSS.selector;\\n        }\\n        return part;\\n    });\\n    return {\\n        parts: result.parts,\\n        capture: result.capture,\\n    };\\n}\\nexports.parseSelector = parseSelector;\\nfunction parseSelectorV1(selector) {\\n    let index = 0;\\n    let quote;\\n    let start = 0;\\n    const result = { parts: [] };\\n    const append = () => {\\n        const part = selector.substring(start, index).trim();\\n        const eqIndex = part.indexOf('=');\\n        let name;\\n        let body;\\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\\n            name = part.substring(0, eqIndex).trim();\\n            body = part.substring(eqIndex + 1);\\n        }\\n        else if (part.length > 1 && part[0] === '\\\"' && part[part.length - 1] === '\\\"') {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (part.length > 1 && part[0] === \\\"'\\\" && part[part.length - 1] === \\\"'\\\") {\\n            name = 'text';\\n            body = part;\\n        }\\n        else if (/^\\\\(*\\\\/\\\\//.test(part) || part.startsWith('..')) {\\n            // If selector starts with '//' or '//' prefixed with multiple opening\\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\\n            // If selector starts with '..', consider xpath as well.\\n            name = 'xpath';\\n            body = part;\\n        }\\n        else {\\n            name = 'css';\\n            body = part;\\n        }\\n        let capture = false;\\n        if (name[0] === '*') {\\n            capture = true;\\n            name = name.substring(1);\\n        }\\n        result.parts.push({ name, body });\\n        if (capture) {\\n            if (result.capture !== undefined)\\n                throw new Error(`Only one of the selectors can capture using * modifier`);\\n            result.capture = result.parts.length - 1;\\n        }\\n    };\\n    if (!selector.includes('>>')) {\\n        index = selector.length;\\n        append();\\n        return result;\\n    }\\n    while (index < selector.length) {\\n        const c = selector[index];\\n        if (c === '\\\\\\\\' && index + 1 < selector.length) {\\n            index += 2;\\n        }\\n        else if (c === quote) {\\n            quote = undefined;\\n            index++;\\n        }\\n        else if (!quote && (c === '\\\"' || c === '\\\\'' || c === '`')) {\\n            quote = c;\\n            index++;\\n        }\\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\\n            append();\\n            index += 2;\\n            start = index;\\n        }\\n        else {\\n            index++;\\n        }\\n    }\\n    append();\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/selectorEvaluator.ts\\\":\\n/*!**************************************************!*\\\\\\n  !*** ./src/server/injected/selectorEvaluator.ts ***!\\n  \\\\**************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.isVisible = exports.parentElementOrShadowHost = exports.elementMatchesText = exports.elementText = exports.createRegexTextMatcher = exports.createStrictTextMatcher = exports.createLaxTextMatcher = exports.SelectorEvaluatorImpl = void 0;\\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \\\"./src/server/common/selectorParser.ts\\\");\\nclass SelectorEvaluatorImpl {\\n    constructor(extraEngines) {\\n        this._engines = new Map();\\n        this._cacheQueryCSS = new Map();\\n        this._cacheMatches = new Map();\\n        this._cacheQuery = new Map();\\n        this._cacheMatchesSimple = new Map();\\n        this._cacheMatchesParents = new Map();\\n        this._cacheCallMatches = new Map();\\n        this._cacheCallQuery = new Map();\\n        this._cacheQuerySimple = new Map();\\n        this._cacheText = new Map();\\n        this._retainCacheCounter = 0;\\n        for (const [name, engine] of extraEngines)\\n            this._engines.set(name, engine);\\n        this._engines.set('not', notEngine);\\n        this._engines.set('is', isEngine);\\n        this._engines.set('where', isEngine);\\n        this._engines.set('has', hasEngine);\\n        this._engines.set('scope', scopeEngine);\\n        this._engines.set('light', lightEngine);\\n        this._engines.set('visible', visibleEngine);\\n        this._engines.set('text', textEngine);\\n        this._engines.set('text-is', textIsEngine);\\n        this._engines.set('text-matches', textMatchesEngine);\\n        this._engines.set('has-text', hasTextEngine);\\n        this._engines.set('right-of', createPositionEngine('right-of', boxRightOf));\\n        this._engines.set('left-of', createPositionEngine('left-of', boxLeftOf));\\n        this._engines.set('above', createPositionEngine('above', boxAbove));\\n        this._engines.set('below', createPositionEngine('below', boxBelow));\\n        this._engines.set('near', createPositionEngine('near', boxNear));\\n        this._engines.set('nth-match', nthMatchEngine);\\n        const allNames = Array.from(this._engines.keys());\\n        allNames.sort();\\n        const parserNames = Array.from(selectorParser_1.customCSSNames).slice();\\n        parserNames.sort();\\n        if (allNames.join('|') !== parserNames.join('|'))\\n            throw new Error(`Please keep customCSSNames in sync with evaluator engines`);\\n    }\\n    begin() {\\n        ++this._retainCacheCounter;\\n    }\\n    end() {\\n        --this._retainCacheCounter;\\n        if (!this._retainCacheCounter) {\\n            this._cacheQueryCSS.clear();\\n            this._cacheMatches.clear();\\n            this._cacheQuery.clear();\\n            this._cacheMatchesSimple.clear();\\n            this._cacheMatchesParents.clear();\\n            this._cacheCallMatches.clear();\\n            this._cacheCallQuery.clear();\\n            this._cacheQuerySimple.clear();\\n            this._cacheText.clear();\\n        }\\n    }\\n    _cached(cache, main, rest, cb) {\\n        if (!cache.has(main))\\n            cache.set(main, []);\\n        const entries = cache.get(main);\\n        const entry = entries.find(e => rest.every((value, index) => e.rest[index] === value));\\n        if (entry)\\n            return entry.result;\\n        const result = cb();\\n        entries.push({ rest, result });\\n        return result;\\n    }\\n    _checkSelector(s) {\\n        const wellFormed = typeof s === 'object' && s &&\\n            (Array.isArray(s) || ('simples' in s) && (s.simples.length));\\n        if (!wellFormed)\\n            throw new Error(`Malformed selector \\\"${s}\\\"`);\\n        return s;\\n    }\\n    matches(element, s, context) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheMatches, element, [selector, context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._matchesEngine(isEngine, element, selector, context);\\n                if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context))\\n                    return false;\\n                return this._matchesParents(element, selector, selector.simples.length - 2, context);\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    query(context, s) {\\n        const selector = this._checkSelector(s);\\n        this.begin();\\n        try {\\n            return this._cached(this._cacheQuery, selector, [context.scope, context.pierceShadow], () => {\\n                if (Array.isArray(selector))\\n                    return this._queryEngine(isEngine, context, selector);\\n                // query() recursively calls itself, so we set up a new map for this particular query() call.\\n                const previousScoreMap = this._scoreMap;\\n                this._scoreMap = new Map();\\n                let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);\\n                elements = elements.filter(element => this._matchesParents(element, selector, selector.simples.length - 2, context));\\n                if (this._scoreMap.size) {\\n                    elements.sort((a, b) => {\\n                        const aScore = this._scoreMap.get(a);\\n                        const bScore = this._scoreMap.get(b);\\n                        if (aScore === bScore)\\n                            return 0;\\n                        if (aScore === undefined)\\n                            return 1;\\n                        if (bScore === undefined)\\n                            return -1;\\n                        return aScore - bScore;\\n                    });\\n                }\\n                this._scoreMap = previousScoreMap;\\n                return elements;\\n            });\\n        }\\n        finally {\\n            this.end();\\n        }\\n    }\\n    _markScore(element, score) {\\n        // HACK ALERT: temporary marks an element with a score, to be used\\n        // for sorting at the end of the query().\\n        if (this._scoreMap)\\n            this._scoreMap.set(element, score);\\n    }\\n    _matchesSimple(element, simple, context) {\\n        return this._cached(this._cacheMatchesSimple, element, [simple, context.scope, context.pierceShadow], () => {\\n            const isPossiblyScopeClause = simple.functions.some(f => f.name === 'scope' || f.name === 'is');\\n            if (!isPossiblyScopeClause && element === context.scope)\\n                return false;\\n            if (simple.css && !this._matchesCSS(element, simple.css))\\n                return false;\\n            for (const func of simple.functions) {\\n                if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context))\\n                    return false;\\n            }\\n            return true;\\n        });\\n    }\\n    _querySimple(context, simple) {\\n        if (!simple.functions.length)\\n            return this._queryCSS(context, simple.css || '*');\\n        return this._cached(this._cacheQuerySimple, simple, [context.scope, context.pierceShadow], () => {\\n            let css = simple.css;\\n            const funcs = simple.functions;\\n            if (css === '*' && funcs.length)\\n                css = undefined;\\n            let elements;\\n            let firstIndex = -1;\\n            if (css !== undefined) {\\n                elements = this._queryCSS(context, css);\\n            }\\n            else {\\n                firstIndex = funcs.findIndex(func => this._getEngine(func.name).query !== undefined);\\n                if (firstIndex === -1)\\n                    firstIndex = 0;\\n                elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches !== undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            for (let i = 0; i < funcs.length; i++) {\\n                if (i === firstIndex)\\n                    continue;\\n                const engine = this._getEngine(funcs[i].name);\\n                if (engine.matches === undefined)\\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\\n            }\\n            return elements;\\n        });\\n    }\\n    _matchesParents(element, complex, index, context) {\\n        if (index < 0)\\n            return true;\\n        return this._cached(this._cacheMatchesParents, element, [complex, index, context.scope, context.pierceShadow], () => {\\n            const { selector: simple, combinator } = complex.simples[index];\\n            if (combinator === '>') {\\n                const parent = parentElementOrShadowHostInContext(element, context);\\n                if (!parent || !this._matchesSimple(parent, simple, context))\\n                    return false;\\n                return this._matchesParents(parent, complex, index - 1, context);\\n            }\\n            if (combinator === '+') {\\n                const previousSibling = previousSiblingInContext(element, context);\\n                if (!previousSibling || !this._matchesSimple(previousSibling, simple, context))\\n                    return false;\\n                return this._matchesParents(previousSibling, complex, index - 1, context);\\n            }\\n            if (combinator === '') {\\n                let parent = parentElementOrShadowHostInContext(element, context);\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '~') {\\n                let previousSibling = previousSiblingInContext(element, context);\\n                while (previousSibling) {\\n                    if (this._matchesSimple(previousSibling, simple, context)) {\\n                        if (this._matchesParents(previousSibling, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '~')\\n                            break;\\n                    }\\n                    previousSibling = previousSiblingInContext(previousSibling, context);\\n                }\\n                return false;\\n            }\\n            if (combinator === '>=') {\\n                let parent = element;\\n                while (parent) {\\n                    if (this._matchesSimple(parent, simple, context)) {\\n                        if (this._matchesParents(parent, complex, index - 1, context))\\n                            return true;\\n                        if (complex.simples[index - 1].combinator === '')\\n                            break;\\n                    }\\n                    parent = parentElementOrShadowHostInContext(parent, context);\\n                }\\n                return false;\\n            }\\n            throw new Error(`Unsupported combinator \\\"${combinator}\\\"`);\\n        });\\n    }\\n    _matchesEngine(engine, element, args, context) {\\n        if (engine.matches)\\n            return this._callMatches(engine, element, args, context);\\n        if (engine.query)\\n            return this._callQuery(engine, args, context).includes(element);\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _queryEngine(engine, context, args) {\\n        if (engine.query)\\n            return this._callQuery(engine, args, context);\\n        if (engine.matches)\\n            return this._queryCSS(context, '*').filter(element => this._callMatches(engine, element, args, context));\\n        throw new Error(`Selector engine should implement \\\"matches\\\" or \\\"query\\\"`);\\n    }\\n    _callMatches(engine, element, args, context) {\\n        return this._cached(this._cacheCallMatches, element, [engine, context.scope, context.pierceShadow, ...args], () => {\\n            return engine.matches(element, args, context, this);\\n        });\\n    }\\n    _callQuery(engine, args, context) {\\n        return this._cached(this._cacheCallQuery, engine, [context.scope, context.pierceShadow, ...args], () => {\\n            return engine.query(context, args, this);\\n        });\\n    }\\n    _matchesCSS(element, css) {\\n        return element.matches(css);\\n    }\\n    _queryCSS(context, css) {\\n        return this._cached(this._cacheQueryCSS, css, [context.scope, context.pierceShadow], () => {\\n            let result = [];\\n            function query(root) {\\n                result = result.concat([...root.querySelectorAll(css)]);\\n                if (!context.pierceShadow)\\n                    return;\\n                if (root.shadowRoot)\\n                    query(root.shadowRoot);\\n                for (const element of root.querySelectorAll('*')) {\\n                    if (element.shadowRoot)\\n                        query(element.shadowRoot);\\n                }\\n            }\\n            query(context.scope);\\n            return result;\\n        });\\n    }\\n    _getEngine(name) {\\n        const engine = this._engines.get(name);\\n        if (!engine)\\n            throw new Error(`Unknown selector engine \\\"${name}\\\"`);\\n        return engine;\\n    }\\n}\\nexports.SelectorEvaluatorImpl = SelectorEvaluatorImpl;\\nconst isEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        return args.some(selector => evaluator.matches(element, selector, context));\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"is\\\" engine expects non-empty selector list`);\\n        let elements = [];\\n        for (const arg of args)\\n            elements = elements.concat(evaluator.query(context, arg));\\n        return args.length === 1 ? elements : sortInDOMOrder(elements);\\n    },\\n};\\nconst hasEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"has\\\" engine expects non-empty selector list`);\\n        return evaluator.query({ ...context, scope: element }, args).length > 0;\\n    },\\n};\\nconst scopeEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */)\\n            return element === context.scope.documentElement;\\n        return element === context.scope;\\n    },\\n    query(context, args, evaluator) {\\n        if (args.length !== 0)\\n            throw new Error(`\\\"scope\\\" engine expects no arguments`);\\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */) {\\n            const root = context.scope.documentElement;\\n            return root ? [root] : [];\\n        }\\n        if (context.scope.nodeType === 1 /* Node.ELEMENT_NODE */)\\n            return [context.scope];\\n        return [];\\n    },\\n};\\nconst notEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0)\\n            throw new Error(`\\\"not\\\" engine expects non-empty selector list`);\\n        return !evaluator.matches(element, args, context);\\n    },\\n};\\nconst lightEngine = {\\n    query(context, args, evaluator) {\\n        return evaluator.query({ ...context, pierceShadow: false }, args);\\n    },\\n    matches(element, args, context, evaluator) {\\n        return evaluator.matches(element, args, { ...context, pierceShadow: false });\\n    }\\n};\\nconst visibleEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length)\\n            throw new Error(`\\\"visible\\\" engine expects no arguments`);\\n        return isVisible(element);\\n    }\\n};\\nconst textEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text\\\" engine expects a single string`);\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst textIsEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"text-is\\\" engine expects a single string`);\\n        const matcher = createStrictTextMatcher(args[0]);\\n        return elementMatchesText(evaluator, element, matcher) !== 'none';\\n    },\\n};\\nconst textMatchesEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length === 0 || typeof args[0] !== 'string' || args.length > 2 || (args.length === 2 && typeof args[1] !== 'string'))\\n            throw new Error(`\\\"text-matches\\\" engine expects a regexp body and optional regexp flags`);\\n        const matcher = createRegexTextMatcher(args[0], args.length === 2 ? args[1] : undefined);\\n        return elementMatchesText(evaluator, element, matcher) === 'self';\\n    },\\n};\\nconst hasTextEngine = {\\n    matches(element, args, context, evaluator) {\\n        if (args.length !== 1 || typeof args[0] !== 'string')\\n            throw new Error(`\\\"has-text\\\" engine expects a single string`);\\n        if (shouldSkipForTextMatching(element))\\n            return false;\\n        const matcher = createLaxTextMatcher(args[0]);\\n        return matcher(elementText(evaluator, element));\\n    },\\n};\\nfunction createLaxTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n    return (elementText) => {\\n        const s = elementText.full.trim().replace(/\\\\s+/g, ' ').toLowerCase();\\n        return s.includes(text);\\n    };\\n}\\nexports.createLaxTextMatcher = createLaxTextMatcher;\\nfunction createStrictTextMatcher(text) {\\n    text = text.trim().replace(/\\\\s+/g, ' ');\\n    return (elementText) => {\\n        return elementText.immediate.some(s => s.trim().replace(/\\\\s+/g, ' ') === text);\\n    };\\n}\\nexports.createStrictTextMatcher = createStrictTextMatcher;\\nfunction createRegexTextMatcher(source, flags) {\\n    const re = new RegExp(source, flags);\\n    return (elementText) => {\\n        return re.test(elementText.full);\\n    };\\n}\\nexports.createRegexTextMatcher = createRegexTextMatcher;\\nfunction shouldSkipForTextMatching(element) {\\n    return element.nodeName === 'SCRIPT' || element.nodeName === 'STYLE' || document.head && document.head.contains(element);\\n}\\nfunction elementText(evaluator, root) {\\n    let value = evaluator._cacheText.get(root);\\n    if (value === undefined) {\\n        value = { full: '', immediate: [] };\\n        if (!shouldSkipForTextMatching(root)) {\\n            let currentImmediate = '';\\n            if ((root instanceof HTMLInputElement) && (root.type === 'submit' || root.type === 'button')) {\\n                value = { full: root.value, immediate: [root.value] };\\n            }\\n            else {\\n                for (let child = root.firstChild; child; child = child.nextSibling) {\\n                    if (child.nodeType === Node.TEXT_NODE) {\\n                        value.full += child.nodeValue || '';\\n                        currentImmediate += child.nodeValue || '';\\n                    }\\n                    else {\\n                        if (currentImmediate)\\n                            value.immediate.push(currentImmediate);\\n                        currentImmediate = '';\\n                        if (child.nodeType === Node.ELEMENT_NODE)\\n                            value.full += elementText(evaluator, child).full;\\n                    }\\n                }\\n                if (currentImmediate)\\n                    value.immediate.push(currentImmediate);\\n                if (root.shadowRoot)\\n                    value.full += elementText(evaluator, root.shadowRoot).full;\\n            }\\n        }\\n        evaluator._cacheText.set(root, value);\\n    }\\n    return value;\\n}\\nexports.elementText = elementText;\\nfunction elementMatchesText(evaluator, element, matcher) {\\n    if (shouldSkipForTextMatching(element))\\n        return 'none';\\n    if (!matcher(elementText(evaluator, element)))\\n        return 'none';\\n    for (let child = element.firstChild; child; child = child.nextSibling) {\\n        if (child.nodeType === Node.ELEMENT_NODE && matcher(elementText(evaluator, child)))\\n            return 'selfAndChildren';\\n    }\\n    if (element.shadowRoot && matcher(elementText(evaluator, element.shadowRoot)))\\n        return 'selfAndChildren';\\n    return 'self';\\n}\\nexports.elementMatchesText = elementMatchesText;\\nfunction boxRightOf(box1, box2) {\\n    if (box1.left < box2.right)\\n        return;\\n    return (box1.left - box2.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxLeftOf(box1, box2) {\\n    if (box1.right > box2.left)\\n        return;\\n    return (box2.left - box1.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\\n}\\nfunction boxAbove(box1, box2) {\\n    if (box1.bottom > box2.top)\\n        return;\\n    return (box2.top - box1.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxBelow(box1, box2) {\\n    if (box1.top < box2.bottom)\\n        return;\\n    return (box1.top - box2.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\\n}\\nfunction boxNear(box1, box2) {\\n    const kThreshold = 50;\\n    let score = 0;\\n    if (box1.left - box2.right >= 0)\\n        score += box1.left - box2.right;\\n    if (box2.left - box1.right >= 0)\\n        score += box2.left - box1.right;\\n    if (box2.top - box1.bottom >= 0)\\n        score += box2.top - box1.bottom;\\n    if (box1.top - box2.bottom >= 0)\\n        score += box1.top - box2.bottom;\\n    return score > kThreshold ? undefined : score;\\n}\\nfunction createPositionEngine(name, scorer) {\\n    return {\\n        matches(element, args, context, evaluator) {\\n            if (!args.length)\\n                throw new Error(`\\\"${name}\\\" engine expects a selector list`);\\n            const box = element.getBoundingClientRect();\\n            let bestScore;\\n            for (const e of evaluator.query(context, args)) {\\n                if (e === element)\\n                    continue;\\n                const score = scorer(box, e.getBoundingClientRect());\\n                if (score === undefined)\\n                    continue;\\n                if (bestScore === undefined || score < bestScore)\\n                    bestScore = score;\\n            }\\n            if (bestScore === undefined)\\n                return false;\\n            evaluator._markScore(element, bestScore);\\n            return true;\\n        }\\n    };\\n}\\nconst nthMatchEngine = {\\n    query(context, args, evaluator) {\\n        let index = args[args.length - 1];\\n        if (args.length < 2)\\n            throw new Error(`\\\"nth-match\\\" engine expects non-empty selector list and an index argument`);\\n        if (typeof index !== 'number' || index < 1)\\n            throw new Error(`\\\"nth-match\\\" engine expects a one-based index as the last argument`);\\n        const elements = isEngine.query(context, args.slice(0, args.length - 1), evaluator);\\n        index--; // one-based\\n        return index < elements.length ? [elements[index]] : [];\\n    },\\n};\\nfunction parentElementOrShadowHost(element) {\\n    if (element.parentElement)\\n        return element.parentElement;\\n    if (!element.parentNode)\\n        return;\\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\\n        return element.parentNode.host;\\n}\\nexports.parentElementOrShadowHost = parentElementOrShadowHost;\\nfunction parentElementOrShadowHostInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    if (!context.pierceShadow)\\n        return element.parentElement || undefined;\\n    return parentElementOrShadowHost(element);\\n}\\nfunction previousSiblingInContext(element, context) {\\n    if (element === context.scope)\\n        return;\\n    return element.previousElementSibling || undefined;\\n}\\nfunction isVisible(element) {\\n    // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.\\n    if (!element.ownerDocument || !element.ownerDocument.defaultView)\\n        return true;\\n    const style = element.ownerDocument.defaultView.getComputedStyle(element);\\n    if (!style || style.visibility === 'hidden')\\n        return false;\\n    const rect = element.getBoundingClientRect();\\n    return rect.width > 0 && rect.height > 0;\\n}\\nexports.isVisible = isVisible;\\nfunction sortInDOMOrder(elements) {\\n    const elementToEntry = new Map();\\n    const roots = [];\\n    const result = [];\\n    function append(element) {\\n        let entry = elementToEntry.get(element);\\n        if (entry)\\n            return entry;\\n        const parent = parentElementOrShadowHost(element);\\n        if (parent) {\\n            const parentEntry = append(parent);\\n            parentEntry.children.push(element);\\n        }\\n        else {\\n            roots.push(element);\\n        }\\n        entry = { children: [], taken: false };\\n        elementToEntry.set(element, entry);\\n        return entry;\\n    }\\n    elements.forEach(e => append(e).taken = true);\\n    function visit(element) {\\n        const entry = elementToEntry.get(element);\\n        if (entry.taken)\\n            result.push(element);\\n        if (entry.children.length > 1) {\\n            const set = new Set(entry.children);\\n            entry.children = [];\\n            let child = element.firstElementChild;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n            child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;\\n            while (child && entry.children.length < set.size) {\\n                if (set.has(child))\\n                    entry.children.push(child);\\n                child = child.nextElementSibling;\\n            }\\n        }\\n        entry.children.forEach(visit);\\n    }\\n    roots.forEach(visit);\\n    return result;\\n}\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/supplements/injected/recorder.ts\\\":\\n/*!*****************************************************!*\\\\\\n  !*** ./src/server/supplements/injected/recorder.ts ***!\\n  \\\\*****************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.Recorder = void 0;\\nconst selectorGenerator_1 = __webpack_require__(/*! ./selectorGenerator */ \\\"./src/server/supplements/injected/selectorGenerator.ts\\\");\\nconst scriptSymbol = Symbol('scriptSymbol');\\nclass Recorder {\\n    constructor(injectedScript, params) {\\n        this._performingAction = false;\\n        this._highlightElements = [];\\n        this._listeners = [];\\n        this._hoveredModel = null;\\n        this._hoveredElement = null;\\n        this._activeModel = null;\\n        this._expectProgrammaticKeyUp = false;\\n        this._mode = 'none';\\n        this._params = params;\\n        this._injectedScript = injectedScript;\\n        this._outerGlassPaneElement = document.createElement('x-pw-glass');\\n        this._outerGlassPaneElement.style.position = 'fixed';\\n        this._outerGlassPaneElement.style.top = '0';\\n        this._outerGlassPaneElement.style.right = '0';\\n        this._outerGlassPaneElement.style.bottom = '0';\\n        this._outerGlassPaneElement.style.left = '0';\\n        this._outerGlassPaneElement.style.zIndex = '2147483647';\\n        this._outerGlassPaneElement.style.pointerEvents = 'none';\\n        this._outerGlassPaneElement.style.display = 'flex';\\n        this._snapshotBaseUrl = params.snapshotBaseUrl;\\n        this._tooltipElement = document.createElement('x-pw-tooltip');\\n        this._actionPointElement = document.createElement('x-pw-action-point');\\n        this._actionPointElement.setAttribute('hidden', 'true');\\n        this._innerGlassPaneElement = document.createElement('x-pw-glass-inner');\\n        this._innerGlassPaneElement.style.flex = 'auto';\\n        this._innerGlassPaneElement.appendChild(this._tooltipElement);\\n        // Use a closed shadow root to prevent selectors matching our internal previews.\\n        this._glassPaneShadow = this._outerGlassPaneElement.attachShadow({ mode: this._params.isUnderTest ? 'open' : 'closed' });\\n        this._glassPaneShadow.appendChild(this._innerGlassPaneElement);\\n        this._glassPaneShadow.appendChild(this._actionPointElement);\\n        const styleElement = document.createElement('style');\\n        styleElement.textContent = `\\n        x-pw-tooltip {\\n          align-items: center;\\n          backdrop-filter: blur(5px);\\n          background-color: rgba(0, 0, 0, 0.7);\\n          border-radius: 2px;\\n          box-shadow: rgba(0, 0, 0, 0.1) 0px 3.6px 3.7px,\\n                      rgba(0, 0, 0, 0.15) 0px 12.1px 12.3px,\\n                      rgba(0, 0, 0, 0.1) 0px -2px 4px,\\n                      rgba(0, 0, 0, 0.15) 0px -12.1px 24px,\\n                      rgba(0, 0, 0, 0.25) 0px 54px 55px;\\n          color: rgb(204, 204, 204);\\n          display: none;\\n          font-family: 'Dank Mono', 'Operator Mono', Inconsolata, 'Fira Mono',\\n                       'SF Mono', Monaco, 'Droid Sans Mono', 'Source Code Pro', monospace;\\n          font-size: 12.8px;\\n          font-weight: normal;\\n          left: 0;\\n          line-height: 1.5;\\n          max-width: 600px;\\n          padding: 3.2px 5.12px 3.2px;\\n          position: absolute;\\n          top: 0;\\n        }\\n        x-pw-action-point {\\n          position: absolute;\\n          width: 20px;\\n          height: 20px;\\n          background: red;\\n          border-radius: 10px;\\n          pointer-events: none;\\n          margin: -10px 0 0 -10px;\\n          z-index: 2;\\n        }\\n        *[hidden] {\\n          display: none !important;\\n        }\\n    `;\\n        this._glassPaneShadow.appendChild(styleElement);\\n        this._refreshListenersIfNeeded();\\n        setInterval(() => {\\n            this._refreshListenersIfNeeded();\\n            if (window._recorderScriptReadyForTest) {\\n                window._recorderScriptReadyForTest();\\n                delete window._recorderScriptReadyForTest;\\n            }\\n        }, 500);\\n        window._playwrightRefreshOverlay = () => {\\n            this._pollRecorderMode().catch(e => console.log(e)); // eslint-disable-line no-console\\n        };\\n        window._playwrightRefreshOverlay();\\n    }\\n    _refreshListenersIfNeeded() {\\n        if (document.documentElement[scriptSymbol])\\n            return;\\n        document.documentElement[scriptSymbol] = true;\\n        removeEventListeners(this._listeners);\\n        this._listeners = [\\n            addEventListener(document, 'click', event => this._onClick(event), true),\\n            addEventListener(document, 'input', event => this._onInput(event), true),\\n            addEventListener(document, 'keydown', event => this._onKeyDown(event), true),\\n            addEventListener(document, 'keyup', event => this._onKeyUp(event), true),\\n            addEventListener(document, 'mousedown', event => this._onMouseDown(event), true),\\n            addEventListener(document, 'mouseup', event => this._onMouseUp(event), true),\\n            addEventListener(document, 'mousemove', event => this._onMouseMove(event), true),\\n            addEventListener(document, 'mouseleave', event => this._onMouseLeave(event), true),\\n            addEventListener(document, 'focus', () => this._onFocus(), true),\\n            addEventListener(document, 'scroll', () => {\\n                this._hoveredModel = null;\\n                this._actionPointElement.hidden = true;\\n                this._updateHighlight();\\n            }, true),\\n        ];\\n        document.documentElement.appendChild(this._outerGlassPaneElement);\\n    }\\n    _createSnapshotIframeIfNeeded() {\\n        if (this._snapshotIframe)\\n            return this._snapshotIframe;\\n        if (window.top === window) {\\n            this._snapshotIframe = document.createElement('iframe');\\n            this._snapshotIframe.src = this._snapshotBaseUrl;\\n            this._snapshotIframe.style.background = '#ff000060';\\n            this._snapshotIframe.style.position = 'fixed';\\n            this._snapshotIframe.style.top = '0';\\n            this._snapshotIframe.style.right = '0';\\n            this._snapshotIframe.style.bottom = '0';\\n            this._snapshotIframe.style.left = '0';\\n            this._snapshotIframe.style.border = 'none';\\n            this._snapshotIframe.style.width = '100%';\\n            this._snapshotIframe.style.height = '100%';\\n            this._snapshotIframe.style.zIndex = '2147483647';\\n            this._snapshotIframe.style.visibility = 'hidden';\\n            document.documentElement.appendChild(this._snapshotIframe);\\n        }\\n        return this._snapshotIframe;\\n    }\\n    async _pollRecorderMode() {\\n        var _a, _b;\\n        const pollPeriod = 1000;\\n        if (this._pollRecorderModeTimer)\\n            clearTimeout(this._pollRecorderModeTimer);\\n        const state = await window._playwrightRecorderState().catch(e => null);\\n        if (!state) {\\n            this._pollRecorderModeTimer = setTimeout(() => this._pollRecorderMode(), pollPeriod);\\n            return;\\n        }\\n        const { mode, actionPoint, actionSelector, snapshotUrl } = state;\\n        if (mode !== this._mode) {\\n            this._mode = mode;\\n            this._clearHighlight();\\n        }\\n        if (actionPoint && this._actionPoint && actionPoint.x === this._actionPoint.x && actionPoint.y === this._actionPoint.y) {\\n            // All good.\\n        }\\n        else if (!actionPoint && !this._actionPoint) {\\n            // All good.\\n        }\\n        else {\\n            if (actionPoint) {\\n                this._actionPointElement.style.top = actionPoint.y + 'px';\\n                this._actionPointElement.style.left = actionPoint.x + 'px';\\n                this._actionPointElement.hidden = false;\\n            }\\n            else {\\n                this._actionPointElement.hidden = true;\\n            }\\n            this._actionPoint = actionPoint;\\n        }\\n        // Race or scroll.\\n        if (this._actionSelector && !((_a = this._hoveredModel) === null || _a === void 0 ? void 0 : _a.elements.length))\\n            this._actionSelector = undefined;\\n        if (actionSelector !== this._actionSelector) {\\n            this._hoveredModel = actionSelector ? selectorGenerator_1.querySelector(this._injectedScript, actionSelector, document) : null;\\n            this._updateHighlight();\\n            this._actionSelector = actionSelector;\\n        }\\n        if (snapshotUrl !== this._snapshotUrl) {\\n            this._snapshotUrl = snapshotUrl;\\n            const snapshotIframe = this._createSnapshotIframeIfNeeded();\\n            if (snapshotIframe) {\\n                if (!snapshotUrl) {\\n                    snapshotIframe.style.visibility = 'hidden';\\n                }\\n                else {\\n                    snapshotIframe.style.visibility = 'visible';\\n                    (_b = snapshotIframe.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage({ snapshotUrl }, '*');\\n                }\\n            }\\n        }\\n        this._pollRecorderModeTimer = setTimeout(() => this._pollRecorderMode(), pollPeriod);\\n    }\\n    _clearHighlight() {\\n        this._hoveredModel = null;\\n        this._activeModel = null;\\n        this._updateHighlight();\\n    }\\n    _actionInProgress(event) {\\n        // If Playwright is performing action for us, bail.\\n        if (this._performingAction)\\n            return true;\\n        // Consume as the first thing.\\n        consumeEvent(event);\\n        return false;\\n    }\\n    _consumedDueToNoModel(event, model) {\\n        if (model)\\n            return false;\\n        consumeEvent(event);\\n        return true;\\n    }\\n    _consumedDueWrongTarget(event) {\\n        if (this._activeModel && this._activeModel.elements[0] === this._deepEventTarget(event))\\n            return false;\\n        consumeEvent(event);\\n        return true;\\n    }\\n    _onClick(event) {\\n        if (this._mode === 'inspecting')\\n            window._playwrightRecorderSetSelector(this._hoveredModel ? this._hoveredModel.selector : '');\\n        if (this._shouldIgnoreMouseEvent(event))\\n            return;\\n        if (this._actionInProgress(event))\\n            return;\\n        if (this._consumedDueToNoModel(event, this._hoveredModel))\\n            return;\\n        const checkbox = asCheckbox(this._deepEventTarget(event));\\n        if (checkbox) {\\n            // Interestingly, inputElement.checked is reversed inside this event handler.\\n            this._performAction({\\n                name: checkbox.checked ? 'check' : 'uncheck',\\n                selector: this._hoveredModel.selector,\\n                signals: [],\\n            });\\n            return;\\n        }\\n        this._performAction({\\n            name: 'click',\\n            selector: this._hoveredModel.selector,\\n            signals: [],\\n            button: buttonForEvent(event),\\n            modifiers: modifiersForEvent(event),\\n            clickCount: event.detail\\n        });\\n    }\\n    _shouldIgnoreMouseEvent(event) {\\n        const target = this._deepEventTarget(event);\\n        if (this._mode === 'none')\\n            return true;\\n        if (this._mode === 'inspecting') {\\n            consumeEvent(event);\\n            return true;\\n        }\\n        const nodeName = target.nodeName;\\n        if (nodeName === 'SELECT')\\n            return true;\\n        if (nodeName === 'INPUT' && ['date'].includes(target.type))\\n            return true;\\n        return false;\\n    }\\n    _onMouseDown(event) {\\n        if (this._shouldIgnoreMouseEvent(event))\\n            return;\\n        if (!this._performingAction)\\n            consumeEvent(event);\\n        this._activeModel = this._hoveredModel;\\n    }\\n    _onMouseUp(event) {\\n        if (this._shouldIgnoreMouseEvent(event))\\n            return;\\n        if (!this._performingAction)\\n            consumeEvent(event);\\n    }\\n    _onMouseMove(event) {\\n        if (this._mode === 'none')\\n            return;\\n        const target = this._deepEventTarget(event);\\n        if (this._hoveredElement === target)\\n            return;\\n        this._hoveredElement = target;\\n        // Mouse moved -> mark last action as committed via committing a commit action.\\n        this._commitActionAndUpdateModelForHoveredElement();\\n    }\\n    _onMouseLeave(event) {\\n        // Leaving iframe.\\n        if (this._deepEventTarget(event).nodeType === Node.DOCUMENT_NODE) {\\n            this._hoveredElement = null;\\n            this._commitActionAndUpdateModelForHoveredElement();\\n        }\\n    }\\n    _onFocus() {\\n        const activeElement = this._deepActiveElement(document);\\n        const result = activeElement ? selectorGenerator_1.generateSelector(this._injectedScript, activeElement) : null;\\n        this._activeModel = result && result.selector ? result : null;\\n        if (window._highlightUpdatedForTest)\\n            window._highlightUpdatedForTest(result ? result.selector : null);\\n    }\\n    _commitActionAndUpdateModelForHoveredElement() {\\n        if (!this._hoveredElement) {\\n            this._hoveredModel = null;\\n            this._updateHighlight();\\n            return;\\n        }\\n        const hoveredElement = this._hoveredElement;\\n        const { selector, elements } = selectorGenerator_1.generateSelector(this._injectedScript, hoveredElement);\\n        if ((this._hoveredModel && this._hoveredModel.selector === selector) || this._hoveredElement !== hoveredElement)\\n            return;\\n        window._playwrightRecorderCommitAction();\\n        this._hoveredModel = selector ? { selector, elements } : null;\\n        this._updateHighlight();\\n        if (window._highlightUpdatedForTest)\\n            window._highlightUpdatedForTest(selector);\\n    }\\n    _updateHighlight() {\\n        const elements = this._hoveredModel ? this._hoveredModel.elements : [];\\n        // Code below should trigger one layout and leave with the\\n        // destroyed layout.\\n        // Destroy the layout\\n        this._tooltipElement.textContent = this._hoveredModel ? this._hoveredModel.selector : '';\\n        this._tooltipElement.style.top = '0';\\n        this._tooltipElement.style.left = '0';\\n        this._tooltipElement.style.display = 'flex';\\n        // Trigger layout.\\n        const boxes = elements.map(e => e.getBoundingClientRect());\\n        const tooltipWidth = this._tooltipElement.offsetWidth;\\n        const tooltipHeight = this._tooltipElement.offsetHeight;\\n        const totalWidth = this._innerGlassPaneElement.offsetWidth;\\n        const totalHeight = this._innerGlassPaneElement.offsetHeight;\\n        // Destroy the layout again.\\n        if (boxes.length) {\\n            const primaryBox = boxes[0];\\n            let anchorLeft = primaryBox.left;\\n            if (anchorLeft + tooltipWidth > totalWidth - 5)\\n                anchorLeft = totalWidth - tooltipWidth - 5;\\n            let anchorTop = primaryBox.bottom + 5;\\n            if (anchorTop + tooltipHeight > totalHeight - 5) {\\n                // If can't fit below, either position above...\\n                if (primaryBox.top > tooltipHeight + 5) {\\n                    anchorTop = primaryBox.top - tooltipHeight - 5;\\n                }\\n                else {\\n                    // Or on top in case of large element\\n                    anchorTop = totalHeight - 5 - tooltipHeight;\\n                }\\n            }\\n            this._tooltipElement.style.top = anchorTop + 'px';\\n            this._tooltipElement.style.left = anchorLeft + 'px';\\n        }\\n        else {\\n            this._tooltipElement.style.display = 'none';\\n        }\\n        const pool = this._highlightElements;\\n        this._highlightElements = [];\\n        for (const box of boxes) {\\n            const highlightElement = pool.length ? pool.shift() : this._createHighlightElement();\\n            const color = this._mode === 'recording' ? '#dc6f6f7f' : '#6fa8dc7f';\\n            highlightElement.style.backgroundColor = this._highlightElements.length ? '#f6b26b7f' : color;\\n            highlightElement.style.left = box.x + 'px';\\n            highlightElement.style.top = box.y + 'px';\\n            highlightElement.style.width = box.width + 'px';\\n            highlightElement.style.height = box.height + 'px';\\n            highlightElement.style.display = 'block';\\n            this._highlightElements.push(highlightElement);\\n        }\\n        for (const highlightElement of pool) {\\n            highlightElement.style.display = 'none';\\n            this._highlightElements.push(highlightElement);\\n        }\\n    }\\n    _createHighlightElement() {\\n        const highlightElement = document.createElement('x-pw-highlight');\\n        highlightElement.style.position = 'absolute';\\n        highlightElement.style.top = '0';\\n        highlightElement.style.left = '0';\\n        highlightElement.style.width = '0';\\n        highlightElement.style.height = '0';\\n        highlightElement.style.boxSizing = 'border-box';\\n        this._glassPaneShadow.appendChild(highlightElement);\\n        return highlightElement;\\n    }\\n    _onInput(event) {\\n        if (this._mode !== 'recording')\\n            return true;\\n        const target = this._deepEventTarget(event);\\n        if (['INPUT', 'TEXTAREA'].includes(target.nodeName)) {\\n            const inputElement = target;\\n            const elementType = (inputElement.type || '').toLowerCase();\\n            if (elementType === 'checkbox') {\\n                // Checkbox is handled in click, we can't let input trigger on checkbox - that would mean we dispatched click events while recording.\\n                return;\\n            }\\n            if (elementType === 'file') {\\n                window._playwrightRecorderRecordAction({\\n                    name: 'setInputFiles',\\n                    selector: this._activeModel.selector,\\n                    signals: [],\\n                    files: [...(inputElement.files || [])].map(file => file.name),\\n                });\\n                return;\\n            }\\n            // Non-navigating actions are simply recorded by Playwright.\\n            if (this._consumedDueWrongTarget(event))\\n                return;\\n            window._playwrightRecorderRecordAction({\\n                name: 'fill',\\n                selector: this._activeModel.selector,\\n                signals: [],\\n                text: inputElement.value,\\n            });\\n        }\\n        if (target.nodeName === 'SELECT') {\\n            const selectElement = target;\\n            if (this._actionInProgress(event))\\n                return;\\n            this._performAction({\\n                name: 'select',\\n                selector: this._hoveredModel.selector,\\n                options: [...selectElement.selectedOptions].map(option => option.value),\\n                signals: []\\n            });\\n        }\\n    }\\n    _shouldGenerateKeyPressFor(event) {\\n        // Backspace, Delete are changing input, will handle it there.\\n        if (['Backspace', 'Delete'].includes(event.key))\\n            return false;\\n        // Ignore the QWERTZ shortcut for creating a at sign on MacOS\\n        if (event.key === '@' && event.code === 'KeyL')\\n            return false;\\n        // Allow and ignore common used shortcut for pasting.\\n        if (navigator.platform.includes('Mac')) {\\n            if (event.key === 'v' && event.metaKey)\\n                return false;\\n        }\\n        else {\\n            if (event.key === 'v' && event.ctrlKey)\\n                return false;\\n            if (event.key === 'Insert' && event.shiftKey)\\n                return false;\\n        }\\n        if (['Shift', 'Control', 'Meta', 'Alt'].includes(event.key))\\n            return false;\\n        const hasModifier = event.ctrlKey || event.altKey || event.metaKey;\\n        if (event.key.length === 1 && !hasModifier)\\n            return !!asCheckbox(this._deepEventTarget(event));\\n        return true;\\n    }\\n    _onKeyDown(event) {\\n        if (this._mode === 'inspecting') {\\n            consumeEvent(event);\\n            return;\\n        }\\n        if (this._mode !== 'recording')\\n            return true;\\n        if (!this._shouldGenerateKeyPressFor(event))\\n            return;\\n        if (this._actionInProgress(event)) {\\n            this._expectProgrammaticKeyUp = true;\\n            return;\\n        }\\n        if (this._consumedDueWrongTarget(event))\\n            return;\\n        // Similarly to click, trigger checkbox on key event, not input.\\n        if (event.key === ' ') {\\n            const checkbox = asCheckbox(this._deepEventTarget(event));\\n            if (checkbox) {\\n                this._performAction({\\n                    name: checkbox.checked ? 'uncheck' : 'check',\\n                    selector: this._activeModel.selector,\\n                    signals: [],\\n                });\\n                return;\\n            }\\n        }\\n        this._performAction({\\n            name: 'press',\\n            selector: this._activeModel.selector,\\n            signals: [],\\n            key: event.key,\\n            modifiers: modifiersForEvent(event),\\n        });\\n    }\\n    _onKeyUp(event) {\\n        if (!this._shouldGenerateKeyPressFor(event))\\n            return;\\n        // Only allow programmatic keyups, ignore user input.\\n        if (!this._expectProgrammaticKeyUp) {\\n            consumeEvent(event);\\n            return;\\n        }\\n        this._expectProgrammaticKeyUp = false;\\n    }\\n    async _performAction(action) {\\n        this._performingAction = true;\\n        await window._playwrightRecorderPerformAction(action).catch(() => { });\\n        this._performingAction = false;\\n        // Action could have changed DOM, update hovered model selectors.\\n        this._commitActionAndUpdateModelForHoveredElement();\\n        // If that was a keyboard action, it similarly requires new selectors for active model.\\n        this._onFocus();\\n        if (window._actionPerformedForTest) {\\n            window._actionPerformedForTest({\\n                hovered: this._hoveredModel ? this._hoveredModel.selector : null,\\n                active: this._activeModel ? this._activeModel.selector : null,\\n            });\\n        }\\n    }\\n    _deepEventTarget(event) {\\n        return event.composedPath()[0];\\n    }\\n    _deepActiveElement(document) {\\n        let activeElement = document.activeElement;\\n        while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\\n            activeElement = activeElement.shadowRoot.activeElement;\\n        return activeElement;\\n    }\\n}\\nexports.Recorder = Recorder;\\nfunction modifiersForEvent(event) {\\n    return (event.altKey ? 1 : 0) | (event.ctrlKey ? 2 : 0) | (event.metaKey ? 4 : 0) | (event.shiftKey ? 8 : 0);\\n}\\nfunction buttonForEvent(event) {\\n    switch (event.which) {\\n        case 1: return 'left';\\n        case 2: return 'middle';\\n        case 3: return 'right';\\n    }\\n    return 'left';\\n}\\nfunction consumeEvent(e) {\\n    e.preventDefault();\\n    e.stopPropagation();\\n    e.stopImmediatePropagation();\\n}\\nfunction asCheckbox(node) {\\n    if (!node || node.nodeName !== 'INPUT')\\n        return null;\\n    const inputElement = node;\\n    return inputElement.type === 'checkbox' ? inputElement : null;\\n}\\nfunction addEventListener(target, eventName, listener, useCapture) {\\n    target.addEventListener(eventName, listener, useCapture);\\n    const remove = () => {\\n        target.removeEventListener(eventName, listener, useCapture);\\n    };\\n    return remove;\\n}\\nfunction removeEventListeners(listeners) {\\n    for (const listener of listeners)\\n        listener();\\n    listeners.splice(0, listeners.length);\\n}\\nexports.default = Recorder;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/supplements/injected/selectorGenerator.ts\\\":\\n/*!**************************************************************!*\\\\\\n  !*** ./src/server/supplements/injected/selectorGenerator.ts ***!\\n  \\\\**************************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.generateSelector = exports.querySelector = void 0;\\nconst selectorEvaluator_1 = __webpack_require__(/*! ../../injected/selectorEvaluator */ \\\"./src/server/injected/selectorEvaluator.ts\\\");\\nconst cacheAllowText = new Map();\\nconst cacheDisallowText = new Map();\\nfunction querySelector(injectedScript, selector, ownerDocument) {\\n    try {\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        return {\\n            selector,\\n            elements: injectedScript.querySelectorAll(parsedSelector, ownerDocument)\\n        };\\n    }\\n    catch (e) {\\n        return {\\n            selector,\\n            elements: [],\\n        };\\n    }\\n}\\nexports.querySelector = querySelector;\\nfunction generateSelector(injectedScript, targetElement) {\\n    injectedScript._evaluator.begin();\\n    try {\\n        targetElement = targetElement.closest('button,select,input,[role=button],[role=checkbox],[role=radio]') || targetElement;\\n        const targetTokens = generateSelectorFor(injectedScript, targetElement);\\n        const bestTokens = targetTokens || [cssFallback(injectedScript, targetElement)];\\n        const selector = joinTokens(bestTokens);\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        return {\\n            selector,\\n            elements: injectedScript.querySelectorAll(parsedSelector, targetElement.ownerDocument)\\n        };\\n    }\\n    finally {\\n        cacheAllowText.clear();\\n        cacheDisallowText.clear();\\n        injectedScript._evaluator.end();\\n    }\\n}\\nexports.generateSelector = generateSelector;\\nfunction filterRegexTokens(textCandidates) {\\n    // Filter out regex-based selectors for better performance.\\n    return textCandidates.filter(c => c[0].selector[0] !== '/');\\n}\\nfunction generateSelectorFor(injectedScript, targetElement) {\\n    if (targetElement.ownerDocument.documentElement === targetElement)\\n        return [{ engine: 'css', selector: 'html', score: 1 }];\\n    const calculate = (element, allowText) => {\\n        const allowNthMatch = element === targetElement;\\n        let textCandidates = allowText ? buildTextCandidates(injectedScript, element, element === targetElement).map(token => [token]) : [];\\n        if (element !== targetElement) {\\n            // Do not use regex for parent elements (for performance).\\n            textCandidates = filterRegexTokens(textCandidates);\\n        }\\n        const noTextCandidates = buildCandidates(injectedScript, element).map(token => [token]);\\n        // First check all text and non-text candidates for the element.\\n        let result = chooseFirstSelector(injectedScript, targetElement.ownerDocument, element, [...textCandidates, ...noTextCandidates], allowNthMatch);\\n        // Do not use regex for chained selectors (for performance).\\n        textCandidates = filterRegexTokens(textCandidates);\\n        const checkWithText = (textCandidatesToUse) => {\\n            // Use the deepest possible text selector - works pretty good and saves on compute time.\\n            const allowParentText = allowText && !textCandidatesToUse.length;\\n            const candidates = [...textCandidatesToUse, ...noTextCandidates].filter(c => {\\n                if (!result)\\n                    return true;\\n                return combineScores(c) < combineScores(result);\\n            });\\n            // This is best theoretically possible candidate from the current parent.\\n            // We use the fact that widening the scope to grand-parent makes any selector\\n            // even less likely to match.\\n            let bestPossibleInParent = candidates[0];\\n            if (!bestPossibleInParent)\\n                return;\\n            for (let parent = parentElementOrShadowHost(element); parent; parent = parentElementOrShadowHost(parent)) {\\n                const parentTokens = calculateCached(parent, allowParentText);\\n                if (!parentTokens)\\n                    continue;\\n                // Even the best selector won't be too good - skip this parent.\\n                if (result && combineScores([...parentTokens, ...bestPossibleInParent]) >= combineScores(result))\\n                    continue;\\n                // Update the best candidate that finds \\\"element\\\" in the \\\"parent\\\".\\n                bestPossibleInParent = chooseFirstSelector(injectedScript, parent, element, candidates, allowNthMatch);\\n                if (!bestPossibleInParent)\\n                    return;\\n                const combined = [...parentTokens, ...bestPossibleInParent];\\n                if (!result || combineScores(combined) < combineScores(result))\\n                    result = combined;\\n            }\\n        };\\n        checkWithText(textCandidates);\\n        // Allow skipping text on the target element, and using text on one of the parents.\\n        if (element === targetElement && textCandidates.length)\\n            checkWithText([]);\\n        return result;\\n    };\\n    const calculateCached = (element, allowText) => {\\n        const cache = allowText ? cacheAllowText : cacheDisallowText;\\n        let value = cache.get(element);\\n        if (value === undefined) {\\n            value = calculate(element, allowText);\\n            cache.set(element, value);\\n        }\\n        return value;\\n    };\\n    return calculateCached(targetElement, true);\\n}\\nfunction buildCandidates(injectedScript, element) {\\n    const candidates = [];\\n    for (const attribute of ['data-testid', 'data-test-id', 'data-test']) {\\n        if (element.hasAttribute(attribute))\\n            candidates.push({ engine: 'css', selector: `[${attribute}=${quoteString(element.getAttribute(attribute))}]`, score: 1 });\\n    }\\n    if (element.nodeName === 'INPUT') {\\n        const input = element;\\n        if (input.placeholder)\\n            candidates.push({ engine: 'css', selector: `[placeholder=${quoteString(input.placeholder)}]`, score: 10 });\\n    }\\n    if (element.hasAttribute('aria-label'))\\n        candidates.push({ engine: 'css', selector: `[aria-label=${quoteString(element.getAttribute('aria-label'))}]`, score: 10 });\\n    if (element.getAttribute('alt') && ['APPLET', 'AREA', 'IMG', 'INPUT'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[alt=${quoteString(element.getAttribute('alt'))}]`, score: 10 });\\n    if (element.hasAttribute('role'))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLocaleLowerCase()}[role=${quoteString(element.getAttribute('role'))}]`, score: 50 });\\n    if (element.getAttribute('name') && ['BUTTON', 'FORM', 'FIELDSET', 'IFRAME', 'INPUT', 'KEYGEN', 'OBJECT', 'OUTPUT', 'SELECT', 'TEXTAREA', 'MAP', 'META', 'PARAM'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[name=${quoteString(element.getAttribute('name'))}]`, score: 50 });\\n    if (['INPUT', 'TEXTAREA'].includes(element.nodeName) && element.getAttribute('type') !== 'hidden') {\\n        if (element.getAttribute('type'))\\n            candidates.push({ engine: 'css', selector: `${element.nodeName.toLowerCase()}[type=${quoteString(element.getAttribute('type'))}]`, score: 50 });\\n    }\\n    if (['INPUT', 'TEXTAREA', 'SELECT'].includes(element.nodeName))\\n        candidates.push({ engine: 'css', selector: element.nodeName.toLowerCase(), score: 50 });\\n    const idAttr = element.getAttribute('id');\\n    if (idAttr && !isGuidLike(idAttr))\\n        candidates.push({ engine: 'css', selector: `#${idAttr}`, score: 100 });\\n    candidates.push({ engine: 'css', selector: element.nodeName.toLocaleLowerCase(), score: 200 });\\n    return candidates;\\n}\\nfunction buildTextCandidates(injectedScript, element, allowHasText) {\\n    if (element.nodeName === 'SELECT')\\n        return [];\\n    const text = selectorEvaluator_1.elementText(injectedScript._evaluator, element).full.trim().replace(/\\\\s+/g, ' ').substring(0, 80);\\n    if (!text)\\n        return [];\\n    const candidates = [];\\n    let escaped = text;\\n    if (text.includes('\\\"') || text.includes('>>') || text[0] === '/')\\n        escaped = `/.*${escapeForRegex(text)}.*/`;\\n    candidates.push({ engine: 'text', selector: escaped, score: 10 });\\n    if (allowHasText && escaped === text) {\\n        let prefix = element.nodeName.toLocaleLowerCase();\\n        if (element.hasAttribute('role'))\\n            prefix += `[role=${quoteString(element.getAttribute('role'))}]`;\\n        candidates.push({ engine: 'css', selector: `${prefix}:has-text(\\\"${text}\\\")`, score: 30 });\\n    }\\n    return candidates;\\n}\\nfunction parentElementOrShadowHost(element) {\\n    if (element.parentElement)\\n        return element.parentElement;\\n    if (!element.parentNode)\\n        return null;\\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\\n        return element.parentNode.host;\\n    return null;\\n}\\nfunction cssFallback(injectedScript, targetElement) {\\n    const kFallbackScore = 10000000;\\n    const root = targetElement.ownerDocument;\\n    const tokens = [];\\n    function uniqueCSSSelector(prefix) {\\n        const path = tokens.slice();\\n        if (prefix)\\n            path.unshift(prefix);\\n        const selector = path.join(' ');\\n        const parsedSelector = injectedScript.parseSelector(selector);\\n        const node = injectedScript.querySelector(parsedSelector, targetElement.ownerDocument);\\n        return node === targetElement ? selector : undefined;\\n    }\\n    for (let element = targetElement; element && element !== root; element = parentElementOrShadowHost(element)) {\\n        const nodeName = element.nodeName.toLowerCase();\\n        // Element ID is the strongest signal, use it.\\n        let bestTokenForLevel = '';\\n        if (element.id) {\\n            const token = /^[a-zA-Z][a-zA-Z0-9\\\\-\\\\_]+$/.test(element.id) ? '#' + element.id : `[id=\\\"${element.id}\\\"]`;\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            bestTokenForLevel = token;\\n        }\\n        const parent = element.parentNode;\\n        // Combine class names until unique.\\n        const classes = Array.from(element.classList);\\n        for (let i = 0; i < classes.length; ++i) {\\n            const token = '.' + classes.slice(0, i + 1).join('.');\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            // Even if not unique, does this subset of classes uniquely identify node as a child?\\n            if (!bestTokenForLevel && parent) {\\n                const sameClassSiblings = parent.querySelectorAll(token);\\n                if (sameClassSiblings.length === 1)\\n                    bestTokenForLevel = token;\\n            }\\n        }\\n        // Ordinal is the weakest signal.\\n        if (parent) {\\n            const siblings = Array.from(parent.children);\\n            const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\\n            const token = sameTagSiblings.indexOf(element) === 0 ? nodeName : `${nodeName}:nth-child(${1 + siblings.indexOf(element)})`;\\n            const selector = uniqueCSSSelector(token);\\n            if (selector)\\n                return { engine: 'css', selector, score: kFallbackScore };\\n            if (!bestTokenForLevel)\\n                bestTokenForLevel = token;\\n        }\\n        else if (!bestTokenForLevel) {\\n            bestTokenForLevel = nodeName;\\n        }\\n        tokens.unshift(bestTokenForLevel);\\n    }\\n    return { engine: 'css', selector: uniqueCSSSelector(), score: kFallbackScore };\\n}\\nfunction escapeForRegex(text) {\\n    return text.replace(/[.*+?^>${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n}\\nfunction quoteString(text) {\\n    return `\\\"${text.replaceAll(/\\\"/g, '\\\\\\\\\\\"').replaceAll(/\\\\n/g, '\\\\\\\\n')}\\\"`;\\n}\\nfunction joinTokens(tokens) {\\n    const parts = [];\\n    let lastEngine = '';\\n    for (const { engine, selector } of tokens) {\\n        if (parts.length && (lastEngine !== 'css' || engine !== 'css' || selector.startsWith(':nth-match(')))\\n            parts.push('>>');\\n        lastEngine = engine;\\n        if (engine === 'css')\\n            parts.push(selector);\\n        else\\n            parts.push(`${engine}=${selector}`);\\n    }\\n    return parts.join(' ');\\n}\\nfunction combineScores(tokens) {\\n    let score = 0;\\n    for (let i = 0; i < tokens.length; i++)\\n        score += tokens[i].score * (tokens.length - i);\\n    return score;\\n}\\nfunction chooseFirstSelector(injectedScript, scope, targetElement, selectors, allowNthMatch) {\\n    const joined = selectors.map(tokens => ({ tokens, score: combineScores(tokens) }));\\n    joined.sort((a, b) => a.score - b.score);\\n    let bestWithIndex = null;\\n    for (const { tokens } of joined) {\\n        const parsedSelector = injectedScript.parseSelector(joinTokens(tokens));\\n        const result = injectedScript.querySelectorAll(parsedSelector, scope);\\n        const index = result.indexOf(targetElement);\\n        if (index === 0) {\\n            // We are the first match - found the best selector.\\n            return tokens;\\n        }\\n        // Otherwise, perhaps we can get nth-match?\\n        if (!allowNthMatch || bestWithIndex || index === -1 || result.length > 5)\\n            continue;\\n        // To use nth-match, we must convert everything to css.\\n        const allCss = tokens.map(token => {\\n            if (token.engine !== 'text')\\n                return token;\\n            if (token.selector.startsWith('/') && token.selector.endsWith('/'))\\n                return { engine: 'css', selector: `:text-matches(\\\"${token.selector.substring(1, token.selector.length - 1)}\\\")`, score: token.score };\\n            return { engine: 'css', selector: `:text(\\\"${token.selector}\\\")`, score: token.score };\\n        });\\n        const combined = joinTokens(allCss);\\n        bestWithIndex = [{ engine: 'css', selector: `:nth-match(${combined}, ${index + 1})`, score: combineScores(allCss) + 1000 }];\\n    }\\n    return bestWithIndex;\\n}\\nfunction isGuidLike(id) {\\n    let lastCharacterType;\\n    let transitionCount = 0;\\n    for (let i = 0; i < id.length; ++i) {\\n        const c = id[i];\\n        let characterType;\\n        if (c === '-' || c === '_')\\n            continue;\\n        if (c >= 'a' && c <= 'z')\\n            characterType = 'lower';\\n        else if (c >= 'A' && c <= 'Z')\\n            characterType = 'upper';\\n        else if (c >= '0' && c <= '9')\\n            characterType = 'digit';\\n        else\\n            characterType = 'other';\\n        if (characterType === 'lower' && lastCharacterType === 'upper') {\\n            lastCharacterType = characterType;\\n            continue;\\n        }\\n        if (lastCharacterType && lastCharacterType !== characterType)\\n            ++transitionCount;\\n        lastCharacterType = characterType;\\n    }\\n    return transitionCount >= id.length / 4;\\n}\\n\\n\\n/***/ })\\n\\n/******/ })[\\\"default\\\"];\";\n//# sourceMappingURL=recorderSource.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.source = void 0;\nexports.source = \"var pwExport =\\n/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = \\\"./src/server/injected/utilityScript.ts\\\");\\n/******/ })\\n/************************************************************************/\\n/******/ ({\\n\\n/***/ \\\"./node_modules/webpack/buildin/global.js\\\":\\n/*!***********************************!*\\\\\\n  !*** (webpack)/buildin/global.js ***!\\n  \\\\***********************************/\\n/*! no static exports found */\\n/***/ (function(module, exports) {\\n\\nvar g;\\n\\n// This works in non-strict mode\\ng = (function() {\\n\\treturn this;\\n})();\\n\\ntry {\\n\\t// This works if eval is allowed (see CSP)\\n\\tg = g || new Function(\\\"return this\\\")();\\n} catch (e) {\\n\\t// This works if the window reference is available\\n\\tif (typeof window === \\\"object\\\") g = window;\\n}\\n\\n// g can still be undefined, but nothing to do about it...\\n// We return undefined, instead of nothing here, so it's\\n// easier to handle this case. if(!global) { ...}\\n\\nmodule.exports = g;\\n\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/common/utilityScriptSerializers.ts\\\":\\n/*!*******************************************************!*\\\\\\n  !*** ./src/server/common/utilityScriptSerializers.ts ***!\\n  \\\\*******************************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n/* WEBPACK VAR INJECTION */(function(global) {\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.serializeAsCallArgument = exports.parseEvaluationResultValue = void 0;\\nfunction isRegExp(obj) {\\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\\n}\\nfunction isDate(obj) {\\n    return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\\n}\\nfunction isError(obj) {\\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\\n}\\nfunction parseEvaluationResultValue(value, handles = []) {\\n    if (Object.is(value, undefined))\\n        return undefined;\\n    if (typeof value === 'object' && value) {\\n        if ('v' in value) {\\n            if (value.v === 'undefined')\\n                return undefined;\\n            if (value.v === 'null')\\n                return null;\\n            if (value.v === 'NaN')\\n                return NaN;\\n            if (value.v === 'Infinity')\\n                return Infinity;\\n            if (value.v === '-Infinity')\\n                return -Infinity;\\n            if (value.v === '-0')\\n                return -0;\\n            return undefined;\\n        }\\n        if ('d' in value)\\n            return new Date(value.d);\\n        if ('r' in value)\\n            return new RegExp(value.r.p, value.r.f);\\n        if ('a' in value)\\n            return value.a.map((a) => parseEvaluationResultValue(a, handles));\\n        if ('o' in value) {\\n            const result = {};\\n            for (const { k, v } of value.o)\\n                result[k] = parseEvaluationResultValue(v, handles);\\n            return result;\\n        }\\n        if ('h' in value)\\n            return handles[value.h];\\n    }\\n    return value;\\n}\\nexports.parseEvaluationResultValue = parseEvaluationResultValue;\\nfunction serializeAsCallArgument(value, handleSerializer) {\\n    return serialize(value, handleSerializer, new Set());\\n}\\nexports.serializeAsCallArgument = serializeAsCallArgument;\\nfunction serialize(value, handleSerializer, visited) {\\n    const result = handleSerializer(value);\\n    if ('fallThrough' in result)\\n        value = result.fallThrough;\\n    else\\n        return result;\\n    if (visited.has(value))\\n        throw new Error('Argument is a circular structure');\\n    if (typeof value === 'symbol')\\n        return { v: 'undefined' };\\n    if (Object.is(value, undefined))\\n        return { v: 'undefined' };\\n    if (Object.is(value, null))\\n        return { v: 'null' };\\n    if (Object.is(value, NaN))\\n        return { v: 'NaN' };\\n    if (Object.is(value, Infinity))\\n        return { v: 'Infinity' };\\n    if (Object.is(value, -Infinity))\\n        return { v: '-Infinity' };\\n    if (Object.is(value, -0))\\n        return { v: '-0' };\\n    if (typeof value === 'boolean')\\n        return value;\\n    if (typeof value === 'number')\\n        return value;\\n    if (typeof value === 'string')\\n        return value;\\n    if (isError(value)) {\\n        const error = value;\\n        if ('captureStackTrace' in global.Error) {\\n            // v8\\n            return error.stack || '';\\n        }\\n        return `${error.name}: ${error.message}\\\\n${error.stack}`;\\n    }\\n    if (isDate(value))\\n        return { d: value.toJSON() };\\n    if (isRegExp(value))\\n        return { r: { p: value.source, f: value.flags } };\\n    if (Array.isArray(value)) {\\n        const a = [];\\n        visited.add(value);\\n        for (let i = 0; i < value.length; ++i)\\n            a.push(serialize(value[i], handleSerializer, visited));\\n        visited.delete(value);\\n        return { a };\\n    }\\n    if (typeof value === 'object') {\\n        const o = [];\\n        visited.add(value);\\n        for (const name of Object.keys(value)) {\\n            let item;\\n            try {\\n                item = value[name];\\n            }\\n            catch (e) {\\n                continue; // native bindings will throw sometimes\\n            }\\n            if (name === 'toJSON' && typeof item === 'function')\\n                o.push({ k: name, v: { o: [] } });\\n            else\\n                o.push({ k: name, v: serialize(item, handleSerializer, visited) });\\n        }\\n        visited.delete(value);\\n        return { o };\\n    }\\n}\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \\\"./node_modules/webpack/buildin/global.js\\\")))\\n\\n/***/ }),\\n\\n/***/ \\\"./src/server/injected/utilityScript.ts\\\":\\n/*!**********************************************!*\\\\\\n  !*** ./src/server/injected/utilityScript.ts ***!\\n  \\\\**********************************************/\\n/*! no static exports found */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n/* WEBPACK VAR INJECTION */(function(global) {\\n/**\\n * Copyright (c) Microsoft Corporation.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n */\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nconst utilityScriptSerializers_1 = __webpack_require__(/*! ../common/utilityScriptSerializers */ \\\"./src/server/common/utilityScriptSerializers.ts\\\");\\nclass UtilityScript {\\n    evaluate(isFunction, returnByValue, expression, argCount, ...argsAndHandles) {\\n        const args = argsAndHandles.slice(0, argCount);\\n        const handles = argsAndHandles.slice(argCount);\\n        const parameters = args.map(a => utilityScriptSerializers_1.parseEvaluationResultValue(a, handles));\\n        let result = global.eval(expression);\\n        if (isFunction === true) {\\n            result = result(...parameters);\\n        }\\n        else if (isFunction === false) {\\n            result = result;\\n        }\\n        else {\\n            // auto detect.\\n            if (typeof result === 'function')\\n                result = result(...parameters);\\n        }\\n        return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;\\n    }\\n    jsonValue(returnByValue, value) {\\n        // Special handling of undefined to work-around multi-step returnByValue handling in WebKit.\\n        if (Object.is(value, undefined))\\n            return undefined;\\n        return utilityScriptSerializers_1.serializeAsCallArgument(value, (value) => ({ fallThrough: value }));\\n    }\\n    _promiseAwareJsonValueNoThrow(value) {\\n        const safeJson = (value) => {\\n            try {\\n                return this.jsonValue(true, value);\\n            }\\n            catch (e) {\\n                return undefined;\\n            }\\n        };\\n        if (value && typeof value === 'object' && typeof value.then === 'function') {\\n            return (async () => {\\n                // By using async function we ensure that return value is a native Promise,\\n                // and not some overridden Promise in the page.\\n                // This makes Firefox and WebKit debugging protocols recognize it as a Promise,\\n                // properly await and return the value.\\n                const promiseValue = await value;\\n                return safeJson(promiseValue);\\n            })();\\n        }\\n        return safeJson(value);\\n    }\\n}\\nexports.default = UtilityScript;\\n\\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \\\"./node_modules/webpack/buildin/global.js\\\")))\\n\\n/***/ })\\n\\n/******/ })[\\\"default\\\"];\";\n//# sourceMappingURL=utilityScriptSource.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dispatcher_1 = require(\"./dispatchers/dispatcher\");\nconst playwright_1 = require(\"./server/playwright\");\nconst playwrightDispatcher_1 = require(\"./dispatchers/playwrightDispatcher\");\nconst connection_1 = require(\"./client/connection\");\nconst browserServerImpl_1 = require(\"./browserServerImpl\");\nfunction setupInProcess() {\n    const playwright = playwright_1.createPlaywright();\n    const clientConnection = new connection_1.Connection();\n    const dispatcherConnection = new dispatcher_1.DispatcherConnection();\n    // Dispatch synchronously at first.\n    dispatcherConnection.onmessage = message => clientConnection.dispatch(message);\n    clientConnection.onmessage = message => dispatcherConnection.dispatch(message);\n    // Initialize Playwright channel.\n    new playwrightDispatcher_1.PlaywrightDispatcher(dispatcherConnection.rootDispatcher(), playwright);\n    const playwrightAPI = clientConnection.getObjectWithKnownName('Playwright');\n    playwrightAPI.chromium._serverLauncher = new browserServerImpl_1.BrowserServerLauncherImpl(playwright.chromium);\n    playwrightAPI.firefox._serverLauncher = new browserServerImpl_1.BrowserServerLauncherImpl(playwright.firefox);\n    playwrightAPI.webkit._serverLauncher = new browserServerImpl_1.BrowserServerLauncherImpl(playwright.webkit);\n    // Switch to async dispatch after we got Playwright object.\n    dispatcherConnection.onmessage = message => setImmediate(() => clientConnection.dispatch(message));\n    clientConnection.onmessage = message => setImmediate(() => dispatcherConnection.dispatch(message));\n    playwrightAPI._toImpl = (x) => dispatcherConnection._dispatchers.get(x._guid)._object;\n    return playwrightAPI;\n}\nmodule.exports = setupInProcess();\n//# sourceMappingURL=inprocess.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeValue = exports.parseSerializedValue = exports.parseError = exports.serializeError = void 0;\nconst errors_1 = require(\"../utils/errors\");\nfunction serializeError(e) {\n    if (isError(e))\n        return { error: { message: e.message, stack: e.stack, name: e.name } };\n    return { value: serializeValue(e, value => ({ fallThrough: value }), new Set()) };\n}\nexports.serializeError = serializeError;\nfunction parseError(error) {\n    if (!error.error) {\n        if (error.value === undefined)\n            throw new Error('Serialized error must have either an error or a value');\n        return parseSerializedValue(error.value, undefined);\n    }\n    if (error.error.name === 'TimeoutError') {\n        const e = new errors_1.TimeoutError(error.error.message);\n        e.stack = error.error.stack || '';\n        return e;\n    }\n    const e = new Error(error.error.message);\n    e.stack = error.error.stack || '';\n    return e;\n}\nexports.parseError = parseError;\nfunction parseSerializedValue(value, handles) {\n    if (value.n !== undefined)\n        return value.n;\n    if (value.s !== undefined)\n        return value.s;\n    if (value.b !== undefined)\n        return value.b;\n    if (value.v !== undefined) {\n        if (value.v === 'undefined')\n            return undefined;\n        if (value.v === 'null')\n            return null;\n        if (value.v === 'NaN')\n            return NaN;\n        if (value.v === 'Infinity')\n            return Infinity;\n        if (value.v === '-Infinity')\n            return -Infinity;\n        if (value.v === '-0')\n            return -0;\n    }\n    if (value.d !== undefined)\n        return new Date(value.d);\n    if (value.r !== undefined)\n        return new RegExp(value.r.p, value.r.f);\n    if (value.a !== undefined)\n        return value.a.map((a) => parseSerializedValue(a, handles));\n    if (value.o !== undefined) {\n        const result = {};\n        for (const { k, v } of value.o)\n            result[k] = parseSerializedValue(v, handles);\n        return result;\n    }\n    if (value.h !== undefined) {\n        if (handles === undefined)\n            throw new Error('Unexpected handle');\n        return handles[value.h];\n    }\n    throw new Error('Unexpected value');\n}\nexports.parseSerializedValue = parseSerializedValue;\nfunction serializeValue(value, handleSerializer, visited) {\n    const handle = handleSerializer(value);\n    if ('fallThrough' in handle)\n        value = handle.fallThrough;\n    else\n        return handle;\n    if (visited.has(value))\n        throw new Error('Argument is a circular structure');\n    if (typeof value === 'symbol')\n        return { v: 'undefined' };\n    if (Object.is(value, undefined))\n        return { v: 'undefined' };\n    if (Object.is(value, null))\n        return { v: 'null' };\n    if (Object.is(value, NaN))\n        return { v: 'NaN' };\n    if (Object.is(value, Infinity))\n        return { v: 'Infinity' };\n    if (Object.is(value, -Infinity))\n        return { v: '-Infinity' };\n    if (Object.is(value, -0))\n        return { v: '-0' };\n    if (typeof value === 'boolean')\n        return { b: value };\n    if (typeof value === 'number')\n        return { n: value };\n    if (typeof value === 'string')\n        return { s: value };\n    if (isError(value)) {\n        const error = value;\n        if ('captureStackTrace' in global.Error) {\n            // v8\n            return { s: error.stack || '' };\n        }\n        return { s: `${error.name}: ${error.message}\\n${error.stack}` };\n    }\n    if (isDate(value))\n        return { d: value.toJSON() };\n    if (isRegExp(value))\n        return { r: { p: value.source, f: value.flags } };\n    if (Array.isArray(value)) {\n        const a = [];\n        visited.add(value);\n        for (let i = 0; i < value.length; ++i)\n            a.push(serializeValue(value[i], handleSerializer, visited));\n        visited.delete(value);\n        return { a };\n    }\n    if (typeof value === 'object') {\n        const o = [];\n        visited.add(value);\n        for (const name of Object.keys(value))\n            o.push({ k: name, v: serializeValue(value[name], handleSerializer, visited) });\n        visited.delete(value);\n        return { o };\n    }\n    throw new Error('Unexpected value');\n}\nexports.serializeValue = serializeValue;\nfunction isRegExp(obj) {\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\nfunction isDate(obj) {\n    return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\n}\nfunction isError(obj) {\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\n//# sourceMappingURL=serializers.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nconst utils_1 = require(\"../utils/utils\");\nclass Transport {\n    constructor(pipeWrite, pipeRead, closeable, endian = 'le') {\n        this._data = Buffer.from([]);\n        this._waitForNextTask = utils_1.makeWaitForNextTask();\n        this._closed = false;\n        this._bytesLeft = 0;\n        this._pipeWrite = pipeWrite;\n        this._endian = endian;\n        this._closeableStream = closeable;\n        pipeRead.on('data', buffer => this._dispatch(buffer));\n        pipeRead.on('close', () => {\n            this._closed = true;\n            if (this.onclose)\n                this.onclose();\n        });\n        this.onmessage = undefined;\n        this.onclose = undefined;\n    }\n    send(message) {\n        if (this._closed)\n            throw new Error('Pipe has been closed');\n        const data = Buffer.from(message, 'utf-8');\n        const dataLength = Buffer.alloc(4);\n        if (this._endian === 'be')\n            dataLength.writeUInt32BE(data.length, 0);\n        else\n            dataLength.writeUInt32LE(data.length, 0);\n        this._pipeWrite.write(dataLength);\n        this._pipeWrite.write(data);\n    }\n    close() {\n        // Let it throw.\n        this._closeableStream.close();\n    }\n    _dispatch(buffer) {\n        this._data = Buffer.concat([this._data, buffer]);\n        while (true) {\n            if (!this._bytesLeft && this._data.length < 4) {\n                // Need more data.\n                break;\n            }\n            if (!this._bytesLeft) {\n                this._bytesLeft = this._endian === 'be' ? this._data.readUInt32BE(0) : this._data.readUInt32LE(0);\n                this._data = this._data.slice(4);\n            }\n            if (!this._bytesLeft || this._data.length < this._bytesLeft) {\n                // Need more data.\n                break;\n            }\n            const message = this._data.slice(0, this._bytesLeft);\n            this._data = this._data.slice(this._bytesLeft);\n            this._bytesLeft = 0;\n            this._waitForNextTask(() => {\n                if (this.onmessage)\n                    this.onmessage(message.toString('utf-8'));\n            });\n        }\n    }\n}\nexports.Transport = Transport;\n//# sourceMappingURL=transport.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createScheme = exports.ValidationError = void 0;\n// This file is generated by generate_channels.js, do not edit manually.\nconst validatorPrimitives_1 = require(\"./validatorPrimitives\");\nvar validatorPrimitives_2 = require(\"./validatorPrimitives\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validatorPrimitives_2.ValidationError; } });\nfunction createScheme(tChannel) {\n    const scheme = {};\n    const tType = (name) => {\n        return (arg, path) => {\n            const v = scheme[name];\n            if (!v)\n                throw new validatorPrimitives_1.ValidationError(path + ': unknown type \"' + name + '\"');\n            return v(arg, path);\n        };\n    };\n    scheme.StackFrame = validatorPrimitives_1.tObject({\n        file: validatorPrimitives_1.tString,\n        line: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        column: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        function: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.Metadata = validatorPrimitives_1.tObject({\n        stack: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('StackFrame'))),\n        apiName: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.WaitForEventInfo = validatorPrimitives_1.tObject({\n        waitId: validatorPrimitives_1.tString,\n        phase: validatorPrimitives_1.tEnum(['before', 'after', 'log']),\n        name: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        stack: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('StackFrame'))),\n        message: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        error: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.Point = validatorPrimitives_1.tObject({\n        x: validatorPrimitives_1.tNumber,\n        y: validatorPrimitives_1.tNumber,\n    });\n    scheme.Rect = validatorPrimitives_1.tObject({\n        x: validatorPrimitives_1.tNumber,\n        y: validatorPrimitives_1.tNumber,\n        width: validatorPrimitives_1.tNumber,\n        height: validatorPrimitives_1.tNumber,\n    });\n    scheme.SerializedValue = validatorPrimitives_1.tObject({\n        n: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        b: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        s: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        v: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['null', 'undefined', 'NaN', 'Infinity', '-Infinity', '-0'])),\n        d: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        r: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            p: validatorPrimitives_1.tString,\n            f: validatorPrimitives_1.tString,\n        })),\n        a: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('SerializedValue'))),\n        o: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tObject({\n            k: validatorPrimitives_1.tString,\n            v: tType('SerializedValue'),\n        }))),\n        h: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.SerializedArgument = validatorPrimitives_1.tObject({\n        value: tType('SerializedValue'),\n        handles: validatorPrimitives_1.tArray(tChannel('*')),\n    });\n    scheme.AXNode = validatorPrimitives_1.tObject({\n        role: validatorPrimitives_1.tString,\n        name: validatorPrimitives_1.tString,\n        valueString: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        valueNumber: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        description: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        keyshortcuts: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        roledescription: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        valuetext: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        disabled: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        expanded: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        focused: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modal: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        multiline: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        multiselectable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        readonly: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        required: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        selected: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        checked: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['checked', 'unchecked', 'mixed'])),\n        pressed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['pressed', 'released', 'mixed'])),\n        level: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        valuemin: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        valuemax: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        autocomplete: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        haspopup: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        invalid: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        orientation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        children: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('AXNode'))),\n    });\n    scheme.SetNetworkCookie = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        value: validatorPrimitives_1.tString,\n        url: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        domain: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        path: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        expires: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        httpOnly: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        secure: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        sameSite: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['Strict', 'Lax', 'None'])),\n    });\n    scheme.NetworkCookie = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        value: validatorPrimitives_1.tString,\n        domain: validatorPrimitives_1.tString,\n        path: validatorPrimitives_1.tString,\n        expires: validatorPrimitives_1.tNumber,\n        httpOnly: validatorPrimitives_1.tBoolean,\n        secure: validatorPrimitives_1.tBoolean,\n        sameSite: validatorPrimitives_1.tEnum(['Strict', 'Lax', 'None']),\n    });\n    scheme.NameValue = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        value: validatorPrimitives_1.tString,\n    });\n    scheme.OriginStorage = validatorPrimitives_1.tObject({\n        origin: validatorPrimitives_1.tString,\n        localStorage: validatorPrimitives_1.tArray(tType('NameValue')),\n    });\n    scheme.SerializedError = validatorPrimitives_1.tObject({\n        error: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            message: validatorPrimitives_1.tString,\n            name: validatorPrimitives_1.tString,\n            stack: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n        value: validatorPrimitives_1.tOptional(tType('SerializedValue')),\n    });\n    scheme.SelectorsRegisterParams = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        source: validatorPrimitives_1.tString,\n        contentScript: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.BrowserTypeLaunchParams = validatorPrimitives_1.tObject({\n        channel: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['chrome', 'chrome-beta', 'chrome-dev', 'chrome-canary', 'msedge', 'msedge-beta', 'msedge-dev', 'msedge-canary'])),\n        executablePath: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        args: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        ignoreAllDefaultArgs: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        ignoreDefaultArgs: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        handleSIGINT: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        handleSIGTERM: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        handleSIGHUP: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        env: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        headless: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        devtools: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        proxy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            server: validatorPrimitives_1.tString,\n            bypass: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            username: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            password: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n        downloadsPath: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        firefoxUserPrefs: validatorPrimitives_1.tOptional(validatorPrimitives_1.tAny),\n        chromiumSandbox: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        slowMo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.BrowserTypeLaunchPersistentContextParams = validatorPrimitives_1.tObject({\n        channel: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['chrome', 'chrome-beta', 'chrome-dev', 'chrome-canary', 'msedge', 'msedge-beta', 'msedge-dev', 'msedge-canary'])),\n        userDataDir: validatorPrimitives_1.tString,\n        sdkLanguage: validatorPrimitives_1.tString,\n        executablePath: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        args: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        ignoreAllDefaultArgs: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        ignoreDefaultArgs: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        handleSIGINT: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        handleSIGTERM: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        handleSIGHUP: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        env: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        headless: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        devtools: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        proxy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            server: validatorPrimitives_1.tString,\n            bypass: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            username: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            password: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n        downloadsPath: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        chromiumSandbox: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        slowMo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noDefaultViewport: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        viewport: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            width: validatorPrimitives_1.tNumber,\n            height: validatorPrimitives_1.tNumber,\n        })),\n        ignoreHTTPSErrors: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        javaScriptEnabled: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        bypassCSP: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        userAgent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        locale: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        timezoneId: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        geolocation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            longitude: validatorPrimitives_1.tNumber,\n            latitude: validatorPrimitives_1.tNumber,\n            accuracy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        })),\n        permissions: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        extraHTTPHeaders: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        offline: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        httpCredentials: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            username: validatorPrimitives_1.tString,\n            password: validatorPrimitives_1.tString,\n        })),\n        deviceScaleFactor: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        isMobile: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        hasTouch: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        colorScheme: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['light', 'dark', 'no-preference'])),\n        acceptDownloads: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        _traceDir: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        _debugName: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        recordVideo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            dir: validatorPrimitives_1.tString,\n            size: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n                width: validatorPrimitives_1.tNumber,\n                height: validatorPrimitives_1.tNumber,\n            })),\n        })),\n        recordHar: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            omitContent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n            path: validatorPrimitives_1.tString,\n        })),\n    });\n    scheme.BrowserTypeConnectOverCDPParams = validatorPrimitives_1.tObject({\n        sdkLanguage: validatorPrimitives_1.tString,\n        wsEndpoint: validatorPrimitives_1.tString,\n        slowMo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.BrowserCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserNewContextParams = validatorPrimitives_1.tObject({\n        sdkLanguage: validatorPrimitives_1.tString,\n        noDefaultViewport: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        viewport: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            width: validatorPrimitives_1.tNumber,\n            height: validatorPrimitives_1.tNumber,\n        })),\n        ignoreHTTPSErrors: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        javaScriptEnabled: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        bypassCSP: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        userAgent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        locale: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        timezoneId: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        geolocation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            longitude: validatorPrimitives_1.tNumber,\n            latitude: validatorPrimitives_1.tNumber,\n            accuracy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        })),\n        permissions: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        extraHTTPHeaders: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        offline: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        httpCredentials: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            username: validatorPrimitives_1.tString,\n            password: validatorPrimitives_1.tString,\n        })),\n        deviceScaleFactor: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        isMobile: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        hasTouch: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        colorScheme: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['dark', 'light', 'no-preference'])),\n        acceptDownloads: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        _traceDir: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        _debugName: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        recordVideo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            dir: validatorPrimitives_1.tString,\n            size: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n                width: validatorPrimitives_1.tNumber,\n                height: validatorPrimitives_1.tNumber,\n            })),\n        })),\n        recordHar: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            omitContent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n            path: validatorPrimitives_1.tString,\n        })),\n        proxy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            server: validatorPrimitives_1.tString,\n            bypass: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            username: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            password: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n        storageState: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            cookies: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('SetNetworkCookie'))),\n            origins: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('OriginStorage'))),\n        })),\n    });\n    scheme.BrowserCrNewBrowserCDPSessionParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserCrStartTracingParams = validatorPrimitives_1.tObject({\n        page: validatorPrimitives_1.tOptional(tChannel('Page')),\n        path: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        screenshots: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        categories: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n    });\n    scheme.BrowserCrStopTracingParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextAddCookiesParams = validatorPrimitives_1.tObject({\n        cookies: validatorPrimitives_1.tArray(tType('SetNetworkCookie')),\n    });\n    scheme.BrowserContextAddInitScriptParams = validatorPrimitives_1.tObject({\n        source: validatorPrimitives_1.tString,\n    });\n    scheme.BrowserContextClearCookiesParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextClearPermissionsParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextCookiesParams = validatorPrimitives_1.tObject({\n        urls: validatorPrimitives_1.tArray(validatorPrimitives_1.tString),\n    });\n    scheme.BrowserContextExposeBindingParams = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        needsHandle: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.BrowserContextGrantPermissionsParams = validatorPrimitives_1.tObject({\n        permissions: validatorPrimitives_1.tArray(validatorPrimitives_1.tString),\n        origin: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.BrowserContextNewPageParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextSetDefaultNavigationTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.BrowserContextSetDefaultTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.BrowserContextSetExtraHTTPHeadersParams = validatorPrimitives_1.tObject({\n        headers: validatorPrimitives_1.tArray(tType('NameValue')),\n    });\n    scheme.BrowserContextSetGeolocationParams = validatorPrimitives_1.tObject({\n        geolocation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            longitude: validatorPrimitives_1.tNumber,\n            latitude: validatorPrimitives_1.tNumber,\n            accuracy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        })),\n    });\n    scheme.BrowserContextSetHTTPCredentialsParams = validatorPrimitives_1.tObject({\n        httpCredentials: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            username: validatorPrimitives_1.tString,\n            password: validatorPrimitives_1.tString,\n        })),\n    });\n    scheme.BrowserContextSetNetworkInterceptionEnabledParams = validatorPrimitives_1.tObject({\n        enabled: validatorPrimitives_1.tBoolean,\n    });\n    scheme.BrowserContextSetOfflineParams = validatorPrimitives_1.tObject({\n        offline: validatorPrimitives_1.tBoolean,\n    });\n    scheme.BrowserContextStorageStateParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextPauseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BrowserContextRecorderSupplementEnableParams = validatorPrimitives_1.tObject({\n        language: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        startRecording: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        pauseOnNextStatement: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        launchOptions: validatorPrimitives_1.tOptional(validatorPrimitives_1.tAny),\n        contextOptions: validatorPrimitives_1.tOptional(validatorPrimitives_1.tAny),\n        device: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        saveStorage: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        outputFile: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.BrowserContextCrNewCDPSessionParams = validatorPrimitives_1.tObject({\n        page: tChannel('Page'),\n    });\n    scheme.PageSetDefaultNavigationTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.PageSetDefaultTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.PageSetFileChooserInterceptedNoReplyParams = validatorPrimitives_1.tObject({\n        intercepted: validatorPrimitives_1.tBoolean,\n    });\n    scheme.PageAddInitScriptParams = validatorPrimitives_1.tObject({\n        source: validatorPrimitives_1.tString,\n    });\n    scheme.PageCloseParams = validatorPrimitives_1.tObject({\n        runBeforeUnload: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.PageEmulateMediaParams = validatorPrimitives_1.tObject({\n        media: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['screen', 'print', 'null'])),\n        colorScheme: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['dark', 'light', 'no-preference', 'null'])),\n    });\n    scheme.PageExposeBindingParams = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n        needsHandle: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.PageGoBackParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        waitUntil: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['load', 'domcontentloaded', 'networkidle'])),\n    });\n    scheme.PageGoForwardParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        waitUntil: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['load', 'domcontentloaded', 'networkidle'])),\n    });\n    scheme.PageOpenerParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.PageReloadParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        waitUntil: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['load', 'domcontentloaded', 'networkidle'])),\n    });\n    scheme.PageScreenshotParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        type: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['png', 'jpeg'])),\n        quality: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        omitBackground: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        fullPage: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        clip: validatorPrimitives_1.tOptional(tType('Rect')),\n    });\n    scheme.PageSetExtraHTTPHeadersParams = validatorPrimitives_1.tObject({\n        headers: validatorPrimitives_1.tArray(tType('NameValue')),\n    });\n    scheme.PageSetNetworkInterceptionEnabledParams = validatorPrimitives_1.tObject({\n        enabled: validatorPrimitives_1.tBoolean,\n    });\n    scheme.PageSetViewportSizeParams = validatorPrimitives_1.tObject({\n        viewportSize: validatorPrimitives_1.tObject({\n            width: validatorPrimitives_1.tNumber,\n            height: validatorPrimitives_1.tNumber,\n        }),\n    });\n    scheme.PageKeyboardDownParams = validatorPrimitives_1.tObject({\n        key: validatorPrimitives_1.tString,\n    });\n    scheme.PageKeyboardUpParams = validatorPrimitives_1.tObject({\n        key: validatorPrimitives_1.tString,\n    });\n    scheme.PageKeyboardInsertTextParams = validatorPrimitives_1.tObject({\n        text: validatorPrimitives_1.tString,\n    });\n    scheme.PageKeyboardTypeParams = validatorPrimitives_1.tObject({\n        text: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageKeyboardPressParams = validatorPrimitives_1.tObject({\n        key: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageMouseMoveParams = validatorPrimitives_1.tObject({\n        x: validatorPrimitives_1.tNumber,\n        y: validatorPrimitives_1.tNumber,\n        steps: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageMouseDownParams = validatorPrimitives_1.tObject({\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        clickCount: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageMouseUpParams = validatorPrimitives_1.tObject({\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        clickCount: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageMouseClickParams = validatorPrimitives_1.tObject({\n        x: validatorPrimitives_1.tNumber,\n        y: validatorPrimitives_1.tNumber,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        clickCount: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.PageTouchscreenTapParams = validatorPrimitives_1.tObject({\n        x: validatorPrimitives_1.tNumber,\n        y: validatorPrimitives_1.tNumber,\n    });\n    scheme.PageAccessibilitySnapshotParams = validatorPrimitives_1.tObject({\n        interestingOnly: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        root: validatorPrimitives_1.tOptional(tChannel('ElementHandle')),\n    });\n    scheme.PagePdfParams = validatorPrimitives_1.tObject({\n        scale: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        displayHeaderFooter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        headerTemplate: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        footerTemplate: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        printBackground: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        landscape: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        pageRanges: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        format: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        width: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        height: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        preferCSSPageSize: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        margin: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            top: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            bottom: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            left: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            right: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n    });\n    scheme.PageCrStartJSCoverageParams = validatorPrimitives_1.tObject({\n        resetOnNavigation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        reportAnonymousScripts: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.PageCrStopJSCoverageParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.PageCrStartCSSCoverageParams = validatorPrimitives_1.tObject({\n        resetOnNavigation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.PageCrStopCSSCoverageParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.PageBringToFrontParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.FrameEvalOnSelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.FrameEvalOnSelectorAllParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.FrameAddScriptTagParams = validatorPrimitives_1.tObject({\n        url: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        content: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        type: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.FrameAddStyleTagParams = validatorPrimitives_1.tObject({\n        url: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        content: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.FrameCheckParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameClickParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        clickCount: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameContentParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.FrameDblclickParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameDispatchEventParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        type: validatorPrimitives_1.tString,\n        eventInit: tType('SerializedArgument'),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameEvaluateExpressionParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n        world: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['main', 'utility'])),\n    });\n    scheme.FrameEvaluateExpressionHandleParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n        world: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['main', 'utility'])),\n    });\n    scheme.FrameFillParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        value: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.FrameFocusParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameFrameElementParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.FrameGetAttributeParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        name: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameGotoParams = validatorPrimitives_1.tObject({\n        url: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        waitUntil: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['load', 'domcontentloaded', 'networkidle'])),\n        referer: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.FrameHoverParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameInnerHTMLParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameInnerTextParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsCheckedParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsDisabledParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsEnabledParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsHiddenParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsVisibleParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameIsEditableParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FramePressParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        key: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameQuerySelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n    });\n    scheme.FrameQuerySelectorAllParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n    });\n    scheme.FrameSelectOptionParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        elements: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tChannel('ElementHandle'))),\n        options: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tObject({\n            value: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            label: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            index: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        }))),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.FrameSetContentParams = validatorPrimitives_1.tObject({\n        html: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        waitUntil: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['load', 'domcontentloaded', 'networkidle'])),\n    });\n    scheme.FrameSetInputFilesParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        files: validatorPrimitives_1.tArray(validatorPrimitives_1.tObject({\n            name: validatorPrimitives_1.tString,\n            mimeType: validatorPrimitives_1.tString,\n            buffer: validatorPrimitives_1.tBinary,\n        })),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.FrameTapParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameTextContentParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameTitleParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.FrameTypeParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        text: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameUncheckParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameWaitForFunctionParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        pollingInterval: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.FrameWaitForSelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        state: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['attached', 'detached', 'visible', 'hidden'])),\n    });\n    scheme.WorkerEvaluateExpressionParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.WorkerEvaluateExpressionHandleParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.JSHandleDisposeParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleDisposeParams = tType('JSHandleDisposeParams');\n    scheme.JSHandleEvaluateExpressionParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElementHandleEvaluateExpressionParams = tType('JSHandleEvaluateExpressionParams');\n    scheme.JSHandleEvaluateExpressionHandleParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElementHandleEvaluateExpressionHandleParams = tType('JSHandleEvaluateExpressionHandleParams');\n    scheme.JSHandleGetPropertyListParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleGetPropertyListParams = tType('JSHandleGetPropertyListParams');\n    scheme.JSHandleGetPropertyParams = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n    });\n    scheme.ElementHandleGetPropertyParams = tType('JSHandleGetPropertyParams');\n    scheme.JSHandleJsonValueParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleJsonValueParams = tType('JSHandleJsonValueParams');\n    scheme.ElementHandleEvalOnSelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElementHandleEvalOnSelectorAllParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElementHandleBoundingBoxParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleCheckParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleClickParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        clickCount: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleContentFrameParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleDblclickParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        button: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['left', 'right', 'middle'])),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleDispatchEventParams = validatorPrimitives_1.tObject({\n        type: validatorPrimitives_1.tString,\n        eventInit: tType('SerializedArgument'),\n    });\n    scheme.ElementHandleFillParams = validatorPrimitives_1.tObject({\n        value: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ElementHandleFocusParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleGetAttributeParams = validatorPrimitives_1.tObject({\n        name: validatorPrimitives_1.tString,\n    });\n    scheme.ElementHandleHoverParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleInnerHTMLParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleInnerTextParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsCheckedParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsDisabledParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsEditableParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsEnabledParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsHiddenParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleIsVisibleParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleOwnerFrameParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandlePressParams = validatorPrimitives_1.tObject({\n        key: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ElementHandleQuerySelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n    });\n    scheme.ElementHandleQuerySelectorAllParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n    });\n    scheme.ElementHandleScreenshotParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        type: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['png', 'jpeg'])),\n        quality: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        omitBackground: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ElementHandleScrollIntoViewIfNeededParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleSelectOptionParams = validatorPrimitives_1.tObject({\n        elements: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tChannel('ElementHandle'))),\n        options: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tObject({\n            value: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            label: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            index: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        }))),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ElementHandleSelectTextParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleSetInputFilesParams = validatorPrimitives_1.tObject({\n        files: validatorPrimitives_1.tArray(validatorPrimitives_1.tObject({\n            name: validatorPrimitives_1.tString,\n            mimeType: validatorPrimitives_1.tString,\n            buffer: validatorPrimitives_1.tBinary,\n        })),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ElementHandleTapParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        modifiers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tEnum(['Alt', 'Control', 'Meta', 'Shift']))),\n        position: validatorPrimitives_1.tOptional(tType('Point')),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleTextContentParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElementHandleTypeParams = validatorPrimitives_1.tObject({\n        text: validatorPrimitives_1.tString,\n        delay: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleUncheckParams = validatorPrimitives_1.tObject({\n        force: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        noWaitAfter: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleWaitForElementStateParams = validatorPrimitives_1.tObject({\n        state: validatorPrimitives_1.tEnum(['visible', 'hidden', 'stable', 'enabled', 'disabled', 'editable']),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElementHandleWaitForSelectorParams = validatorPrimitives_1.tObject({\n        selector: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        state: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['attached', 'detached', 'visible', 'hidden'])),\n    });\n    scheme.RequestResponseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.RouteAbortParams = validatorPrimitives_1.tObject({\n        errorCode: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.RouteContinueParams = validatorPrimitives_1.tObject({\n        url: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        method: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        headers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        postData: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBinary),\n    });\n    scheme.RouteFulfillParams = validatorPrimitives_1.tObject({\n        status: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        headers: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        body: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        isBase64: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n    });\n    scheme.ResourceTiming = validatorPrimitives_1.tObject({\n        startTime: validatorPrimitives_1.tNumber,\n        domainLookupStart: validatorPrimitives_1.tNumber,\n        domainLookupEnd: validatorPrimitives_1.tNumber,\n        connectStart: validatorPrimitives_1.tNumber,\n        secureConnectionStart: validatorPrimitives_1.tNumber,\n        connectEnd: validatorPrimitives_1.tNumber,\n        requestStart: validatorPrimitives_1.tNumber,\n        responseStart: validatorPrimitives_1.tNumber,\n    });\n    scheme.ResponseBodyParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ResponseFinishedParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.BindingCallRejectParams = validatorPrimitives_1.tObject({\n        error: tType('SerializedError'),\n    });\n    scheme.BindingCallResolveParams = validatorPrimitives_1.tObject({\n        result: tType('SerializedArgument'),\n    });\n    scheme.DialogAcceptParams = validatorPrimitives_1.tObject({\n        promptText: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.DialogDismissParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.DownloadPathParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.DownloadSaveAsParams = validatorPrimitives_1.tObject({\n        path: validatorPrimitives_1.tString,\n    });\n    scheme.DownloadSaveAsStreamParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.DownloadFailureParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.DownloadStreamParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.DownloadDeleteParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.StreamReadParams = validatorPrimitives_1.tObject({\n        size: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.StreamCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.CDPSessionSendParams = validatorPrimitives_1.tObject({\n        method: validatorPrimitives_1.tString,\n        params: validatorPrimitives_1.tOptional(validatorPrimitives_1.tAny),\n    });\n    scheme.CDPSessionDetachParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.ElectronLaunchParams = validatorPrimitives_1.tObject({\n        sdkLanguage: validatorPrimitives_1.tString,\n        executablePath: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        args: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        cwd: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        env: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.ElectronApplicationEvaluateExpressionParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElectronApplicationEvaluateExpressionHandleParams = validatorPrimitives_1.tObject({\n        expression: validatorPrimitives_1.tString,\n        isFunction: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        arg: tType('SerializedArgument'),\n    });\n    scheme.ElectronApplicationCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.AndroidDevicesParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.AndroidSetDefaultTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.AndroidSocketWriteParams = validatorPrimitives_1.tObject({\n        data: validatorPrimitives_1.tBinary,\n    });\n    scheme.AndroidSocketCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.AndroidDeviceWaitParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        state: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['gone'])),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceFillParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        text: validatorPrimitives_1.tString,\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceTapParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        duration: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceDragParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        dest: tType('Point'),\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceFlingParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        direction: validatorPrimitives_1.tEnum(['up', 'down', 'left', 'right']),\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceLongTapParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDevicePinchCloseParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        percent: validatorPrimitives_1.tNumber,\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDevicePinchOpenParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        percent: validatorPrimitives_1.tNumber,\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceScrollParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        direction: validatorPrimitives_1.tEnum(['up', 'down', 'left', 'right']),\n        percent: validatorPrimitives_1.tNumber,\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceSwipeParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n        direction: validatorPrimitives_1.tEnum(['up', 'down', 'left', 'right']),\n        percent: validatorPrimitives_1.tNumber,\n        speed: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        timeout: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceInfoParams = validatorPrimitives_1.tObject({\n        selector: tType('AndroidSelector'),\n    });\n    scheme.AndroidDeviceScreenshotParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.AndroidDeviceInputTypeParams = validatorPrimitives_1.tObject({\n        text: validatorPrimitives_1.tString,\n    });\n    scheme.AndroidDeviceInputPressParams = validatorPrimitives_1.tObject({\n        key: validatorPrimitives_1.tString,\n    });\n    scheme.AndroidDeviceInputTapParams = validatorPrimitives_1.tObject({\n        point: tType('Point'),\n    });\n    scheme.AndroidDeviceInputSwipeParams = validatorPrimitives_1.tObject({\n        segments: validatorPrimitives_1.tArray(tType('Point')),\n        steps: validatorPrimitives_1.tNumber,\n    });\n    scheme.AndroidDeviceInputDragParams = validatorPrimitives_1.tObject({\n        from: tType('Point'),\n        to: tType('Point'),\n        steps: validatorPrimitives_1.tNumber,\n    });\n    scheme.AndroidDeviceLaunchBrowserParams = validatorPrimitives_1.tObject({\n        sdkLanguage: validatorPrimitives_1.tString,\n        pkg: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        ignoreHTTPSErrors: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        javaScriptEnabled: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        bypassCSP: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        userAgent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        locale: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        timezoneId: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        geolocation: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            longitude: validatorPrimitives_1.tNumber,\n            latitude: validatorPrimitives_1.tNumber,\n            accuracy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        })),\n        permissions: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n        extraHTTPHeaders: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('NameValue'))),\n        offline: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        httpCredentials: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            username: validatorPrimitives_1.tString,\n            password: validatorPrimitives_1.tString,\n        })),\n        deviceScaleFactor: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        isMobile: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        hasTouch: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        colorScheme: validatorPrimitives_1.tOptional(validatorPrimitives_1.tEnum(['dark', 'light', 'no-preference'])),\n        acceptDownloads: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        _traceDir: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        _debugName: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        recordVideo: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            dir: validatorPrimitives_1.tString,\n            size: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n                width: validatorPrimitives_1.tNumber,\n                height: validatorPrimitives_1.tNumber,\n            })),\n        })),\n        recordHar: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            omitContent: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n            path: validatorPrimitives_1.tString,\n        })),\n        proxy: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            server: validatorPrimitives_1.tString,\n            bypass: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            username: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n            password: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        })),\n    });\n    scheme.AndroidDeviceOpenParams = validatorPrimitives_1.tObject({\n        command: validatorPrimitives_1.tString,\n    });\n    scheme.AndroidDeviceShellParams = validatorPrimitives_1.tObject({\n        command: validatorPrimitives_1.tString,\n    });\n    scheme.AndroidDeviceInstallApkParams = validatorPrimitives_1.tObject({\n        file: validatorPrimitives_1.tBinary,\n        args: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(validatorPrimitives_1.tString)),\n    });\n    scheme.AndroidDevicePushParams = validatorPrimitives_1.tObject({\n        file: validatorPrimitives_1.tBinary,\n        path: validatorPrimitives_1.tString,\n        mode: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n    });\n    scheme.AndroidDeviceSetDefaultTimeoutNoReplyParams = validatorPrimitives_1.tObject({\n        timeout: validatorPrimitives_1.tNumber,\n    });\n    scheme.AndroidDeviceConnectToWebViewParams = validatorPrimitives_1.tObject({\n        sdkLanguage: validatorPrimitives_1.tString,\n        pid: validatorPrimitives_1.tNumber,\n    });\n    scheme.AndroidDeviceCloseParams = validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({}));\n    scheme.AndroidWebView = validatorPrimitives_1.tObject({\n        pid: validatorPrimitives_1.tNumber,\n        pkg: validatorPrimitives_1.tString,\n    });\n    scheme.AndroidSelector = validatorPrimitives_1.tObject({\n        checkable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        checked: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        clazz: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        clickable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        depth: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        desc: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        enabled: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        focusable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        focused: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        hasChild: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            selector: tType('AndroidSelector'),\n        })),\n        hasDescendant: validatorPrimitives_1.tOptional(validatorPrimitives_1.tObject({\n            selector: tType('AndroidSelector'),\n            maxDepth: validatorPrimitives_1.tOptional(validatorPrimitives_1.tNumber),\n        })),\n        longClickable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        pkg: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        res: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n        scrollable: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        selected: validatorPrimitives_1.tOptional(validatorPrimitives_1.tBoolean),\n        text: validatorPrimitives_1.tOptional(validatorPrimitives_1.tString),\n    });\n    scheme.AndroidElementInfo = validatorPrimitives_1.tObject({\n        children: validatorPrimitives_1.tOptional(validatorPrimitives_1.tArray(tType('AndroidElementInfo'))),\n        clazz: validatorPrimitives_1.tString,\n        desc: validatorPrimitives_1.tString,\n        res: validatorPrimitives_1.tString,\n        pkg: validatorPrimitives_1.tString,\n        text: validatorPrimitives_1.tString,\n        bounds: tType('Rect'),\n        checkable: validatorPrimitives_1.tBoolean,\n        checked: validatorPrimitives_1.tBoolean,\n        clickable: validatorPrimitives_1.tBoolean,\n        enabled: validatorPrimitives_1.tBoolean,\n        focusable: validatorPrimitives_1.tBoolean,\n        focused: validatorPrimitives_1.tBoolean,\n        longClickable: validatorPrimitives_1.tBoolean,\n        scrollable: validatorPrimitives_1.tBoolean,\n        selected: validatorPrimitives_1.tBoolean,\n    });\n    return scheme;\n}\nexports.createScheme = createScheme;\n//# sourceMappingURL=validator.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tEnum = exports.tObject = exports.tArray = exports.tOptional = exports.tAny = exports.tUndefined = exports.tBinary = exports.tString = exports.tBoolean = exports.tNumber = exports.ValidationError = void 0;\nconst utils_1 = require(\"../utils/utils\");\nclass ValidationError extends Error {\n}\nexports.ValidationError = ValidationError;\nexports.tNumber = (arg, path) => {\n    if (arg instanceof Number)\n        return arg.valueOf();\n    if (typeof arg === 'number')\n        return arg;\n    throw new ValidationError(`${path}: expected number, got ${typeof arg}`);\n};\nexports.tBoolean = (arg, path) => {\n    if (arg instanceof Boolean)\n        return arg.valueOf();\n    if (typeof arg === 'boolean')\n        return arg;\n    throw new ValidationError(`${path}: expected boolean, got ${typeof arg}`);\n};\nexports.tString = (arg, path) => {\n    if (arg instanceof String)\n        return arg.valueOf();\n    if (typeof arg === 'string')\n        return arg;\n    throw new ValidationError(`${path}: expected string, got ${typeof arg}`);\n};\nexports.tBinary = (arg, path) => {\n    if (arg instanceof String)\n        return arg.valueOf();\n    if (typeof arg === 'string')\n        return arg;\n    throw new ValidationError(`${path}: expected base64-encoded buffer, got ${typeof arg}`);\n};\nexports.tUndefined = (arg, path) => {\n    if (Object.is(arg, undefined))\n        return arg;\n    throw new ValidationError(`${path}: expected undefined, got ${typeof arg}`);\n};\nexports.tAny = (arg, path) => {\n    return arg;\n};\nexports.tOptional = (v) => {\n    return (arg, path) => {\n        if (Object.is(arg, undefined))\n            return arg;\n        return v(arg, path);\n    };\n};\nexports.tArray = (v) => {\n    return (arg, path) => {\n        if (!Array.isArray(arg))\n            throw new ValidationError(`${path}: expected array, got ${typeof arg}`);\n        return arg.map((x, index) => v(x, path + '[' + index + ']'));\n    };\n};\nexports.tObject = (s) => {\n    return (arg, path) => {\n        if (Object.is(arg, null))\n            throw new ValidationError(`${path}: expected object, got null`);\n        if (typeof arg !== 'object')\n            throw new ValidationError(`${path}: expected object, got ${typeof arg}`);\n        const result = {};\n        for (const [key, v] of Object.entries(s)) {\n            const value = v(arg[key], path ? path + '.' + key : key);\n            if (!Object.is(value, undefined))\n                result[key] = value;\n        }\n        if (utils_1.isUnderTest()) {\n            for (const [key, value] of Object.entries(arg)) {\n                if (key.startsWith('__testHook'))\n                    result[key] = value;\n            }\n        }\n        return result;\n    };\n};\nexports.tEnum = (e) => {\n    return (arg, path) => {\n        if (!e.includes(arg))\n            throw new ValidationError(`${path}: expected one of (${e.join('|')})`);\n        return arg;\n    };\n};\n//# sourceMappingURL=validatorPrimitives.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Accessibility = void 0;\nclass Accessibility {\n    constructor(getAXTree) {\n        this._getAXTree = getAXTree;\n    }\n    async snapshot(options = {}) {\n        const { interestingOnly = true, root = null, } = options;\n        const { tree, needle } = await this._getAXTree(root || undefined);\n        if (!interestingOnly) {\n            if (root)\n                return needle && serializeTree(needle)[0];\n            return serializeTree(tree)[0];\n        }\n        const interestingNodes = new Set();\n        collectInterestingNodes(interestingNodes, tree, false);\n        if (root && (!needle || !interestingNodes.has(needle)))\n            return null;\n        return serializeTree(needle || tree, interestingNodes)[0];\n    }\n}\nexports.Accessibility = Accessibility;\nfunction collectInterestingNodes(collection, node, insideControl) {\n    if (node.isInteresting(insideControl))\n        collection.add(node);\n    if (node.isLeafNode())\n        return;\n    insideControl = insideControl || node.isControl();\n    for (const child of node.children())\n        collectInterestingNodes(collection, child, insideControl);\n}\nfunction serializeTree(node, whitelistedNodes) {\n    const children = [];\n    for (const child of node.children())\n        children.push(...serializeTree(child, whitelistedNodes));\n    if (whitelistedNodes && !whitelistedNodes.has(node))\n        return children;\n    const serializedNode = node.serialize();\n    if (children.length)\n        serializedNode.children = children;\n    return [serializedNode];\n}\n//# sourceMappingURL=accessibility.js.map",null,"\"use strict\";\n/**\n * Copyright Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AdbBackend = void 0;\nconst assert_1 = __importDefault(require(\"assert\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst net = __importStar(require(\"net\"));\nconst events_1 = require(\"events\");\nclass AdbBackend {\n    async devices() {\n        const result = await runCommand('host:devices');\n        const lines = result.toString().trim().split('\\n');\n        return lines.map(line => {\n            const [serial, status] = line.trim().split('\\t');\n            return new AdbDevice(serial, status);\n        });\n    }\n}\nexports.AdbBackend = AdbBackend;\nclass AdbDevice {\n    constructor(serial, status) {\n        this.serial = serial;\n        this.status = status;\n    }\n    async init() {\n    }\n    async close() {\n    }\n    runCommand(command) {\n        return runCommand(command, this.serial);\n    }\n    async open(command) {\n        const result = await open(command, this.serial);\n        result.becomeSocket();\n        return result;\n    }\n}\nasync function runCommand(command, serial) {\n    debug_1.default('pw:adb:runCommand')(command, serial);\n    const socket = new BufferedSocketWrapper(command, net.createConnection({ port: 5037 }));\n    if (serial) {\n        await socket.write(encodeMessage(`host:transport:${serial}`));\n        const status = await socket.read(4);\n        assert_1.default(status.toString() === 'OKAY', status.toString());\n    }\n    await socket.write(encodeMessage(command));\n    const status = await socket.read(4);\n    assert_1.default(status.toString() === 'OKAY', status.toString());\n    let commandOutput;\n    if (!command.startsWith('shell:')) {\n        const remainingLength = parseInt((await socket.read(4)).toString(), 16);\n        commandOutput = await socket.read(remainingLength);\n    }\n    else {\n        commandOutput = await socket.readAll();\n    }\n    socket.close();\n    return commandOutput;\n}\nasync function open(command, serial) {\n    const socket = new BufferedSocketWrapper(command, net.createConnection({ port: 5037 }));\n    if (serial) {\n        await socket.write(encodeMessage(`host:transport:${serial}`));\n        const status = await socket.read(4);\n        assert_1.default(status.toString() === 'OKAY', status.toString());\n    }\n    await socket.write(encodeMessage(command));\n    const status = await socket.read(4);\n    assert_1.default(status.toString() === 'OKAY', status.toString());\n    return socket;\n}\nfunction encodeMessage(message) {\n    let lenHex = (message.length).toString(16);\n    lenHex = '0'.repeat(4 - lenHex.length) + lenHex;\n    return Buffer.from(lenHex + message);\n}\nclass BufferedSocketWrapper extends events_1.EventEmitter {\n    constructor(command, socket) {\n        super();\n        this._buffer = Buffer.from([]);\n        this._isSocket = false;\n        this._isClosed = false;\n        this._command = command;\n        this._socket = socket;\n        this._connectPromise = new Promise(f => this._socket.on('connect', f));\n        this._socket.on('data', data => {\n            debug_1.default('pw:adb:data')(data.toString());\n            if (this._isSocket) {\n                this.emit('data', data);\n                return;\n            }\n            this._buffer = Buffer.concat([this._buffer, data]);\n            if (this._notifyReader)\n                this._notifyReader();\n        });\n        this._socket.on('close', () => {\n            this._isClosed = true;\n            if (this._notifyReader)\n                this._notifyReader();\n            this.close();\n            this.emit('close');\n        });\n        this._socket.on('error', error => this.emit('error', error));\n    }\n    async write(data) {\n        debug_1.default('pw:adb:send')(data.toString().substring(0, 100) + '...');\n        await this._connectPromise;\n        await new Promise(f => this._socket.write(data, f));\n    }\n    close() {\n        if (this._isClosed)\n            return;\n        debug_1.default('pw:adb')('Close ' + this._command);\n        this._socket.destroy();\n    }\n    async read(length) {\n        await this._connectPromise;\n        assert_1.default(!this._isSocket, 'Can not read by length in socket mode');\n        while (this._buffer.length < length)\n            await new Promise(f => this._notifyReader = f);\n        const result = this._buffer.slice(0, length);\n        this._buffer = this._buffer.slice(length);\n        debug_1.default('pw:adb:recv')(result.toString().substring(0, 100) + '...');\n        return result;\n    }\n    async readAll() {\n        while (!this._isClosed)\n            await new Promise(f => this._notifyReader = f);\n        return this._buffer;\n    }\n    becomeSocket() {\n        assert_1.default(!this._buffer.length);\n        this._isSocket = true;\n    }\n}\n//# sourceMappingURL=backendAdb.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Browser = void 0;\nconst browserContext_1 = require(\"./browserContext\");\nconst page_1 = require(\"./page\");\nconst download_1 = require(\"./download\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass Browser extends instrumentation_1.SdkObject {\n    constructor(options) {\n        super(options.rootSdkObject);\n        this._downloads = new Map();\n        this._defaultContext = null;\n        this._startedClosing = false;\n        this._idToVideo = new Map();\n        this.attribution.browser = this;\n        this.options = options;\n    }\n    _downloadCreated(page, uuid, url, suggestedFilename) {\n        const download = new download_1.Download(page, this.options.downloadsPath || '', uuid, url, suggestedFilename);\n        this._downloads.set(uuid, download);\n    }\n    _downloadFilenameSuggested(uuid, suggestedFilename) {\n        const download = this._downloads.get(uuid);\n        if (!download)\n            return;\n        download._filenameSuggested(suggestedFilename);\n    }\n    _downloadFinished(uuid, error) {\n        const download = this._downloads.get(uuid);\n        if (!download)\n            return;\n        download._reportFinished(error);\n        this._downloads.delete(uuid);\n    }\n    _videoStarted(context, videoId, path, pageOrError) {\n        const video = new browserContext_1.Video(context, videoId, path);\n        this._idToVideo.set(videoId, video);\n        context.emit(browserContext_1.BrowserContext.Events.VideoStarted, video);\n        pageOrError.then(pageOrError => {\n            if (pageOrError instanceof page_1.Page)\n                pageOrError.videoStarted(video);\n        });\n    }\n    _videoFinished(videoId) {\n        const video = this._idToVideo.get(videoId);\n        this._idToVideo.delete(videoId);\n        video._finish();\n    }\n    _didClose() {\n        for (const context of this.contexts())\n            context._browserClosed();\n        if (this._defaultContext)\n            this._defaultContext._browserClosed();\n        this.emit(Browser.Events.Disconnected);\n    }\n    async close() {\n        if (!this._startedClosing) {\n            this._startedClosing = true;\n            await this.options.browserProcess.close();\n        }\n        if (this.isConnected())\n            await new Promise(x => this.once(Browser.Events.Disconnected, x));\n    }\n}\nexports.Browser = Browser;\nBrowser.Events = {\n    Disconnected: 'disconnected',\n};\n//# sourceMappingURL=browser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizeProxySettings = exports.verifyGeolocation = exports.validateBrowserContextOptions = exports.assertBrowserContextIsNotOwned = exports.BrowserContext = exports.Video = void 0;\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst utils_1 = require(\"../utils/utils\");\nconst helper_1 = require(\"./helper\");\nconst network = __importStar(require(\"./network\"));\nconst page_1 = require(\"./page\");\nconst selectors_1 = require(\"./selectors\");\nconst path_1 = __importDefault(require(\"path\"));\nconst instrumentation_1 = require(\"./instrumentation\");\nclass Video {\n    constructor(context, videoId, p) {\n        this._finishCallback = () => { };\n        this._videoId = videoId;\n        this._path = p;\n        this._relativePath = path_1.default.relative(context._options.recordVideo.dir, p);\n        this._context = context;\n        this._finishedPromise = new Promise(fulfill => this._finishCallback = fulfill);\n    }\n    async _finish() {\n        if (this._callbackOnFinish)\n            await this._callbackOnFinish();\n        this._finishCallback();\n    }\n    _waitForCallbackOnFinish(callback) {\n        this._callbackOnFinish = callback;\n    }\n}\nexports.Video = Video;\nclass BrowserContext extends instrumentation_1.SdkObject {\n    constructor(browser, options, browserContextId) {\n        super(browser);\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n        this._pageBindings = new Map();\n        this._closedStatus = 'open';\n        this._permissions = new Map();\n        this._downloads = new Set();\n        this._origins = new Set();\n        this.attribution.context = this;\n        this._browser = browser;\n        this._options = options;\n        this._browserContextId = browserContextId;\n        this._isPersistentContext = !browserContextId;\n        this._closePromise = new Promise(fulfill => this._closePromiseFulfill = fulfill);\n    }\n    _setSelectors(selectors) {\n        this._selectors = selectors;\n    }\n    selectors() {\n        return this._selectors || selectors_1.serverSelectors;\n    }\n    async _initialize() {\n        await this.instrumentation.onContextCreated(this);\n    }\n    async _ensureVideosPath() {\n        if (this._options.recordVideo)\n            await utils_1.mkdirIfNeeded(path_1.default.join(this._options.recordVideo.dir, 'dummy'));\n    }\n    _browserClosed() {\n        for (const page of this.pages())\n            page._didClose();\n        this._didCloseInternal();\n    }\n    _didCloseInternal() {\n        if (this._closedStatus === 'closed') {\n            // We can come here twice if we close browser context and browser\n            // at the same time.\n            return;\n        }\n        this._closedStatus = 'closed';\n        this._downloads.clear();\n        this._closePromiseFulfill(new Error('Context closed'));\n        this.emit(BrowserContext.Events.Close);\n    }\n    async cookies(urls = []) {\n        if (urls && !Array.isArray(urls))\n            urls = [urls];\n        return await this._doCookies(urls);\n    }\n    setHTTPCredentials(httpCredentials) {\n        return this._doSetHTTPCredentials(httpCredentials);\n    }\n    async exposeBinding(name, needsHandle, playwrightBinding) {\n        const identifier = page_1.PageBinding.identifier(name, 'main');\n        if (this._pageBindings.has(identifier))\n            throw new Error(`Function \"${name}\" has been already registered`);\n        for (const page of this.pages()) {\n            if (page.getBinding(name, 'main'))\n                throw new Error(`Function \"${name}\" has been already registered in one of the pages`);\n        }\n        const binding = new page_1.PageBinding(name, playwrightBinding, needsHandle, 'main');\n        this._pageBindings.set(identifier, binding);\n        await this._doExposeBinding(binding);\n    }\n    async grantPermissions(permissions, origin) {\n        let resolvedOrigin = '*';\n        if (origin) {\n            const url = new URL(origin);\n            resolvedOrigin = url.origin;\n        }\n        const existing = new Set(this._permissions.get(resolvedOrigin) || []);\n        permissions.forEach(p => existing.add(p));\n        const list = [...existing.values()];\n        this._permissions.set(resolvedOrigin, list);\n        await this._doGrantPermissions(resolvedOrigin, list);\n    }\n    async clearPermissions() {\n        this._permissions.clear();\n        await this._doClearPermissions();\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n    }\n    async _loadDefaultContextAsIs(progress) {\n        if (!this.pages().length) {\n            const waitForEvent = helper_1.helper.waitForEvent(progress, this, BrowserContext.Events.Page);\n            progress.cleanupWhenAborted(() => waitForEvent.dispose);\n            const page = (await waitForEvent.promise);\n            if (page._pageIsError)\n                throw page._pageIsError;\n        }\n        const pages = this.pages();\n        if (pages[0]._pageIsError)\n            throw pages[0]._pageIsError;\n        await pages[0].mainFrame()._waitForLoadState(progress, 'load');\n        return pages;\n    }\n    async _loadDefaultContext(progress) {\n        const pages = await this._loadDefaultContextAsIs(progress);\n        if (this._options.isMobile || this._options.locale) {\n            // Workaround for:\n            // - chromium fails to change isMobile for existing page;\n            // - webkit fails to change locale for existing page.\n            const oldPage = pages[0];\n            await this.newPage(progress.metadata);\n            await oldPage.close(progress.metadata);\n        }\n    }\n    _authenticateProxyViaHeader() {\n        const proxy = this._options.proxy || this._browser.options.proxy || { username: undefined, password: undefined };\n        const { username, password } = proxy;\n        if (username) {\n            this._options.httpCredentials = { username, password: password };\n            const token = Buffer.from(`${username}:${password}`).toString('base64');\n            this._options.extraHTTPHeaders = network.mergeHeaders([\n                this._options.extraHTTPHeaders,\n                network.singleHeader('Proxy-Authorization', `Basic ${token}`),\n            ]);\n        }\n    }\n    _authenticateProxyViaCredentials() {\n        const proxy = this._options.proxy || this._browser.options.proxy;\n        if (!proxy)\n            return;\n        const { username, password } = proxy;\n        if (username)\n            this._options.httpCredentials = { username, password: password || '' };\n    }\n    async _setRequestInterceptor(handler) {\n        this._requestInterceptor = handler;\n        await this._doUpdateRequestInterception();\n    }\n    isClosingOrClosed() {\n        return this._closedStatus !== 'open';\n    }\n    async close(metadata) {\n        if (this._closedStatus === 'open') {\n            this.emit(BrowserContext.Events.BeforeClose);\n            this._closedStatus = 'closing';\n            await this.instrumentation.onContextWillDestroy(this);\n            if (this._isPersistentContext) {\n                // Close all the pages instead of the context,\n                // because we cannot close the default context.\n                await Promise.all(this.pages().map(page => page.close(metadata)));\n            }\n            else {\n                // Close the context.\n                await this._doClose();\n            }\n            // Cleanup.\n            const promises = [];\n            for (const video of this._browser._idToVideo.values()) {\n                // Wait for the videos to finish.\n                if (video._context === this)\n                    promises.push(video._finishedPromise);\n            }\n            for (const download of this._downloads) {\n                // We delete downloads after context closure\n                // so that browser does not write to the download file anymore.\n                promises.push(download.deleteOnContextClose());\n            }\n            await Promise.all(promises);\n            // Persistent context should also close the browser.\n            if (this._isPersistentContext)\n                await this._browser.close();\n            // Bookkeeping.\n            await this.instrumentation.onContextDidDestroy(this);\n            this._didCloseInternal();\n        }\n        await this._closePromise;\n    }\n    async newPage(metadata) {\n        const pageDelegate = await this.newPageDelegate();\n        const pageOrError = await pageDelegate.pageOrError();\n        if (pageOrError instanceof page_1.Page) {\n            if (pageOrError.isClosed())\n                throw new Error('Page has been closed.');\n            return pageOrError;\n        }\n        throw pageOrError;\n    }\n    addVisitedOrigin(origin) {\n        this._origins.add(origin);\n    }\n    async storageState(metadata) {\n        const result = {\n            cookies: (await this.cookies()).filter(c => c.value !== ''),\n            origins: []\n        };\n        if (this._origins.size) {\n            const internalMetadata = instrumentation_1.internalCallMetadata();\n            const page = await this.newPage(internalMetadata);\n            await page._setServerRequestInterceptor(handler => {\n                handler.fulfill({ body: '<html></html>' }).catch(() => { });\n            });\n            for (const origin of this._origins) {\n                const originStorage = { origin, localStorage: [] };\n                const frame = page.mainFrame();\n                await frame.goto(internalMetadata, origin);\n                const storage = await frame.evaluateExpression(`({\n          localStorage: Object.keys(localStorage).map(name => ({ name, value: localStorage.getItem(name) })),\n        })`, false, undefined, 'utility');\n                originStorage.localStorage = storage.localStorage;\n                if (storage.localStorage.length)\n                    result.origins.push(originStorage);\n            }\n            await page.close(internalMetadata);\n        }\n        return result;\n    }\n    async setStorageState(metadata, state) {\n        if (state.cookies)\n            await this.addCookies(state.cookies);\n        if (state.origins && state.origins.length) {\n            const internalMetadata = instrumentation_1.internalCallMetadata();\n            const page = await this.newPage(internalMetadata);\n            await page._setServerRequestInterceptor(handler => {\n                handler.fulfill({ body: '<html></html>' }).catch(() => { });\n            });\n            for (const originState of state.origins) {\n                const frame = page.mainFrame();\n                await frame.goto(metadata, originState.origin);\n                await frame.evaluateExpression(`\n          originState => {\n            for (const { name, value } of (originState.localStorage || []))\n              localStorage.setItem(name, value);\n          }`, true, originState, 'utility');\n            }\n            await page.close(internalMetadata);\n        }\n    }\n    async extendInjectedScript(source, arg) {\n        const installInFrame = (frame) => frame.extendInjectedScript(source, arg).catch(() => { });\n        const installInPage = (page) => {\n            page.on(page_1.Page.Events.InternalFrameNavigatedToNewDocument, installInFrame);\n            return Promise.all(page.frames().map(installInFrame));\n        };\n        this.on(BrowserContext.Events.Page, installInPage);\n        return Promise.all(this.pages().map(installInPage));\n    }\n}\nexports.BrowserContext = BrowserContext;\nBrowserContext.Events = {\n    Close: 'close',\n    Page: 'page',\n    VideoStarted: 'videostarted',\n    BeforeClose: 'beforeclose',\n};\nfunction assertBrowserContextIsNotOwned(context) {\n    for (const page of context.pages()) {\n        if (page._ownedContext)\n            throw new Error('Please use browser.newContext() for multi-page scripts that share the context.');\n    }\n}\nexports.assertBrowserContextIsNotOwned = assertBrowserContextIsNotOwned;\nfunction validateBrowserContextOptions(options, browserOptions) {\n    if (options.noDefaultViewport && options.deviceScaleFactor !== undefined)\n        throw new Error(`\"deviceScaleFactor\" option is not supported with null \"viewport\"`);\n    if (options.noDefaultViewport && options.isMobile !== undefined)\n        throw new Error(`\"isMobile\" option is not supported with null \"viewport\"`);\n    if (!options.viewport && !options.noDefaultViewport)\n        options.viewport = { width: 1280, height: 720 };\n    if (options.recordVideo) {\n        if (!options.recordVideo.size) {\n            if (options.noDefaultViewport) {\n                options.recordVideo.size = { width: 800, height: 600 };\n            }\n            else {\n                const size = options.viewport;\n                const scale = Math.min(1, 800 / Math.max(size.width, size.height));\n                options.recordVideo.size = {\n                    width: Math.floor(size.width * scale),\n                    height: Math.floor(size.height * scale)\n                };\n            }\n        }\n        // Make sure both dimensions are odd, this is required for vp8\n        options.recordVideo.size.width &= ~1;\n        options.recordVideo.size.height &= ~1;\n    }\n    if (options.proxy) {\n        if (!browserOptions.proxy)\n            throw new Error(`Browser needs to be launched with the global proxy. If all contexts override the proxy, global proxy will be never used and can be any string, for example \"launch({ proxy: { server: 'per-context' } })\"`);\n        options.proxy = normalizeProxySettings(options.proxy);\n    }\n    if (utils_1.isDebugMode())\n        options.bypassCSP = true;\n    verifyGeolocation(options.geolocation);\n}\nexports.validateBrowserContextOptions = validateBrowserContextOptions;\nfunction verifyGeolocation(geolocation) {\n    if (!geolocation)\n        return;\n    geolocation.accuracy = geolocation.accuracy || 0;\n    const { longitude, latitude, accuracy } = geolocation;\n    if (longitude < -180 || longitude > 180)\n        throw new Error(`geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.`);\n    if (latitude < -90 || latitude > 90)\n        throw new Error(`geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.`);\n    if (accuracy < 0)\n        throw new Error(`geolocation.accuracy: precondition 0 <= ACCURACY failed.`);\n}\nexports.verifyGeolocation = verifyGeolocation;\nfunction normalizeProxySettings(proxy) {\n    let { server, bypass } = proxy;\n    let url;\n    try {\n        // new URL('127.0.0.1:8080') throws\n        // new URL('localhost:8080') fails to parse host or protocol\n        // In both of these cases, we need to try re-parse URL with `http://` prefix.\n        url = new URL(server);\n        if (!url.host || !url.protocol)\n            url = new URL('http://' + server);\n    }\n    catch (e) {\n        url = new URL('http://' + server);\n    }\n    if (url.protocol === 'socks4:' && (proxy.username || proxy.password))\n        throw new Error(`Socks4 proxy protocol does not support authentication`);\n    if (url.protocol === 'socks5:' && (proxy.username || proxy.password))\n        throw new Error(`Browser does not support socks5 proxy authentication`);\n    server = url.protocol + '//' + url.host;\n    if (bypass)\n        bypass = bypass.split(',').map(t => t.trim()).join(',');\n    return { ...proxy, server, bypass };\n}\nexports.normalizeProxySettings = normalizeProxySettings;\n//# sourceMappingURL=browserContext.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserType = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst os = __importStar(require(\"os\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util = __importStar(require(\"util\"));\nconst browserContext_1 = require(\"./browserContext\");\nconst transport_1 = require(\"./transport\");\nconst processLauncher_1 = require(\"./processLauncher\");\nconst pipeTransport_1 = require(\"./pipeTransport\");\nconst progress_1 = require(\"./progress\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst validateDependencies_1 = require(\"./validateDependencies\");\nconst utils_1 = require(\"../utils/utils\");\nconst helper_1 = require(\"./helper\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nconst instrumentation_1 = require(\"./instrumentation\");\nconst mkdirAsync = util.promisify(fs_1.default.mkdir);\nconst mkdtempAsync = util.promisify(fs_1.default.mkdtemp);\nconst existsAsync = (path) => new Promise(resolve => fs_1.default.stat(path, err => resolve(!err)));\nconst DOWNLOADS_FOLDER = path_1.default.join(os.tmpdir(), 'playwright_downloads-');\nclass BrowserType extends instrumentation_1.SdkObject {\n    constructor(browserName, playwrightOptions) {\n        super(playwrightOptions.rootSdkObject);\n        this.attribution.browserType = this;\n        this._playwrightOptions = playwrightOptions;\n        this._name = browserName;\n        this._registry = playwrightOptions.registry;\n    }\n    executablePath(options) {\n        return this._registry.executablePath(this._name) || '';\n    }\n    name() {\n        return this._name;\n    }\n    async launch(metadata, options, protocolLogger) {\n        options = validateLaunchOptions(options);\n        const controller = new progress_1.ProgressController(metadata, this);\n        controller.setLogName('browser');\n        const browser = await controller.run(progress => {\n            return this._innerLaunchWithRetries(progress, options, undefined, helper_1.helper.debugProtocolLogger(protocolLogger)).catch(e => { throw this._rewriteStartupError(e); });\n        }, timeoutSettings_1.TimeoutSettings.timeout(options));\n        return browser;\n    }\n    async launchPersistentContext(metadata, userDataDir, options) {\n        options = validateLaunchOptions(options);\n        const controller = new progress_1.ProgressController(metadata, this);\n        const persistent = options;\n        controller.setLogName('browser');\n        const browser = await controller.run(progress => {\n            return this._innerLaunchWithRetries(progress, options, persistent, helper_1.helper.debugProtocolLogger(), userDataDir).catch(e => { throw this._rewriteStartupError(e); });\n        }, timeoutSettings_1.TimeoutSettings.timeout(options));\n        return browser._defaultContext;\n    }\n    async _innerLaunchWithRetries(progress, options, persistent, protocolLogger, userDataDir) {\n        try {\n            return this._innerLaunch(progress, options, persistent, protocolLogger, userDataDir);\n        }\n        catch (error) {\n            // @see https://github.com/microsoft/playwright/issues/5214\n            const errorMessage = typeof error === 'object' && typeof error.message === 'string' ? error.message : '';\n            if (errorMessage.includes('Inconsistency detected by ld.so')) {\n                progress.log(`<restarting browser due to hitting race condition in glibc>`);\n                return this._innerLaunch(progress, options, persistent, protocolLogger, userDataDir);\n            }\n            throw error;\n        }\n    }\n    async _innerLaunch(progress, options, persistent, protocolLogger, userDataDir) {\n        options.proxy = options.proxy ? browserContext_1.normalizeProxySettings(options.proxy) : undefined;\n        const browserLogsCollector = new debugLogger_1.RecentLogsCollector();\n        const { browserProcess, downloadsPath, transport } = await this._launchProcess(progress, options, !!persistent, browserLogsCollector, userDataDir);\n        if (options.__testHookBeforeCreateBrowser)\n            await options.__testHookBeforeCreateBrowser();\n        const browserOptions = {\n            ...this._playwrightOptions,\n            name: this._name,\n            isChromium: this._name === 'chromium',\n            channel: options.channel,\n            slowMo: options.slowMo,\n            persistent,\n            headful: !options.headless,\n            downloadsPath,\n            browserProcess,\n            proxy: options.proxy,\n            protocolLogger,\n            browserLogsCollector,\n            wsEndpoint: options.useWebSocket ? transport.wsEndpoint : undefined,\n        };\n        if (persistent)\n            browserContext_1.validateBrowserContextOptions(persistent, browserOptions);\n        copyTestHooks(options, browserOptions);\n        const browser = await this._connectToTransport(transport, browserOptions);\n        // We assume no control when using custom arguments, and do not prepare the default context in that case.\n        if (persistent && !options.ignoreAllDefaultArgs)\n            await browser._defaultContext._loadDefaultContext(progress);\n        return browser;\n    }\n    async _launchProcess(progress, options, isPersistent, browserLogsCollector, userDataDir) {\n        const { ignoreDefaultArgs, ignoreAllDefaultArgs, args = [], executablePath = null, handleSIGINT = true, handleSIGTERM = true, handleSIGHUP = true, } = options;\n        const env = options.env ? processLauncher_1.envArrayToObject(options.env) : process.env;\n        const tempDirectories = [];\n        const ensurePath = async (tmpPrefix, pathFromOptions) => {\n            let dir;\n            if (pathFromOptions) {\n                dir = pathFromOptions;\n                await mkdirAsync(pathFromOptions, { recursive: true });\n            }\n            else {\n                dir = await mkdtempAsync(tmpPrefix);\n                tempDirectories.push(dir);\n            }\n            return dir;\n        };\n        // TODO: add downloadsPath to newContext().\n        const downloadsPath = await ensurePath(DOWNLOADS_FOLDER, options.downloadsPath);\n        if (!userDataDir) {\n            userDataDir = await mkdtempAsync(path_1.default.join(os.tmpdir(), `playwright_${this._name}dev_profile-`));\n            tempDirectories.push(userDataDir);\n        }\n        const browserArguments = [];\n        if (ignoreAllDefaultArgs)\n            browserArguments.push(...args);\n        else if (ignoreDefaultArgs)\n            browserArguments.push(...this._defaultArgs(options, isPersistent, userDataDir).filter(arg => ignoreDefaultArgs.indexOf(arg) === -1));\n        else\n            browserArguments.push(...this._defaultArgs(options, isPersistent, userDataDir));\n        const executable = executablePath || this.executablePath(options);\n        if (!executable)\n            throw new Error(`No executable path is specified. Pass \"executablePath\" option directly.`);\n        if (!(await existsAsync(executable))) {\n            const errorMessageLines = [`Failed to launch ${this._name} because executable doesn't exist at ${executable}`];\n            // If we tried using stock downloaded browser, suggest re-installing playwright.\n            if (!executablePath)\n                errorMessageLines.push(`Try re-installing playwright with \"npm install playwright\"`);\n            throw new Error(errorMessageLines.join('\\n'));\n        }\n        if (!executable) {\n            // Only validate dependencies for bundled browsers.\n            await validateDependencies_1.validateHostRequirements(this._registry, this._name);\n        }\n        let wsEndpointCallback;\n        const wsEndpoint = options.useWebSocket ? new Promise(f => wsEndpointCallback = f) : undefined;\n        // Note: it is important to define these variables before launchProcess, so that we don't get\n        // \"Cannot access 'browserServer' before initialization\" if something went wrong.\n        let transport = undefined;\n        let browserProcess = undefined;\n        const { launchedProcess, gracefullyClose, kill } = await processLauncher_1.launchProcess({\n            executablePath: executable,\n            args: browserArguments,\n            env: this._amendEnvironment(env, userDataDir, executable, browserArguments),\n            handleSIGINT,\n            handleSIGTERM,\n            handleSIGHUP,\n            log: (message) => {\n                if (wsEndpointCallback) {\n                    const match = message.match(/DevTools listening on (.*)/);\n                    if (match)\n                        wsEndpointCallback(match[1]);\n                }\n                progress.log(message);\n                browserLogsCollector.log(message);\n            },\n            stdio: 'pipe',\n            tempDirectories,\n            attemptToGracefullyClose: async () => {\n                if (options.__testHookGracefullyClose)\n                    await options.__testHookGracefullyClose();\n                // We try to gracefully close to prevent crash reporting and core dumps.\n                // Note that it's fine to reuse the pipe transport, since\n                // our connection ignores kBrowserCloseMessageId.\n                this._attemptToGracefullyCloseBrowser(transport);\n            },\n            onExit: (exitCode, signal) => {\n                if (browserProcess && browserProcess.onclose)\n                    browserProcess.onclose(exitCode, signal);\n            },\n        });\n        browserProcess = {\n            onclose: undefined,\n            process: launchedProcess,\n            close: gracefullyClose,\n            kill\n        };\n        progress.cleanupWhenAborted(() => browserProcess && closeOrKill(browserProcess, progress.timeUntilDeadline()));\n        if (options.useWebSocket) {\n            transport = await transport_1.WebSocketTransport.connect(progress, await wsEndpoint);\n        }\n        else {\n            const stdio = launchedProcess.stdio;\n            transport = new pipeTransport_1.PipeTransport(stdio[3], stdio[4]);\n        }\n        return { browserProcess, downloadsPath, transport };\n    }\n    async connectOverCDP(metadata, wsEndpoint, options, timeout) {\n        throw new Error('CDP connections are only supported by Chromium');\n    }\n}\nexports.BrowserType = BrowserType;\nfunction copyTestHooks(from, to) {\n    for (const [key, value] of Object.entries(from)) {\n        if (key.startsWith('__testHook'))\n            to[key] = value;\n    }\n}\nfunction validateLaunchOptions(options) {\n    const { devtools = false } = options;\n    let { headless = !devtools } = options;\n    if (utils_1.isDebugMode())\n        headless = false;\n    return { ...options, devtools, headless };\n}\nasync function closeOrKill(browserProcess, timeout) {\n    let timer;\n    try {\n        await Promise.race([\n            browserProcess.close(),\n            new Promise((resolve, reject) => timer = setTimeout(reject, timeout)),\n        ]);\n    }\n    catch (ignored) {\n        await browserProcess.kill().catch(ignored => { }); // Make sure to await actual process exit.\n    }\n    finally {\n        clearTimeout(timer);\n    }\n}\n//# sourceMappingURL=browserType.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Chromium = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst crBrowser_1 = require(\"./crBrowser\");\nconst crConnection_1 = require(\"./crConnection\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst browserType_1 = require(\"../browserType\");\nconst transport_1 = require(\"../transport\");\nconst crDevTools_1 = require(\"./crDevTools\");\nconst utils_1 = require(\"../../utils/utils\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst progress_1 = require(\"../progress\");\nconst timeoutSettings_1 = require(\"../../utils/timeoutSettings\");\nconst helper_1 = require(\"../helper\");\nconst findChromiumChannel_1 = require(\"./findChromiumChannel\");\nclass Chromium extends browserType_1.BrowserType {\n    constructor(playwrightOptions) {\n        super('chromium', playwrightOptions);\n        if (utils_1.isDebugMode())\n            this._devtools = this._createDevTools();\n    }\n    executablePath(options) {\n        if (options === null || options === void 0 ? void 0 : options.channel)\n            return findChromiumChannel_1.findChromiumChannel(options.channel);\n        return super.executablePath(options);\n    }\n    async connectOverCDP(metadata, wsEndpoint, options, timeout) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        controller.setLogName('browser');\n        const browserLogsCollector = new debugLogger_1.RecentLogsCollector();\n        return controller.run(async (progress) => {\n            const chromeTransport = await transport_1.WebSocketTransport.connect(progress, wsEndpoint);\n            const browserProcess = {\n                close: async () => {\n                    await chromeTransport.closeAndWait();\n                },\n                kill: async () => {\n                    await chromeTransport.closeAndWait();\n                }\n            };\n            const browserOptions = {\n                ...this._playwrightOptions,\n                slowMo: options.slowMo,\n                name: 'chromium',\n                isChromium: true,\n                persistent: { sdkLanguage: options.sdkLanguage, noDefaultViewport: true },\n                browserProcess,\n                protocolLogger: helper_1.helper.debugProtocolLogger(),\n                browserLogsCollector,\n            };\n            return await crBrowser_1.CRBrowser.connect(chromeTransport, browserOptions);\n        }, timeoutSettings_1.TimeoutSettings.timeout({ timeout }));\n    }\n    _createDevTools() {\n        return new crDevTools_1.CRDevTools(path_1.default.join(this._registry.browserDirectory('chromium'), 'devtools-preferences.json'));\n    }\n    async _connectToTransport(transport, options) {\n        let devtools = this._devtools;\n        if (options.__testHookForDevTools) {\n            devtools = this._createDevTools();\n            await options.__testHookForDevTools(devtools);\n        }\n        return crBrowser_1.CRBrowser.connect(transport, options, devtools);\n    }\n    _rewriteStartupError(error) {\n        // These error messages are taken from Chromium source code as of July, 2020:\n        // https://github.com/chromium/chromium/blob/70565f67e79f79e17663ad1337dc6e63ee207ce9/content/browser/zygote_host/zygote_host_impl_linux.cc\n        if (!error.message.includes('crbug.com/357670') && !error.message.includes('No usable sandbox!') && !error.message.includes('crbug.com/638180'))\n            return error;\n        return stackTrace_1.rewriteErrorMessage(error, [\n            `Chromium sandboxing failed!`,\n            `================================`,\n            `To workaround sandboxing issues, do either of the following:`,\n            `  - (preferred): Configure environment to support sandboxing: https://github.com/microsoft/playwright/blob/master/docs/troubleshooting.md`,\n            `  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option`,\n            `================================`,\n            ``,\n        ].join('\\n'));\n    }\n    _amendEnvironment(env, userDataDir, executable, browserArguments) {\n        return env;\n    }\n    _attemptToGracefullyCloseBrowser(transport) {\n        const message = { method: 'Browser.close', id: crConnection_1.kBrowserCloseMessageId, params: {} };\n        transport.send(message);\n    }\n    _defaultArgs(options, isPersistent, userDataDir) {\n        const { args = [], proxy } = options;\n        const userDataDirArg = args.find(arg => arg.startsWith('--user-data-dir'));\n        if (userDataDirArg)\n            throw new Error('Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument');\n        if (args.find(arg => arg.startsWith('--remote-debugging-pipe')))\n            throw new Error('Playwright manages remote debugging connection itself.');\n        if (args.find(arg => !arg.startsWith('-')))\n            throw new Error('Arguments can not specify page to be opened');\n        const chromeArguments = [...DEFAULT_ARGS];\n        chromeArguments.push(`--user-data-dir=${userDataDir}`);\n        if (options.useWebSocket)\n            chromeArguments.push('--remote-debugging-port=0');\n        else\n            chromeArguments.push('--remote-debugging-pipe');\n        if (options.devtools)\n            chromeArguments.push('--auto-open-devtools-for-tabs');\n        if (options.headless) {\n            chromeArguments.push('--headless', '--hide-scrollbars', '--mute-audio', '--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4');\n        }\n        if (options.chromiumSandbox !== true)\n            chromeArguments.push('--no-sandbox');\n        if (proxy) {\n            const proxyURL = new URL(proxy.server);\n            const isSocks = proxyURL.protocol === 'socks5:';\n            // https://www.chromium.org/developers/design-documents/network-settings\n            if (isSocks) {\n                // https://www.chromium.org/developers/design-documents/network-stack/socks-proxy\n                chromeArguments.push(`--host-resolver-rules=\"MAP * ~NOTFOUND , EXCLUDE ${proxyURL.hostname}\"`);\n            }\n            chromeArguments.push(`--proxy-server=${proxy.server}`);\n            if (proxy.bypass) {\n                const patterns = proxy.bypass.split(',').map(t => t.trim()).map(t => t.startsWith('.') ? '*' + t : t);\n                chromeArguments.push(`--proxy-bypass-list=${patterns.join(';')}`);\n            }\n        }\n        chromeArguments.push(...args);\n        if (isPersistent)\n            chromeArguments.push('about:blank');\n        else\n            chromeArguments.push('--no-startup-window');\n        return chromeArguments;\n    }\n}\nexports.Chromium = Chromium;\nconst DEFAULT_ARGS = [\n    '--disable-background-networking',\n    '--enable-features=NetworkService,NetworkServiceInProcess',\n    '--disable-background-timer-throttling',\n    '--disable-backgrounding-occluded-windows',\n    '--disable-breakpad',\n    '--disable-client-side-phishing-detection',\n    '--disable-component-extensions-with-background-pages',\n    '--disable-default-apps',\n    '--disable-dev-shm-usage',\n    '--disable-extensions',\n    // BlinkGenPropertyTrees disabled due to crbug.com/937609\n    '--disable-features=TranslateUI,BlinkGenPropertyTrees,ImprovedCookieControls,SameSiteByDefaultCookies,LazyFrameLoading',\n    '--disable-hang-monitor',\n    '--disable-ipc-flooding-protection',\n    '--disable-popup-blocking',\n    '--disable-prompt-on-repost',\n    '--disable-renderer-backgrounding',\n    '--disable-sync',\n    '--force-color-profile=srgb',\n    '--metrics-recording-only',\n    '--no-first-run',\n    '--enable-automation',\n    '--password-store=basic',\n    '--use-mock-keychain',\n];\n//# sourceMappingURL=chromium.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAccessibilityTree = void 0;\nasync function getAccessibilityTree(client, needle) {\n    const { nodes } = await client.send('Accessibility.getFullAXTree');\n    const tree = CRAXNode.createTree(client, nodes);\n    return {\n        tree,\n        needle: needle ? await tree._findElement(needle) : null\n    };\n}\nexports.getAccessibilityTree = getAccessibilityTree;\nclass CRAXNode {\n    constructor(client, payload) {\n        this._children = [];\n        this._richlyEditable = false;\n        this._editable = false;\n        this._focusable = false;\n        this._expanded = false;\n        this._hidden = false;\n        this._client = client;\n        this._payload = payload;\n        this._name = this._payload.name ? this._payload.name.value : '';\n        this._role = this._payload.role ? this._payload.role.value : 'Unknown';\n        for (const property of this._payload.properties || []) {\n            if (property.name === 'editable') {\n                this._richlyEditable = property.value.value === 'richtext';\n                this._editable = true;\n            }\n            if (property.name === 'focusable')\n                this._focusable = property.value.value;\n            if (property.name === 'expanded')\n                this._expanded = property.value.value;\n            if (property.name === 'hidden')\n                this._hidden = property.value.value;\n        }\n    }\n    _isPlainTextField() {\n        if (this._richlyEditable)\n            return false;\n        if (this._editable)\n            return true;\n        return this._role === 'textbox' || this._role === 'ComboBox' || this._role === 'searchbox';\n    }\n    _isTextOnlyObject() {\n        const role = this._role;\n        return (role === 'LineBreak' || role === 'text' ||\n            role === 'InlineTextBox');\n    }\n    _hasFocusableChild() {\n        if (this._cachedHasFocusableChild === undefined) {\n            this._cachedHasFocusableChild = false;\n            for (const child of this._children) {\n                if (child._focusable || child._hasFocusableChild()) {\n                    this._cachedHasFocusableChild = true;\n                    break;\n                }\n            }\n        }\n        return this._cachedHasFocusableChild;\n    }\n    children() {\n        return this._children;\n    }\n    async _findElement(element) {\n        const objectId = element._objectId;\n        const { node: { backendNodeId } } = await this._client.send('DOM.describeNode', { objectId });\n        const needle = this.find(node => node._payload.backendDOMNodeId === backendNodeId);\n        return needle || null;\n    }\n    find(predicate) {\n        if (predicate(this))\n            return this;\n        for (const child of this._children) {\n            const result = child.find(predicate);\n            if (result)\n                return result;\n        }\n        return null;\n    }\n    isLeafNode() {\n        if (!this._children.length)\n            return true;\n        // These types of objects may have children that we use as internal\n        // implementation details, but we want to expose them as leaves to platform\n        // accessibility APIs because screen readers might be confused if they find\n        // any children.\n        if (this._isPlainTextField() || this._isTextOnlyObject())\n            return true;\n        // Roles whose children are only presentational according to the ARIA and\n        // HTML5 Specs should be hidden from screen readers.\n        // (Note that whilst ARIA buttons can have only presentational children, HTML5\n        // buttons are allowed to have content.)\n        switch (this._role) {\n            case 'doc-cover':\n            case 'graphics-symbol':\n            case 'img':\n            case 'Meter':\n            case 'scrollbar':\n            case 'slider':\n            case 'separator':\n            case 'progressbar':\n                return true;\n            default:\n                break;\n        }\n        // Here and below: Android heuristics\n        if (this._hasFocusableChild())\n            return false;\n        if (this._focusable && this._role !== 'WebArea' && this._name)\n            return true;\n        if (this._role === 'heading' && this._name)\n            return true;\n        return false;\n    }\n    isControl() {\n        switch (this._role) {\n            case 'button':\n            case 'checkbox':\n            case 'ColorWell':\n            case 'combobox':\n            case 'DisclosureTriangle':\n            case 'listbox':\n            case 'menu':\n            case 'menubar':\n            case 'menuitem':\n            case 'menuitemcheckbox':\n            case 'menuitemradio':\n            case 'radio':\n            case 'scrollbar':\n            case 'searchbox':\n            case 'slider':\n            case 'spinbutton':\n            case 'switch':\n            case 'tab':\n            case 'textbox':\n            case 'tree':\n                return true;\n            default:\n                return false;\n        }\n    }\n    isInteresting(insideControl) {\n        const role = this._role;\n        if (role === 'Ignored' || this._hidden)\n            return false;\n        if (this._focusable || this._richlyEditable)\n            return true;\n        // If it's not focusable but has a control role, then it's interesting.\n        if (this.isControl())\n            return true;\n        // A non focusable child of a control is not interesting\n        if (insideControl)\n            return false;\n        return this.isLeafNode() && !!this._name;\n    }\n    serialize() {\n        const properties = new Map();\n        for (const property of this._payload.properties || [])\n            properties.set(property.name.toLowerCase(), property.value.value);\n        if (this._payload.description)\n            properties.set('description', this._payload.description.value);\n        const node = {\n            role: this._role,\n            name: this._payload.name ? (this._payload.name.value || '') : '',\n        };\n        const userStringProperties = [\n            'description',\n            'keyshortcuts',\n            'roledescription',\n            'valuetext',\n        ];\n        for (const userStringProperty of userStringProperties) {\n            if (!properties.has(userStringProperty))\n                continue;\n            node[userStringProperty] = properties.get(userStringProperty);\n        }\n        const booleanProperties = [\n            'disabled',\n            'expanded',\n            'focused',\n            'modal',\n            'multiline',\n            'multiselectable',\n            'readonly',\n            'required',\n            'selected',\n        ];\n        for (const booleanProperty of booleanProperties) {\n            // WebArea's treat focus differently than other nodes. They report whether their frame  has focus,\n            // not whether focus is specifically on the root node.\n            if (booleanProperty === 'focused' && this._role === 'WebArea')\n                continue;\n            const value = properties.get(booleanProperty);\n            if (!value)\n                continue;\n            node[booleanProperty] = value;\n        }\n        const numericalProperties = [\n            'level',\n            'valuemax',\n            'valuemin',\n        ];\n        for (const numericalProperty of numericalProperties) {\n            if (!properties.has(numericalProperty))\n                continue;\n            node[numericalProperty] = properties.get(numericalProperty);\n        }\n        const tokenProperties = [\n            'autocomplete',\n            'haspopup',\n            'invalid',\n            'orientation',\n        ];\n        for (const tokenProperty of tokenProperties) {\n            const value = properties.get(tokenProperty);\n            if (!value || value === 'false')\n                continue;\n            node[tokenProperty] = value;\n        }\n        const axNode = node;\n        if (this._payload.value) {\n            if (typeof this._payload.value.value === 'string')\n                axNode.valueString = this._payload.value.value;\n            if (typeof this._payload.value.value === 'number')\n                axNode.valueNumber = this._payload.value.value;\n        }\n        if (properties.has('checked'))\n            axNode.checked = properties.get('checked') === 'true' ? 'checked' : properties.get('checked') === 'false' ? 'unchecked' : 'mixed';\n        if (properties.has('pressed'))\n            axNode.pressed = properties.get('pressed') === 'true' ? 'pressed' : properties.get('pressed') === 'false' ? 'released' : 'mixed';\n        return axNode;\n    }\n    static createTree(client, payloads) {\n        const nodeById = new Map();\n        for (const payload of payloads)\n            nodeById.set(payload.nodeId, new CRAXNode(client, payload));\n        for (const node of nodeById.values()) {\n            for (const childId of node._payload.childIds || [])\n                node._children.push(nodeById.get(childId));\n        }\n        return nodeById.values().next().value;\n    }\n}\n//# sourceMappingURL=crAccessibility.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRBrowserContext = exports.CRBrowser = void 0;\nconst browser_1 = require(\"../browser\");\nconst browserContext_1 = require(\"../browserContext\");\nconst utils_1 = require(\"../../utils/utils\");\nconst network = __importStar(require(\"../network\"));\nconst page_1 = require(\"../page\");\nconst crConnection_1 = require(\"./crConnection\");\nconst crPage_1 = require(\"./crPage\");\nconst crProtocolHelper_1 = require(\"./crProtocolHelper\");\nconst crExecutionContext_1 = require(\"./crExecutionContext\");\nclass CRBrowser extends browser_1.Browser {\n    constructor(connection, options) {\n        super(options);\n        this._clientRootSessionPromise = null;\n        this._contexts = new Map();\n        this._crPages = new Map();\n        this._backgroundPages = new Map();\n        this._serviceWorkers = new Map();\n        this._isMac = false;\n        this._version = '';\n        this._tracingRecording = false;\n        this._tracingPath = '';\n        this._connection = connection;\n        this._session = this._connection.rootSession;\n        this._connection.on(crConnection_1.ConnectionEvents.Disconnected, () => this._didClose());\n        this._session.on('Target.attachedToTarget', this._onAttachedToTarget.bind(this));\n        this._session.on('Target.detachedFromTarget', this._onDetachedFromTarget.bind(this));\n    }\n    static async connect(transport, options, devtools) {\n        const connection = new crConnection_1.CRConnection(transport, options.protocolLogger, options.browserLogsCollector);\n        const browser = new CRBrowser(connection, options);\n        browser._devtools = devtools;\n        const session = connection.rootSession;\n        if (options.__testHookOnConnectToBrowser)\n            await options.__testHookOnConnectToBrowser();\n        const version = await session.send('Browser.getVersion');\n        browser._isMac = version.userAgent.includes('Macintosh');\n        browser._version = version.product.substring(version.product.indexOf('/') + 1);\n        if (!options.persistent) {\n            await session.send('Target.setAutoAttach', { autoAttach: true, waitForDebuggerOnStart: true, flatten: true });\n            return browser;\n        }\n        browser._defaultContext = new CRBrowserContext(browser, undefined, options.persistent);\n        await Promise.all([\n            session.send('Target.setAutoAttach', { autoAttach: true, waitForDebuggerOnStart: true, flatten: true }),\n            browser._defaultContext._initialize(),\n        ]);\n        return browser;\n    }\n    async newContext(options) {\n        browserContext_1.validateBrowserContextOptions(options, this.options);\n        const { browserContextId } = await this._session.send('Target.createBrowserContext', {\n            disposeOnDetach: true,\n            proxyServer: options.proxy ? options.proxy.server : undefined,\n            proxyBypassList: options.proxy ? options.proxy.bypass : undefined,\n        });\n        const context = new CRBrowserContext(this, browserContextId, options);\n        await context._initialize();\n        this._contexts.set(browserContextId, context);\n        return context;\n    }\n    contexts() {\n        return Array.from(this._contexts.values());\n    }\n    version() {\n        return this._version;\n    }\n    isClank() {\n        return this.options.name === 'clank';\n    }\n    _onAttachedToTarget({ targetInfo, sessionId, waitingForDebugger }) {\n        if (targetInfo.type === 'browser')\n            return;\n        const session = this._connection.session(sessionId);\n        utils_1.assert(targetInfo.browserContextId, 'targetInfo: ' + JSON.stringify(targetInfo, null, 2));\n        let context = this._contexts.get(targetInfo.browserContextId) || null;\n        if (!context) {\n            // TODO: auto attach only to pages from our contexts.\n            // assert(this._defaultContext);\n            context = this._defaultContext;\n        }\n        if (targetInfo.type === 'other' && targetInfo.url.startsWith('devtools://devtools') && this._devtools) {\n            this._devtools.install(session);\n            return;\n        }\n        if (targetInfo.type === 'other' || !context) {\n            if (waitingForDebugger) {\n                // Ideally, detaching should resume any target, but there is a bug in the backend.\n                session._sendMayFail('Runtime.runIfWaitingForDebugger').then(() => {\n                    this._session._sendMayFail('Target.detachFromTarget', { sessionId });\n                });\n            }\n            return;\n        }\n        utils_1.assert(!this._crPages.has(targetInfo.targetId), 'Duplicate target ' + targetInfo.targetId);\n        utils_1.assert(!this._backgroundPages.has(targetInfo.targetId), 'Duplicate target ' + targetInfo.targetId);\n        utils_1.assert(!this._serviceWorkers.has(targetInfo.targetId), 'Duplicate target ' + targetInfo.targetId);\n        if (targetInfo.type === 'background_page') {\n            const backgroundPage = new crPage_1.CRPage(session, targetInfo.targetId, context, null, false);\n            this._backgroundPages.set(targetInfo.targetId, backgroundPage);\n            backgroundPage.pageOrError().then(pageOrError => {\n                if (pageOrError instanceof page_1.Page)\n                    context.emit(CRBrowserContext.CREvents.BackgroundPage, backgroundPage._page);\n            });\n            return;\n        }\n        if (targetInfo.type === 'page') {\n            const opener = targetInfo.openerId ? this._crPages.get(targetInfo.openerId) || null : null;\n            const crPage = new crPage_1.CRPage(session, targetInfo.targetId, context, opener, true);\n            this._crPages.set(targetInfo.targetId, crPage);\n            crPage._page.reportAsNew();\n            return;\n        }\n        if (targetInfo.type === 'service_worker') {\n            const serviceWorker = new CRServiceWorker(context, session, targetInfo.url);\n            this._serviceWorkers.set(targetInfo.targetId, serviceWorker);\n            context.emit(CRBrowserContext.CREvents.ServiceWorker, serviceWorker);\n            return;\n        }\n        utils_1.assert(false, 'Unknown target type: ' + targetInfo.type);\n    }\n    _onDetachedFromTarget(payload) {\n        const targetId = payload.targetId;\n        const crPage = this._crPages.get(targetId);\n        if (crPage) {\n            this._crPages.delete(targetId);\n            crPage.didClose();\n            return;\n        }\n        const backgroundPage = this._backgroundPages.get(targetId);\n        if (backgroundPage) {\n            this._backgroundPages.delete(targetId);\n            backgroundPage.didClose();\n            return;\n        }\n        const serviceWorker = this._serviceWorkers.get(targetId);\n        if (serviceWorker) {\n            this._serviceWorkers.delete(targetId);\n            serviceWorker.emit(page_1.Worker.Events.Close);\n            return;\n        }\n    }\n    async _closePage(crPage) {\n        await this._session.send('Target.closeTarget', { targetId: crPage._targetId });\n    }\n    async newBrowserCDPSession() {\n        return await this._connection.createBrowserSession();\n    }\n    async startTracing(page, options = {}) {\n        utils_1.assert(!this._tracingRecording, 'Cannot start recording trace while already recording trace.');\n        this._tracingClient = page ? page._delegate._mainFrameSession._client : this._session;\n        const defaultCategories = [\n            '-*', 'devtools.timeline', 'v8.execute', 'disabled-by-default-devtools.timeline',\n            'disabled-by-default-devtools.timeline.frame', 'toplevel',\n            'blink.console', 'blink.user_timing', 'latencyInfo', 'disabled-by-default-devtools.timeline.stack',\n            'disabled-by-default-v8.cpu_profiler', 'disabled-by-default-v8.cpu_profiler.hires'\n        ];\n        const { path = null, screenshots = false, categories = defaultCategories, } = options;\n        if (screenshots)\n            categories.push('disabled-by-default-devtools.screenshot');\n        this._tracingPath = path;\n        this._tracingRecording = true;\n        await this._tracingClient.send('Tracing.start', {\n            transferMode: 'ReturnAsStream',\n            categories: categories.join(',')\n        });\n    }\n    async stopTracing() {\n        utils_1.assert(this._tracingClient, 'Tracing was not started.');\n        const [event] = await Promise.all([\n            new Promise(f => this._tracingClient.once('Tracing.tracingComplete', f)),\n            this._tracingClient.send('Tracing.end')\n        ]);\n        const result = await crProtocolHelper_1.readProtocolStream(this._tracingClient, event.stream, this._tracingPath);\n        this._tracingRecording = false;\n        return result;\n    }\n    isConnected() {\n        return !this._connection._closed;\n    }\n    async _clientRootSession() {\n        if (!this._clientRootSessionPromise)\n            this._clientRootSessionPromise = this._connection.createBrowserSession();\n        return this._clientRootSessionPromise;\n    }\n}\nexports.CRBrowser = CRBrowser;\nclass CRServiceWorker extends page_1.Worker {\n    constructor(browserContext, session, url) {\n        super(browserContext, url);\n        this._browserContext = browserContext;\n        session.once('Runtime.executionContextCreated', event => {\n            this._createExecutionContext(new crExecutionContext_1.CRExecutionContext(session, event.context));\n        });\n        // This might fail if the target is closed before we receive all execution contexts.\n        session.send('Runtime.enable', {}).catch(e => { });\n        session.send('Runtime.runIfWaitingForDebugger').catch(e => { });\n    }\n}\nclass CRBrowserContext extends browserContext_1.BrowserContext {\n    constructor(browser, browserContextId, options) {\n        super(browser, options, browserContextId);\n        this._browser = browser;\n        this._evaluateOnNewDocumentSources = [];\n        this._authenticateProxyViaCredentials();\n    }\n    async _initialize() {\n        utils_1.assert(!Array.from(this._browser._crPages.values()).some(page => page._browserContext === this));\n        const promises = [super._initialize()];\n        if (this._browser.options.downloadsPath) {\n            promises.push(this._browser._session.send('Browser.setDownloadBehavior', {\n                behavior: this._options.acceptDownloads ? 'allowAndName' : 'deny',\n                browserContextId: this._browserContextId,\n                downloadPath: this._browser.options.downloadsPath\n            }));\n        }\n        if (this._options.permissions)\n            promises.push(this.grantPermissions(this._options.permissions));\n        await Promise.all(promises);\n    }\n    pages() {\n        const result = [];\n        for (const crPage of this._browser._crPages.values()) {\n            if (crPage._browserContext === this && crPage._initializedPage)\n                result.push(crPage._initializedPage);\n        }\n        return result;\n    }\n    async newPageDelegate() {\n        browserContext_1.assertBrowserContextIsNotOwned(this);\n        const oldKeys = this._browser.isClank() ? new Set(this._browser._crPages.keys()) : undefined;\n        let { targetId } = await this._browser._session.send('Target.createTarget', { url: 'about:blank', browserContextId: this._browserContextId });\n        if (oldKeys) {\n            // Chrome for Android returns tab ids (1, 2, 3, 4, 5) instead of content target ids here, work around it via the\n            // heuristic assuming that there is only one page created at a time.\n            const newKeys = new Set(this._browser._crPages.keys());\n            // Remove old keys.\n            for (const key of oldKeys)\n                newKeys.delete(key);\n            // Remove potential concurrent popups.\n            for (const key of newKeys) {\n                const page = this._browser._crPages.get(key);\n                if (page._opener)\n                    newKeys.delete(key);\n            }\n            utils_1.assert(newKeys.size === 1);\n            [targetId] = [...newKeys];\n        }\n        return this._browser._crPages.get(targetId);\n    }\n    async _doCookies(urls) {\n        const { cookies } = await this._browser._session.send('Storage.getCookies', { browserContextId: this._browserContextId });\n        return network.filterCookies(cookies.map(c => {\n            const copy = { sameSite: 'None', ...c };\n            delete copy.size;\n            delete copy.priority;\n            delete copy.session;\n            delete copy.sameParty;\n            delete copy.sourceScheme;\n            delete copy.sourcePort;\n            return copy;\n        }), urls);\n    }\n    async addCookies(cookies) {\n        await this._browser._session.send('Storage.setCookies', { cookies: network.rewriteCookies(cookies), browserContextId: this._browserContextId });\n    }\n    async clearCookies() {\n        await this._browser._session.send('Storage.clearCookies', { browserContextId: this._browserContextId });\n    }\n    async _doGrantPermissions(origin, permissions) {\n        const webPermissionToProtocol = new Map([\n            ['geolocation', 'geolocation'],\n            ['midi', 'midi'],\n            ['notifications', 'notifications'],\n            ['camera', 'videoCapture'],\n            ['microphone', 'audioCapture'],\n            ['background-sync', 'backgroundSync'],\n            ['ambient-light-sensor', 'sensors'],\n            ['accelerometer', 'sensors'],\n            ['gyroscope', 'sensors'],\n            ['magnetometer', 'sensors'],\n            ['accessibility-events', 'accessibilityEvents'],\n            ['clipboard-read', 'clipboardReadWrite'],\n            ['clipboard-write', 'clipboardSanitizedWrite'],\n            ['payment-handler', 'paymentHandler'],\n            // chrome-specific permissions we have.\n            ['midi-sysex', 'midiSysex'],\n        ]);\n        const filtered = permissions.map(permission => {\n            const protocolPermission = webPermissionToProtocol.get(permission);\n            if (!protocolPermission)\n                throw new Error('Unknown permission: ' + permission);\n            return protocolPermission;\n        });\n        await this._browser._session.send('Browser.grantPermissions', { origin: origin === '*' ? undefined : origin, browserContextId: this._browserContextId, permissions: filtered });\n    }\n    async _doClearPermissions() {\n        await this._browser._session.send('Browser.resetPermissions', { browserContextId: this._browserContextId });\n    }\n    async setGeolocation(geolocation) {\n        browserContext_1.verifyGeolocation(geolocation);\n        this._options.geolocation = geolocation;\n        for (const page of this.pages())\n            await page._delegate.updateGeolocation();\n    }\n    async setExtraHTTPHeaders(headers) {\n        this._options.extraHTTPHeaders = headers;\n        for (const page of this.pages())\n            await page._delegate.updateExtraHTTPHeaders();\n    }\n    async setOffline(offline) {\n        this._options.offline = offline;\n        for (const page of this.pages())\n            await page._delegate.updateOffline();\n    }\n    async _doSetHTTPCredentials(httpCredentials) {\n        this._options.httpCredentials = httpCredentials;\n        for (const page of this.pages())\n            await page._delegate.updateHttpCredentials();\n    }\n    async _doAddInitScript(source) {\n        this._evaluateOnNewDocumentSources.push(source);\n        for (const page of this.pages())\n            await page._delegate.evaluateOnNewDocument(source);\n    }\n    async _doExposeBinding(binding) {\n        for (const page of this.pages())\n            await page._delegate.exposeBinding(binding);\n    }\n    async _doUpdateRequestInterception() {\n        for (const page of this.pages())\n            await page._delegate.updateRequestInterception();\n    }\n    async _doClose() {\n        utils_1.assert(this._browserContextId);\n        await this._browser._session.send('Target.disposeBrowserContext', { browserContextId: this._browserContextId });\n        this._browser._contexts.delete(this._browserContextId);\n        for (const [targetId, serviceWorker] of this._browser._serviceWorkers) {\n            if (serviceWorker._browserContext !== this)\n                continue;\n            // When closing a browser context, service workers are shutdown\n            // asynchronously and we get detached from them later.\n            // To avoid the wrong order of notifications, we manually fire\n            // \"close\" event here and forget about the serivce worker.\n            serviceWorker.emit(page_1.Worker.Events.Close);\n            this._browser._serviceWorkers.delete(targetId);\n        }\n    }\n    backgroundPages() {\n        const result = [];\n        for (const backgroundPage of this._browser._backgroundPages.values()) {\n            if (backgroundPage._browserContext === this && backgroundPage._initializedPage)\n                result.push(backgroundPage._initializedPage);\n        }\n        return result;\n    }\n    serviceWorkers() {\n        return Array.from(this._browser._serviceWorkers.values()).filter(serviceWorker => serviceWorker._browserContext === this);\n    }\n    async newCDPSession(page) {\n        if (!(page instanceof page_1.Page))\n            throw new Error('page: expected Page');\n        const targetId = page._delegate._targetId;\n        const rootSession = await this._browser._clientRootSession();\n        const { sessionId } = await rootSession.send('Target.attachToTarget', { targetId, flatten: true });\n        return this._browser._connection.session(sessionId);\n    }\n}\nexports.CRBrowserContext = CRBrowserContext;\nCRBrowserContext.CREvents = {\n    BackgroundPage: 'backgroundpage',\n    ServiceWorker: 'serviceworker',\n};\n//# sourceMappingURL=crBrowser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRSession = exports.CRSessionEvents = exports.CRConnection = exports.kBrowserCloseMessageId = exports.ConnectionEvents = void 0;\nconst utils_1 = require(\"../../utils/utils\");\nconst events_1 = require(\"events\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst helper_1 = require(\"../helper\");\nexports.ConnectionEvents = {\n    Disconnected: Symbol('ConnectionEvents.Disconnected')\n};\n// CRPlaywright uses this special id to issue Browser.close command which we\n// should ignore.\nexports.kBrowserCloseMessageId = -9999;\nclass CRConnection extends events_1.EventEmitter {\n    constructor(transport, protocolLogger, browserLogsCollector) {\n        super();\n        this._lastId = 0;\n        this._sessions = new Map();\n        this._closed = false;\n        this.setMaxListeners(0);\n        this._transport = transport;\n        this._protocolLogger = protocolLogger;\n        this._browserLogsCollector = browserLogsCollector;\n        this._transport.onmessage = this._onMessage.bind(this);\n        this._transport.onclose = this._onClose.bind(this);\n        this.rootSession = new CRSession(this, '', 'browser', '');\n        this._sessions.set('', this.rootSession);\n    }\n    static fromSession(session) {\n        return session._connection;\n    }\n    session(sessionId) {\n        return this._sessions.get(sessionId) || null;\n    }\n    _rawSend(sessionId, method, params) {\n        const id = ++this._lastId;\n        const message = { id, method, params };\n        if (sessionId)\n            message.sessionId = sessionId;\n        this._protocolLogger('send', message);\n        this._transport.send(message);\n        return id;\n    }\n    async _onMessage(message) {\n        this._protocolLogger('receive', message);\n        if (message.id === exports.kBrowserCloseMessageId)\n            return;\n        if (message.method === 'Target.attachedToTarget') {\n            const sessionId = message.params.sessionId;\n            const rootSessionId = message.sessionId || '';\n            const session = new CRSession(this, rootSessionId, message.params.targetInfo.type, sessionId);\n            this._sessions.set(sessionId, session);\n        }\n        else if (message.method === 'Target.detachedFromTarget') {\n            const session = this._sessions.get(message.params.sessionId);\n            if (session) {\n                session._onClosed(undefined);\n                this._sessions.delete(message.params.sessionId);\n            }\n        }\n        const session = this._sessions.get(message.sessionId || '');\n        if (session)\n            session._onMessage(message);\n    }\n    _onClose() {\n        this._closed = true;\n        this._transport.onmessage = undefined;\n        this._transport.onclose = undefined;\n        const browserDisconnectedLogs = helper_1.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());\n        for (const session of this._sessions.values())\n            session._onClosed(browserDisconnectedLogs);\n        this._sessions.clear();\n        Promise.resolve().then(() => this.emit(exports.ConnectionEvents.Disconnected));\n    }\n    close() {\n        if (!this._closed)\n            this._transport.close();\n    }\n    async createSession(targetInfo) {\n        const { sessionId } = await this.rootSession.send('Target.attachToTarget', { targetId: targetInfo.targetId, flatten: true });\n        return this._sessions.get(sessionId);\n    }\n    async createBrowserSession() {\n        const { sessionId } = await this.rootSession.send('Target.attachToBrowserTarget');\n        return this._sessions.get(sessionId);\n    }\n}\nexports.CRConnection = CRConnection;\nexports.CRSessionEvents = {\n    Disconnected: Symbol('Events.CDPSession.Disconnected')\n};\nclass CRSession extends events_1.EventEmitter {\n    constructor(connection, rootSessionId, targetType, sessionId) {\n        super();\n        this._callbacks = new Map();\n        this._crashed = false;\n        this.setMaxListeners(0);\n        this._connection = connection;\n        this._rootSessionId = rootSessionId;\n        this._targetType = targetType;\n        this._sessionId = sessionId;\n        this.on = super.on;\n        this.addListener = super.addListener;\n        this.off = super.removeListener;\n        this.removeListener = super.removeListener;\n        this.once = super.once;\n    }\n    _markAsCrashed() {\n        this._crashed = true;\n    }\n    async send(method, params) {\n        if (this._crashed)\n            throw new Error('Target crashed');\n        if (this._browserDisconnectedLogs !== undefined)\n            throw new Error(`Protocol error (${method}): Browser closed.` + this._browserDisconnectedLogs);\n        if (!this._connection)\n            throw new Error(`Protocol error (${method}): Session closed. Most likely the ${this._targetType} has been closed.`);\n        const id = this._connection._rawSend(this._sessionId, method, params);\n        return new Promise((resolve, reject) => {\n            this._callbacks.set(id, { resolve, reject, error: new Error(), method });\n        });\n    }\n    _sendMayFail(method, params) {\n        return this.send(method, params).catch((error) => debugLogger_1.debugLogger.log('error', error));\n    }\n    _onMessage(object) {\n        if (object.id && this._callbacks.has(object.id)) {\n            const callback = this._callbacks.get(object.id);\n            this._callbacks.delete(object.id);\n            if (object.error)\n                callback.reject(createProtocolError(callback.error, callback.method, object.error));\n            else\n                callback.resolve(object.result);\n        }\n        else {\n            utils_1.assert(!object.id);\n            Promise.resolve().then(() => {\n                if (this._eventListener)\n                    this._eventListener(object.method, object.params);\n                this.emit(object.method, object.params);\n            });\n        }\n    }\n    async detach() {\n        if (!this._connection)\n            throw new Error(`Session already detached. Most likely the ${this._targetType} has been closed.`);\n        const rootSession = this._connection.session(this._rootSessionId);\n        if (!rootSession)\n            throw new Error('Root session has been closed');\n        await rootSession.send('Target.detachFromTarget', { sessionId: this._sessionId });\n    }\n    _onClosed(browserDisconnectedLogs) {\n        this._browserDisconnectedLogs = browserDisconnectedLogs;\n        const errorMessage = browserDisconnectedLogs !== undefined ? 'Browser closed.' + browserDisconnectedLogs : 'Target closed.';\n        for (const callback of this._callbacks.values())\n            callback.reject(stackTrace_1.rewriteErrorMessage(callback.error, `Protocol error (${callback.method}): ` + errorMessage));\n        this._callbacks.clear();\n        this._connection = null;\n        Promise.resolve().then(() => this.emit(exports.CRSessionEvents.Disconnected));\n    }\n}\nexports.CRSession = CRSession;\nfunction createProtocolError(error, method, protocolError) {\n    let message = `Protocol error (${method}): ${protocolError.message}`;\n    if ('data' in protocolError)\n        message += ` ${protocolError.data}`;\n    return stackTrace_1.rewriteErrorMessage(error, message);\n}\n//# sourceMappingURL=crConnection.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRCoverage = void 0;\nconst helper_1 = require(\"../helper\");\nconst utils_1 = require(\"../../utils/utils\");\nclass CRCoverage {\n    constructor(client) {\n        this._jsCoverage = new JSCoverage(client);\n        this._cssCoverage = new CSSCoverage(client);\n    }\n    async startJSCoverage(options) {\n        return await this._jsCoverage.start(options);\n    }\n    async stopJSCoverage() {\n        return await this._jsCoverage.stop();\n    }\n    async startCSSCoverage(options) {\n        return await this._cssCoverage.start(options);\n    }\n    async stopCSSCoverage() {\n        return await this._cssCoverage.stop();\n    }\n}\nexports.CRCoverage = CRCoverage;\nclass JSCoverage {\n    constructor(client) {\n        this._reportAnonymousScripts = false;\n        this._client = client;\n        this._enabled = false;\n        this._scriptIds = new Set();\n        this._scriptSources = new Map();\n        this._eventListeners = [];\n        this._resetOnNavigation = false;\n    }\n    async start(options = {}) {\n        utils_1.assert(!this._enabled, 'JSCoverage is already enabled');\n        const { resetOnNavigation = true, reportAnonymousScripts = false } = options;\n        this._resetOnNavigation = resetOnNavigation;\n        this._reportAnonymousScripts = reportAnonymousScripts;\n        this._enabled = true;\n        this._scriptIds.clear();\n        this._scriptSources.clear();\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._client, 'Debugger.scriptParsed', this._onScriptParsed.bind(this)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.executionContextsCleared', this._onExecutionContextsCleared.bind(this)),\n            helper_1.helper.addEventListener(this._client, 'Debugger.paused', this._onDebuggerPaused.bind(this)),\n        ];\n        await Promise.all([\n            this._client.send('Profiler.enable'),\n            this._client.send('Profiler.startPreciseCoverage', { callCount: true, detailed: true }),\n            this._client.send('Debugger.enable'),\n            this._client.send('Debugger.setSkipAllPauses', { skip: true })\n        ]);\n    }\n    _onDebuggerPaused() {\n        this._client.send('Debugger.resume');\n    }\n    _onExecutionContextsCleared() {\n        if (!this._resetOnNavigation)\n            return;\n        this._scriptIds.clear();\n        this._scriptSources.clear();\n    }\n    async _onScriptParsed(event) {\n        this._scriptIds.add(event.scriptId);\n        // Ignore other anonymous scripts unless the reportAnonymousScripts option is true.\n        if (!event.url && !this._reportAnonymousScripts)\n            return;\n        // This might fail if the page has already navigated away.\n        const response = await this._client._sendMayFail('Debugger.getScriptSource', { scriptId: event.scriptId });\n        if (response)\n            this._scriptSources.set(event.scriptId, response.scriptSource);\n    }\n    async stop() {\n        utils_1.assert(this._enabled, 'JSCoverage is not enabled');\n        this._enabled = false;\n        const [profileResponse] = await Promise.all([\n            this._client.send('Profiler.takePreciseCoverage'),\n            this._client.send('Profiler.stopPreciseCoverage'),\n            this._client.send('Profiler.disable'),\n            this._client.send('Debugger.disable'),\n        ]);\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        const coverage = [];\n        for (const entry of profileResponse.result) {\n            if (!this._scriptIds.has(entry.scriptId))\n                continue;\n            if (!entry.url && !this._reportAnonymousScripts)\n                continue;\n            const source = this._scriptSources.get(entry.scriptId);\n            if (source)\n                coverage.push({ ...entry, source });\n            else\n                coverage.push(entry);\n        }\n        return coverage;\n    }\n}\nclass CSSCoverage {\n    constructor(client) {\n        this._client = client;\n        this._enabled = false;\n        this._stylesheetURLs = new Map();\n        this._stylesheetSources = new Map();\n        this._eventListeners = [];\n        this._resetOnNavigation = false;\n    }\n    async start(options = {}) {\n        utils_1.assert(!this._enabled, 'CSSCoverage is already enabled');\n        const { resetOnNavigation = true } = options;\n        this._resetOnNavigation = resetOnNavigation;\n        this._enabled = true;\n        this._stylesheetURLs.clear();\n        this._stylesheetSources.clear();\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._client, 'CSS.styleSheetAdded', this._onStyleSheet.bind(this)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.executionContextsCleared', this._onExecutionContextsCleared.bind(this)),\n        ];\n        await Promise.all([\n            this._client.send('DOM.enable'),\n            this._client.send('CSS.enable'),\n            this._client.send('CSS.startRuleUsageTracking'),\n        ]);\n    }\n    _onExecutionContextsCleared() {\n        if (!this._resetOnNavigation)\n            return;\n        this._stylesheetURLs.clear();\n        this._stylesheetSources.clear();\n    }\n    async _onStyleSheet(event) {\n        const header = event.header;\n        // Ignore anonymous scripts\n        if (!header.sourceURL)\n            return;\n        // This might fail if the page has already navigated away.\n        const response = await this._client._sendMayFail('CSS.getStyleSheetText', { styleSheetId: header.styleSheetId });\n        if (response) {\n            this._stylesheetURLs.set(header.styleSheetId, header.sourceURL);\n            this._stylesheetSources.set(header.styleSheetId, response.text);\n        }\n    }\n    async stop() {\n        utils_1.assert(this._enabled, 'CSSCoverage is not enabled');\n        this._enabled = false;\n        const ruleTrackingResponse = await this._client.send('CSS.stopRuleUsageTracking');\n        await Promise.all([\n            this._client.send('CSS.disable'),\n            this._client.send('DOM.disable'),\n        ]);\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        // aggregate by styleSheetId\n        const styleSheetIdToCoverage = new Map();\n        for (const entry of ruleTrackingResponse.ruleUsage) {\n            let ranges = styleSheetIdToCoverage.get(entry.styleSheetId);\n            if (!ranges) {\n                ranges = [];\n                styleSheetIdToCoverage.set(entry.styleSheetId, ranges);\n            }\n            ranges.push({\n                startOffset: entry.startOffset,\n                endOffset: entry.endOffset,\n                count: entry.used ? 1 : 0,\n            });\n        }\n        const coverage = [];\n        for (const styleSheetId of this._stylesheetURLs.keys()) {\n            const url = this._stylesheetURLs.get(styleSheetId);\n            const text = this._stylesheetSources.get(styleSheetId);\n            const ranges = convertToDisjointRanges(styleSheetIdToCoverage.get(styleSheetId) || []);\n            coverage.push({ url, ranges, text });\n        }\n        return coverage;\n    }\n}\nfunction convertToDisjointRanges(nestedRanges) {\n    const points = [];\n    for (const range of nestedRanges) {\n        points.push({ offset: range.startOffset, type: 0, range });\n        points.push({ offset: range.endOffset, type: 1, range });\n    }\n    // Sort points to form a valid parenthesis sequence.\n    points.sort((a, b) => {\n        // Sort with increasing offsets.\n        if (a.offset !== b.offset)\n            return a.offset - b.offset;\n        // All \"end\" points should go before \"start\" points.\n        if (a.type !== b.type)\n            return b.type - a.type;\n        const aLength = a.range.endOffset - a.range.startOffset;\n        const bLength = b.range.endOffset - b.range.startOffset;\n        // For two \"start\" points, the one with longer range goes first.\n        if (a.type === 0)\n            return bLength - aLength;\n        // For two \"end\" points, the one with shorter range goes first.\n        return aLength - bLength;\n    });\n    const hitCountStack = [];\n    const results = [];\n    let lastOffset = 0;\n    // Run scanning line to intersect all ranges.\n    for (const point of points) {\n        if (hitCountStack.length && lastOffset < point.offset && hitCountStack[hitCountStack.length - 1] > 0) {\n            const lastResult = results.length ? results[results.length - 1] : null;\n            if (lastResult && lastResult.end === lastOffset)\n                lastResult.end = point.offset;\n            else\n                results.push({ start: lastOffset, end: point.offset });\n        }\n        lastOffset = point.offset;\n        if (point.type === 0)\n            hitCountStack.push(point.range.count);\n        else\n            hitCountStack.pop();\n    }\n    // Filter out empty ranges.\n    return results.filter(range => range.end - range.start > 1);\n}\n//# sourceMappingURL=crCoverage.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRDevTools = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst kBindingName = '__pw_devtools__';\n// This class intercepts preferences-related DevTools embedder methods\n// and stores preferences as a json file in the browser installation directory.\nclass CRDevTools {\n    constructor(preferencesPath) {\n        this._preferencesPath = preferencesPath;\n        this._savePromise = Promise.resolve();\n    }\n    install(session) {\n        session.on('Runtime.bindingCalled', async (event) => {\n            if (event.name !== kBindingName)\n                return;\n            const parsed = JSON.parse(event.payload);\n            let result = undefined;\n            if (this.__testHookOnBinding)\n                this.__testHookOnBinding(parsed);\n            if (parsed.method === 'getPreferences') {\n                if (this._prefs === undefined) {\n                    try {\n                        const json = await util.promisify(fs_1.default.readFile)(this._preferencesPath, 'utf8');\n                        this._prefs = JSON.parse(json);\n                    }\n                    catch (e) {\n                        this._prefs = {};\n                    }\n                }\n                result = this._prefs;\n            }\n            else if (parsed.method === 'setPreference') {\n                this._prefs[parsed.params[0]] = parsed.params[1];\n                this._save();\n            }\n            else if (parsed.method === 'removePreference') {\n                delete this._prefs[parsed.params[0]];\n                this._save();\n            }\n            else if (parsed.method === 'clearPreferences') {\n                this._prefs = {};\n                this._save();\n            }\n            session.send('Runtime.evaluate', {\n                expression: `window.DevToolsAPI.embedderMessageAck(${parsed.id}, ${JSON.stringify(result)})`,\n                contextId: event.executionContextId\n            }).catch(e => null);\n        });\n        Promise.all([\n            session.send('Runtime.enable'),\n            session.send('Runtime.addBinding', { name: kBindingName }),\n            session.send('Page.enable'),\n            session.send('Page.addScriptToEvaluateOnNewDocument', { source: `\n        (() => {\n          const init = () => {\n            // Lazy init happens when InspectorFrontendHost is initialized.\n            // At this point DevToolsHost is ready to be used.\n            const host = window.DevToolsHost;\n            const old = host.sendMessageToEmbedder.bind(host);\n            host.sendMessageToEmbedder = message => {\n              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))\n                window.${kBindingName}(message);\n              else\n                old(message);\n            };\n          };\n          let value;\n          Object.defineProperty(window, 'InspectorFrontendHost', {\n            configurable: true,\n            enumerable: true,\n            get() { return value; },\n            set(v) { value = v; init(); },\n          });\n        })()\n      ` }),\n            session.send('Runtime.runIfWaitingForDebugger'),\n        ]).catch(e => null);\n    }\n    _save() {\n        // Serialize saves to avoid corruption.\n        this._savePromise = this._savePromise.then(async () => {\n            await util.promisify(fs_1.default.writeFile)(this._preferencesPath, JSON.stringify(this._prefs)).catch(e => null);\n        });\n    }\n}\nexports.CRDevTools = CRDevTools;\n//# sourceMappingURL=crDevTools.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRExecutionContext = void 0;\nconst crProtocolHelper_1 = require(\"./crProtocolHelper\");\nconst js = __importStar(require(\"../javascript\"));\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst utilityScriptSerializers_1 = require(\"../common/utilityScriptSerializers\");\nclass CRExecutionContext {\n    constructor(client, contextPayload) {\n        this._client = client;\n        this._contextId = contextPayload.id;\n    }\n    async rawEvaluate(expression) {\n        const { exceptionDetails, result: remoteObject } = await this._client.send('Runtime.evaluate', {\n            expression,\n            contextId: this._contextId,\n        }).catch(rewriteError);\n        if (exceptionDetails)\n            throw new Error('Evaluation failed: ' + crProtocolHelper_1.getExceptionMessage(exceptionDetails));\n        return remoteObject.objectId;\n    }\n    rawCallFunctionNoReply(func, ...args) {\n        this._client.send('Runtime.callFunctionOn', {\n            functionDeclaration: func.toString(),\n            arguments: args.map(a => a instanceof js.JSHandle ? { objectId: a._objectId } : { value: a }),\n            returnByValue: true,\n            executionContextId: this._contextId,\n            userGesture: true\n        }).catch(() => { });\n    }\n    async evaluateWithArguments(expression, returnByValue, utilityScript, values, objectIds) {\n        const { exceptionDetails, result: remoteObject } = await this._client.send('Runtime.callFunctionOn', {\n            functionDeclaration: expression,\n            objectId: utilityScript._objectId,\n            arguments: [\n                { objectId: utilityScript._objectId },\n                ...values.map(value => ({ value })),\n                ...objectIds.map(objectId => ({ objectId })),\n            ],\n            returnByValue,\n            awaitPromise: true,\n            userGesture: true\n        }).catch(rewriteError);\n        if (exceptionDetails)\n            throw new Error('Evaluation failed: ' + crProtocolHelper_1.getExceptionMessage(exceptionDetails));\n        return returnByValue ? utilityScriptSerializers_1.parseEvaluationResultValue(remoteObject.value) : utilityScript._context.createHandle(remoteObject);\n    }\n    async getProperties(handle) {\n        const objectId = handle._objectId;\n        if (!objectId)\n            return new Map();\n        const response = await this._client.send('Runtime.getProperties', {\n            objectId,\n            ownProperties: true\n        });\n        const result = new Map();\n        for (const property of response.result) {\n            if (!property.enumerable || !property.value)\n                continue;\n            result.set(property.name, handle._context.createHandle(property.value));\n        }\n        return result;\n    }\n    createHandle(context, remoteObject) {\n        return new js.JSHandle(context, remoteObject.subtype || remoteObject.type, remoteObject.objectId, potentiallyUnserializableValue(remoteObject));\n    }\n    async releaseHandle(handle) {\n        if (!handle._objectId)\n            return;\n        await crProtocolHelper_1.releaseObject(this._client, handle._objectId);\n    }\n}\nexports.CRExecutionContext = CRExecutionContext;\nfunction rewriteError(error) {\n    if (error.message.includes('Object reference chain is too long'))\n        return { result: { type: 'undefined' } };\n    if (error.message.includes('Object couldn\\'t be returned by value'))\n        return { result: { type: 'undefined' } };\n    if (error.message.endsWith('Cannot find context with specified id') || error.message.endsWith('Inspected target navigated or closed') || error.message.endsWith('Execution context was destroyed.'))\n        throw new Error('Execution context was destroyed, most likely because of a navigation.');\n    if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON'))\n        stackTrace_1.rewriteErrorMessage(error, error.message + ' Are you passing a nested JSHandle?');\n    throw error;\n}\nfunction potentiallyUnserializableValue(remoteObject) {\n    const value = remoteObject.value;\n    const unserializableValue = remoteObject.unserializableValue;\n    return unserializableValue ? js.parseUnserializableValue(unserializableValue) : value;\n}\n//# sourceMappingURL=crExecutionContext.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawTouchscreenImpl = exports.RawMouseImpl = exports.RawKeyboardImpl = void 0;\nconst input = __importStar(require(\"../input\"));\nconst macEditingCommands_1 = require(\"../macEditingCommands\");\nconst utils_1 = require(\"../../utils/utils\");\nfunction toModifiersMask(modifiers) {\n    let mask = 0;\n    if (modifiers.has('Alt'))\n        mask |= 1;\n    if (modifiers.has('Control'))\n        mask |= 2;\n    if (modifiers.has('Meta'))\n        mask |= 4;\n    if (modifiers.has('Shift'))\n        mask |= 8;\n    return mask;\n}\nclass RawKeyboardImpl {\n    constructor(_client, _isMac) {\n        this._client = _client;\n        this._isMac = _isMac;\n    }\n    _commandsForCode(code, modifiers) {\n        if (!this._isMac)\n            return [];\n        const parts = [];\n        for (const modifier of (['Shift', 'Control', 'Alt', 'Meta'])) {\n            if (modifiers.has(modifier))\n                parts.push(modifier);\n        }\n        parts.push(code);\n        const shortcut = parts.join('+');\n        let commands = macEditingCommands_1.macEditingCommands[shortcut] || [];\n        if (utils_1.isString(commands))\n            commands = [commands];\n        // Commands that insert text are not supported\n        commands = commands.filter(x => !x.startsWith('insert'));\n        // remove the trailing : to match the Chromium command names.\n        return commands.map(c => c.substring(0, c.length - 1));\n    }\n    async keydown(modifiers, code, keyCode, keyCodeWithoutLocation, key, location, autoRepeat, text) {\n        const commands = this._commandsForCode(code, modifiers);\n        await this._client.send('Input.dispatchKeyEvent', {\n            type: text ? 'keyDown' : 'rawKeyDown',\n            modifiers: toModifiersMask(modifiers),\n            windowsVirtualKeyCode: keyCodeWithoutLocation,\n            code,\n            commands,\n            key,\n            text,\n            unmodifiedText: text,\n            autoRepeat,\n            location,\n            isKeypad: location === input.keypadLocation\n        });\n    }\n    async keyup(modifiers, code, keyCode, keyCodeWithoutLocation, key, location) {\n        await this._client.send('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            modifiers: toModifiersMask(modifiers),\n            key,\n            windowsVirtualKeyCode: keyCodeWithoutLocation,\n            code,\n            location\n        });\n    }\n    async sendText(text) {\n        await this._client.send('Input.insertText', { text });\n    }\n}\nexports.RawKeyboardImpl = RawKeyboardImpl;\nclass RawMouseImpl {\n    constructor(client) {\n        this._client = client;\n    }\n    async move(x, y, button, buttons, modifiers) {\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mouseMoved',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers)\n        });\n    }\n    async down(x, y, button, buttons, modifiers, clickCount) {\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mousePressed',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n    async up(x, y, button, buttons, modifiers, clickCount) {\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mouseReleased',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n}\nexports.RawMouseImpl = RawMouseImpl;\nclass RawTouchscreenImpl {\n    constructor(client) {\n        this._client = client;\n    }\n    async tap(x, y, modifiers) {\n        await Promise.all([\n            this._client.send('Input.dispatchTouchEvent', {\n                type: 'touchStart',\n                modifiers: toModifiersMask(modifiers),\n                touchPoints: [{\n                        x, y\n                    }]\n            }),\n            this._client.send('Input.dispatchTouchEvent', {\n                type: 'touchEnd',\n                modifiers: toModifiersMask(modifiers),\n                touchPoints: []\n            }),\n        ]);\n    }\n}\nexports.RawTouchscreenImpl = RawTouchscreenImpl;\n//# sourceMappingURL=crInput.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRNetworkManager = void 0;\nconst helper_1 = require(\"../helper\");\nconst network = __importStar(require(\"../network\"));\nconst utils_1 = require(\"../../utils/utils\");\nclass CRNetworkManager {\n    constructor(client, page, parentManager) {\n        this._requestIdToRequest = new Map();\n        this._requestIdToRequestWillBeSentEvent = new Map();\n        this._credentials = null;\n        this._attemptedAuthentications = new Set();\n        this._userRequestInterceptionEnabled = false;\n        this._protocolRequestInterceptionEnabled = false;\n        this._requestIdToRequestPausedEvent = new Map();\n        this._requestIdToExtraInfo = new Map();\n        this._client = client;\n        this._page = page;\n        this._parentManager = parentManager;\n        this._eventListeners = this.instrumentNetworkEvents(client);\n    }\n    instrumentNetworkEvents(session, workerFrame) {\n        return [\n            helper_1.helper.addEventListener(session, 'Fetch.requestPaused', this._onRequestPaused.bind(this, workerFrame)),\n            helper_1.helper.addEventListener(session, 'Fetch.authRequired', this._onAuthRequired.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.requestWillBeSent', this._onRequestWillBeSent.bind(this, workerFrame)),\n            helper_1.helper.addEventListener(session, 'Network.requestWillBeSentExtraInfo', this._onRequestWillBeSentExtraInfo.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.responseReceived', this._onResponseReceived.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.loadingFinished', this._onLoadingFinished.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.loadingFailed', this._onLoadingFailed.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketCreated', e => this._page._frameManager.onWebSocketCreated(e.requestId, e.url)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketWillSendHandshakeRequest', e => this._page._frameManager.onWebSocketRequest(e.requestId)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketHandshakeResponseReceived', e => this._page._frameManager.onWebSocketResponse(e.requestId, e.response.status, e.response.statusText)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketFrameSent', e => e.response.payloadData && this._page._frameManager.onWebSocketFrameSent(e.requestId, e.response.opcode, e.response.payloadData)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketFrameReceived', e => e.response.payloadData && this._page._frameManager.webSocketFrameReceived(e.requestId, e.response.opcode, e.response.payloadData)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketClosed', e => this._page._frameManager.webSocketClosed(e.requestId)),\n            helper_1.helper.addEventListener(session, 'Network.webSocketFrameError', e => this._page._frameManager.webSocketError(e.requestId, e.errorMessage)),\n        ];\n    }\n    async initialize() {\n        await this._client.send('Network.enable');\n    }\n    dispose() {\n        helper_1.helper.removeEventListeners(this._eventListeners);\n    }\n    async authenticate(credentials) {\n        this._credentials = credentials;\n        await this._updateProtocolRequestInterception();\n    }\n    async setOffline(offline) {\n        await this._client.send('Network.emulateNetworkConditions', {\n            offline,\n            // values of 0 remove any active throttling. crbug.com/456324#c9\n            latency: 0,\n            downloadThroughput: -1,\n            uploadThroughput: -1\n        });\n    }\n    async setRequestInterception(value) {\n        this._userRequestInterceptionEnabled = value;\n        await this._updateProtocolRequestInterception();\n    }\n    async _updateProtocolRequestInterception() {\n        const enabled = this._userRequestInterceptionEnabled || !!this._credentials;\n        if (enabled === this._protocolRequestInterceptionEnabled)\n            return;\n        this._protocolRequestInterceptionEnabled = enabled;\n        if (enabled) {\n            await Promise.all([\n                this._client.send('Network.setCacheDisabled', { cacheDisabled: true }),\n                this._client.send('Fetch.enable', {\n                    handleAuthRequests: true,\n                    patterns: [{ urlPattern: '*' }],\n                }),\n            ]);\n        }\n        else {\n            await Promise.all([\n                this._client.send('Network.setCacheDisabled', { cacheDisabled: false }),\n                this._client.send('Fetch.disable')\n            ]);\n        }\n    }\n    _onRequestWillBeSent(workerFrame, event) {\n        // Request interception doesn't happen for data URLs with Network Service.\n        if (this._protocolRequestInterceptionEnabled && !event.request.url.startsWith('data:')) {\n            const requestId = event.requestId;\n            const requestPausedEvent = this._requestIdToRequestPausedEvent.get(requestId);\n            if (requestPausedEvent) {\n                this._onRequest(workerFrame, event, requestPausedEvent);\n                this._requestIdToRequestPausedEvent.delete(requestId);\n            }\n            else {\n                this._requestIdToRequestWillBeSentEvent.set(event.requestId, event);\n            }\n        }\n        else {\n            this._onRequest(workerFrame, event, null);\n        }\n        const extraInfo = this._requestIdToExtraInfo.get(event.requestId);\n        if (extraInfo)\n            this._onRequestWillBeSentExtraInfo(extraInfo);\n    }\n    _onRequestWillBeSentExtraInfo(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        if (request) {\n            request.request.updateWithRawHeaders(utils_1.headersObjectToArray(event.headers));\n            this._requestIdToExtraInfo.delete(event.requestId);\n        }\n        else {\n            this._requestIdToExtraInfo.set(event.requestId, event);\n        }\n    }\n    _onAuthRequired(event) {\n        let response = 'Default';\n        if (this._attemptedAuthentications.has(event.requestId)) {\n            response = 'CancelAuth';\n        }\n        else if (this._credentials) {\n            response = 'ProvideCredentials';\n            this._attemptedAuthentications.add(event.requestId);\n        }\n        const { username, password } = this._credentials || { username: undefined, password: undefined };\n        this._client._sendMayFail('Fetch.continueWithAuth', {\n            requestId: event.requestId,\n            authChallengeResponse: { response, username, password },\n        });\n    }\n    _onRequestPaused(workerFrame, event) {\n        if (!this._userRequestInterceptionEnabled && this._protocolRequestInterceptionEnabled) {\n            this._client._sendMayFail('Fetch.continueRequest', {\n                requestId: event.requestId\n            });\n        }\n        if (!event.networkId) {\n            // Fetch without networkId means that request was not recongnized by inspector, and\n            // it will never receive Network.requestWillBeSent. Most likely, this is an internal request\n            // that we can safely fail.\n            this._client._sendMayFail('Fetch.failRequest', {\n                requestId: event.requestId,\n                errorReason: 'Aborted',\n            });\n            return;\n        }\n        if (event.request.url.startsWith('data:'))\n            return;\n        const requestId = event.networkId;\n        const requestWillBeSentEvent = this._requestIdToRequestWillBeSentEvent.get(requestId);\n        if (requestWillBeSentEvent) {\n            this._onRequest(workerFrame, requestWillBeSentEvent, event);\n            this._requestIdToRequestWillBeSentEvent.delete(requestId);\n        }\n        else {\n            this._requestIdToRequestPausedEvent.set(requestId, event);\n        }\n    }\n    _onRequest(workerFrame, requestWillBeSentEvent, requestPausedEvent) {\n        if (requestWillBeSentEvent.request.url.startsWith('data:'))\n            return;\n        let redirectedFrom = null;\n        if (requestWillBeSentEvent.redirectResponse) {\n            const request = this._requestIdToRequest.get(requestWillBeSentEvent.requestId);\n            // If we connect late to the target, we could have missed the requestWillBeSent event.\n            if (request) {\n                this._handleRequestRedirect(request, requestWillBeSentEvent.redirectResponse, requestWillBeSentEvent.timestamp);\n                redirectedFrom = request.request;\n            }\n        }\n        let frame = requestWillBeSentEvent.frameId ? this._page._frameManager.frame(requestWillBeSentEvent.frameId) : workerFrame;\n        // Requests from workers lack frameId, because we receive Network.requestWillBeSent\n        // on the worker target. However, we receive Fetch.requestPaused on the page target,\n        // and lack workerFrame there. Luckily, Fetch.requestPaused provides a frameId.\n        if (!frame && requestPausedEvent && requestPausedEvent.frameId)\n            frame = this._page._frameManager.frame(requestPausedEvent.frameId);\n        // Check if it's main resource request interception (targetId === main frame id).\n        if (!frame && requestPausedEvent && requestWillBeSentEvent.frameId === this._page._delegate._targetId) {\n            // Main resource request for the page is being intercepted so the Frame is not created\n            // yet. Precreate it here for the purposes of request interception. It will be updated\n            // later as soon as the request contnues and we receive frame tree from the page.\n            frame = this._page._frameManager.frameAttached(requestWillBeSentEvent.frameId, null);\n        }\n        // CORS options request is generated by the network stack. If interception is enabled,\n        // we accept all CORS options, assuming that this was intended when setting route.\n        //\n        // Note: it would be better to match the URL against interception patterns, but\n        // that information is only available to the client. Perhaps we can just route to the client?\n        if (requestPausedEvent && requestPausedEvent.request.method === 'OPTIONS' && this._page._needsRequestInterception()) {\n            const requestHeaders = requestPausedEvent.request.headers;\n            const responseHeaders = [\n                { name: 'Access-Control-Allow-Origin', value: requestHeaders['Origin'] || '*' },\n                { name: 'Access-Control-Allow-Methods', value: requestHeaders['Access-Control-Request-Method'] || 'GET, POST, OPTIONS, DELETE' },\n                { name: 'Access-Control-Allow-Credentials', value: 'true' }\n            ];\n            if (requestHeaders['Access-Control-Request-Headers'])\n                responseHeaders.push({ name: 'Access-Control-Allow-Headers', value: requestHeaders['Access-Control-Request-Headers'] });\n            this._client._sendMayFail('Fetch.fulfillRequest', {\n                requestId: requestPausedEvent.requestId,\n                responseCode: 204,\n                responsePhrase: network.STATUS_TEXTS['204'],\n                responseHeaders,\n                body: '',\n            });\n            return;\n        }\n        if (!frame) {\n            if (requestPausedEvent)\n                this._client._sendMayFail('Fetch.continueRequest', { requestId: requestPausedEvent.requestId });\n            return;\n        }\n        let allowInterception = this._userRequestInterceptionEnabled;\n        if (redirectedFrom) {\n            allowInterception = false;\n            // We do not support intercepting redirects.\n            if (requestPausedEvent)\n                this._client._sendMayFail('Fetch.continueRequest', { requestId: requestPausedEvent.requestId });\n        }\n        const isNavigationRequest = requestWillBeSentEvent.requestId === requestWillBeSentEvent.loaderId && requestWillBeSentEvent.type === 'Document';\n        const documentId = isNavigationRequest ? requestWillBeSentEvent.loaderId : undefined;\n        const request = new InterceptableRequest({\n            client: this._client,\n            frame,\n            documentId,\n            allowInterception,\n            requestWillBeSentEvent,\n            requestPausedEvent,\n            redirectedFrom\n        });\n        this._requestIdToRequest.set(requestWillBeSentEvent.requestId, request);\n        this._page._frameManager.requestStarted(request.request);\n    }\n    _createResponse(request, responsePayload) {\n        const getResponseBody = async () => {\n            const response = await this._client.send('Network.getResponseBody', { requestId: request._requestId });\n            return Buffer.from(response.body, response.base64Encoded ? 'base64' : 'utf8');\n        };\n        const timingPayload = responsePayload.timing;\n        let timing;\n        if (timingPayload) {\n            timing = {\n                startTime: (timingPayload.requestTime - request._timestamp + request._wallTime) * 1000,\n                domainLookupStart: timingPayload.dnsStart,\n                domainLookupEnd: timingPayload.dnsEnd,\n                connectStart: timingPayload.connectStart,\n                secureConnectionStart: timingPayload.sslStart,\n                connectEnd: timingPayload.connectEnd,\n                requestStart: timingPayload.sendStart,\n                responseStart: timingPayload.receiveHeadersEnd,\n            };\n        }\n        else {\n            timing = {\n                startTime: request._wallTime * 1000,\n                domainLookupStart: -1,\n                domainLookupEnd: -1,\n                connectStart: -1,\n                secureConnectionStart: -1,\n                connectEnd: -1,\n                requestStart: -1,\n                responseStart: -1,\n            };\n        }\n        return new network.Response(request.request, responsePayload.status, responsePayload.statusText, utils_1.headersObjectToArray(responsePayload.headers), timing, getResponseBody);\n    }\n    _handleRequestRedirect(request, responsePayload, timestamp) {\n        const response = this._createResponse(request, responsePayload);\n        response._requestFinished((timestamp - request._timestamp) * 1000, 'Response body is unavailable for redirect responses');\n        this._requestIdToRequest.delete(request._requestId);\n        if (request._interceptionId)\n            this._attemptedAuthentications.delete(request._interceptionId);\n        this._page._frameManager.requestReceivedResponse(response);\n        this._page._frameManager.requestFinished(request.request);\n    }\n    _onResponseReceived(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        // FileUpload sends a response without a matching request.\n        if (!request)\n            return;\n        const response = this._createResponse(request, event.response);\n        this._page._frameManager.requestReceivedResponse(response);\n    }\n    _onLoadingFinished(event) {\n        let request = this._requestIdToRequest.get(event.requestId);\n        if (!request)\n            request = this._maybeAdoptMainRequest(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request)\n            return;\n        // Under certain conditions we never get the Network.responseReceived\n        // event from protocol. @see https://crbug.com/883475\n        const response = request.request._existingResponse();\n        if (response)\n            response._requestFinished(helper_1.helper.secondsToRoundishMillis(event.timestamp - request._timestamp));\n        this._requestIdToRequest.delete(request._requestId);\n        if (request._interceptionId)\n            this._attemptedAuthentications.delete(request._interceptionId);\n        this._page._frameManager.requestFinished(request.request);\n    }\n    _onLoadingFailed(event) {\n        let request = this._requestIdToRequest.get(event.requestId);\n        if (!request)\n            request = this._maybeAdoptMainRequest(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request)\n            return;\n        const response = request.request._existingResponse();\n        if (response)\n            response._requestFinished(helper_1.helper.secondsToRoundishMillis(event.timestamp - request._timestamp));\n        this._requestIdToRequest.delete(request._requestId);\n        if (request._interceptionId)\n            this._attemptedAuthentications.delete(request._interceptionId);\n        request.request._setFailureText(event.errorText);\n        this._page._frameManager.requestFailed(request.request, !!event.canceled);\n    }\n    _maybeAdoptMainRequest(requestId) {\n        // OOPIF has a main request that starts in the parent session but finishes in the child session.\n        if (!this._parentManager)\n            return;\n        const request = this._parentManager._requestIdToRequest.get(requestId);\n        // Main requests have matching loaderId and requestId.\n        if (!request || request._documentId !== requestId)\n            return;\n        this._requestIdToRequest.set(requestId, request);\n        this._parentManager._requestIdToRequest.delete(requestId);\n        if (request._interceptionId && this._parentManager._attemptedAuthentications.has(request._interceptionId)) {\n            this._parentManager._attemptedAuthentications.delete(request._interceptionId);\n            this._attemptedAuthentications.add(request._interceptionId);\n        }\n        return request;\n    }\n}\nexports.CRNetworkManager = CRNetworkManager;\nclass InterceptableRequest {\n    constructor(options) {\n        const { client, frame, documentId, allowInterception, requestWillBeSentEvent, requestPausedEvent, redirectedFrom } = options;\n        this._client = client;\n        this._timestamp = requestWillBeSentEvent.timestamp;\n        this._wallTime = requestWillBeSentEvent.wallTime;\n        this._requestId = requestWillBeSentEvent.requestId;\n        this._interceptionId = requestPausedEvent && requestPausedEvent.requestId;\n        this._documentId = documentId;\n        const { headers, method, url, postDataEntries = null, } = requestPausedEvent ? requestPausedEvent.request : requestWillBeSentEvent.request;\n        const type = (requestWillBeSentEvent.type || '').toLowerCase();\n        let postDataBuffer = null;\n        if (postDataEntries && postDataEntries.length && postDataEntries[0].bytes)\n            postDataBuffer = Buffer.from(postDataEntries[0].bytes, 'base64');\n        this.request = new network.Request(allowInterception ? this : null, frame, redirectedFrom, documentId, url, type, method, postDataBuffer, utils_1.headersObjectToArray(headers));\n    }\n    async continue(overrides) {\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        await this._client._sendMayFail('Fetch.continueRequest', {\n            requestId: this._interceptionId,\n            url: overrides.url,\n            headers: overrides.headers,\n            method: overrides.method,\n            postData: overrides.postData ? overrides.postData.toString('base64') : undefined\n        });\n    }\n    async fulfill(response) {\n        const body = response.isBase64 ? response.body : Buffer.from(response.body).toString('base64');\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        await this._client._sendMayFail('Fetch.fulfillRequest', {\n            requestId: this._interceptionId,\n            responseCode: response.status,\n            responsePhrase: network.STATUS_TEXTS[String(response.status)],\n            responseHeaders: response.headers,\n            body,\n        });\n    }\n    async abort(errorCode = 'failed') {\n        const errorReason = errorReasons[errorCode];\n        utils_1.assert(errorReason, 'Unknown error code: ' + errorCode);\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        await this._client._sendMayFail('Fetch.failRequest', {\n            requestId: this._interceptionId,\n            errorReason\n        });\n    }\n}\nconst errorReasons = {\n    'aborted': 'Aborted',\n    'accessdenied': 'AccessDenied',\n    'addressunreachable': 'AddressUnreachable',\n    'blockedbyclient': 'BlockedByClient',\n    'blockedbyresponse': 'BlockedByResponse',\n    'connectionaborted': 'ConnectionAborted',\n    'connectionclosed': 'ConnectionClosed',\n    'connectionfailed': 'ConnectionFailed',\n    'connectionrefused': 'ConnectionRefused',\n    'connectionreset': 'ConnectionReset',\n    'internetdisconnected': 'InternetDisconnected',\n    'namenotresolved': 'NameNotResolved',\n    'timedout': 'TimedOut',\n    'failed': 'Failed',\n};\n//# sourceMappingURL=crNetworkManager.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRPage = void 0;\nconst dom = __importStar(require(\"../dom\"));\nconst helper_1 = require(\"../helper\");\nconst network = __importStar(require(\"../network\"));\nconst crConnection_1 = require(\"./crConnection\");\nconst crExecutionContext_1 = require(\"./crExecutionContext\");\nconst crNetworkManager_1 = require(\"./crNetworkManager\");\nconst page_1 = require(\"../page\");\nconst crProtocolHelper_1 = require(\"./crProtocolHelper\");\nconst dialog = __importStar(require(\"../dialog\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst crInput_1 = require(\"./crInput\");\nconst crAccessibility_1 = require(\"./crAccessibility\");\nconst crCoverage_1 = require(\"./crCoverage\");\nconst crPdf_1 = require(\"./crPdf\");\nconst console_1 = require(\"../console\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst utils_1 = require(\"../../utils/utils\");\nconst videoRecorder_1 = require(\"./videoRecorder\");\nconst UTILITY_WORLD_NAME = '__playwright_utility_world__';\nclass CRPage {\n    constructor(client, targetId, browserContext, opener, hasUIWindow) {\n        this._sessions = new Map();\n        this._initializedPage = null;\n        // Holds window features for the next popup being opened via window.open,\n        // until the popup target arrives. This could be racy if two oopifs\n        // simultaneously call window.open with window features: the order\n        // of their Page.windowOpen events is not guaranteed to match the order\n        // of new popup targets.\n        this._nextWindowOpenPopupFeatures = [];\n        this._targetId = targetId;\n        this._opener = opener;\n        this.rawKeyboard = new crInput_1.RawKeyboardImpl(client, browserContext._browser._isMac);\n        this.rawMouse = new crInput_1.RawMouseImpl(client);\n        this.rawTouchscreen = new crInput_1.RawTouchscreenImpl(client);\n        this._pdf = new crPdf_1.CRPDF(client);\n        this._coverage = new crCoverage_1.CRCoverage(client);\n        this._browserContext = browserContext;\n        this._page = new page_1.Page(this, browserContext);\n        this._mainFrameSession = new FrameSession(this, client, targetId, null);\n        this._sessions.set(targetId, this._mainFrameSession);\n        client.once(crConnection_1.CRSessionEvents.Disconnected, () => this._page._didDisconnect());\n        if (opener && !browserContext._options.noDefaultViewport) {\n            const features = opener._nextWindowOpenPopupFeatures.shift() || [];\n            const viewportSize = helper_1.helper.getViewportSizeFromWindowFeatures(features);\n            if (viewportSize)\n                this._page._state.viewportSize = viewportSize;\n        }\n        this._pagePromise = this._mainFrameSession._initialize(hasUIWindow).then(() => this._initializedPage = this._page).catch(e => e);\n    }\n    static mainFrameSession(page) {\n        const crPage = page._delegate;\n        return crPage._mainFrameSession;\n    }\n    async _forAllFrameSessions(cb) {\n        const frameSessions = Array.from(this._sessions.values());\n        await Promise.all(frameSessions.map(frameSession => {\n            if (frameSession._isMainFrame())\n                return cb(frameSession);\n            return cb(frameSession).catch(e => {\n                // Broadcasting a message to the closed iframe shoule be a noop.\n                if (e.message && (e.message.includes('Target closed.') || e.message.includes('Session closed.')))\n                    return;\n                throw e;\n            });\n        }));\n    }\n    _sessionForFrame(frame) {\n        // Frame id equals target id.\n        while (!this._sessions.has(frame._id)) {\n            const parent = frame.parentFrame();\n            if (!parent)\n                throw new Error(`Frame has been detached.`);\n            frame = parent;\n        }\n        return this._sessions.get(frame._id);\n    }\n    _sessionForHandle(handle) {\n        const frame = handle._context.frame;\n        return this._sessionForFrame(frame);\n    }\n    async pageOrError() {\n        return this._pagePromise;\n    }\n    openerDelegate() {\n        return this._opener;\n    }\n    didClose() {\n        for (const session of this._sessions.values())\n            session.dispose();\n        this._page._didClose();\n        this._mainFrameSession._stopScreencast().catch(() => { });\n    }\n    async navigateFrame(frame, url, referrer) {\n        return this._sessionForFrame(frame)._navigate(frame, url, referrer);\n    }\n    async exposeBinding(binding) {\n        await this._forAllFrameSessions(frame => frame._initBinding(binding));\n        await Promise.all(this._page.frames().map(frame => frame.evaluateExpression(binding.source, false, {}, binding.world).catch(e => { })));\n    }\n    async updateExtraHTTPHeaders() {\n        await this._forAllFrameSessions(frame => frame._updateExtraHTTPHeaders(false));\n    }\n    async updateGeolocation() {\n        await this._forAllFrameSessions(frame => frame._updateGeolocation(false));\n    }\n    async updateOffline() {\n        await this._forAllFrameSessions(frame => frame._updateOffline(false));\n    }\n    async updateHttpCredentials() {\n        await this._forAllFrameSessions(frame => frame._updateHttpCredentials(false));\n    }\n    async setViewportSize(viewportSize) {\n        utils_1.assert(this._page._state.viewportSize === viewportSize);\n        await this._mainFrameSession._updateViewport();\n    }\n    async bringToFront() {\n        await this._mainFrameSession._client.send('Page.bringToFront');\n    }\n    async updateEmulateMedia() {\n        await this._forAllFrameSessions(frame => frame._updateEmulateMedia(false));\n    }\n    async updateRequestInterception() {\n        await this._forAllFrameSessions(frame => frame._updateRequestInterception(false));\n    }\n    async setFileChooserIntercepted(enabled) {\n        await this._forAllFrameSessions(frame => frame._setFileChooserIntercepted(enabled));\n    }\n    async opener() {\n        if (!this._opener)\n            return null;\n        const openerPage = await this._opener.pageOrError();\n        if (openerPage instanceof page_1.Page && !openerPage.isClosed())\n            return openerPage;\n        return null;\n    }\n    async reload() {\n        await this._mainFrameSession._client.send('Page.reload');\n    }\n    async _go(delta) {\n        const history = await this._mainFrameSession._client.send('Page.getNavigationHistory');\n        const entry = history.entries[history.currentIndex + delta];\n        if (!entry)\n            return false;\n        await this._mainFrameSession._client.send('Page.navigateToHistoryEntry', { entryId: entry.id });\n        return true;\n    }\n    goBack() {\n        return this._go(-1);\n    }\n    goForward() {\n        return this._go(+1);\n    }\n    async evaluateOnNewDocument(source, world = 'main') {\n        await this._forAllFrameSessions(frame => frame._evaluateOnNewDocument(source, world));\n    }\n    async closePage(runBeforeUnload) {\n        if (runBeforeUnload)\n            await this._mainFrameSession._client.send('Page.close');\n        else\n            await this._browserContext._browser._closePage(this);\n    }\n    canScreenshotOutsideViewport() {\n        return false;\n    }\n    async setBackgroundColor(color) {\n        await this._mainFrameSession._client.send('Emulation.setDefaultBackgroundColorOverride', { color });\n    }\n    async takeScreenshot(format, documentRect, viewportRect, quality) {\n        const { visualViewport } = await this._mainFrameSession._client.send('Page.getLayoutMetrics');\n        if (!documentRect) {\n            documentRect = {\n                x: visualViewport.pageX + viewportRect.x,\n                y: visualViewport.pageY + viewportRect.y,\n                ...helper_1.helper.enclosingIntSize({\n                    width: viewportRect.width / visualViewport.scale,\n                    height: viewportRect.height / visualViewport.scale,\n                })\n            };\n        }\n        // When taking screenshots with documentRect (based on the page content, not viewport),\n        // ignore current page scale.\n        const clip = { ...documentRect, scale: viewportRect ? visualViewport.scale : 1 };\n        const result = await this._mainFrameSession._client.send('Page.captureScreenshot', { format, quality, clip });\n        return Buffer.from(result.data, 'base64');\n    }\n    async resetViewport() {\n        await this._mainFrameSession._client.send('Emulation.setDeviceMetricsOverride', { mobile: false, width: 0, height: 0, deviceScaleFactor: 0 });\n    }\n    async getContentFrame(handle) {\n        return this._sessionForHandle(handle)._getContentFrame(handle);\n    }\n    async getOwnerFrame(handle) {\n        return this._sessionForHandle(handle)._getOwnerFrame(handle);\n    }\n    isElementHandle(remoteObject) {\n        return remoteObject.subtype === 'node';\n    }\n    async getBoundingBox(handle) {\n        return this._sessionForHandle(handle)._getBoundingBox(handle);\n    }\n    async scrollRectIntoViewIfNeeded(handle, rect) {\n        return this._sessionForHandle(handle)._scrollRectIntoViewIfNeeded(handle, rect);\n    }\n    rafCountForStablePosition() {\n        return 1;\n    }\n    async getContentQuads(handle) {\n        return this._sessionForHandle(handle)._getContentQuads(handle);\n    }\n    async setInputFiles(handle, files) {\n        await handle.evaluateInUtility(([injected, node, files]) => injected.setInputFiles(node, files), files);\n    }\n    async adoptElementHandle(handle, to) {\n        return this._sessionForHandle(handle)._adoptElementHandle(handle, to);\n    }\n    async getAccessibilityTree(needle) {\n        return crAccessibility_1.getAccessibilityTree(this._mainFrameSession._client, needle);\n    }\n    async inputActionEpilogue() {\n        await this._mainFrameSession._client.send('Page.enable').catch(e => { });\n    }\n    async pdf(options) {\n        return this._pdf.generate(options);\n    }\n    coverage() {\n        return this._coverage;\n    }\n    async getFrameElement(frame) {\n        let parent = frame.parentFrame();\n        if (!parent)\n            throw new Error('Frame has been detached.');\n        const parentSession = this._sessionForFrame(parent);\n        const { backendNodeId } = await parentSession._client.send('DOM.getFrameOwner', { frameId: frame._id }).catch(e => {\n            if (e instanceof Error && e.message.includes('Frame with the given id was not found.'))\n                stackTrace_1.rewriteErrorMessage(e, 'Frame has been detached.');\n            throw e;\n        });\n        parent = frame.parentFrame();\n        if (!parent)\n            throw new Error('Frame has been detached.');\n        return parentSession._adoptBackendNodeId(backendNodeId, await parent._mainContext());\n    }\n}\nexports.CRPage = CRPage;\nclass FrameSession {\n    constructor(crPage, client, targetId, parentSession) {\n        this._contextIdToContext = new Map();\n        this._eventListeners = [];\n        this._firstNonInitialNavigationCommittedFulfill = () => { };\n        this._firstNonInitialNavigationCommittedReject = (e) => { };\n        // Marks the oopif session that remote -> local transition has happened in the parent.\n        // See Target.detachedFromTarget handler for details.\n        this._swappedIn = false;\n        this._videoRecorder = null;\n        this._screencastId = null;\n        this._client = client;\n        this._crPage = crPage;\n        this._page = crPage._page;\n        this._targetId = targetId;\n        this._networkManager = new crNetworkManager_1.CRNetworkManager(client, this._page, parentSession ? parentSession._networkManager : null);\n        this._firstNonInitialNavigationCommittedPromise = new Promise((f, r) => {\n            this._firstNonInitialNavigationCommittedFulfill = f;\n            this._firstNonInitialNavigationCommittedReject = r;\n        });\n        client.once(crConnection_1.CRSessionEvents.Disconnected, () => {\n            this._firstNonInitialNavigationCommittedReject(new Error('Page closed'));\n        });\n    }\n    _isMainFrame() {\n        return this._targetId === this._crPage._targetId;\n    }\n    _addRendererListeners() {\n        this._eventListeners.push(...[\n            helper_1.helper.addEventListener(this._client, 'Log.entryAdded', event => this._onLogEntryAdded(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.fileChooserOpened', event => this._onFileChooserOpened(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.frameAttached', event => this._onFrameAttached(event.frameId, event.parentFrameId)),\n            helper_1.helper.addEventListener(this._client, 'Page.frameDetached', event => this._onFrameDetached(event.frameId, event.reason)),\n            helper_1.helper.addEventListener(this._client, 'Page.frameNavigated', event => this._onFrameNavigated(event.frame, false)),\n            helper_1.helper.addEventListener(this._client, 'Page.frameRequestedNavigation', event => this._onFrameRequestedNavigation(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.frameStoppedLoading', event => this._onFrameStoppedLoading(event.frameId)),\n            helper_1.helper.addEventListener(this._client, 'Page.javascriptDialogOpening', event => this._onDialog(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.navigatedWithinDocument', event => this._onFrameNavigatedWithinDocument(event.frameId, event.url)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.bindingCalled', event => this._onBindingCalled(event)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.consoleAPICalled', event => this._onConsoleAPI(event)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.exceptionThrown', exception => this._handleException(exception.exceptionDetails)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.executionContextCreated', event => this._onExecutionContextCreated(event.context)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.executionContextDestroyed', event => this._onExecutionContextDestroyed(event.executionContextId)),\n            helper_1.helper.addEventListener(this._client, 'Runtime.executionContextsCleared', event => this._onExecutionContextsCleared()),\n            helper_1.helper.addEventListener(this._client, 'Target.attachedToTarget', event => this._onAttachedToTarget(event)),\n            helper_1.helper.addEventListener(this._client, 'Target.detachedFromTarget', event => this._onDetachedFromTarget(event)),\n        ]);\n    }\n    _addBrowserListeners() {\n        this._eventListeners.push(...[\n            helper_1.helper.addEventListener(this._client, 'Inspector.targetCrashed', event => this._onTargetCrashed()),\n            helper_1.helper.addEventListener(this._client, 'Page.downloadWillBegin', event => this._onDownloadWillBegin(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.downloadProgress', event => this._onDownloadProgress(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.screencastFrame', event => this._onScreencastFrame(event)),\n            helper_1.helper.addEventListener(this._client, 'Page.windowOpen', event => this._onWindowOpen(event)),\n        ]);\n    }\n    async _initialize(hasUIWindow) {\n        if (hasUIWindow &&\n            !this._crPage._browserContext._browser.isClank() &&\n            !this._crPage._browserContext._options.noDefaultViewport) {\n            const { windowId } = await this._client.send('Browser.getWindowForTarget');\n            this._windowId = windowId;\n        }\n        let lifecycleEventsEnabled;\n        if (!this._isMainFrame())\n            this._addRendererListeners();\n        this._addBrowserListeners();\n        const promises = [\n            this._client.send('Page.enable'),\n            this._client.send('Page.getFrameTree').then(({ frameTree }) => {\n                if (this._isMainFrame()) {\n                    this._handleFrameTree(frameTree);\n                    this._addRendererListeners();\n                }\n                const localFrames = this._isMainFrame() ? this._page.frames() : [this._page._frameManager.frame(this._targetId)];\n                for (const frame of localFrames) {\n                    // Note: frames might be removed before we send these.\n                    this._client._sendMayFail('Page.createIsolatedWorld', {\n                        frameId: frame._id,\n                        grantUniveralAccess: true,\n                        worldName: UTILITY_WORLD_NAME,\n                    });\n                    for (const binding of this._crPage._browserContext._pageBindings.values())\n                        frame.evaluateExpression(binding.source, false, undefined, binding.world).catch(e => { });\n                    for (const source of this._crPage._browserContext._evaluateOnNewDocumentSources)\n                        frame.evaluateExpression(source, false, undefined, 'main').catch(e => { });\n                }\n                const isInitialEmptyPage = this._isMainFrame() && this._page.mainFrame().url() === ':';\n                if (isInitialEmptyPage) {\n                    // Ignore lifecycle events for the initial empty page. It is never the final page\n                    // hence we are going to get more lifecycle updates after the actual navigation has\n                    // started (even if the target url is about:blank).\n                    lifecycleEventsEnabled.then(() => {\n                        this._eventListeners.push(helper_1.helper.addEventListener(this._client, 'Page.lifecycleEvent', event => this._onLifecycleEvent(event)));\n                    });\n                }\n                else {\n                    this._firstNonInitialNavigationCommittedFulfill();\n                    this._eventListeners.push(helper_1.helper.addEventListener(this._client, 'Page.lifecycleEvent', event => this._onLifecycleEvent(event)));\n                }\n            }),\n            this._client.send('Log.enable', {}),\n            lifecycleEventsEnabled = this._client.send('Page.setLifecycleEventsEnabled', { enabled: true }),\n            this._client.send('Runtime.enable', {}),\n            this._client.send('Page.addScriptToEvaluateOnNewDocument', {\n                source: '',\n                worldName: UTILITY_WORLD_NAME,\n            }),\n            this._networkManager.initialize(),\n            this._client.send('Target.setAutoAttach', { autoAttach: true, waitForDebuggerOnStart: true, flatten: true }),\n        ];\n        if (this._isMainFrame())\n            promises.push(this._client.send('Emulation.setFocusEmulationEnabled', { enabled: true }));\n        const options = this._crPage._browserContext._options;\n        if (options.bypassCSP)\n            promises.push(this._client.send('Page.setBypassCSP', { enabled: true }));\n        if (options.ignoreHTTPSErrors)\n            promises.push(this._client.send('Security.setIgnoreCertificateErrors', { ignore: true }));\n        if (this._isMainFrame())\n            promises.push(this._updateViewport());\n        if (options.hasTouch)\n            promises.push(this._client.send('Emulation.setTouchEmulationEnabled', { enabled: true }));\n        if (options.javaScriptEnabled === false)\n            promises.push(this._client.send('Emulation.setScriptExecutionDisabled', { value: true }));\n        if (options.userAgent || options.locale)\n            promises.push(this._client.send('Emulation.setUserAgentOverride', { userAgent: options.userAgent || '', acceptLanguage: options.locale }));\n        if (options.locale)\n            promises.push(emulateLocale(this._client, options.locale));\n        if (options.timezoneId)\n            promises.push(emulateTimezone(this._client, options.timezoneId));\n        promises.push(this._updateGeolocation(true));\n        promises.push(this._updateExtraHTTPHeaders(true));\n        promises.push(this._updateRequestInterception(true));\n        promises.push(this._updateOffline(true));\n        promises.push(this._updateHttpCredentials(true));\n        promises.push(this._updateEmulateMedia(true));\n        for (const binding of this._crPage._page.allBindings())\n            promises.push(this._initBinding(binding));\n        for (const source of this._crPage._browserContext._evaluateOnNewDocumentSources)\n            promises.push(this._evaluateOnNewDocument(source, 'main'));\n        for (const source of this._crPage._page._evaluateOnNewDocumentSources)\n            promises.push(this._evaluateOnNewDocument(source, 'main'));\n        if (this._isMainFrame() && this._crPage._browserContext._options.recordVideo && hasUIWindow) {\n            const size = this._crPage._browserContext._options.recordVideo.size || this._crPage._browserContext._options.viewport || { width: 1280, height: 720 };\n            const screencastId = utils_1.createGuid();\n            const outputFile = path_1.default.join(this._crPage._browserContext._options.recordVideo.dir, screencastId + '.webm');\n            promises.push(this._crPage._browserContext._ensureVideosPath().then(() => {\n                return this._startScreencast(screencastId, {\n                    ...size,\n                    outputFile,\n                });\n            }));\n        }\n        promises.push(this._client.send('Runtime.runIfWaitingForDebugger'));\n        promises.push(this._firstNonInitialNavigationCommittedPromise);\n        await Promise.all(promises);\n    }\n    dispose() {\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        this._networkManager.dispose();\n        this._crPage._sessions.delete(this._targetId);\n    }\n    async _navigate(frame, url, referrer) {\n        const response = await this._client.send('Page.navigate', { url, referrer, frameId: frame._id });\n        if (response.errorText)\n            throw new Error(`${response.errorText} at ${url}`);\n        return { newDocumentId: response.loaderId };\n    }\n    _onLifecycleEvent(event) {\n        if (event.name === 'load')\n            this._page._frameManager.frameLifecycleEvent(event.frameId, 'load');\n        else if (event.name === 'DOMContentLoaded')\n            this._page._frameManager.frameLifecycleEvent(event.frameId, 'domcontentloaded');\n    }\n    _onFrameStoppedLoading(frameId) {\n        this._page._frameManager.frameStoppedLoading(frameId);\n    }\n    _handleFrameTree(frameTree) {\n        this._onFrameAttached(frameTree.frame.id, frameTree.frame.parentId || null);\n        this._onFrameNavigated(frameTree.frame, true);\n        if (!frameTree.childFrames)\n            return;\n        for (const child of frameTree.childFrames)\n            this._handleFrameTree(child);\n    }\n    _onFrameAttached(frameId, parentFrameId) {\n        const frameSession = this._crPage._sessions.get(frameId);\n        if (frameSession && frameId !== this._targetId) {\n            // This is a remote -> local frame transition.\n            frameSession._swappedIn = true;\n            const frame = this._page._frameManager.frame(frameId);\n            // Frame or even a whole subtree may be already gone, because some ancestor did navigate.\n            if (frame)\n                this._page._frameManager.removeChildFramesRecursively(frame);\n            return;\n        }\n        if (parentFrameId && !this._page._frameManager.frame(parentFrameId)) {\n            // Parent frame may be gone already because some ancestor frame navigated and\n            // destroyed the whole subtree of some oopif, while oopif's process is still sending us events.\n            // Be careful to not confuse this with \"main frame navigated cross-process\" scenario\n            // where parentFrameId is null.\n            return;\n        }\n        this._page._frameManager.frameAttached(frameId, parentFrameId);\n    }\n    _onFrameNavigated(framePayload, initial) {\n        if (!this._page._frameManager.frame(framePayload.id))\n            return; // Subtree may be already gone because some ancestor navigation destroyed the oopif.\n        this._page._frameManager.frameCommittedNewDocumentNavigation(framePayload.id, framePayload.url + (framePayload.urlFragment || ''), framePayload.name || '', framePayload.loaderId, initial);\n        if (!initial)\n            this._firstNonInitialNavigationCommittedFulfill();\n    }\n    _onFrameRequestedNavigation(payload) {\n        if (payload.disposition === 'currentTab')\n            this._page._frameManager.frameRequestedNavigation(payload.frameId);\n    }\n    _onFrameNavigatedWithinDocument(frameId, url) {\n        this._page._frameManager.frameCommittedSameDocumentNavigation(frameId, url);\n    }\n    _onFrameDetached(frameId, reason) {\n        if (this._crPage._sessions.has(frameId)) {\n            // This is a local -> remote frame transtion, where\n            // Page.frameDetached arrives after Target.attachedToTarget.\n            // We've already handled the new target and frame reattach - nothing to do here.\n            return;\n        }\n        if (reason === 'swap') {\n            // This is a local -> remote frame transtion, where\n            // Page.frameDetached arrives before Target.attachedToTarget.\n            // We should keep the frame in the tree, and it will be used for the new target.\n            const frame = this._page._frameManager.frame(frameId);\n            if (frame)\n                this._page._frameManager.removeChildFramesRecursively(frame);\n            return;\n        }\n        // Just a regular frame detach.\n        this._page._frameManager.frameDetached(frameId);\n    }\n    _onExecutionContextCreated(contextPayload) {\n        const frame = contextPayload.auxData ? this._page._frameManager.frame(contextPayload.auxData.frameId) : null;\n        if (!frame)\n            return;\n        const delegate = new crExecutionContext_1.CRExecutionContext(this._client, contextPayload);\n        let worldName = null;\n        if (contextPayload.auxData && !!contextPayload.auxData.isDefault)\n            worldName = 'main';\n        else if (contextPayload.name === UTILITY_WORLD_NAME)\n            worldName = 'utility';\n        const context = new dom.FrameExecutionContext(delegate, frame, worldName);\n        if (worldName)\n            frame._contextCreated(worldName, context);\n        this._contextIdToContext.set(contextPayload.id, context);\n    }\n    _onExecutionContextDestroyed(executionContextId) {\n        const context = this._contextIdToContext.get(executionContextId);\n        if (!context)\n            return;\n        this._contextIdToContext.delete(executionContextId);\n        context.frame._contextDestroyed(context);\n    }\n    _onExecutionContextsCleared() {\n        for (const contextId of Array.from(this._contextIdToContext.keys()))\n            this._onExecutionContextDestroyed(contextId);\n    }\n    _onAttachedToTarget(event) {\n        const session = crConnection_1.CRConnection.fromSession(this._client).session(event.sessionId);\n        if (event.targetInfo.type === 'iframe') {\n            // Frame id equals target id.\n            const targetId = event.targetInfo.targetId;\n            const frame = this._page._frameManager.frame(targetId);\n            if (!frame)\n                return; // Subtree may be already gone due to renderer/browser race.\n            this._page._frameManager.removeChildFramesRecursively(frame);\n            const frameSession = new FrameSession(this._crPage, session, targetId, this);\n            this._crPage._sessions.set(targetId, frameSession);\n            frameSession._initialize(false).catch(e => e);\n            return;\n        }\n        if (event.targetInfo.type !== 'worker') {\n            // Ideally, detaching should resume any target, but there is a bug in the backend.\n            session._sendMayFail('Runtime.runIfWaitingForDebugger').then(() => {\n                this._client._sendMayFail('Target.detachFromTarget', { sessionId: event.sessionId });\n            });\n            return;\n        }\n        const url = event.targetInfo.url;\n        const worker = new page_1.Worker(this._page, url);\n        this._page._addWorker(event.sessionId, worker);\n        session.once('Runtime.executionContextCreated', async (event) => {\n            worker._createExecutionContext(new crExecutionContext_1.CRExecutionContext(session, event.context));\n        });\n        // This might fail if the target is closed before we initialize.\n        session._sendMayFail('Runtime.enable');\n        session._sendMayFail('Network.enable');\n        session._sendMayFail('Runtime.runIfWaitingForDebugger');\n        session.on('Runtime.consoleAPICalled', event => {\n            const args = event.args.map(o => worker._existingExecutionContext.createHandle(o));\n            this._page._addConsoleMessage(event.type, args, crProtocolHelper_1.toConsoleMessageLocation(event.stackTrace));\n        });\n        session.on('Runtime.exceptionThrown', exception => this._page.emit(page_1.Page.Events.PageError, crProtocolHelper_1.exceptionToError(exception.exceptionDetails)));\n        // TODO: attribute workers to the right frame.\n        this._networkManager.instrumentNetworkEvents(session, this._page._frameManager.frame(this._targetId));\n    }\n    _onDetachedFromTarget(event) {\n        // This might be a worker...\n        this._page._removeWorker(event.sessionId);\n        // ... or an oopif.\n        const childFrameSession = this._crPage._sessions.get(event.targetId);\n        if (!childFrameSession)\n            return;\n        // Usually, we get frameAttached in this session first and mark child as swappedIn.\n        if (childFrameSession._swappedIn) {\n            childFrameSession.dispose();\n            return;\n        }\n        // However, sometimes we get detachedFromTarget before frameAttached.\n        // In this case we don't know wheter this is a remote frame detach,\n        // or just a remote -> local transition. In the latter case, frameAttached\n        // is already inflight, so let's make a safe roundtrip to ensure it arrives.\n        this._client.send('Page.enable').catch(e => null).then(() => {\n            // Child was not swapped in - that means frameAttached did not happen and\n            // this is remote detach rather than remote -> local swap.\n            if (!childFrameSession._swappedIn)\n                this._page._frameManager.frameDetached(event.targetId);\n            childFrameSession.dispose();\n        });\n    }\n    _onWindowOpen(event) {\n        this._crPage._nextWindowOpenPopupFeatures.push(event.windowFeatures);\n    }\n    async _onConsoleAPI(event) {\n        if (event.executionContextId === 0) {\n            // DevTools protocol stores the last 1000 console messages. These\n            // messages are always reported even for removed execution contexts. In\n            // this case, they are marked with executionContextId = 0 and are\n            // reported upon enabling Runtime agent.\n            //\n            // Ignore these messages since:\n            // - there's no execution context we can use to operate with message\n            //   arguments\n            // - these messages are reported before Playwright clients can subscribe\n            //   to the 'console'\n            //   page event.\n            //\n            // @see https://github.com/GoogleChrome/puppeteer/issues/3865\n            return;\n        }\n        const context = this._contextIdToContext.get(event.executionContextId);\n        const values = event.args.map(arg => context.createHandle(arg));\n        this._page._addConsoleMessage(event.type, values, crProtocolHelper_1.toConsoleMessageLocation(event.stackTrace));\n    }\n    async _initBinding(binding) {\n        const worldName = binding.world === 'utility' ? UTILITY_WORLD_NAME : undefined;\n        await Promise.all([\n            this._client.send('Runtime.addBinding', { name: binding.name, executionContextName: worldName }),\n            this._client.send('Page.addScriptToEvaluateOnNewDocument', { source: binding.source, worldName })\n        ]);\n    }\n    async _onBindingCalled(event) {\n        const context = this._contextIdToContext.get(event.executionContextId);\n        const pageOrError = await this._crPage.pageOrError();\n        if (!(pageOrError instanceof Error))\n            await this._page._onBindingCalled(event.payload, context);\n    }\n    _onDialog(event) {\n        if (!this._page._frameManager.frame(this._targetId))\n            return; // Our frame/subtree may be gone already.\n        this._page.emit(page_1.Page.Events.Dialog, new dialog.Dialog(this._page, event.type, event.message, async (accept, promptText) => {\n            await this._client.send('Page.handleJavaScriptDialog', { accept, promptText });\n        }, event.defaultPrompt));\n    }\n    _handleException(exceptionDetails) {\n        this._page.emit(page_1.Page.Events.PageError, crProtocolHelper_1.exceptionToError(exceptionDetails));\n    }\n    async _onTargetCrashed() {\n        this._client._markAsCrashed();\n        this._page._didCrash();\n    }\n    _onLogEntryAdded(event) {\n        const { level, text, args, source, url, lineNumber } = event.entry;\n        if (args)\n            args.map(arg => crProtocolHelper_1.releaseObject(this._client, arg.objectId));\n        if (source !== 'worker') {\n            const location = {\n                url: url || '',\n                lineNumber: lineNumber || 0,\n                columnNumber: 0,\n            };\n            this._page.emit(page_1.Page.Events.Console, new console_1.ConsoleMessage(level, text, [], location));\n        }\n    }\n    async _onFileChooserOpened(event) {\n        const frame = this._page._frameManager.frame(event.frameId);\n        if (!frame)\n            return;\n        let handle;\n        try {\n            const utilityContext = await frame._utilityContext();\n            handle = await this._adoptBackendNodeId(event.backendNodeId, utilityContext);\n        }\n        catch (e) {\n            // During async processing, frame/context may go away. We should not throw.\n            return;\n        }\n        await this._page._onFileChooserOpened(handle);\n    }\n    _onDownloadWillBegin(payload) {\n        let originPage = this._crPage._initializedPage;\n        // If it's a new window download, report it on the opener page.\n        if (!originPage) {\n            // Resume the page creation with an error. The page will automatically close right\n            // after the download begins.\n            this._firstNonInitialNavigationCommittedReject(new Error('Starting new page download'));\n            if (this._crPage._opener)\n                originPage = this._crPage._opener._initializedPage;\n        }\n        if (!originPage)\n            return;\n        this._crPage._browserContext._browser._downloadCreated(originPage, payload.guid, payload.url, payload.suggestedFilename);\n    }\n    _onDownloadProgress(payload) {\n        if (payload.state === 'completed')\n            this._crPage._browserContext._browser._downloadFinished(payload.guid, '');\n        if (payload.state === 'canceled')\n            this._crPage._browserContext._browser._downloadFinished(payload.guid, 'canceled');\n    }\n    _onScreencastFrame(payload) {\n        if (!this._videoRecorder)\n            return;\n        const buffer = Buffer.from(payload.data, 'base64');\n        this._videoRecorder.writeFrame(buffer, payload.metadata.timestamp);\n        // The target may be closed before receiving the ack.\n        this._client.send('Page.screencastFrameAck', { sessionId: payload.sessionId }).catch(() => { });\n    }\n    async _startScreencast(screencastId, options) {\n        utils_1.assert(!this._screencastId);\n        const ffmpegPath = this._crPage._browserContext._browser.options.registry.executablePath('ffmpeg');\n        if (!ffmpegPath)\n            throw new Error('ffmpeg executable was not found');\n        if (!utils_1.canAccessFile(ffmpegPath)) {\n            let message = '';\n            switch (this._page._browserContext._options.sdkLanguage) {\n                case 'python':\n                    message = 'playwright install ffmpeg';\n                    break;\n                case 'python-async':\n                    message = 'playwright install ffmpeg';\n                    break;\n                case 'javascript':\n                    message = 'npx playwright install ffmpeg';\n                    break;\n                case 'java':\n                    message = 'mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args=\"install ffmpeg\"';\n                    break;\n            }\n            throw new Error(`\n============================================================\n  Please install ffmpeg in order to record video.\n\n  $ ${message}\n============================================================\n      `);\n        }\n        this._videoRecorder = await videoRecorder_1.VideoRecorder.launch(this._crPage._page, ffmpegPath, options);\n        this._screencastId = screencastId;\n        const gotFirstFrame = new Promise(f => this._client.once('Page.screencastFrame', f));\n        await this._client.send('Page.startScreencast', {\n            format: 'jpeg',\n            quality: 90,\n            maxWidth: options.width,\n            maxHeight: options.height,\n        });\n        this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext, screencastId, options.outputFile, this._crPage.pageOrError());\n        await gotFirstFrame;\n    }\n    async _stopScreencast() {\n        if (!this._screencastId)\n            return;\n        await this._client._sendMayFail('Page.stopScreencast');\n        const recorder = this._videoRecorder;\n        const screencastId = this._screencastId;\n        this._videoRecorder = null;\n        this._screencastId = null;\n        await recorder.stop().catch(() => { });\n        this._crPage._browserContext._browser._videoFinished(screencastId);\n    }\n    async _updateExtraHTTPHeaders(initial) {\n        const headers = network.mergeHeaders([\n            this._crPage._browserContext._options.extraHTTPHeaders,\n            this._page._state.extraHTTPHeaders\n        ]);\n        if (!initial || headers.length)\n            await this._client.send('Network.setExtraHTTPHeaders', { headers: utils_1.headersArrayToObject(headers, false /* lowerCase */) });\n    }\n    async _updateGeolocation(initial) {\n        const geolocation = this._crPage._browserContext._options.geolocation;\n        if (!initial || geolocation)\n            await this._client.send('Emulation.setGeolocationOverride', geolocation || {});\n    }\n    async _updateOffline(initial) {\n        const offline = !!this._crPage._browserContext._options.offline;\n        if (!initial || offline)\n            await this._networkManager.setOffline(offline);\n    }\n    async _updateHttpCredentials(initial) {\n        const credentials = this._crPage._browserContext._options.httpCredentials || null;\n        if (!initial || credentials)\n            await this._networkManager.authenticate(credentials);\n    }\n    async _updateViewport() {\n        if (this._crPage._browserContext._browser.isClank())\n            return;\n        utils_1.assert(this._isMainFrame());\n        const options = this._crPage._browserContext._options;\n        const viewportSize = this._page._state.viewportSize;\n        if (viewportSize === null)\n            return;\n        const isLandscape = viewportSize.width > viewportSize.height;\n        const promises = [\n            this._client.send('Emulation.setDeviceMetricsOverride', {\n                mobile: !!options.isMobile,\n                width: viewportSize.width,\n                height: viewportSize.height,\n                screenWidth: viewportSize.width,\n                screenHeight: viewportSize.height,\n                deviceScaleFactor: options.deviceScaleFactor || 1,\n                screenOrientation: isLandscape ? { angle: 90, type: 'landscapePrimary' } : { angle: 0, type: 'portraitPrimary' },\n            }),\n        ];\n        if (this._windowId) {\n            let insets = { width: 0, height: 0 };\n            if (this._crPage._browserContext._browser.options.headful) {\n                // TODO: popup windows have their own insets.\n                insets = { width: 24, height: 88 };\n                if (process.platform === 'win32')\n                    insets = { width: 16, height: 88 };\n                else if (process.platform === 'linux')\n                    insets = { width: 8, height: 85 };\n                else if (process.platform === 'darwin')\n                    insets = { width: 2, height: 80 };\n            }\n            promises.push(this.setWindowBounds({\n                width: viewportSize.width + insets.width,\n                height: viewportSize.height + insets.height\n            }));\n        }\n        await Promise.all(promises);\n    }\n    async windowBounds() {\n        const { bounds } = await this._client.send('Browser.getWindowBounds', {\n            windowId: this._windowId\n        });\n        return bounds;\n    }\n    async setWindowBounds(bounds) {\n        return await this._client.send('Browser.setWindowBounds', {\n            windowId: this._windowId,\n            bounds\n        });\n    }\n    async _updateEmulateMedia(initial) {\n        if (this._crPage._browserContext._browser.isClank())\n            return;\n        const colorScheme = this._page._state.colorScheme || this._crPage._browserContext._options.colorScheme || 'light';\n        const features = colorScheme ? [{ name: 'prefers-color-scheme', value: colorScheme }] : [];\n        await this._client.send('Emulation.setEmulatedMedia', { media: this._page._state.mediaType || '', features });\n    }\n    async _updateRequestInterception(initial) {\n        await this._networkManager.setRequestInterception(this._page._needsRequestInterception());\n    }\n    async _setFileChooserIntercepted(enabled) {\n        await this._client.send('Page.setInterceptFileChooserDialog', { enabled }).catch(e => { }); // target can be closed.\n    }\n    async _evaluateOnNewDocument(source, world) {\n        const worldName = world === 'utility' ? UTILITY_WORLD_NAME : undefined;\n        await this._client.send('Page.addScriptToEvaluateOnNewDocument', { source, worldName });\n    }\n    async _getContentFrame(handle) {\n        const nodeInfo = await this._client.send('DOM.describeNode', {\n            objectId: handle._objectId\n        });\n        if (!nodeInfo || typeof nodeInfo.node.frameId !== 'string')\n            return null;\n        return this._page._frameManager.frame(nodeInfo.node.frameId);\n    }\n    async _getOwnerFrame(handle) {\n        // document.documentElement has frameId of the owner frame.\n        const documentElement = await handle.evaluateHandle(node => {\n            const doc = node;\n            if (doc.documentElement && doc.documentElement.ownerDocument === doc)\n                return doc.documentElement;\n            return node.ownerDocument ? node.ownerDocument.documentElement : null;\n        });\n        if (!documentElement)\n            return null;\n        if (!documentElement._objectId)\n            return null;\n        const nodeInfo = await this._client.send('DOM.describeNode', {\n            objectId: documentElement._objectId\n        });\n        const frameId = nodeInfo && typeof nodeInfo.node.frameId === 'string' ?\n            nodeInfo.node.frameId : null;\n        documentElement.dispose();\n        return frameId;\n    }\n    async _getBoundingBox(handle) {\n        const result = await this._client._sendMayFail('DOM.getBoxModel', {\n            objectId: handle._objectId\n        });\n        if (!result)\n            return null;\n        const quad = result.model.border;\n        const x = Math.min(quad[0], quad[2], quad[4], quad[6]);\n        const y = Math.min(quad[1], quad[3], quad[5], quad[7]);\n        const width = Math.max(quad[0], quad[2], quad[4], quad[6]) - x;\n        const height = Math.max(quad[1], quad[3], quad[5], quad[7]) - y;\n        const position = await this._framePosition();\n        if (!position)\n            return null;\n        return { x: x + position.x, y: y + position.y, width, height };\n    }\n    async _framePosition() {\n        const frame = this._page._frameManager.frame(this._targetId);\n        if (!frame)\n            return null;\n        if (frame === this._page.mainFrame())\n            return { x: 0, y: 0 };\n        const element = await frame.frameElement();\n        const box = await element.boundingBox();\n        return box;\n    }\n    async _scrollRectIntoViewIfNeeded(handle, rect) {\n        return await this._client.send('DOM.scrollIntoViewIfNeeded', {\n            objectId: handle._objectId,\n            rect,\n        }).then(() => 'done').catch(e => {\n            if (e instanceof Error && e.message.includes('Node does not have a layout object'))\n                return 'error:notvisible';\n            if (e instanceof Error && e.message.includes('Node is detached from document'))\n                return 'error:notconnected';\n            throw e;\n        });\n    }\n    async _getContentQuads(handle) {\n        const result = await this._client._sendMayFail('DOM.getContentQuads', {\n            objectId: handle._objectId\n        });\n        if (!result)\n            return null;\n        const position = await this._framePosition();\n        if (!position)\n            return null;\n        return result.quads.map(quad => [\n            { x: quad[0] + position.x, y: quad[1] + position.y },\n            { x: quad[2] + position.x, y: quad[3] + position.y },\n            { x: quad[4] + position.x, y: quad[5] + position.y },\n            { x: quad[6] + position.x, y: quad[7] + position.y }\n        ]);\n    }\n    async _adoptElementHandle(handle, to) {\n        const nodeInfo = await this._client.send('DOM.describeNode', {\n            objectId: handle._objectId,\n        });\n        return this._adoptBackendNodeId(nodeInfo.node.backendNodeId, to);\n    }\n    async _adoptBackendNodeId(backendNodeId, to) {\n        const result = await this._client._sendMayFail('DOM.resolveNode', {\n            backendNodeId,\n            executionContextId: to._delegate._contextId,\n        });\n        if (!result || result.object.subtype === 'null')\n            throw new Error('Unable to adopt element handle from a different document');\n        return to.createHandle(result.object).asElement();\n    }\n}\nasync function emulateLocale(session, locale) {\n    try {\n        await session.send('Emulation.setLocaleOverride', { locale });\n    }\n    catch (exception) {\n        // All pages in the same renderer share locale. All such pages belong to the same\n        // context and if locale is overridden for one of them its value is the same as\n        // we are trying to set so it's not a problem.\n        if (exception.message.includes('Another locale override is already in effect'))\n            return;\n        throw exception;\n    }\n}\nasync function emulateTimezone(session, timezoneId) {\n    try {\n        await session.send('Emulation.setTimezoneOverride', { timezoneId: timezoneId });\n    }\n    catch (exception) {\n        if (exception.message.includes('Timezone override is already in effect'))\n            return;\n        if (exception.message.includes('Invalid timezone'))\n            throw new Error(`Invalid timezone ID: ${timezoneId}`);\n        throw exception;\n    }\n}\n//# sourceMappingURL=crPage.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CRPDF = void 0;\nconst utils_1 = require(\"../../utils/utils\");\nconst crProtocolHelper_1 = require(\"./crProtocolHelper\");\nconst PagePaperFormats = {\n    letter: { width: 8.5, height: 11 },\n    legal: { width: 8.5, height: 14 },\n    tabloid: { width: 11, height: 17 },\n    ledger: { width: 17, height: 11 },\n    a0: { width: 33.1, height: 46.8 },\n    a1: { width: 23.4, height: 33.1 },\n    a2: { width: 16.54, height: 23.4 },\n    a3: { width: 11.7, height: 16.54 },\n    a4: { width: 8.27, height: 11.7 },\n    a5: { width: 5.83, height: 8.27 },\n    a6: { width: 4.13, height: 5.83 },\n};\nconst unitToPixels = {\n    'px': 1,\n    'in': 96,\n    'cm': 37.8,\n    'mm': 3.78\n};\nfunction convertPrintParameterToInches(text) {\n    if (text === undefined)\n        return undefined;\n    let unit = text.substring(text.length - 2).toLowerCase();\n    let valueText = '';\n    if (unitToPixels.hasOwnProperty(unit)) {\n        valueText = text.substring(0, text.length - 2);\n    }\n    else {\n        // In case of unknown unit try to parse the whole parameter as number of pixels.\n        // This is consistent with phantom's paperSize behavior.\n        unit = 'px';\n        valueText = text;\n    }\n    const value = Number(valueText);\n    utils_1.assert(!isNaN(value), 'Failed to parse parameter value: ' + text);\n    const pixels = value * unitToPixels[unit];\n    return pixels / 96;\n}\nclass CRPDF {\n    constructor(client) {\n        this._client = client;\n    }\n    async generate(options = {}) {\n        const { scale = 1, displayHeaderFooter = false, headerTemplate = '', footerTemplate = '', printBackground = false, landscape = false, pageRanges = '', preferCSSPageSize = false, margin = {}, } = options;\n        let paperWidth = 8.5;\n        let paperHeight = 11;\n        if (options.format) {\n            const format = PagePaperFormats[options.format.toLowerCase()];\n            utils_1.assert(format, 'Unknown paper format: ' + options.format);\n            paperWidth = format.width;\n            paperHeight = format.height;\n        }\n        else {\n            paperWidth = convertPrintParameterToInches(options.width) || paperWidth;\n            paperHeight = convertPrintParameterToInches(options.height) || paperHeight;\n        }\n        const marginTop = convertPrintParameterToInches(margin.top) || 0;\n        const marginLeft = convertPrintParameterToInches(margin.left) || 0;\n        const marginBottom = convertPrintParameterToInches(margin.bottom) || 0;\n        const marginRight = convertPrintParameterToInches(margin.right) || 0;\n        const result = await this._client.send('Page.printToPDF', {\n            transferMode: 'ReturnAsStream',\n            landscape,\n            displayHeaderFooter,\n            headerTemplate,\n            footerTemplate,\n            printBackground,\n            scale,\n            paperWidth,\n            paperHeight,\n            marginTop,\n            marginBottom,\n            marginLeft,\n            marginRight,\n            pageRanges,\n            preferCSSPageSize\n        });\n        return await crProtocolHelper_1.readProtocolStream(this._client, result.stream, null);\n    }\n}\nexports.CRPDF = CRPDF;\n//# sourceMappingURL=crPdf.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exceptionToError = exports.toConsoleMessageLocation = exports.readProtocolStream = exports.releaseObject = exports.getExceptionMessage = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../../utils/utils\");\nfunction getExceptionMessage(exceptionDetails) {\n    if (exceptionDetails.exception)\n        return exceptionDetails.exception.description || String(exceptionDetails.exception.value);\n    let message = exceptionDetails.text;\n    if (exceptionDetails.stackTrace) {\n        for (const callframe of exceptionDetails.stackTrace.callFrames) {\n            const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n            const functionName = callframe.functionName || '<anonymous>';\n            message += `\\n    at ${functionName} (${location})`;\n        }\n    }\n    return message;\n}\nexports.getExceptionMessage = getExceptionMessage;\nasync function releaseObject(client, objectId) {\n    await client.send('Runtime.releaseObject', { objectId }).catch(error => { });\n}\nexports.releaseObject = releaseObject;\nasync function readProtocolStream(client, handle, path) {\n    let eof = false;\n    let fd;\n    if (path) {\n        await utils_1.mkdirIfNeeded(path);\n        fd = await util.promisify(fs_1.default.open)(path, 'w');\n    }\n    const bufs = [];\n    while (!eof) {\n        const response = await client.send('IO.read', { handle });\n        eof = response.eof;\n        const buf = Buffer.from(response.data, response.base64Encoded ? 'base64' : undefined);\n        bufs.push(buf);\n        if (path)\n            await util.promisify(fs_1.default.write)(fd, buf);\n    }\n    if (path)\n        await util.promisify(fs_1.default.close)(fd);\n    await client.send('IO.close', { handle });\n    return Buffer.concat(bufs);\n}\nexports.readProtocolStream = readProtocolStream;\nfunction toConsoleMessageLocation(stackTrace) {\n    return stackTrace && stackTrace.callFrames.length ? {\n        url: stackTrace.callFrames[0].url,\n        lineNumber: stackTrace.callFrames[0].lineNumber,\n        columnNumber: stackTrace.callFrames[0].columnNumber,\n    } : { url: '', lineNumber: 0, columnNumber: 0 };\n}\nexports.toConsoleMessageLocation = toConsoleMessageLocation;\nfunction exceptionToError(exceptionDetails) {\n    const messageWithStack = getExceptionMessage(exceptionDetails);\n    const lines = messageWithStack.split('\\n');\n    const firstStackTraceLine = lines.findIndex(line => line.startsWith('    at'));\n    let message = '';\n    let stack = '';\n    if (firstStackTraceLine === -1) {\n        message = messageWithStack;\n    }\n    else {\n        message = lines.slice(0, firstStackTraceLine).join('\\n');\n        stack = messageWithStack;\n    }\n    const match = message.match(/^[a-zA-Z0-0_]*Error: (.*)$/);\n    if (match)\n        message = match[1];\n    const err = new Error(message);\n    err.stack = stack;\n    return err;\n}\nexports.exceptionToError = exceptionToError;\n//# sourceMappingURL=crProtocolHelper.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findChromiumChannel = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst utils_1 = require(\"../../utils/utils\");\nfunction darwin(channel) {\n    switch (channel) {\n        case 'chrome': return '/Applications/Google Chrome.app/Contents/MacOS/Google Chrome';\n        case 'chrome-beta': return '/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta';\n        case 'chrome-dev': return '/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev';\n        case 'chrome-canary': return '/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary';\n        case 'msedge': return '/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge';\n        case 'msedge-beta': return '/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta';\n        case 'msedge-dev': return '/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev';\n        case 'msedge-canary': return '/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary';\n    }\n}\nfunction linux(channel) {\n    switch (channel) {\n        case 'chrome': return '/opt/google/chrome/chrome';\n        case 'chrome-beta': return '/opt/google/chrome-beta/chrome';\n        case 'chrome-dev': return '/opt/google/chrome-unstable/chrome';\n        case 'msedge-dev': return '/opt/microsoft/msedge-dev/msedge';\n    }\n}\nfunction win32(channel) {\n    let suffix;\n    switch (channel) {\n        case 'chrome':\n            suffix = `\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe`;\n            break;\n        case 'chrome-beta':\n            suffix = `\\\\Google\\\\Chrome Beta\\\\Application\\\\chrome.exe`;\n            break;\n        case 'chrome-dev':\n            suffix = `\\\\Google\\\\Chrome Dev\\\\Application\\\\chrome.exe`;\n            break;\n        case 'chrome-canary':\n            suffix = `\\\\Google\\\\Chrome SxS\\\\Application\\\\chrome.exe`;\n            break;\n        case 'msedge':\n            suffix = `\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe`;\n            break;\n        case 'msedge-beta':\n            suffix = `\\\\Microsoft\\\\Edge Beta\\\\Application\\\\msedge.exe`;\n            break;\n        case 'msedge-dev':\n            suffix = `\\\\Microsoft\\\\Edge Dev\\\\Application\\\\msedge.exe`;\n            break;\n        case 'msedge-canary':\n            suffix = `\\\\Microsoft\\\\Edge SxS\\\\Application\\\\msedge.exe`;\n            break;\n    }\n    if (!suffix)\n        return;\n    const prefixes = [\n        process.env.LOCALAPPDATA, process.env.PROGRAMFILES, process.env['PROGRAMFILES(X86)']\n    ].filter(Boolean);\n    let result;\n    prefixes.forEach(prefix => {\n        const chromePath = path_1.default.join(prefix, suffix);\n        if (utils_1.canAccessFile(chromePath))\n            result = chromePath;\n    });\n    return result;\n}\nfunction findChromiumChannel(channel) {\n    let result;\n    if (process.platform === 'linux')\n        result = linux(channel);\n    else if (process.platform === 'win32')\n        result = win32(channel);\n    else if (process.platform === 'darwin')\n        result = darwin(channel);\n    if (!result)\n        throw new Error(`Chromium distribution '${channel}' is not supported on ${process.platform}`);\n    if (utils_1.canAccessFile(result))\n        return result;\n    throw new Error(`Chromium distribution was not found: ${channel}`);\n}\nexports.findChromiumChannel = findChromiumChannel;\n//# sourceMappingURL=findChromiumChannel.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VideoRecorder = void 0;\nconst utils_1 = require(\"../../utils/utils\");\nconst processLauncher_1 = require(\"../processLauncher\");\nconst progress_1 = require(\"../progress\");\nconst instrumentation_1 = require(\"../instrumentation\");\nconst fps = 25;\nclass VideoRecorder {\n    constructor(ffmpegPath, progress) {\n        this._process = null;\n        this._gracefullyClose = null;\n        this._lastWritePromise = Promise.resolve();\n        this._lastFrameTimestamp = 0;\n        this._lastFrameBuffer = null;\n        this._lastWriteTimestamp = 0;\n        this._frameQueue = [];\n        this._isStopped = false;\n        this._progress = progress;\n        this._ffmpegPath = ffmpegPath;\n    }\n    static async launch(page, ffmpegPath, options) {\n        if (!options.outputFile.endsWith('.webm'))\n            throw new Error('File must have .webm extension');\n        const controller = new progress_1.ProgressController(instrumentation_1.internalCallMetadata(), page);\n        controller.setLogName('browser');\n        return await controller.run(async (progress) => {\n            const recorder = new VideoRecorder(ffmpegPath, progress);\n            await recorder._launch(options);\n            return recorder;\n        });\n    }\n    async _launch(options) {\n        // How to tune the codec:\n        // 1. Read vp8 documentation to figure out the options.\n        //   https://www.webmproject.org/docs/encoder-parameters/\n        // 2. Use the following command to map the options to ffmpeg arguments.\n        //   $ ./third_party/ffmpeg/ffmpeg-mac -h encoder=vp8\n        // 3. A bit more about passing vp8 options to ffmpeg.\n        //   https://trac.ffmpeg.org/wiki/Encode/VP8\n        //\n        // We use the following vp8 options:\n        //   \"-qmin 0 -qmax 50\" - quality variation from 0 to 50.\n        //     Suggested here: https://trac.ffmpeg.org/wiki/Encode/VP8\n        //   \"-crf 8\" - constant quality mode, 4-63, lower means better quality.\n        //   \"-deadline realtime\" - do not use too much cpu to keep up with incoming frames.\n        //   \"-b:v 1M\" - video bitrate. Default value is too low for vp8\n        //     Suggested here: https://trac.ffmpeg.org/wiki/Encode/VP8\n        //\n        // We use \"pad\" and \"crop\" video filters (-vf option) to resize incoming frames\n        // that might be of the different size to the desired video size.\n        //   https://ffmpeg.org/ffmpeg-filters.html#pad-1\n        //   https://ffmpeg.org/ffmpeg-filters.html#crop\n        //\n        // We use \"image2pipe\" mode to pipe frames and get a single video.\n        // \"-f image2pipe -c:v mjpeg -i -\" forces input to be read from standard input, and forces\n        // mjpeg input image format.\n        //   https://trac.ffmpeg.org/wiki/Slideshow\n        //\n        // \"-y\" means overwrite output.\n        // \"-an\" means no audio.\n        const w = options.width;\n        const h = options.height;\n        const args = `-loglevel error -f image2pipe -c:v mjpeg -i - -y -an -r ${fps} -c:v vp8 -qmin 0 -qmax 50 -crf 8 -deadline realtime -b:v 1M -vf pad=${w}:${h}:0:0:gray,crop=${w}:${h}:0:0`.split(' ');\n        args.push(options.outputFile);\n        const progress = this._progress;\n        const { launchedProcess, gracefullyClose } = await processLauncher_1.launchProcess({\n            executablePath: this._ffmpegPath,\n            args,\n            stdio: 'stdin',\n            log: (message) => progress.log(message),\n            tempDirectories: [],\n            attemptToGracefullyClose: async () => {\n                progress.log('Closing stdin...');\n                launchedProcess.stdin.end();\n            },\n            onExit: (exitCode, signal) => {\n                progress.log(`ffmpeg onkill exitCode=${exitCode} signal=${signal}`);\n            },\n        });\n        launchedProcess.stdin.on('finish', () => {\n            progress.log('ffmpeg finished input.');\n        });\n        launchedProcess.stdin.on('error', () => {\n            progress.log('ffmpeg error.');\n        });\n        this._process = launchedProcess;\n        this._gracefullyClose = gracefullyClose;\n    }\n    writeFrame(frame, timestamp) {\n        utils_1.assert(this._process);\n        if (this._isStopped)\n            return;\n        this._progress.log(`writing frame ` + timestamp);\n        if (this._lastFrameBuffer) {\n            const durationSec = timestamp - this._lastFrameTimestamp;\n            const repeatCount = Math.max(1, Math.round(fps * durationSec));\n            for (let i = 0; i < repeatCount; ++i)\n                this._frameQueue.push(this._lastFrameBuffer);\n            this._lastWritePromise = this._lastWritePromise.then(() => this._sendFrames());\n        }\n        this._lastFrameBuffer = frame;\n        this._lastFrameTimestamp = timestamp;\n        this._lastWriteTimestamp = utils_1.monotonicTime();\n    }\n    async _sendFrames() {\n        while (this._frameQueue.length)\n            await this._sendFrame(this._frameQueue.shift());\n    }\n    async _sendFrame(frame) {\n        return new Promise(f => this._process.stdin.write(frame, f)).then(error => {\n            if (error)\n                this._progress.log(`ffmpeg failed to write: ${error}`);\n        });\n    }\n    async stop() {\n        if (this._isStopped)\n            return;\n        this.writeFrame(Buffer.from([]), this._lastFrameTimestamp + (utils_1.monotonicTime() - this._lastWriteTimestamp) / 1000);\n        this._isStopped = true;\n        await this._lastWritePromise;\n        await this._gracefullyClose();\n    }\n}\nexports.VideoRecorder = VideoRecorder;\n//# sourceMappingURL=videoRecorder.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeSelector = exports.parseCSS = void 0;\nconst css = __importStar(require(\"./cssTokenizer\"));\nfunction parseCSS(selector, customNames) {\n    let tokens;\n    try {\n        tokens = css.tokenize(selector);\n        if (!(tokens[tokens.length - 1] instanceof css.EOFToken))\n            tokens.push(new css.EOFToken());\n    }\n    catch (e) {\n        const newMessage = e.message + ` while parsing selector \"${selector}\"`;\n        const index = (e.stack || '').indexOf(e.message);\n        if (index !== -1)\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\n        e.message = newMessage;\n        throw e;\n    }\n    const unsupportedToken = tokens.find(token => {\n        return (token instanceof css.AtKeywordToken) ||\n            (token instanceof css.BadStringToken) ||\n            (token instanceof css.BadURLToken) ||\n            (token instanceof css.ColumnToken) ||\n            (token instanceof css.CDOToken) ||\n            (token instanceof css.CDCToken) ||\n            (token instanceof css.SemicolonToken) ||\n            // TODO: Consider using these for something, e.g. to escape complex strings.\n            // For example :xpath{ (//div/bar[@attr=\"foo\"])[2]/baz }\n            // Or this way :xpath( {complex-xpath-goes-here(\"hello\")} )\n            (token instanceof css.OpenCurlyToken) ||\n            (token instanceof css.CloseCurlyToken) ||\n            // TODO: Consider treating these as strings?\n            (token instanceof css.URLToken) ||\n            (token instanceof css.PercentageToken);\n    });\n    if (unsupportedToken)\n        throw new Error(`Unsupported token \"${unsupportedToken.toSource()}\" while parsing selector \"${selector}\"`);\n    let pos = 0;\n    const names = new Set();\n    function unexpected() {\n        return new Error(`Unexpected token \"${tokens[pos].toSource()}\" while parsing selector \"${selector}\"`);\n    }\n    function skipWhitespace() {\n        while (tokens[pos] instanceof css.WhitespaceToken)\n            pos++;\n    }\n    function isIdent(p = pos) {\n        return tokens[p] instanceof css.IdentToken;\n    }\n    function isString(p = pos) {\n        return tokens[p] instanceof css.StringToken;\n    }\n    function isNumber(p = pos) {\n        return tokens[p] instanceof css.NumberToken;\n    }\n    function isComma(p = pos) {\n        return tokens[p] instanceof css.CommaToken;\n    }\n    function isCloseParen(p = pos) {\n        return tokens[p] instanceof css.CloseParenToken;\n    }\n    function isStar(p = pos) {\n        return (tokens[p] instanceof css.DelimToken) && tokens[p].value === '*';\n    }\n    function isEOF(p = pos) {\n        return tokens[p] instanceof css.EOFToken;\n    }\n    function isClauseCombinator(p = pos) {\n        return (tokens[p] instanceof css.DelimToken) && (['>', '+', '~'].includes(tokens[p].value));\n    }\n    function isSelectorClauseEnd(p = pos) {\n        return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || (tokens[p] instanceof css.WhitespaceToken);\n    }\n    function consumeFunctionArguments() {\n        const result = [consumeArgument()];\n        while (true) {\n            skipWhitespace();\n            if (!isComma())\n                break;\n            pos++;\n            result.push(consumeArgument());\n        }\n        return result;\n    }\n    function consumeArgument() {\n        skipWhitespace();\n        if (isNumber())\n            return tokens[pos++].value;\n        if (isString())\n            return tokens[pos++].value;\n        return consumeComplexSelector();\n    }\n    function consumeComplexSelector() {\n        skipWhitespace();\n        const result = { simples: [{ selector: consumeSimpleSelector(), combinator: '' }] };\n        while (true) {\n            skipWhitespace();\n            if (isClauseCombinator()) {\n                result.simples[result.simples.length - 1].combinator = tokens[pos++].value;\n                skipWhitespace();\n            }\n            else if (isSelectorClauseEnd()) {\n                break;\n            }\n            result.simples.push({ combinator: '', selector: consumeSimpleSelector() });\n        }\n        return result;\n    }\n    function consumeSimpleSelector() {\n        let rawCSSString = '';\n        const functions = [];\n        while (!isSelectorClauseEnd()) {\n            if (isIdent() || isStar()) {\n                rawCSSString += tokens[pos++].toSource();\n            }\n            else if (tokens[pos] instanceof css.HashToken) {\n                rawCSSString += tokens[pos++].toSource();\n            }\n            else if ((tokens[pos] instanceof css.DelimToken) && tokens[pos].value === '.') {\n                pos++;\n                if (isIdent())\n                    rawCSSString += '.' + tokens[pos++].toSource();\n                else\n                    throw unexpected();\n            }\n            else if (tokens[pos] instanceof css.ColonToken) {\n                pos++;\n                if (isIdent()) {\n                    if (!customNames.has(tokens[pos].value.toLowerCase())) {\n                        rawCSSString += ':' + tokens[pos++].toSource();\n                    }\n                    else {\n                        const name = tokens[pos++].value.toLowerCase();\n                        functions.push({ name, args: [] });\n                        names.add(name);\n                    }\n                }\n                else if (tokens[pos] instanceof css.FunctionToken) {\n                    const name = tokens[pos++].value.toLowerCase();\n                    if (!customNames.has(name)) {\n                        rawCSSString += `:${name}(${consumeBuiltinFunctionArguments()})`;\n                    }\n                    else {\n                        functions.push({ name, args: consumeFunctionArguments() });\n                        names.add(name);\n                    }\n                    skipWhitespace();\n                    if (!isCloseParen())\n                        throw unexpected();\n                    pos++;\n                }\n                else {\n                    throw unexpected();\n                }\n            }\n            else if (tokens[pos] instanceof css.OpenSquareToken) {\n                rawCSSString += '[';\n                pos++;\n                while (!(tokens[pos] instanceof css.CloseSquareToken) && !isEOF())\n                    rawCSSString += tokens[pos++].toSource();\n                if (!(tokens[pos] instanceof css.CloseSquareToken))\n                    throw unexpected();\n                rawCSSString += ']';\n                pos++;\n            }\n            else {\n                throw unexpected();\n            }\n        }\n        if (!rawCSSString && !functions.length)\n            throw unexpected();\n        return { css: rawCSSString || undefined, functions };\n    }\n    function consumeBuiltinFunctionArguments() {\n        let s = '';\n        while (!isCloseParen() && !isEOF())\n            s += tokens[pos++].toSource();\n        return s;\n    }\n    const result = consumeFunctionArguments();\n    if (!isEOF())\n        throw new Error(`Error while parsing selector \"${selector}\"`);\n    if (result.some(arg => typeof arg !== 'object' || !('simples' in arg)))\n        throw new Error(`Error while parsing selector \"${selector}\"`);\n    return { selector: result, names: Array.from(names) };\n}\nexports.parseCSS = parseCSS;\nfunction serializeSelector(args) {\n    return args.map(arg => {\n        if (typeof arg === 'string')\n            return `\"${arg}\"`;\n        if (typeof arg === 'number')\n            return String(arg);\n        return arg.simples.map(({ selector, combinator }) => {\n            let s = selector.css || '';\n            s = s + selector.functions.map(func => `:${func.name}(${serializeSelector(func.args)})`).join('');\n            if (combinator)\n                s += ' ' + combinator;\n            return s;\n        }).join(' ');\n    }).join(', ');\n}\nexports.serializeSelector = serializeSelector;\n//# sourceMappingURL=cssParser.js.map","\"use strict\";\n/*\n * Original at https://github.com/tabatkins/parse-css\n * licensed under http://creativecommons.org/publicdomain/zero/1.0/\n *\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Changes from https://github.com/tabatkins/parse-css\n//   - Tabs are replaced with two spaces.\n//   - Everything not related to tokenizing - below the first exports block - is removed.\n// @ts-nocheck\n(function (root, factory) {\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\n    // Rhino, and plain browser loading.\n    if (typeof define === 'function' && define.amd) {\n        define(['exports'], factory);\n    }\n    else if (typeof exports !== 'undefined') {\n        factory(exports);\n    }\n    else {\n        factory(root);\n    }\n}(this, function (exports) {\n    var between = function (num, first, last) { return num >= first && num <= last; };\n    function digit(code) { return between(code, 0x30, 0x39); }\n    function hexdigit(code) { return digit(code) || between(code, 0x41, 0x46) || between(code, 0x61, 0x66); }\n    function uppercaseletter(code) { return between(code, 0x41, 0x5a); }\n    function lowercaseletter(code) { return between(code, 0x61, 0x7a); }\n    function letter(code) { return uppercaseletter(code) || lowercaseletter(code); }\n    function nonascii(code) { return code >= 0x80; }\n    function namestartchar(code) { return letter(code) || nonascii(code) || code == 0x5f; }\n    function namechar(code) { return namestartchar(code) || digit(code) || code == 0x2d; }\n    function nonprintable(code) { return between(code, 0, 8) || code == 0xb || between(code, 0xe, 0x1f) || code == 0x7f; }\n    function newline(code) { return code == 0xa; }\n    function whitespace(code) { return newline(code) || code == 9 || code == 0x20; }\n    function badescape(code) { return newline(code) || isNaN(code); }\n    var maximumallowedcodepoint = 0x10ffff;\n    var InvalidCharacterError = function (message) {\n        this.message = message;\n    };\n    InvalidCharacterError.prototype = new Error;\n    InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n    function preprocess(str) {\n        // Turn a string into an array of code points,\n        // following the preprocessing cleanup rules.\n        var codepoints = [];\n        for (var i = 0; i < str.length; i++) {\n            var code = str.charCodeAt(i);\n            if (code == 0xd && str.charCodeAt(i + 1) == 0xa) {\n                code = 0xa;\n                i++;\n            }\n            if (code == 0xd || code == 0xc)\n                code = 0xa;\n            if (code == 0x0)\n                code = 0xfffd;\n            if (between(code, 0xd800, 0xdbff) && between(str.charCodeAt(i + 1), 0xdc00, 0xdfff)) {\n                // Decode a surrogate pair into an astral codepoint.\n                var lead = code - 0xd800;\n                var trail = str.charCodeAt(i + 1) - 0xdc00;\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\n                i++;\n            }\n            codepoints.push(code);\n        }\n        return codepoints;\n    }\n    function stringFromCode(code) {\n        if (code <= 0xffff)\n            return String.fromCharCode(code);\n        // Otherwise, encode astral char as surrogate pair.\n        code -= Math.pow(2, 16);\n        var lead = Math.floor(code / Math.pow(2, 10)) + 0xd800;\n        var trail = code % Math.pow(2, 10) + 0xdc00;\n        return String.fromCharCode(lead) + String.fromCharCode(trail);\n    }\n    function tokenize(str) {\n        str = preprocess(str);\n        var i = -1;\n        var tokens = [];\n        var code;\n        // Line number information.\n        var line = 0;\n        var column = 0;\n        // The only use of lastLineLength is in reconsume().\n        var lastLineLength = 0;\n        var incrLineno = function () {\n            line += 1;\n            lastLineLength = column;\n            column = 0;\n        };\n        var locStart = { line: line, column: column };\n        var codepoint = function (i) {\n            if (i >= str.length) {\n                return -1;\n            }\n            return str[i];\n        };\n        var next = function (num) {\n            if (num === undefined)\n                num = 1;\n            if (num > 3)\n                throw \"Spec Error: no more than three codepoints of lookahead.\";\n            return codepoint(i + num);\n        };\n        var consume = function (num) {\n            if (num === undefined)\n                num = 1;\n            i += num;\n            code = codepoint(i);\n            if (newline(code))\n                incrLineno();\n            else\n                column += num;\n            //console.log('Consume '+i+' '+String.fromCharCode(code) + ' 0x' + code.toString(16));\n            return true;\n        };\n        var reconsume = function () {\n            i -= 1;\n            if (newline(code)) {\n                line -= 1;\n                column = lastLineLength;\n            }\n            else {\n                column -= 1;\n            }\n            locStart.line = line;\n            locStart.column = column;\n            return true;\n        };\n        var eof = function (codepoint) {\n            if (codepoint === undefined)\n                codepoint = code;\n            return codepoint == -1;\n        };\n        var donothing = function () { };\n        var parseerror = function () { console.log(\"Parse error at index \" + i + \", processing codepoint 0x\" + code.toString(16) + \".\"); return true; };\n        var consumeAToken = function () {\n            consumeComments();\n            consume();\n            if (whitespace(code)) {\n                while (whitespace(next()))\n                    consume();\n                return new WhitespaceToken;\n            }\n            else if (code == 0x22)\n                return consumeAStringToken();\n            else if (code == 0x23) {\n                if (namechar(next()) || areAValidEscape(next(1), next(2))) {\n                    var token = new HashToken();\n                    if (wouldStartAnIdentifier(next(1), next(2), next(3)))\n                        token.type = \"id\";\n                    token.value = consumeAName();\n                    return token;\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x24) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new SuffixMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x27)\n                return consumeAStringToken();\n            else if (code == 0x28)\n                return new OpenParenToken();\n            else if (code == 0x29)\n                return new CloseParenToken();\n            else if (code == 0x2a) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new SubstringMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2b) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2c)\n                return new CommaToken();\n            else if (code == 0x2d) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else if (next(1) == 0x2d && next(2) == 0x3e) {\n                    consume(2);\n                    return new CDCToken();\n                }\n                else if (startsWithAnIdentifier()) {\n                    reconsume();\n                    return consumeAnIdentlikeToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2e) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x3a)\n                return new ColonToken;\n            else if (code == 0x3b)\n                return new SemicolonToken;\n            else if (code == 0x3c) {\n                if (next(1) == 0x21 && next(2) == 0x2d && next(3) == 0x2d) {\n                    consume(3);\n                    return new CDOToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x40) {\n                if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\n                    return new AtKeywordToken(consumeAName());\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x5b)\n                return new OpenSquareToken();\n            else if (code == 0x5c) {\n                if (startsWithAValidEscape()) {\n                    reconsume();\n                    return consumeAnIdentlikeToken();\n                }\n                else {\n                    parseerror();\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x5d)\n                return new CloseSquareToken();\n            else if (code == 0x5e) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new PrefixMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x7b)\n                return new OpenCurlyToken();\n            else if (code == 0x7c) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new DashMatchToken();\n                }\n                else if (next() == 0x7c) {\n                    consume();\n                    return new ColumnToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x7d)\n                return new CloseCurlyToken();\n            else if (code == 0x7e) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new IncludeMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (digit(code)) {\n                reconsume();\n                return consumeANumericToken();\n            }\n            else if (namestartchar(code)) {\n                reconsume();\n                return consumeAnIdentlikeToken();\n            }\n            else if (eof())\n                return new EOFToken();\n            else\n                return new DelimToken(code);\n        };\n        var consumeComments = function () {\n            while (next(1) == 0x2f && next(2) == 0x2a) {\n                consume(2);\n                while (true) {\n                    consume();\n                    if (code == 0x2a && next() == 0x2f) {\n                        consume();\n                        break;\n                    }\n                    else if (eof()) {\n                        parseerror();\n                        return;\n                    }\n                }\n            }\n        };\n        var consumeANumericToken = function () {\n            var num = consumeANumber();\n            if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\n                var token = new DimensionToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                token.type = num.type;\n                token.unit = consumeAName();\n                return token;\n            }\n            else if (next() == 0x25) {\n                consume();\n                var token = new PercentageToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                return token;\n            }\n            else {\n                var token = new NumberToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                token.type = num.type;\n                return token;\n            }\n        };\n        var consumeAnIdentlikeToken = function () {\n            var str = consumeAName();\n            if (str.toLowerCase() == \"url\" && next() == 0x28) {\n                consume();\n                while (whitespace(next(1)) && whitespace(next(2)))\n                    consume();\n                if (next() == 0x22 || next() == 0x27) {\n                    return new FunctionToken(str);\n                }\n                else if (whitespace(next()) && (next(2) == 0x22 || next(2) == 0x27)) {\n                    return new FunctionToken(str);\n                }\n                else {\n                    return consumeAURLToken();\n                }\n            }\n            else if (next() == 0x28) {\n                consume();\n                return new FunctionToken(str);\n            }\n            else {\n                return new IdentToken(str);\n            }\n        };\n        var consumeAStringToken = function (endingCodePoint) {\n            if (endingCodePoint === undefined)\n                endingCodePoint = code;\n            var string = \"\";\n            while (consume()) {\n                if (code == endingCodePoint || eof()) {\n                    return new StringToken(string);\n                }\n                else if (newline(code)) {\n                    parseerror();\n                    reconsume();\n                    return new BadStringToken();\n                }\n                else if (code == 0x5c) {\n                    if (eof(next())) {\n                        donothing();\n                    }\n                    else if (newline(next())) {\n                        consume();\n                    }\n                    else {\n                        string += stringFromCode(consumeEscape());\n                    }\n                }\n                else {\n                    string += stringFromCode(code);\n                }\n            }\n        };\n        var consumeAURLToken = function () {\n            var token = new URLToken(\"\");\n            while (whitespace(next()))\n                consume();\n            if (eof(next()))\n                return token;\n            while (consume()) {\n                if (code == 0x29 || eof()) {\n                    return token;\n                }\n                else if (whitespace(code)) {\n                    while (whitespace(next()))\n                        consume();\n                    if (next() == 0x29 || eof(next())) {\n                        consume();\n                        return token;\n                    }\n                    else {\n                        consumeTheRemnantsOfABadURL();\n                        return new BadURLToken();\n                    }\n                }\n                else if (code == 0x22 || code == 0x27 || code == 0x28 || nonprintable(code)) {\n                    parseerror();\n                    consumeTheRemnantsOfABadURL();\n                    return new BadURLToken();\n                }\n                else if (code == 0x5c) {\n                    if (startsWithAValidEscape()) {\n                        token.value += stringFromCode(consumeEscape());\n                    }\n                    else {\n                        parseerror();\n                        consumeTheRemnantsOfABadURL();\n                        return new BadURLToken();\n                    }\n                }\n                else {\n                    token.value += stringFromCode(code);\n                }\n            }\n        };\n        var consumeEscape = function () {\n            // Assume the the current character is the \\\n            // and the next code point is not a newline.\n            consume();\n            if (hexdigit(code)) {\n                // Consume 1-6 hex digits\n                var digits = [code];\n                for (var total = 0; total < 5; total++) {\n                    if (hexdigit(next())) {\n                        consume();\n                        digits.push(code);\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (whitespace(next()))\n                    consume();\n                var value = parseInt(digits.map(function (x) { return String.fromCharCode(x); }).join(''), 16);\n                if (value > maximumallowedcodepoint)\n                    value = 0xfffd;\n                return value;\n            }\n            else if (eof()) {\n                return 0xfffd;\n            }\n            else {\n                return code;\n            }\n        };\n        var areAValidEscape = function (c1, c2) {\n            if (c1 != 0x5c)\n                return false;\n            if (newline(c2))\n                return false;\n            return true;\n        };\n        var startsWithAValidEscape = function () {\n            return areAValidEscape(code, next());\n        };\n        var wouldStartAnIdentifier = function (c1, c2, c3) {\n            if (c1 == 0x2d) {\n                return namestartchar(c2) || c2 == 0x2d || areAValidEscape(c2, c3);\n            }\n            else if (namestartchar(c1)) {\n                return true;\n            }\n            else if (c1 == 0x5c) {\n                return areAValidEscape(c1, c2);\n            }\n            else {\n                return false;\n            }\n        };\n        var startsWithAnIdentifier = function () {\n            return wouldStartAnIdentifier(code, next(1), next(2));\n        };\n        var wouldStartANumber = function (c1, c2, c3) {\n            if (c1 == 0x2b || c1 == 0x2d) {\n                if (digit(c2))\n                    return true;\n                if (c2 == 0x2e && digit(c3))\n                    return true;\n                return false;\n            }\n            else if (c1 == 0x2e) {\n                if (digit(c2))\n                    return true;\n                return false;\n            }\n            else if (digit(c1)) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        var startsWithANumber = function () {\n            return wouldStartANumber(code, next(1), next(2));\n        };\n        var consumeAName = function () {\n            var result = \"\";\n            while (consume()) {\n                if (namechar(code)) {\n                    result += stringFromCode(code);\n                }\n                else if (startsWithAValidEscape()) {\n                    result += stringFromCode(consumeEscape());\n                }\n                else {\n                    reconsume();\n                    return result;\n                }\n            }\n        };\n        var consumeANumber = function () {\n            var repr = [];\n            var type = \"integer\";\n            if (next() == 0x2b || next() == 0x2d) {\n                consume();\n                repr += stringFromCode(code);\n            }\n            while (digit(next())) {\n                consume();\n                repr += stringFromCode(code);\n            }\n            if (next(1) == 0x2e && digit(next(2))) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            var c1 = next(1), c2 = next(2), c3 = next(3);\n            if ((c1 == 0x45 || c1 == 0x65) && digit(c2)) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            else if ((c1 == 0x45 || c1 == 0x65) && (c2 == 0x2b || c2 == 0x2d) && digit(c3)) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            var value = convertAStringToANumber(repr);\n            return { type: type, value: value, repr: repr };\n        };\n        var convertAStringToANumber = function (string) {\n            // CSS's number rules are identical to JS, afaik.\n            return +string;\n        };\n        var consumeTheRemnantsOfABadURL = function () {\n            while (consume()) {\n                if (code == 0x29 || eof()) {\n                    return;\n                }\n                else if (startsWithAValidEscape()) {\n                    consumeEscape();\n                    donothing();\n                }\n                else {\n                    donothing();\n                }\n            }\n        };\n        var iterationCount = 0;\n        while (!eof(next())) {\n            tokens.push(consumeAToken());\n            iterationCount++;\n            if (iterationCount > str.length * 2)\n                return \"I'm infinite-looping!\";\n        }\n        return tokens;\n    }\n    function CSSParserToken() { throw \"Abstract Base Class\"; }\n    CSSParserToken.prototype.toJSON = function () {\n        return { token: this.tokenType };\n    };\n    CSSParserToken.prototype.toString = function () { return this.tokenType; };\n    CSSParserToken.prototype.toSource = function () { return '' + this; };\n    function BadStringToken() { return this; }\n    BadStringToken.prototype = Object.create(CSSParserToken.prototype);\n    BadStringToken.prototype.tokenType = \"BADSTRING\";\n    function BadURLToken() { return this; }\n    BadURLToken.prototype = Object.create(CSSParserToken.prototype);\n    BadURLToken.prototype.tokenType = \"BADURL\";\n    function WhitespaceToken() { return this; }\n    WhitespaceToken.prototype = Object.create(CSSParserToken.prototype);\n    WhitespaceToken.prototype.tokenType = \"WHITESPACE\";\n    WhitespaceToken.prototype.toString = function () { return \"WS\"; };\n    WhitespaceToken.prototype.toSource = function () { return \" \"; };\n    function CDOToken() { return this; }\n    CDOToken.prototype = Object.create(CSSParserToken.prototype);\n    CDOToken.prototype.tokenType = \"CDO\";\n    CDOToken.prototype.toSource = function () { return \"<!--\"; };\n    function CDCToken() { return this; }\n    CDCToken.prototype = Object.create(CSSParserToken.prototype);\n    CDCToken.prototype.tokenType = \"CDC\";\n    CDCToken.prototype.toSource = function () { return \"-->\"; };\n    function ColonToken() { return this; }\n    ColonToken.prototype = Object.create(CSSParserToken.prototype);\n    ColonToken.prototype.tokenType = \":\";\n    function SemicolonToken() { return this; }\n    SemicolonToken.prototype = Object.create(CSSParserToken.prototype);\n    SemicolonToken.prototype.tokenType = \";\";\n    function CommaToken() { return this; }\n    CommaToken.prototype = Object.create(CSSParserToken.prototype);\n    CommaToken.prototype.tokenType = \",\";\n    function GroupingToken() { throw \"Abstract Base Class\"; }\n    GroupingToken.prototype = Object.create(CSSParserToken.prototype);\n    function OpenCurlyToken() { this.value = \"{\"; this.mirror = \"}\"; return this; }\n    OpenCurlyToken.prototype = Object.create(GroupingToken.prototype);\n    OpenCurlyToken.prototype.tokenType = \"{\";\n    function CloseCurlyToken() { this.value = \"}\"; this.mirror = \"{\"; return this; }\n    CloseCurlyToken.prototype = Object.create(GroupingToken.prototype);\n    CloseCurlyToken.prototype.tokenType = \"}\";\n    function OpenSquareToken() { this.value = \"[\"; this.mirror = \"]\"; return this; }\n    OpenSquareToken.prototype = Object.create(GroupingToken.prototype);\n    OpenSquareToken.prototype.tokenType = \"[\";\n    function CloseSquareToken() { this.value = \"]\"; this.mirror = \"[\"; return this; }\n    CloseSquareToken.prototype = Object.create(GroupingToken.prototype);\n    CloseSquareToken.prototype.tokenType = \"]\";\n    function OpenParenToken() { this.value = \"(\"; this.mirror = \")\"; return this; }\n    OpenParenToken.prototype = Object.create(GroupingToken.prototype);\n    OpenParenToken.prototype.tokenType = \"(\";\n    function CloseParenToken() { this.value = \")\"; this.mirror = \"(\"; return this; }\n    CloseParenToken.prototype = Object.create(GroupingToken.prototype);\n    CloseParenToken.prototype.tokenType = \")\";\n    function IncludeMatchToken() { return this; }\n    IncludeMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    IncludeMatchToken.prototype.tokenType = \"~=\";\n    function DashMatchToken() { return this; }\n    DashMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    DashMatchToken.prototype.tokenType = \"|=\";\n    function PrefixMatchToken() { return this; }\n    PrefixMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    PrefixMatchToken.prototype.tokenType = \"^=\";\n    function SuffixMatchToken() { return this; }\n    SuffixMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    SuffixMatchToken.prototype.tokenType = \"$=\";\n    function SubstringMatchToken() { return this; }\n    SubstringMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    SubstringMatchToken.prototype.tokenType = \"*=\";\n    function ColumnToken() { return this; }\n    ColumnToken.prototype = Object.create(CSSParserToken.prototype);\n    ColumnToken.prototype.tokenType = \"||\";\n    function EOFToken() { return this; }\n    EOFToken.prototype = Object.create(CSSParserToken.prototype);\n    EOFToken.prototype.tokenType = \"EOF\";\n    EOFToken.prototype.toSource = function () { return \"\"; };\n    function DelimToken(code) {\n        this.value = stringFromCode(code);\n        return this;\n    }\n    DelimToken.prototype = Object.create(CSSParserToken.prototype);\n    DelimToken.prototype.tokenType = \"DELIM\";\n    DelimToken.prototype.toString = function () { return \"DELIM(\" + this.value + \")\"; };\n    DelimToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        return json;\n    };\n    DelimToken.prototype.toSource = function () {\n        if (this.value == \"\\\\\")\n            return \"\\\\\\n\";\n        else\n            return this.value;\n    };\n    function StringValuedToken() { throw \"Abstract Base Class\"; }\n    StringValuedToken.prototype = Object.create(CSSParserToken.prototype);\n    StringValuedToken.prototype.ASCIIMatch = function (str) {\n        return this.value.toLowerCase() == str.toLowerCase();\n    };\n    StringValuedToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        return json;\n    };\n    function IdentToken(val) {\n        this.value = val;\n    }\n    IdentToken.prototype = Object.create(StringValuedToken.prototype);\n    IdentToken.prototype.tokenType = \"IDENT\";\n    IdentToken.prototype.toString = function () { return \"IDENT(\" + this.value + \")\"; };\n    IdentToken.prototype.toSource = function () {\n        return escapeIdent(this.value);\n    };\n    function FunctionToken(val) {\n        this.value = val;\n        this.mirror = \")\";\n    }\n    FunctionToken.prototype = Object.create(StringValuedToken.prototype);\n    FunctionToken.prototype.tokenType = \"FUNCTION\";\n    FunctionToken.prototype.toString = function () { return \"FUNCTION(\" + this.value + \")\"; };\n    FunctionToken.prototype.toSource = function () {\n        return escapeIdent(this.value) + \"(\";\n    };\n    function AtKeywordToken(val) {\n        this.value = val;\n    }\n    AtKeywordToken.prototype = Object.create(StringValuedToken.prototype);\n    AtKeywordToken.prototype.tokenType = \"AT-KEYWORD\";\n    AtKeywordToken.prototype.toString = function () { return \"AT(\" + this.value + \")\"; };\n    AtKeywordToken.prototype.toSource = function () {\n        return \"@\" + escapeIdent(this.value);\n    };\n    function HashToken(val) {\n        this.value = val;\n        this.type = \"unrestricted\";\n    }\n    HashToken.prototype = Object.create(StringValuedToken.prototype);\n    HashToken.prototype.tokenType = \"HASH\";\n    HashToken.prototype.toString = function () { return \"HASH(\" + this.value + \")\"; };\n    HashToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        return json;\n    };\n    HashToken.prototype.toSource = function () {\n        if (this.type == \"id\") {\n            return \"#\" + escapeIdent(this.value);\n        }\n        else {\n            return \"#\" + escapeHash(this.value);\n        }\n    };\n    function StringToken(val) {\n        this.value = val;\n    }\n    StringToken.prototype = Object.create(StringValuedToken.prototype);\n    StringToken.prototype.tokenType = \"STRING\";\n    StringToken.prototype.toString = function () {\n        return '\"' + escapeString(this.value) + '\"';\n    };\n    function URLToken(val) {\n        this.value = val;\n    }\n    URLToken.prototype = Object.create(StringValuedToken.prototype);\n    URLToken.prototype.tokenType = \"URL\";\n    URLToken.prototype.toString = function () { return \"URL(\" + this.value + \")\"; };\n    URLToken.prototype.toSource = function () {\n        return 'url(\"' + escapeString(this.value) + '\")';\n    };\n    function NumberToken() {\n        this.value = null;\n        this.type = \"integer\";\n        this.repr = \"\";\n    }\n    NumberToken.prototype = Object.create(CSSParserToken.prototype);\n    NumberToken.prototype.tokenType = \"NUMBER\";\n    NumberToken.prototype.toString = function () {\n        if (this.type == \"integer\")\n            return \"INT(\" + this.value + \")\";\n        return \"NUMBER(\" + this.value + \")\";\n    };\n    NumberToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        json.repr = this.repr;\n        return json;\n    };\n    NumberToken.prototype.toSource = function () { return this.repr; };\n    function PercentageToken() {\n        this.value = null;\n        this.repr = \"\";\n    }\n    PercentageToken.prototype = Object.create(CSSParserToken.prototype);\n    PercentageToken.prototype.tokenType = \"PERCENTAGE\";\n    PercentageToken.prototype.toString = function () { return \"PERCENTAGE(\" + this.value + \")\"; };\n    PercentageToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.repr = this.repr;\n        return json;\n    };\n    PercentageToken.prototype.toSource = function () { return this.repr + \"%\"; };\n    function DimensionToken() {\n        this.value = null;\n        this.type = \"integer\";\n        this.repr = \"\";\n        this.unit = \"\";\n    }\n    DimensionToken.prototype = Object.create(CSSParserToken.prototype);\n    DimensionToken.prototype.tokenType = \"DIMENSION\";\n    DimensionToken.prototype.toString = function () { return \"DIM(\" + this.value + \",\" + this.unit + \")\"; };\n    DimensionToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        json.repr = this.repr;\n        json.unit = this.unit;\n        return json;\n    };\n    DimensionToken.prototype.toSource = function () {\n        var source = this.repr;\n        var unit = escapeIdent(this.unit);\n        if (unit[0].toLowerCase() == \"e\" && (unit[1] == \"-\" || between(unit.charCodeAt(1), 0x30, 0x39))) {\n            // Unit is ambiguous with scinot\n            // Remove the leading \"e\", replace with escape.\n            unit = \"\\\\65 \" + unit.slice(1, unit.length);\n        }\n        return source + unit;\n    };\n    function escapeIdent(string) {\n        string = '' + string;\n        var result = '';\n        var firstcode = string.charCodeAt(0);\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (between(code, 0x1, 0x1f) || code == 0x7f ||\n                (i == 0 && between(code, 0x30, 0x39)) ||\n                (i == 1 && between(code, 0x30, 0x39) && firstcode == 0x2d)) {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n            else if (code >= 0x80 ||\n                code == 0x2d ||\n                code == 0x5f ||\n                between(code, 0x30, 0x39) ||\n                between(code, 0x41, 0x5a) ||\n                between(code, 0x61, 0x7a)) {\n                result += string[i];\n            }\n            else {\n                result += '\\\\' + string[i];\n            }\n        }\n        return result;\n    }\n    function escapeHash(string) {\n        // Escapes the contents of \"unrestricted\"-type hash tokens.\n        // Won't preserve the ID-ness of \"id\"-type hash tokens;\n        // use escapeIdent() for that.\n        string = '' + string;\n        var result = '';\n        var firstcode = string.charCodeAt(0);\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (code >= 0x80 ||\n                code == 0x2d ||\n                code == 0x5f ||\n                between(code, 0x30, 0x39) ||\n                between(code, 0x41, 0x5a) ||\n                between(code, 0x61, 0x7a)) {\n                result += string[i];\n            }\n            else {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n        }\n        return result;\n    }\n    function escapeString(string) {\n        string = '' + string;\n        var result = '';\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (between(code, 0x1, 0x1f) || code == 0x7f) {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n            else if (code == 0x22 || code == 0x5c) {\n                result += '\\\\' + string[i];\n            }\n            else {\n                result += string[i];\n            }\n        }\n        return result;\n    }\n    // Exportation.\n    exports.tokenize = tokenize;\n    exports.IdentToken = IdentToken;\n    exports.FunctionToken = FunctionToken;\n    exports.AtKeywordToken = AtKeywordToken;\n    exports.HashToken = HashToken;\n    exports.StringToken = StringToken;\n    exports.BadStringToken = BadStringToken;\n    exports.URLToken = URLToken;\n    exports.BadURLToken = BadURLToken;\n    exports.DelimToken = DelimToken;\n    exports.NumberToken = NumberToken;\n    exports.PercentageToken = PercentageToken;\n    exports.DimensionToken = DimensionToken;\n    exports.IncludeMatchToken = IncludeMatchToken;\n    exports.DashMatchToken = DashMatchToken;\n    exports.PrefixMatchToken = PrefixMatchToken;\n    exports.SuffixMatchToken = SuffixMatchToken;\n    exports.SubstringMatchToken = SubstringMatchToken;\n    exports.ColumnToken = ColumnToken;\n    exports.WhitespaceToken = WhitespaceToken;\n    exports.CDOToken = CDOToken;\n    exports.CDCToken = CDCToken;\n    exports.ColonToken = ColonToken;\n    exports.SemicolonToken = SemicolonToken;\n    exports.CommaToken = CommaToken;\n    exports.OpenParenToken = OpenParenToken;\n    exports.CloseParenToken = CloseParenToken;\n    exports.OpenSquareToken = OpenSquareToken;\n    exports.CloseSquareToken = CloseSquareToken;\n    exports.OpenCurlyToken = OpenCurlyToken;\n    exports.CloseCurlyToken = CloseCurlyToken;\n    exports.EOFToken = EOFToken;\n    exports.CSSParserToken = CSSParserToken;\n    exports.GroupingToken = GroupingToken;\n}));\n//# sourceMappingURL=cssTokenizer.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseSelector = exports.customCSSNames = void 0;\nconst cssParser_1 = require(\"./cssParser\");\nexports.customCSSNames = new Set(['not', 'is', 'where', 'has', 'scope', 'light', 'visible', 'text', 'text-matches', 'text-is', 'has-text', 'above', 'below', 'right-of', 'left-of', 'near', 'nth-match']);\nfunction parseSelector(selector) {\n    const result = parseSelectorV1(selector);\n    result.parts = result.parts.map(part => {\n        if (Array.isArray(part))\n            return part;\n        if (part.name === 'css' || part.name === 'css:light') {\n            if (part.name === 'css:light')\n                part.body = ':light(' + part.body + ')';\n            const parsedCSS = cssParser_1.parseCSS(part.body, exports.customCSSNames);\n            return parsedCSS.selector;\n        }\n        return part;\n    });\n    return {\n        parts: result.parts,\n        capture: result.capture,\n    };\n}\nexports.parseSelector = parseSelector;\nfunction parseSelectorV1(selector) {\n    let index = 0;\n    let quote;\n    let start = 0;\n    const result = { parts: [] };\n    const append = () => {\n        const part = selector.substring(start, index).trim();\n        const eqIndex = part.indexOf('=');\n        let name;\n        let body;\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\n            name = part.substring(0, eqIndex).trim();\n            body = part.substring(eqIndex + 1);\n        }\n        else if (part.length > 1 && part[0] === '\"' && part[part.length - 1] === '\"') {\n            name = 'text';\n            body = part;\n        }\n        else if (part.length > 1 && part[0] === \"'\" && part[part.length - 1] === \"'\") {\n            name = 'text';\n            body = part;\n        }\n        else if (/^\\(*\\/\\//.test(part) || part.startsWith('..')) {\n            // If selector starts with '//' or '//' prefixed with multiple opening\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\n            // If selector starts with '..', consider xpath as well.\n            name = 'xpath';\n            body = part;\n        }\n        else {\n            name = 'css';\n            body = part;\n        }\n        let capture = false;\n        if (name[0] === '*') {\n            capture = true;\n            name = name.substring(1);\n        }\n        result.parts.push({ name, body });\n        if (capture) {\n            if (result.capture !== undefined)\n                throw new Error(`Only one of the selectors can capture using * modifier`);\n            result.capture = result.parts.length - 1;\n        }\n    };\n    if (!selector.includes('>>')) {\n        index = selector.length;\n        append();\n        return result;\n    }\n    while (index < selector.length) {\n        const c = selector[index];\n        if (c === '\\\\' && index + 1 < selector.length) {\n            index += 2;\n        }\n        else if (c === quote) {\n            quote = undefined;\n            index++;\n        }\n        else if (!quote && (c === '\"' || c === '\\'' || c === '`')) {\n            quote = c;\n            index++;\n        }\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\n            append();\n            index += 2;\n            start = index;\n        }\n        else {\n            index++;\n        }\n    }\n    append();\n    return result;\n}\n//# sourceMappingURL=selectorParser.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeAsCallArgument = exports.parseEvaluationResultValue = void 0;\nfunction isRegExp(obj) {\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\nfunction isDate(obj) {\n    return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\n}\nfunction isError(obj) {\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\nfunction parseEvaluationResultValue(value, handles = []) {\n    if (Object.is(value, undefined))\n        return undefined;\n    if (typeof value === 'object' && value) {\n        if ('v' in value) {\n            if (value.v === 'undefined')\n                return undefined;\n            if (value.v === 'null')\n                return null;\n            if (value.v === 'NaN')\n                return NaN;\n            if (value.v === 'Infinity')\n                return Infinity;\n            if (value.v === '-Infinity')\n                return -Infinity;\n            if (value.v === '-0')\n                return -0;\n            return undefined;\n        }\n        if ('d' in value)\n            return new Date(value.d);\n        if ('r' in value)\n            return new RegExp(value.r.p, value.r.f);\n        if ('a' in value)\n            return value.a.map((a) => parseEvaluationResultValue(a, handles));\n        if ('o' in value) {\n            const result = {};\n            for (const { k, v } of value.o)\n                result[k] = parseEvaluationResultValue(v, handles);\n            return result;\n        }\n        if ('h' in value)\n            return handles[value.h];\n    }\n    return value;\n}\nexports.parseEvaluationResultValue = parseEvaluationResultValue;\nfunction serializeAsCallArgument(value, handleSerializer) {\n    return serialize(value, handleSerializer, new Set());\n}\nexports.serializeAsCallArgument = serializeAsCallArgument;\nfunction serialize(value, handleSerializer, visited) {\n    const result = handleSerializer(value);\n    if ('fallThrough' in result)\n        value = result.fallThrough;\n    else\n        return result;\n    if (visited.has(value))\n        throw new Error('Argument is a circular structure');\n    if (typeof value === 'symbol')\n        return { v: 'undefined' };\n    if (Object.is(value, undefined))\n        return { v: 'undefined' };\n    if (Object.is(value, null))\n        return { v: 'null' };\n    if (Object.is(value, NaN))\n        return { v: 'NaN' };\n    if (Object.is(value, Infinity))\n        return { v: 'Infinity' };\n    if (Object.is(value, -Infinity))\n        return { v: '-Infinity' };\n    if (Object.is(value, -0))\n        return { v: '-0' };\n    if (typeof value === 'boolean')\n        return value;\n    if (typeof value === 'number')\n        return value;\n    if (typeof value === 'string')\n        return value;\n    if (isError(value)) {\n        const error = value;\n        if ('captureStackTrace' in global.Error) {\n            // v8\n            return error.stack || '';\n        }\n        return `${error.name}: ${error.message}\\n${error.stack}`;\n    }\n    if (isDate(value))\n        return { d: value.toJSON() };\n    if (isRegExp(value))\n        return { r: { p: value.source, f: value.flags } };\n    if (Array.isArray(value)) {\n        const a = [];\n        visited.add(value);\n        for (let i = 0; i < value.length; ++i)\n            a.push(serialize(value[i], handleSerializer, visited));\n        visited.delete(value);\n        return { a };\n    }\n    if (typeof value === 'object') {\n        const o = [];\n        visited.add(value);\n        for (const name of Object.keys(value)) {\n            let item;\n            try {\n                item = value[name];\n            }\n            catch (e) {\n                continue; // native bindings will throw sometimes\n            }\n            if (name === 'toJSON' && typeof item === 'function')\n                o.push({ k: name, v: { o: [] } });\n            else\n                o.push({ k: name, v: serialize(item, handleSerializer, visited) });\n        }\n        visited.delete(value);\n        return { o };\n    }\n}\n//# sourceMappingURL=utilityScriptSerializers.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConsoleMessage = void 0;\nclass ConsoleMessage {\n    constructor(type, text, args, location) {\n        this._type = type;\n        this._text = text;\n        this._args = args;\n        this._location = location || { url: '', lineNumber: 0, columnNumber: 0 };\n    }\n    type() {\n        return this._type;\n    }\n    text() {\n        if (this._text === undefined)\n            this._text = this._args.map(arg => arg._value).join(' ');\n        return this._text;\n    }\n    args() {\n        return this._args;\n    }\n    location() {\n        return this._location;\n    }\n}\nexports.ConsoleMessage = ConsoleMessage;\n//# sourceMappingURL=console.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @type {import('./types').Devices}\n */\nmodule.exports = {\n    'Blackberry PlayBook': {\n        'userAgent': 'Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+',\n        'viewport': {\n            'width': 600,\n            'height': 1024\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Blackberry PlayBook landscape': {\n        'userAgent': 'Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+',\n        'viewport': {\n            'width': 1024,\n            'height': 600\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'BlackBerry Z30': {\n        'userAgent': 'Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'BlackBerry Z30 landscape': {\n        'userAgent': 'Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy Note 3': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy Note 3 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy Note II': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy Note II landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy S III': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy S III landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Galaxy S5': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Galaxy S5 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'iPad (gen 6)': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 768,\n            'height': 1024\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad (gen 6) landscape': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 1024,\n            'height': 768\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad (gen 7)': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 810,\n            'height': 1080\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad (gen 7) landscape': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 1080,\n            'height': 810\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad Mini': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 768,\n            'height': 1024\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad Mini landscape': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 1024,\n            'height': 768\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad Pro 11': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 834,\n            'height': 1194\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPad Pro 11 landscape': {\n        'userAgent': 'Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 1194,\n            'height': 834\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 6': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 375,\n            'height': 667\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 6 landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 667,\n            'height': 375\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 6 Plus': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 736\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 6 Plus landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 736,\n            'height': 414\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 7': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 375,\n            'height': 667\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 7 landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 667,\n            'height': 375\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 7 Plus': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 736\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 7 Plus landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 736,\n            'height': 414\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 8': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 375,\n            'height': 667\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 8 landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 667,\n            'height': 375\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 8 Plus': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 736\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 8 Plus landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 736,\n            'height': 414\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone SE': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n        'viewport': {\n            'width': 320,\n            'height': 568\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone SE landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1',\n        'viewport': {\n            'width': 568,\n            'height': 320\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone X': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 375,\n            'height': 812\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone X landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1',\n        'viewport': {\n            'width': 812,\n            'height': 375\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone XR': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 896\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone XR landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 896,\n            'height': 414\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 896\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11 landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 896,\n            'height': 414\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11 Pro': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 375,\n            'height': 812\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11 Pro landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 812,\n            'height': 375\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11 Pro Max': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 414,\n            'height': 896\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'iPhone 11 Pro Max landscape': {\n        'userAgent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1',\n        'viewport': {\n            'width': 896,\n            'height': 414\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'JioPhone 2': {\n        'userAgent': 'Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5',\n        'viewport': {\n            'width': 240,\n            'height': 320\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'firefox'\n    },\n    'JioPhone 2 landscape': {\n        'userAgent': 'Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5',\n        'viewport': {\n            'width': 320,\n            'height': 240\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'firefox'\n    },\n    'Kindle Fire HDX': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true',\n        'viewport': {\n            'width': 800,\n            'height': 1280\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Kindle Fire HDX landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true',\n        'viewport': {\n            'width': 1280,\n            'height': 800\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'LG Optimus L70': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 384,\n            'height': 640\n        },\n        'deviceScaleFactor': 1.25,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'LG Optimus L70 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 640,\n            'height': 384\n        },\n        'deviceScaleFactor': 1.25,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Microsoft Lumia 550': {\n        'userAgent': 'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Microsoft Lumia 550 landscape': {\n        'userAgent': 'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Microsoft Lumia 950': {\n        'userAgent': 'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 4,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Microsoft Lumia 950 landscape': {\n        'userAgent': 'Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 4,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 10': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n        'viewport': {\n            'width': 800,\n            'height': 1280\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 10 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n        'viewport': {\n            'width': 1280,\n            'height': 800\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 4': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 384,\n            'height': 640\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 4 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 640,\n            'height': 384\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 5': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 360,\n            'height': 640\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 5 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 640,\n            'height': 360\n        },\n        'deviceScaleFactor': 3,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 5X': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 412,\n            'height': 732\n        },\n        'deviceScaleFactor': 2.625,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 5X landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 732,\n            'height': 412\n        },\n        'deviceScaleFactor': 2.625,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 6': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 412,\n            'height': 732\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 6 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 732,\n            'height': 412\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 6P': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 412,\n            'height': 732\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 6P landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 732,\n            'height': 412\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 7': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n        'viewport': {\n            'width': 600,\n            'height': 960\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nexus 7 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36',\n        'viewport': {\n            'width': 960,\n            'height': 600\n        },\n        'deviceScaleFactor': 2,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nokia Lumia 520': {\n        'userAgent': 'Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)',\n        'viewport': {\n            'width': 320,\n            'height': 533\n        },\n        'deviceScaleFactor': 1.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nokia Lumia 520 landscape': {\n        'userAgent': 'Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)',\n        'viewport': {\n            'width': 533,\n            'height': 320\n        },\n        'deviceScaleFactor': 1.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Nokia N9': {\n        'userAgent': 'Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13',\n        'viewport': {\n            'width': 480,\n            'height': 854\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Nokia N9 landscape': {\n        'userAgent': 'Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13',\n        'viewport': {\n            'width': 854,\n            'height': 480\n        },\n        'deviceScaleFactor': 1,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'webkit'\n    },\n    'Pixel 2': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 411,\n            'height': 731\n        },\n        'deviceScaleFactor': 2.625,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Pixel 2 landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 731,\n            'height': 411\n        },\n        'deviceScaleFactor': 2.625,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Pixel 2 XL': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 411,\n            'height': 823\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    },\n    'Pixel 2 XL landscape': {\n        'userAgent': 'Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36',\n        'viewport': {\n            'width': 823,\n            'height': 411\n        },\n        'deviceScaleFactor': 3.5,\n        'isMobile': true,\n        'hasTouch': true,\n        'defaultBrowserType': 'chromium'\n    }\n};\n//# sourceMappingURL=deviceDescriptors.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Dialog = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst page_1 = require(\"./page\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass Dialog extends instrumentation_1.SdkObject {\n    constructor(page, type, message, onHandle, defaultValue) {\n        super(page);\n        this._handled = false;\n        this._page = page;\n        this._type = type;\n        this._message = message;\n        this._onHandle = onHandle;\n        this._defaultValue = defaultValue || '';\n    }\n    type() {\n        return this._type;\n    }\n    message() {\n        return this._message;\n    }\n    defaultValue() {\n        return this._defaultValue;\n    }\n    async accept(promptText) {\n        utils_1.assert(!this._handled, 'Cannot accept dialog which is already handled!');\n        this._handled = true;\n        await this._onHandle(true, promptText);\n        this._page.emit(page_1.Page.Events.InternalDialogClosed, this);\n    }\n    async dismiss() {\n        utils_1.assert(!this._handled, 'Cannot dismiss dialog which is already handled!');\n        this._handled = true;\n        await this._onHandle(false);\n        this._page.emit(page_1.Page.Events.InternalDialogClosed, this);\n    }\n}\nexports.Dialog = Dialog;\n//# sourceMappingURL=dialog.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.elementStateTask = exports.getAttributeTask = exports.innerHTMLTask = exports.innerTextTask = exports.textContentTask = exports.dispatchEventTask = exports.waitForSelectorTask = exports.assertDone = exports.throwRetargetableDOMError = exports.throwFatalDOMError = exports.InjectedScriptPollHandler = exports.ElementHandle = exports.FrameExecutionContext = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst injectedScriptSource = __importStar(require(\"../generated/injectedScriptSource\"));\nconst js = __importStar(require(\"./javascript\"));\nconst progress_1 = require(\"./progress\");\nclass FrameExecutionContext extends js.ExecutionContext {\n    constructor(delegate, frame, world) {\n        super(frame, delegate);\n        this.frame = frame;\n        this.world = world;\n    }\n    async waitForSignalsCreatedBy(action) {\n        return this.frame._page._frameManager.waitForSignalsCreatedBy(null, false, action);\n    }\n    adoptIfNeeded(handle) {\n        if (handle instanceof ElementHandle && handle._context !== this)\n            return this.frame._page._delegate.adoptElementHandle(handle, this);\n        return null;\n    }\n    async evaluate(pageFunction, arg) {\n        return js.evaluate(this, true /* returnByValue */, pageFunction, arg);\n    }\n    async evaluateHandle(pageFunction, arg) {\n        return js.evaluate(this, false /* returnByValue */, pageFunction, arg);\n    }\n    async evaluateExpression(expression, isFunction, arg) {\n        return js.evaluateExpression(this, true /* returnByValue */, expression, isFunction, arg);\n    }\n    async evaluateAndWaitForSignals(pageFunction, arg) {\n        return await this.frame._page._frameManager.waitForSignalsCreatedBy(null, false /* noWaitFor */, async () => {\n            return this.evaluate(pageFunction, arg);\n        });\n    }\n    async evaluateExpressionAndWaitForSignals(expression, isFunction, arg) {\n        return await this.frame._page._frameManager.waitForSignalsCreatedBy(null, false /* noWaitFor */, async () => {\n            return this.evaluateExpression(expression, isFunction, arg);\n        });\n    }\n    async evaluateExpressionHandleAndWaitForSignals(expression, isFunction, arg) {\n        return await this.frame._page._frameManager.waitForSignalsCreatedBy(null, false /* noWaitFor */, async () => {\n            return js.evaluateExpression(this, false /* returnByValue */, expression, isFunction, arg);\n        });\n    }\n    createHandle(remoteObject) {\n        if (this.frame._page._delegate.isElementHandle(remoteObject))\n            return new ElementHandle(this, remoteObject.objectId);\n        return super.createHandle(remoteObject);\n    }\n    injectedScript() {\n        if (!this._injectedScriptPromise) {\n            const custom = [];\n            for (const [name, { source }] of this.frame._page.selectors._engines)\n                custom.push(`{ name: '${name}', engine: (${source}) }`);\n            const source = `\n        (() => {\n        ${injectedScriptSource.source}\n        return new pwExport(\n          ${this.frame._page._delegate.rafCountForStablePosition()},\n          ${!!process.env.PW_USE_TIMEOUT_FOR_RAF},\n          [${custom.join(',\\n')}]\n        );\n        })();\n      `;\n            this._injectedScriptPromise = this._delegate.rawEvaluate(source).then(objectId => new js.JSHandle(this, 'object', objectId));\n        }\n        return this._injectedScriptPromise;\n    }\n    async doSlowMo() {\n        return this.frame._page._doSlowMo();\n    }\n}\nexports.FrameExecutionContext = FrameExecutionContext;\nclass ElementHandle extends js.JSHandle {\n    constructor(context, objectId) {\n        super(context, 'node', objectId);\n        this._objectId = objectId;\n        this._context = context;\n        this._page = context.frame._page;\n        this._initializePreview().catch(e => { });\n    }\n    async _initializePreview() {\n        const utility = await this._context.injectedScript();\n        this._setPreview(await utility.evaluate((injected, e) => 'JSHandle@' + injected.previewNode(e), this));\n    }\n    asElement() {\n        return this;\n    }\n    async _evaluateInMainAndWaitForSignals(pageFunction, arg) {\n        const main = await this._context.frame._mainContext();\n        return main.evaluateAndWaitForSignals(pageFunction, [await main.injectedScript(), this, arg]);\n    }\n    async evaluateInUtility(pageFunction, arg) {\n        const utility = await this._context.frame._utilityContext();\n        return utility.evaluate(pageFunction, [await utility.injectedScript(), this, arg]);\n    }\n    async evaluateHandleInUtility(pageFunction, arg) {\n        const utility = await this._context.frame._utilityContext();\n        return utility.evaluateHandle(pageFunction, [await utility.injectedScript(), this, arg]);\n    }\n    async ownerFrame() {\n        const frameId = await this._page._delegate.getOwnerFrame(this);\n        if (!frameId)\n            return null;\n        const frame = this._page._frameManager.frame(frameId);\n        if (frame)\n            return frame;\n        for (const page of this._page._browserContext.pages()) {\n            const frame = page._frameManager.frame(frameId);\n            if (frame)\n                return frame;\n        }\n        return null;\n    }\n    async contentFrame() {\n        const isFrameElement = await this.evaluateInUtility(([injected, node]) => node && (node.nodeName === 'IFRAME' || node.nodeName === 'FRAME'), {});\n        if (!isFrameElement)\n            return null;\n        return this._page._delegate.getContentFrame(this);\n    }\n    async getAttribute(name) {\n        return throwFatalDOMError(await this.evaluateInUtility(([injeced, node, name]) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            const element = node;\n            return { value: element.getAttribute(name) };\n        }, name)).value;\n    }\n    async textContent() {\n        return this.evaluateInUtility(([injected, node]) => node.textContent, {});\n    }\n    async innerText() {\n        return throwFatalDOMError(await this.evaluateInUtility(([injected, node]) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            if (node.namespaceURI !== 'http://www.w3.org/1999/xhtml')\n                return 'error:nothtmlelement';\n            const element = node;\n            return { value: element.innerText };\n        }, {})).value;\n    }\n    async innerHTML() {\n        return throwFatalDOMError(await this.evaluateInUtility(([injected, node]) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            const element = node;\n            return { value: element.innerHTML };\n        }, {})).value;\n    }\n    async dispatchEvent(type, eventInit = {}) {\n        await this._evaluateInMainAndWaitForSignals(([injected, node, { type, eventInit }]) => injected.dispatchEvent(node, type, eventInit), { type, eventInit });\n        await this._page._doSlowMo();\n    }\n    async _scrollRectIntoViewIfNeeded(rect) {\n        return await this._page._delegate.scrollRectIntoViewIfNeeded(this, rect);\n    }\n    async _waitAndScrollIntoViewIfNeeded(progress) {\n        while (progress.isRunning()) {\n            assertDone(throwRetargetableDOMError(await this._waitForDisplayedAtStablePosition(progress, false /* waitForEnabled */)));\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            const result = throwRetargetableDOMError(await this._scrollRectIntoViewIfNeeded());\n            if (result === 'error:notvisible')\n                continue;\n            assertDone(result);\n            return;\n        }\n    }\n    async scrollIntoViewIfNeeded(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this._waitAndScrollIntoViewIfNeeded(progress), this._page._timeoutSettings.timeout(options));\n    }\n    async _clickablePoint() {\n        const intersectQuadWithViewport = (quad) => {\n            return quad.map(point => ({\n                x: Math.min(Math.max(point.x, 0), metrics.width),\n                y: Math.min(Math.max(point.y, 0), metrics.height),\n            }));\n        };\n        const computeQuadArea = (quad) => {\n            // Compute sum of all directed areas of adjacent triangles\n            // https://en.wikipedia.org/wiki/Polygon#Simple_polygons\n            let area = 0;\n            for (let i = 0; i < quad.length; ++i) {\n                const p1 = quad[i];\n                const p2 = quad[(i + 1) % quad.length];\n                area += (p1.x * p2.y - p2.x * p1.y) / 2;\n            }\n            return Math.abs(area);\n        };\n        const [quads, metrics] = await Promise.all([\n            this._page._delegate.getContentQuads(this),\n            this._page.mainFrame()._utilityContext().then(utility => utility.evaluate(() => ({ width: innerWidth, height: innerHeight }))),\n        ]);\n        if (!quads || !quads.length)\n            return 'error:notvisible';\n        // Allow 1x1 elements. Compensate for rounding errors by comparing with 0.99 instead.\n        const filtered = quads.map(quad => intersectQuadWithViewport(quad)).filter(quad => computeQuadArea(quad) > 0.99);\n        if (!filtered.length)\n            return 'error:notinviewport';\n        // Return the middle point of the first quad.\n        const result = { x: 0, y: 0 };\n        for (const point of filtered[0]) {\n            result.x += point.x / 4;\n            result.y += point.y / 4;\n        }\n        compensateHalfIntegerRoundingError(result);\n        return result;\n    }\n    async _offsetPoint(offset) {\n        const [box, border] = await Promise.all([\n            this.boundingBox(),\n            this.evaluateInUtility(([injected, node]) => injected.getElementBorderWidth(node), {}).catch(e => { }),\n        ]);\n        if (!box || !border)\n            return 'error:notvisible';\n        // Make point relative to the padding box to align with offsetX/offsetY.\n        return {\n            x: box.x + border.left + offset.x,\n            y: box.y + border.top + offset.y,\n        };\n    }\n    async _retryPointerAction(progress, actionName, waitForEnabled, action, options) {\n        let retry = 0;\n        // We progressively wait longer between retries, up to 500ms.\n        const waitTime = [0, 20, 100, 100, 500];\n        // By default, we scroll with protocol method to reveal the action point.\n        // However, that might not work to scroll from under position:sticky elements\n        // that overlay the target element. To fight this, we cycle through different\n        // scroll alignments. This works in most scenarios.\n        const scrollOptions = [\n            undefined,\n            { block: 'end', inline: 'end' },\n            { block: 'center', inline: 'center' },\n            { block: 'start', inline: 'start' },\n        ];\n        while (progress.isRunning()) {\n            if (retry) {\n                progress.log(`retrying ${actionName} action, attempt #${retry}`);\n                const timeout = waitTime[Math.min(retry - 1, waitTime.length - 1)];\n                if (timeout) {\n                    progress.log(`  waiting ${timeout}ms`);\n                    await this.evaluateInUtility(([injected, node, timeout]) => new Promise(f => setTimeout(f, timeout)), timeout);\n                }\n            }\n            else {\n                progress.log(`attempting ${actionName} action`);\n            }\n            const forceScrollOptions = scrollOptions[retry % scrollOptions.length];\n            const result = await this._performPointerAction(progress, actionName, waitForEnabled, action, forceScrollOptions, options);\n            ++retry;\n            if (result === 'error:notvisible') {\n                if (options.force)\n                    throw new Error('Element is not visible');\n                progress.log('  element is not visible');\n                continue;\n            }\n            if (result === 'error:notinviewport') {\n                if (options.force)\n                    throw new Error('Element is outside of the viewport');\n                progress.log('  element is outside of the viewport');\n                continue;\n            }\n            if (typeof result === 'object' && 'hitTargetDescription' in result) {\n                if (options.force)\n                    throw new Error(`Element does not receive pointer events, ${result.hitTargetDescription} intercepts them`);\n                progress.log(`  ${result.hitTargetDescription} intercepts pointer events`);\n                continue;\n            }\n            return result;\n        }\n        return 'done';\n    }\n    async _performPointerAction(progress, actionName, waitForEnabled, action, forceScrollOptions, options) {\n        const { force = false, position } = options;\n        if (options.__testHookBeforeStable)\n            await options.__testHookBeforeStable();\n        if (!force) {\n            const result = await this._waitForDisplayedAtStablePosition(progress, waitForEnabled);\n            if (result !== 'done')\n                return result;\n        }\n        if (options.__testHookAfterStable)\n            await options.__testHookAfterStable();\n        progress.log('  scrolling into view if needed');\n        progress.throwIfAborted(); // Avoid action that has side-effects.\n        if (forceScrollOptions) {\n            await this.evaluateInUtility(([injected, node, options]) => {\n                if (node.nodeType === 1 /* Node.ELEMENT_NODE */)\n                    node.scrollIntoView(options);\n            }, forceScrollOptions);\n        }\n        else {\n            const scrolled = await this._scrollRectIntoViewIfNeeded(position ? { x: position.x, y: position.y, width: 0, height: 0 } : undefined);\n            if (scrolled !== 'done')\n                return scrolled;\n        }\n        progress.log('  done scrolling');\n        const maybePoint = position ? await this._offsetPoint(position) : await this._clickablePoint();\n        if (typeof maybePoint === 'string')\n            return maybePoint;\n        const point = roundPoint(maybePoint);\n        if (!force) {\n            if (options.__testHookBeforeHitTarget)\n                await options.__testHookBeforeHitTarget();\n            progress.log(`  checking that element receives pointer events at (${point.x},${point.y})`);\n            const hitTargetResult = await this._checkHitTargetAt(point);\n            if (hitTargetResult !== 'done')\n                return hitTargetResult;\n            progress.log(`  element does receive pointer events`);\n        }\n        progress.metadata.point = point;\n        await progress.beforeInputAction(this);\n        await this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            if (options.__testHookBeforePointerAction)\n                await options.__testHookBeforePointerAction();\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            let restoreModifiers;\n            if (options && options.modifiers)\n                restoreModifiers = await this._page.keyboard._ensureModifiers(options.modifiers);\n            progress.log(`  performing ${actionName} action`);\n            await action(point);\n            progress.log(`  ${actionName} action done`);\n            progress.log('  waiting for scheduled navigations to finish');\n            if (options.__testHookAfterPointerAction)\n                await options.__testHookAfterPointerAction();\n            if (restoreModifiers)\n                await this._page.keyboard._ensureModifiers(restoreModifiers);\n        }, 'input');\n        progress.log('  navigations have finished');\n        return 'done';\n    }\n    async hover(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._hover(progress, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    _hover(progress, options) {\n        return this._retryPointerAction(progress, 'hover', false /* waitForEnabled */, point => this._page.mouse.move(point.x, point.y), options);\n    }\n    async click(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._click(progress, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    _click(progress, options) {\n        return this._retryPointerAction(progress, 'click', true /* waitForEnabled */, point => this._page.mouse.click(point.x, point.y, options), options);\n    }\n    async dblclick(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._dblclick(progress, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    _dblclick(progress, options) {\n        return this._retryPointerAction(progress, 'dblclick', true /* waitForEnabled */, point => this._page.mouse.dblclick(point.x, point.y, options), options);\n    }\n    async tap(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._tap(progress, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    _tap(progress, options) {\n        return this._retryPointerAction(progress, 'tap', true /* waitForEnabled */, point => this._page.touchscreen.tap(point.x, point.y), options);\n    }\n    async selectOption(metadata, elements, values, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._selectOption(progress, elements, values, options);\n            return throwRetargetableDOMError(result);\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _selectOption(progress, elements, values, options) {\n        const optionsToSelect = [...elements, ...values];\n        await progress.beforeInputAction(this);\n        return this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            progress.log('  selecting specified option(s)');\n            const poll = await this.evaluateHandleInUtility(([injected, node, optionsToSelect]) => {\n                return injected.waitForElementStatesAndPerformAction(node, ['visible', 'enabled'], injected.selectOptions.bind(injected, optionsToSelect));\n            }, optionsToSelect);\n            const pollHandler = new InjectedScriptPollHandler(progress, poll);\n            const result = throwFatalDOMError(await pollHandler.finish());\n            await this._page._doSlowMo();\n            return result;\n        });\n    }\n    async fill(metadata, value, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._fill(progress, value, options);\n            assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _fill(progress, value, options) {\n        progress.log(`elementHandle.fill(\"${value}\")`);\n        await progress.beforeInputAction(this);\n        return this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            progress.log('  waiting for element to be visible, enabled and editable');\n            const poll = await this.evaluateHandleInUtility(([injected, node, value]) => {\n                return injected.waitForElementStatesAndPerformAction(node, ['visible', 'enabled', 'editable'], injected.fill.bind(injected, value));\n            }, value);\n            const pollHandler = new InjectedScriptPollHandler(progress, poll);\n            const filled = throwFatalDOMError(await pollHandler.finish());\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            if (filled === 'error:notconnected')\n                return filled;\n            progress.log('  element is visible, enabled and editable');\n            if (filled === 'needsinput') {\n                progress.throwIfAborted(); // Avoid action that has side-effects.\n                if (value)\n                    await this._page.keyboard.insertText(value);\n                else\n                    await this._page.keyboard.press('Delete');\n            }\n            else {\n                assertDone(filled);\n            }\n            return 'done';\n        }, 'input');\n    }\n    async selectText(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            const poll = await this.evaluateHandleInUtility(([injected, node]) => {\n                return injected.waitForElementStatesAndPerformAction(node, ['visible'], injected.selectText.bind(injected));\n            }, {});\n            const pollHandler = new InjectedScriptPollHandler(progress, poll);\n            const result = throwFatalDOMError(await pollHandler.finish());\n            assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async setInputFiles(metadata, files, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._setInputFiles(progress, files, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _setInputFiles(progress, files, options) {\n        const multiple = throwFatalDOMError(await this.evaluateInUtility(([injected, node]) => {\n            if (node.nodeType !== Node.ELEMENT_NODE || node.tagName !== 'INPUT')\n                return 'error:notinput';\n            const input = node;\n            return input.multiple;\n        }, {}));\n        if (typeof multiple === 'string')\n            return multiple;\n        utils_1.assert(multiple || files.length <= 1, 'Non-multiple file input can only accept single file!');\n        await progress.beforeInputAction(this);\n        await this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            await this._page._delegate.setInputFiles(this, files);\n        });\n        await this._page._doSlowMo();\n        return 'done';\n    }\n    async focus(metadata) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        await controller.run(async (progress) => {\n            const result = await this._focus(progress);\n            await this._page._doSlowMo();\n            return assertDone(throwRetargetableDOMError(result));\n        }, 0);\n    }\n    async _focus(progress, resetSelectionIfNotFocused) {\n        progress.throwIfAborted(); // Avoid action that has side-effects.\n        const result = await this.evaluateInUtility(([injected, node, resetSelectionIfNotFocused]) => injected.focusNode(node, resetSelectionIfNotFocused), resetSelectionIfNotFocused);\n        return throwFatalDOMError(result);\n    }\n    async type(metadata, text, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._type(progress, text, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _type(progress, text, options) {\n        progress.log(`elementHandle.type(\"${text}\")`);\n        await progress.beforeInputAction(this);\n        return this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            const result = await this._focus(progress, true /* resetSelectionIfNotFocused */);\n            if (result !== 'done')\n                return result;\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            await this._page.keyboard.type(text, options);\n            return 'done';\n        }, 'input');\n    }\n    async press(metadata, key, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._press(progress, key, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _press(progress, key, options) {\n        progress.log(`elementHandle.press(\"${key}\")`);\n        await progress.beforeInputAction(this);\n        return this._page._frameManager.waitForSignalsCreatedBy(progress, options.noWaitAfter, async () => {\n            const result = await this._focus(progress, true /* resetSelectionIfNotFocused */);\n            if (result !== 'done')\n                return result;\n            progress.throwIfAborted(); // Avoid action that has side-effects.\n            await this._page.keyboard.press(key, options);\n            return 'done';\n        }, 'input');\n    }\n    async check(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._setChecked(progress, true, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async uncheck(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            const result = await this._setChecked(progress, false, options);\n            return assertDone(throwRetargetableDOMError(result));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _setChecked(progress, state, options) {\n        const isChecked = async () => {\n            const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'checked'), {});\n            return throwRetargetableDOMError(throwFatalDOMError(result));\n        };\n        if (await isChecked() === state)\n            return 'done';\n        const result = await this._click(progress, options);\n        if (result !== 'done')\n            return result;\n        if (await isChecked() !== state)\n            throw new Error('Clicking the checkbox did not change its state');\n        return 'done';\n    }\n    async boundingBox() {\n        return this._page._delegate.getBoundingBox(this);\n    }\n    async screenshot(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this._page._screenshotter.screenshotElement(progress, this, options), this._page._timeoutSettings.timeout(options));\n    }\n    async $(selector) {\n        return this._page.selectors._query(this._context.frame, selector, this);\n    }\n    async $$(selector) {\n        return this._page.selectors._queryAll(this._context.frame, selector, this, true /* adoptToMain */);\n    }\n    async evalOnSelectorAndWaitForSignals(selector, expression, isFunction, arg) {\n        const handle = await this._page.selectors._query(this._context.frame, selector, this);\n        if (!handle)\n            throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n        const result = await handle.evaluateExpressionAndWaitForSignals(expression, isFunction, true, arg);\n        handle.dispose();\n        return result;\n    }\n    async evalOnSelectorAllAndWaitForSignals(selector, expression, isFunction, arg) {\n        const arrayHandle = await this._page.selectors._queryArray(this._context.frame, selector, this);\n        const result = await arrayHandle.evaluateExpressionAndWaitForSignals(expression, isFunction, true, arg);\n        arrayHandle.dispose();\n        return result;\n    }\n    async isVisible() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'visible'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async isHidden() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'hidden'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async isEnabled() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'enabled'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async isDisabled() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'disabled'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async isEditable() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'editable'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async isChecked() {\n        const result = await this.evaluateInUtility(([injected, node]) => injected.checkElementState(node, 'checked'), {});\n        return throwRetargetableDOMError(throwFatalDOMError(result));\n    }\n    async waitForElementState(metadata, state, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            progress.log(`  waiting for element to be ${state}`);\n            const poll = await this.evaluateHandleInUtility(([injected, node, state]) => {\n                return injected.waitForElementStatesAndPerformAction(node, [state], () => 'done');\n            }, state);\n            const pollHandler = new InjectedScriptPollHandler(progress, poll);\n            assertDone(throwRetargetableDOMError(throwFatalDOMError(await pollHandler.finish())));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async waitForSelector(metadata, selector, options = {}) {\n        const { state = 'visible' } = options;\n        if (!['attached', 'detached', 'visible', 'hidden'].includes(state))\n            throw new Error(`state: expected one of (attached|detached|visible|hidden)`);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = waitForSelectorTask(info, state, this);\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            progress.log(`waiting for selector \"${selector}\"${state === 'attached' ? '' : ' to be ' + state}`);\n            const context = await this._context.frame._context(info.world);\n            const injected = await context.injectedScript();\n            const pollHandler = new InjectedScriptPollHandler(progress, await task(injected));\n            const result = await pollHandler.finishHandle();\n            if (!result.asElement()) {\n                result.dispose();\n                return null;\n            }\n            const handle = result.asElement();\n            return handle._adoptTo(await this._context.frame._mainContext());\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _adoptTo(context) {\n        if (this._context !== context) {\n            const adopted = await this._page._delegate.adoptElementHandle(this, context);\n            this.dispose();\n            return adopted;\n        }\n        return this;\n    }\n    async _waitForDisplayedAtStablePosition(progress, waitForEnabled) {\n        if (waitForEnabled)\n            progress.log(`  waiting for element to be visible, enabled and stable`);\n        else\n            progress.log(`  waiting for element to be visible and stable`);\n        const poll = this.evaluateHandleInUtility(([injected, node, waitForEnabled]) => {\n            return injected.waitForElementStatesAndPerformAction(node, waitForEnabled ? ['visible', 'stable', 'enabled'] : ['visible', 'stable'], () => 'done');\n        }, waitForEnabled);\n        const pollHandler = new InjectedScriptPollHandler(progress, await poll);\n        const result = await pollHandler.finish();\n        if (waitForEnabled)\n            progress.log('  element is visible, enabled and stable');\n        else\n            progress.log('  element is visible and stable');\n        return throwFatalDOMError(result);\n    }\n    async _checkHitTargetAt(point) {\n        const frame = await this.ownerFrame();\n        if (frame && frame.parentFrame()) {\n            const element = await frame.frameElement();\n            const box = await element.boundingBox();\n            if (!box)\n                return 'error:notconnected';\n            // Translate from viewport coordinates to frame coordinates.\n            point = { x: point.x - box.x, y: point.y - box.y };\n        }\n        return this.evaluateInUtility(([injected, node, point]) => injected.checkHitTargetAt(node, point), point);\n    }\n}\nexports.ElementHandle = ElementHandle;\n// Handles an InjectedScriptPoll running in injected script:\n// - streams logs into progress;\n// - cancels the poll when progress cancels.\nclass InjectedScriptPollHandler {\n    constructor(progress, poll) {\n        this._progress = progress;\n        this._poll = poll;\n        // Ensure we cancel the poll before progress aborts and returns:\n        //   - no unnecessary work in the page;\n        //   - no possible side effects after progress promsie rejects.\n        this._progress.cleanupWhenAborted(() => this.cancel());\n        this._streamLogs();\n    }\n    async _streamLogs() {\n        while (this._poll && this._progress.isRunning()) {\n            const messages = await this._poll.evaluate(poll => poll.takeNextLogs()).catch(e => []);\n            if (!this._poll || !this._progress.isRunning())\n                return;\n            for (const message of messages)\n                this._progress.log(message);\n        }\n    }\n    async finishHandle() {\n        try {\n            const result = await this._poll.evaluateHandle(poll => poll.run());\n            await this._finishInternal();\n            return result;\n        }\n        finally {\n            await this.cancel();\n        }\n    }\n    async finish() {\n        try {\n            const result = await this._poll.evaluate(poll => poll.run());\n            await this._finishInternal();\n            return result;\n        }\n        finally {\n            await this.cancel();\n        }\n    }\n    async _finishInternal() {\n        if (!this._poll)\n            return;\n        // Retrieve all the logs before continuing.\n        const messages = await this._poll.evaluate(poll => poll.takeLastLogs()).catch(e => []);\n        for (const message of messages)\n            this._progress.log(message);\n    }\n    async cancel() {\n        if (!this._poll)\n            return;\n        const copy = this._poll;\n        this._poll = null;\n        await copy.evaluate(p => p.cancel()).catch(e => { });\n        copy.dispose();\n    }\n}\nexports.InjectedScriptPollHandler = InjectedScriptPollHandler;\nfunction throwFatalDOMError(result) {\n    if (result === 'error:notelement')\n        throw new Error('Node is not an element');\n    if (result === 'error:nothtmlelement')\n        throw new Error('Not an HTMLElement');\n    if (result === 'error:notfillableelement')\n        throw new Error('Element is not an <input>, <textarea> or [contenteditable] element');\n    if (result === 'error:notfillableinputtype')\n        throw new Error('Input of this type cannot be filled');\n    if (result === 'error:notfillablenumberinput')\n        throw new Error('Cannot type text into input[type=number]');\n    if (result === 'error:notvaliddate')\n        throw new Error(`Malformed value`);\n    if (result === 'error:notinput')\n        throw new Error('Node is not an HTMLInputElement');\n    if (result === 'error:notselect')\n        throw new Error('Element is not a <select> element.');\n    if (result === 'error:notcheckbox')\n        throw new Error('Not a checkbox or radio button');\n    return result;\n}\nexports.throwFatalDOMError = throwFatalDOMError;\nfunction throwRetargetableDOMError(result) {\n    if (result === 'error:notconnected')\n        throw new Error('Element is not attached to the DOM');\n    return result;\n}\nexports.throwRetargetableDOMError = throwRetargetableDOMError;\nfunction assertDone(result) {\n    // This function converts 'done' to void and ensures typescript catches unhandled errors.\n}\nexports.assertDone = assertDone;\nfunction roundPoint(point) {\n    return {\n        x: (point.x * 100 | 0) / 100,\n        y: (point.y * 100 | 0) / 100,\n    };\n}\nfunction compensateHalfIntegerRoundingError(point) {\n    // Firefox internally uses integer coordinates, so 8.5 is converted to 9 when clicking.\n    //\n    // This does not work nicely for small elements. For example, 1x1 square with corners\n    // (8;8) and (9;9) is targeted when clicking at (8;8) but not when clicking at (9;9).\n    // So, clicking at (8.5;8.5) will effectively click at (9;9) and miss the target.\n    //\n    // Therefore, we skew half-integer values from the interval (8.49, 8.51) towards\n    // (8.47, 8.49) that is rounded towards 8. This means clicking at (8.5;8.5) will\n    // be replaced with (8.48;8.48) and will effectively click at (8;8).\n    //\n    // Other browsers use float coordinates, so this change should not matter.\n    const remainderX = point.x - Math.floor(point.x);\n    if (remainderX > 0.49 && remainderX < 0.51)\n        point.x -= 0.02;\n    const remainderY = point.y - Math.floor(point.y);\n    if (remainderY > 0.49 && remainderY < 0.51)\n        point.y -= 0.02;\n}\nfunction waitForSelectorTask(selector, state, root) {\n    return injectedScript => injectedScript.evaluateHandle((injected, { parsed, state, root }) => {\n        let lastElement;\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, root || document);\n            const visible = element ? injected.isVisible(element) : false;\n            if (lastElement !== element) {\n                lastElement = element;\n                if (!element)\n                    progress.log(`  selector did not resolve to any element`);\n                else\n                    progress.log(`  selector resolved to ${visible ? 'visible' : 'hidden'} ${injected.previewNode(element)}`);\n            }\n            switch (state) {\n                case 'attached':\n                    return element ? element : continuePolling;\n                case 'detached':\n                    return !element ? undefined : continuePolling;\n                case 'visible':\n                    return visible ? element : continuePolling;\n                case 'hidden':\n                    return !visible ? undefined : continuePolling;\n            }\n        });\n    }, { parsed: selector.parsed, state, root });\n}\nexports.waitForSelectorTask = waitForSelectorTask;\nfunction dispatchEventTask(selector, type, eventInit) {\n    return injectedScript => injectedScript.evaluateHandle((injected, { parsed, type, eventInit }) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            injected.dispatchEvent(element, type, eventInit);\n        });\n    }, { parsed: selector.parsed, type, eventInit });\n}\nexports.dispatchEventTask = dispatchEventTask;\nfunction textContentTask(selector) {\n    return injectedScript => injectedScript.evaluateHandle((injected, parsed) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            return element.textContent;\n        });\n    }, selector.parsed);\n}\nexports.textContentTask = textContentTask;\nfunction innerTextTask(selector) {\n    return injectedScript => injectedScript.evaluateHandle((injected, parsed) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            if (element.namespaceURI !== 'http://www.w3.org/1999/xhtml')\n                return 'error:nothtmlelement';\n            return { innerText: element.innerText };\n        });\n    }, selector.parsed);\n}\nexports.innerTextTask = innerTextTask;\nfunction innerHTMLTask(selector) {\n    return injectedScript => injectedScript.evaluateHandle((injected, parsed) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            return element.innerHTML;\n        });\n    }, selector.parsed);\n}\nexports.innerHTMLTask = innerHTMLTask;\nfunction getAttributeTask(selector, name) {\n    return injectedScript => injectedScript.evaluateHandle((injected, { parsed, name }) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            return element.getAttribute(name);\n        });\n    }, { parsed: selector.parsed, name });\n}\nexports.getAttributeTask = getAttributeTask;\nfunction elementStateTask(selector, state) {\n    return injectedScript => injectedScript.evaluateHandle((injected, { parsed, state }) => {\n        return injected.pollRaf((progress, continuePolling) => {\n            const element = injected.querySelector(parsed, document);\n            if (!element)\n                return continuePolling;\n            progress.log(`  selector resolved to ${injected.previewNode(element)}`);\n            return injected.checkElementState(element, state);\n        });\n    }, { parsed: selector.parsed, state });\n}\nexports.elementStateTask = elementStateTask;\n//# sourceMappingURL=dom.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Download = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst page_1 = require(\"./page\");\nconst utils_1 = require(\"../utils/utils\");\nclass Download {\n    constructor(page, downloadsPath, uuid, url, suggestedFilename) {\n        this._saveCallbacks = [];\n        this._finished = false;\n        this._failure = null;\n        this._deleted = false;\n        this._page = page;\n        this._downloadsPath = downloadsPath;\n        this._uuid = uuid;\n        this._url = url;\n        this._suggestedFilename = suggestedFilename;\n        this._finishedCallback = () => { };\n        this._finishedPromise = new Promise(f => this._finishedCallback = f);\n        page._browserContext._downloads.add(this);\n        this._acceptDownloads = !!this._page._browserContext._options.acceptDownloads;\n        if (suggestedFilename !== undefined)\n            this._page.emit(page_1.Page.Events.Download, this);\n    }\n    _filenameSuggested(suggestedFilename) {\n        utils_1.assert(this._suggestedFilename === undefined);\n        this._suggestedFilename = suggestedFilename;\n        this._page.emit(page_1.Page.Events.Download, this);\n    }\n    url() {\n        return this._url;\n    }\n    suggestedFilename() {\n        return this._suggestedFilename;\n    }\n    async localPath() {\n        if (!this._acceptDownloads)\n            throw new Error('Pass { acceptDownloads: true } when you are creating your browser context.');\n        const fileName = path_1.default.join(this._downloadsPath, this._uuid);\n        await this._finishedPromise;\n        if (this._failure)\n            return null;\n        return fileName;\n    }\n    saveAs(saveCallback) {\n        if (!this._acceptDownloads)\n            throw new Error('Pass { acceptDownloads: true } when you are creating your browser context.');\n        if (this._deleted)\n            throw new Error('Download already deleted. Save before deleting.');\n        if (this._failure)\n            throw new Error('Download not found on disk. Check download.failure() for details.');\n        if (this._finished) {\n            saveCallback(path_1.default.join(this._downloadsPath, this._uuid)).catch(e => { });\n            return;\n        }\n        this._saveCallbacks.push(saveCallback);\n    }\n    async failure() {\n        if (!this._acceptDownloads)\n            return 'Pass { acceptDownloads: true } when you are creating your browser context.';\n        await this._finishedPromise;\n        return this._failure;\n    }\n    async delete() {\n        if (!this._acceptDownloads)\n            return;\n        const fileName = await this.localPath();\n        if (this._deleted)\n            return;\n        this._deleted = true;\n        if (fileName)\n            await util.promisify(fs_1.default.unlink)(fileName).catch(e => { });\n    }\n    async deleteOnContextClose() {\n        // Compared to \"delete\", this method does not wait for the download to finish.\n        // We use it when closing the context to avoid stalling.\n        if (this._deleted)\n            return;\n        this._deleted = true;\n        if (this._acceptDownloads) {\n            const fileName = path_1.default.join(this._downloadsPath, this._uuid);\n            await util.promisify(fs_1.default.unlink)(fileName).catch(e => { });\n        }\n        await this._reportFinished('Download deleted upon browser context closure.');\n    }\n    async _reportFinished(error) {\n        if (this._finished)\n            return;\n        this._finished = true;\n        this._failure = error || null;\n        if (error) {\n            for (const callback of this._saveCallbacks)\n                await callback('', error);\n        }\n        else {\n            const fullPath = path_1.default.join(this._downloadsPath, this._uuid);\n            for (const callback of this._saveCallbacks)\n                await callback(fullPath);\n        }\n        this._saveCallbacks = [];\n        this._finishedCallback();\n    }\n}\nexports.Download = Download;\n//# sourceMappingURL=download.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Electron = exports.ElectronApplication = void 0;\nconst os = __importStar(require(\"os\"));\nconst crBrowser_1 = require(\"../chromium/crBrowser\");\nconst crConnection_1 = require(\"../chromium/crConnection\");\nconst crExecutionContext_1 = require(\"../chromium/crExecutionContext\");\nconst js = __importStar(require(\"../javascript\"));\nconst page_1 = require(\"../page\");\nconst timeoutSettings_1 = require(\"../../utils/timeoutSettings\");\nconst transport_1 = require(\"../transport\");\nconst processLauncher_1 = require(\"../processLauncher\");\nconst browserContext_1 = require(\"../browserContext\");\nconst progress_1 = require(\"../progress\");\nconst helper_1 = require(\"../helper\");\nconst readline = __importStar(require(\"readline\"));\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst instrumentation_1 = require(\"../instrumentation\");\nclass ElectronApplication extends instrumentation_1.SdkObject {\n    constructor(parent, browser, nodeConnection) {\n        super(parent);\n        this._windows = new Set();\n        this._lastWindowId = 0;\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings();\n        this._browserContext = browser._defaultContext;\n        this._browserContext.on(browserContext_1.BrowserContext.Events.Close, () => {\n            // Emit application closed after context closed.\n            Promise.resolve().then(() => this.emit(ElectronApplication.Events.Close));\n        });\n        this._browserContext.on(browserContext_1.BrowserContext.Events.Page, event => this._onPage(event));\n        this._nodeConnection = nodeConnection;\n        this._nodeSession = nodeConnection.rootSession;\n    }\n    async _onPage(page) {\n        // Needs to be sync.\n        const windowId = ++this._lastWindowId;\n        page.on(page_1.Page.Events.Close, () => {\n            page.browserWindow.dispose();\n            this._windows.delete(page);\n        });\n        page._browserWindowId = windowId;\n        this._windows.add(page);\n        // Below is async.\n        const handle = await this._nodeElectronHandle.evaluateHandle(({ BrowserWindow }, windowId) => BrowserWindow.fromId(windowId), windowId).catch(e => { });\n        if (!handle)\n            return;\n        page.browserWindow = handle;\n        const controller = new progress_1.ProgressController(instrumentation_1.internalCallMetadata(), this);\n        await controller.run(progress => page.mainFrame()._waitForLoadState(progress, 'domcontentloaded'), page._timeoutSettings.navigationTimeout({})).catch(e => { }); // can happen after detach\n        this.emit(ElectronApplication.Events.Window, page);\n    }\n    context() {\n        return this._browserContext;\n    }\n    async close() {\n        const progressController = new progress_1.ProgressController(instrumentation_1.internalCallMetadata(), this);\n        const closed = progressController.run(progress => helper_1.helper.waitForEvent(progress, this, ElectronApplication.Events.Close).promise, this._timeoutSettings.timeout({}));\n        await this._nodeElectronHandle.evaluate(({ app }) => app.quit());\n        this._nodeConnection.close();\n        await closed;\n    }\n    async _init() {\n        this._nodeSession.on('Runtime.executionContextCreated', (event) => {\n            if (event.context.auxData && event.context.auxData.isDefault)\n                this._nodeExecutionContext = new js.ExecutionContext(this, new crExecutionContext_1.CRExecutionContext(this._nodeSession, event.context));\n        });\n        await this._nodeSession.send('Runtime.enable', {}).catch(e => { });\n        this._nodeElectronHandle = await js.evaluate(this._nodeExecutionContext, false /* returnByValue */, `process.mainModule.require('electron')`);\n    }\n}\nexports.ElectronApplication = ElectronApplication;\nElectronApplication.Events = {\n    Close: 'close',\n    Window: 'window',\n};\nclass Electron extends instrumentation_1.SdkObject {\n    constructor(playwrightOptions) {\n        super(playwrightOptions.rootSdkObject);\n        this._playwrightOptions = playwrightOptions;\n    }\n    async launch(options) {\n        const { args = [], } = options;\n        const controller = new progress_1.ProgressController(instrumentation_1.internalCallMetadata(), this);\n        controller.setLogName('browser');\n        return controller.run(async (progress) => {\n            let app = undefined;\n            const electronArguments = ['--inspect=0', '--remote-debugging-port=0', ...args];\n            if (os.platform() === 'linux') {\n                const runningAsRoot = process.geteuid && process.geteuid() === 0;\n                if (runningAsRoot && electronArguments.indexOf('--no-sandbox') === -1)\n                    electronArguments.push('--no-sandbox');\n            }\n            const browserLogsCollector = new debugLogger_1.RecentLogsCollector();\n            const { launchedProcess, gracefullyClose, kill } = await processLauncher_1.launchProcess({\n                executablePath: options.executablePath || require('electron/index.js'),\n                args: electronArguments,\n                env: options.env ? processLauncher_1.envArrayToObject(options.env) : process.env,\n                log: (message) => {\n                    progress.log(message);\n                    browserLogsCollector.log(message);\n                },\n                stdio: 'pipe',\n                cwd: options.cwd,\n                tempDirectories: [],\n                attemptToGracefullyClose: () => app.close(),\n                handleSIGINT: true,\n                handleSIGTERM: true,\n                handleSIGHUP: true,\n                onExit: () => { },\n            });\n            const nodeMatch = await waitForLine(progress, launchedProcess, /^Debugger listening on (ws:\\/\\/.*)$/);\n            const nodeTransport = await transport_1.WebSocketTransport.connect(progress, nodeMatch[1]);\n            const nodeConnection = new crConnection_1.CRConnection(nodeTransport, helper_1.helper.debugProtocolLogger(), browserLogsCollector);\n            const chromeMatch = await waitForLine(progress, launchedProcess, /^DevTools listening on (ws:\\/\\/.*)$/);\n            const chromeTransport = await transport_1.WebSocketTransport.connect(progress, chromeMatch[1]);\n            const browserProcess = {\n                onclose: undefined,\n                process: launchedProcess,\n                close: gracefullyClose,\n                kill\n            };\n            const browserOptions = {\n                ...this._playwrightOptions,\n                name: 'electron',\n                isChromium: true,\n                headful: true,\n                persistent: { sdkLanguage: options.sdkLanguage, noDefaultViewport: true },\n                browserProcess,\n                protocolLogger: helper_1.helper.debugProtocolLogger(),\n                browserLogsCollector,\n            };\n            const browser = await crBrowser_1.CRBrowser.connect(chromeTransport, browserOptions);\n            app = new ElectronApplication(this, browser, nodeConnection);\n            await app._init();\n            return app;\n        }, timeoutSettings_1.TimeoutSettings.timeout(options));\n    }\n}\nexports.Electron = Electron;\nfunction waitForLine(progress, process, regex) {\n    return new Promise((resolve, reject) => {\n        const rl = readline.createInterface({ input: process.stderr });\n        const failError = new Error('Process failed to launch!');\n        const listeners = [\n            helper_1.helper.addEventListener(rl, 'line', onLine),\n            helper_1.helper.addEventListener(rl, 'close', reject.bind(null, failError)),\n            helper_1.helper.addEventListener(process, 'exit', reject.bind(null, failError)),\n            // It is Ok to remove error handler because we did not create process and there is another listener.\n            helper_1.helper.addEventListener(process, 'error', reject.bind(null, failError))\n        ];\n        progress.cleanupWhenAborted(cleanup);\n        function onLine(line) {\n            const match = line.match(regex);\n            if (!match)\n                return;\n            cleanup();\n            resolve(match);\n        }\n        function cleanup() {\n            helper_1.helper.removeEventListeners(listeners);\n        }\n    });\n}\n//# sourceMappingURL=electron.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileChooser = void 0;\nclass FileChooser {\n    constructor(page, elementHandle, isMultiple) {\n        this._page = page;\n        this._elementHandle = elementHandle;\n        this._isMultiple = isMultiple;\n    }\n    element() {\n        return this._elementHandle;\n    }\n    isMultiple() {\n        return this._isMultiple;\n    }\n    page() {\n        return this._page;\n    }\n}\nexports.FileChooser = FileChooser;\n//# sourceMappingURL=fileChooser.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAccessibilityTree = void 0;\nasync function getAccessibilityTree(session, needle) {\n    const objectId = needle ? needle._objectId : undefined;\n    const { tree } = await session.send('Accessibility.getFullAXTree', { objectId });\n    const axNode = new FFAXNode(tree);\n    return {\n        tree: axNode,\n        needle: needle ? axNode._findNeedle() : null\n    };\n}\nexports.getAccessibilityTree = getAccessibilityTree;\nconst FFRoleToARIARole = new Map(Object.entries({\n    'pushbutton': 'button',\n    'checkbutton': 'checkbox',\n    'editcombobox': 'combobox',\n    'content deletion': 'deletion',\n    'footnote': 'doc-footnote',\n    'non-native document': 'document',\n    'grouping': 'group',\n    'graphic': 'img',\n    'content insertion': 'insertion',\n    'animation': 'marquee',\n    'flat equation': 'math',\n    'menupopup': 'menu',\n    'check menu item': 'menuitemcheckbox',\n    'radio menu item': 'menuitemradio',\n    'listbox option': 'option',\n    'radiobutton': 'radio',\n    'statusbar': 'status',\n    'pagetab': 'tab',\n    'pagetablist': 'tablist',\n    'propertypage': 'tabpanel',\n    'entry': 'textbox',\n    'outline': 'tree',\n    'tree table': 'treegrid',\n    'outlineitem': 'treeitem',\n}));\nclass FFAXNode {\n    constructor(payload) {\n        this._payload = payload;\n        this._children = (payload.children || []).map(x => new FFAXNode(x));\n        this._editable = !!payload.editable;\n        this._richlyEditable = this._editable && (payload.tag !== 'textarea' && payload.tag !== 'input');\n        this._focusable = !!payload.focusable;\n        this._expanded = !!payload.expanded;\n        this._name = this._payload.name;\n        this._role = this._payload.role;\n    }\n    _isPlainTextField() {\n        if (this._richlyEditable)\n            return false;\n        if (this._editable)\n            return true;\n        return this._role === 'entry';\n    }\n    _isTextOnlyObject() {\n        const role = this._role;\n        return (role === 'text leaf' || role === 'text' || role === 'statictext');\n    }\n    _hasFocusableChild() {\n        if (this._cachedHasFocusableChild === undefined) {\n            this._cachedHasFocusableChild = false;\n            for (const child of this._children) {\n                if (child._focusable || child._hasFocusableChild()) {\n                    this._cachedHasFocusableChild = true;\n                    break;\n                }\n            }\n        }\n        return this._cachedHasFocusableChild;\n    }\n    children() {\n        return this._children;\n    }\n    _findNeedle() {\n        if (this._payload.foundObject)\n            return this;\n        for (const child of this._children) {\n            const found = child._findNeedle();\n            if (found)\n                return found;\n        }\n        return null;\n    }\n    isLeafNode() {\n        if (!this._children.length)\n            return true;\n        // These types of objects may have children that we use as internal\n        // implementation details, but we want to expose them as leaves to platform\n        // accessibility APIs because screen readers might be confused if they find\n        // any children.\n        if (this._isPlainTextField() || this._isTextOnlyObject())\n            return true;\n        // Roles whose children are only presentational according to the ARIA and\n        // HTML5 Specs should be hidden from screen readers.\n        // (Note that whilst ARIA buttons can have only presentational children, HTML5\n        // buttons are allowed to have content.)\n        switch (this._role) {\n            case 'graphic':\n            case 'scrollbar':\n            case 'slider':\n            case 'separator':\n            case 'progressbar':\n                return true;\n            default:\n                break;\n        }\n        // Here and below: Android heuristics\n        if (this._hasFocusableChild())\n            return false;\n        if (this._focusable && this._role !== 'document' && this._name)\n            return true;\n        if (this._role === 'heading' && this._name)\n            return true;\n        return false;\n    }\n    isControl() {\n        switch (this._role) {\n            case 'checkbutton':\n            case 'check menu item':\n            case 'check rich option':\n            case 'combobox':\n            case 'combobox option':\n            case 'color chooser':\n            case 'listbox':\n            case 'listbox option':\n            case 'listbox rich option':\n            case 'popup menu':\n            case 'menupopup':\n            case 'menuitem':\n            case 'menubar':\n            case 'button':\n            case 'pushbutton':\n            case 'radiobutton':\n            case 'radio menuitem':\n            case 'scrollbar':\n            case 'slider':\n            case 'spinbutton':\n            case 'switch':\n            case 'pagetab':\n            case 'entry':\n            case 'tree table':\n                return true;\n            default:\n                return false;\n        }\n    }\n    isInteresting(insideControl) {\n        if (this._focusable || this._richlyEditable)\n            return true;\n        // If it's not focusable but has a control role, then it's interesting.\n        if (this.isControl())\n            return true;\n        // A non focusable child of a control is not interesting\n        if (insideControl)\n            return false;\n        return this.isLeafNode() && !!this._name.trim();\n    }\n    serialize() {\n        const node = {\n            role: FFRoleToARIARole.get(this._role) || this._role,\n            name: this._name || '',\n        };\n        const userStringProperties = [\n            'name',\n            'description',\n            'roledescription',\n            'valuetext',\n            'keyshortcuts',\n        ];\n        for (const userStringProperty of userStringProperties) {\n            if (!(userStringProperty in this._payload))\n                continue;\n            node[userStringProperty] = this._payload[userStringProperty];\n        }\n        const booleanProperties = [\n            'disabled',\n            'expanded',\n            'focused',\n            'modal',\n            'multiline',\n            'multiselectable',\n            'readonly',\n            'required',\n            'selected',\n        ];\n        for (const booleanProperty of booleanProperties) {\n            if (this._role === 'document' && booleanProperty === 'focused')\n                continue; // document focusing is strange\n            const value = this._payload[booleanProperty];\n            if (!value)\n                continue;\n            node[booleanProperty] = value;\n        }\n        const numericalProperties = [\n            'level'\n        ];\n        for (const numericalProperty of numericalProperties) {\n            if (!(numericalProperty in this._payload))\n                continue;\n            node[numericalProperty] = this._payload[numericalProperty];\n        }\n        const tokenProperties = [\n            'autocomplete',\n            'haspopup',\n            'invalid',\n            'orientation',\n        ];\n        for (const tokenProperty of tokenProperties) {\n            const value = this._payload[tokenProperty];\n            if (!value || value === 'false')\n                continue;\n            node[tokenProperty] = value;\n        }\n        const axNode = node;\n        axNode.valueString = this._payload.value;\n        if ('checked' in this._payload)\n            axNode.checked = this._payload.checked === true ? 'checked' : this._payload.checked === 'mixed' ? 'mixed' : 'unchecked';\n        if ('pressed' in this._payload)\n            axNode.pressed = this._payload.pressed === true ? 'pressed' : 'released';\n        return axNode;\n    }\n}\n//# sourceMappingURL=ffAccessibility.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FFBrowserContext = exports.FFBrowser = void 0;\nconst utils_1 = require(\"../../utils/utils\");\nconst browser_1 = require(\"../browser\");\nconst browserContext_1 = require(\"../browserContext\");\nconst network = __importStar(require(\"../network\"));\nconst ffConnection_1 = require(\"./ffConnection\");\nconst ffPage_1 = require(\"./ffPage\");\nclass FFBrowser extends browser_1.Browser {\n    constructor(connection, options) {\n        super(options);\n        this._version = '';\n        this._connection = connection;\n        this._ffPages = new Map();\n        this._contexts = new Map();\n        this._connection.on(ffConnection_1.ConnectionEvents.Disconnected, () => this._didClose());\n        this._connection.on('Browser.attachedToTarget', this._onAttachedToTarget.bind(this));\n        this._connection.on('Browser.detachedFromTarget', this._onDetachedFromTarget.bind(this));\n        this._connection.on('Browser.downloadCreated', this._onDownloadCreated.bind(this));\n        this._connection.on('Browser.downloadFinished', this._onDownloadFinished.bind(this));\n        this._connection.on('Browser.screencastFinished', this._onScreencastFinished.bind(this));\n    }\n    static async connect(transport, options) {\n        const connection = new ffConnection_1.FFConnection(transport, options.protocolLogger, options.browserLogsCollector);\n        const browser = new FFBrowser(connection, options);\n        if (options.__testHookOnConnectToBrowser)\n            await options.__testHookOnConnectToBrowser();\n        const promises = [\n            connection.send('Browser.enable', { attachToDefaultContext: !!options.persistent }),\n            browser._initVersion(),\n        ];\n        if (options.persistent) {\n            browser._defaultContext = new FFBrowserContext(browser, undefined, options.persistent);\n            promises.push(browser._defaultContext._initialize());\n        }\n        if (options.proxy)\n            promises.push(browser._connection.send('Browser.setBrowserProxy', toJugglerProxyOptions(options.proxy)));\n        await Promise.all(promises);\n        return browser;\n    }\n    async _initVersion() {\n        const result = await this._connection.send('Browser.getInfo');\n        this._version = result.version.substring(result.version.indexOf('/') + 1);\n    }\n    isConnected() {\n        return !this._connection._closed;\n    }\n    async newContext(options) {\n        browserContext_1.validateBrowserContextOptions(options, this.options);\n        if (options.isMobile)\n            throw new Error('options.isMobile is not supported in Firefox');\n        const { browserContextId } = await this._connection.send('Browser.createBrowserContext', { removeOnDetach: true });\n        const context = new FFBrowserContext(this, browserContextId, options);\n        await context._initialize();\n        this._contexts.set(browserContextId, context);\n        return context;\n    }\n    contexts() {\n        return Array.from(this._contexts.values());\n    }\n    version() {\n        return this._version;\n    }\n    _onDetachedFromTarget(payload) {\n        const ffPage = this._ffPages.get(payload.targetId);\n        this._ffPages.delete(payload.targetId);\n        ffPage.didClose();\n    }\n    _onAttachedToTarget(payload) {\n        const { targetId, browserContextId, openerId, type } = payload.targetInfo;\n        utils_1.assert(type === 'page');\n        const context = browserContextId ? this._contexts.get(browserContextId) : this._defaultContext;\n        utils_1.assert(context, `Unknown context id:${browserContextId}, _defaultContext: ${this._defaultContext}`);\n        const session = this._connection.createSession(payload.sessionId, type);\n        const opener = openerId ? this._ffPages.get(openerId) : null;\n        const ffPage = new ffPage_1.FFPage(session, context, opener);\n        this._ffPages.set(targetId, ffPage);\n        ffPage._page.reportAsNew();\n    }\n    _onDownloadCreated(payload) {\n        const ffPage = this._ffPages.get(payload.pageTargetId);\n        utils_1.assert(ffPage);\n        if (!ffPage)\n            return;\n        let originPage = ffPage._initializedPage;\n        // If it's a new window download, report it on the opener page.\n        if (!originPage) {\n            // Resume the page creation with an error. The page will automatically close right\n            // after the download begins.\n            ffPage._pageCallback(new Error('Starting new page download'));\n            if (ffPage._opener)\n                originPage = ffPage._opener._initializedPage;\n        }\n        if (!originPage)\n            return;\n        this._downloadCreated(originPage, payload.uuid, payload.url, payload.suggestedFileName);\n    }\n    _onDownloadFinished(payload) {\n        const error = payload.canceled ? 'canceled' : payload.error;\n        this._downloadFinished(payload.uuid, error);\n    }\n    _onScreencastFinished(payload) {\n        this._videoFinished(payload.screencastId);\n    }\n}\nexports.FFBrowser = FFBrowser;\nclass FFBrowserContext extends browserContext_1.BrowserContext {\n    constructor(browser, browserContextId, options) {\n        super(browser, options, browserContextId);\n        this._browser = browser;\n    }\n    async _initialize() {\n        utils_1.assert(!this._ffPages().length);\n        const browserContextId = this._browserContextId;\n        const promises = [super._initialize()];\n        if (this._browser.options.downloadsPath) {\n            promises.push(this._browser._connection.send('Browser.setDownloadOptions', {\n                browserContextId,\n                downloadOptions: {\n                    behavior: this._options.acceptDownloads ? 'saveToDisk' : 'cancel',\n                    downloadsDir: this._browser.options.downloadsPath,\n                },\n            }));\n        }\n        if (this._options.viewport) {\n            const viewport = {\n                viewportSize: { width: this._options.viewport.width, height: this._options.viewport.height },\n                deviceScaleFactor: this._options.deviceScaleFactor || 1,\n            };\n            promises.push(this._browser._connection.send('Browser.setDefaultViewport', { browserContextId, viewport }));\n        }\n        if (this._options.hasTouch)\n            promises.push(this._browser._connection.send('Browser.setTouchOverride', { browserContextId, hasTouch: true }));\n        if (this._options.userAgent)\n            promises.push(this._browser._connection.send('Browser.setUserAgentOverride', { browserContextId, userAgent: this._options.userAgent }));\n        if (this._options.bypassCSP)\n            promises.push(this._browser._connection.send('Browser.setBypassCSP', { browserContextId, bypassCSP: true }));\n        if (this._options.ignoreHTTPSErrors)\n            promises.push(this._browser._connection.send('Browser.setIgnoreHTTPSErrors', { browserContextId, ignoreHTTPSErrors: true }));\n        if (this._options.javaScriptEnabled === false)\n            promises.push(this._browser._connection.send('Browser.setJavaScriptDisabled', { browserContextId, javaScriptDisabled: true }));\n        if (this._options.locale)\n            promises.push(this._browser._connection.send('Browser.setLocaleOverride', { browserContextId, locale: this._options.locale }));\n        if (this._options.timezoneId)\n            promises.push(this._browser._connection.send('Browser.setTimezoneOverride', { browserContextId, timezoneId: this._options.timezoneId }));\n        if (this._options.permissions)\n            promises.push(this.grantPermissions(this._options.permissions));\n        if (this._options.extraHTTPHeaders || this._options.locale)\n            promises.push(this.setExtraHTTPHeaders(this._options.extraHTTPHeaders || []));\n        if (this._options.httpCredentials)\n            promises.push(this.setHTTPCredentials(this._options.httpCredentials));\n        if (this._options.geolocation)\n            promises.push(this.setGeolocation(this._options.geolocation));\n        if (this._options.offline)\n            promises.push(this.setOffline(this._options.offline));\n        if (this._options.colorScheme)\n            promises.push(this._browser._connection.send('Browser.setColorScheme', { browserContextId, colorScheme: this._options.colorScheme }));\n        if (this._options.recordVideo) {\n            const size = this._options.recordVideo.size || this._options.viewport || { width: 1280, height: 720 };\n            promises.push(this._ensureVideosPath().then(() => {\n                return this._browser._connection.send('Browser.setScreencastOptions', {\n                    ...size,\n                    dir: this._options.recordVideo.dir,\n                    browserContextId: this._browserContextId\n                });\n            }));\n        }\n        if (this._options.proxy) {\n            promises.push(this._browser._connection.send('Browser.setContextProxy', {\n                browserContextId: this._browserContextId,\n                ...toJugglerProxyOptions(this._options.proxy)\n            }));\n        }\n        await Promise.all(promises);\n    }\n    _ffPages() {\n        return Array.from(this._browser._ffPages.values()).filter(ffPage => ffPage._browserContext === this);\n    }\n    pages() {\n        return this._ffPages().map(ffPage => ffPage._initializedPage).filter(pageOrNull => !!pageOrNull);\n    }\n    async newPageDelegate() {\n        browserContext_1.assertBrowserContextIsNotOwned(this);\n        const { targetId } = await this._browser._connection.send('Browser.newPage', {\n            browserContextId: this._browserContextId\n        }).catch(e => {\n            if (e.message.includes('Failed to override timezone'))\n                throw new Error(`Invalid timezone ID: ${this._options.timezoneId}`);\n            throw e;\n        });\n        return this._browser._ffPages.get(targetId);\n    }\n    async _doCookies(urls) {\n        const { cookies } = await this._browser._connection.send('Browser.getCookies', { browserContextId: this._browserContextId });\n        return network.filterCookies(cookies.map(c => {\n            const copy = { ...c };\n            delete copy.size;\n            delete copy.session;\n            return copy;\n        }), urls);\n    }\n    async addCookies(cookies) {\n        const cc = network.rewriteCookies(cookies).map(c => ({\n            ...c,\n            expires: c.expires && c.expires !== -1 ? c.expires : undefined,\n        }));\n        await this._browser._connection.send('Browser.setCookies', { browserContextId: this._browserContextId, cookies: cc });\n    }\n    async clearCookies() {\n        await this._browser._connection.send('Browser.clearCookies', { browserContextId: this._browserContextId });\n    }\n    async _doGrantPermissions(origin, permissions) {\n        const webPermissionToProtocol = new Map([\n            ['geolocation', 'geo'],\n            ['persistent-storage', 'persistent-storage'],\n            ['push', 'push'],\n            ['notifications', 'desktop-notification'],\n        ]);\n        const filtered = permissions.map(permission => {\n            const protocolPermission = webPermissionToProtocol.get(permission);\n            if (!protocolPermission)\n                throw new Error('Unknown permission: ' + permission);\n            return protocolPermission;\n        });\n        await this._browser._connection.send('Browser.grantPermissions', { origin: origin, browserContextId: this._browserContextId, permissions: filtered });\n    }\n    async _doClearPermissions() {\n        await this._browser._connection.send('Browser.resetPermissions', { browserContextId: this._browserContextId });\n    }\n    async setGeolocation(geolocation) {\n        browserContext_1.verifyGeolocation(geolocation);\n        this._options.geolocation = geolocation;\n        await this._browser._connection.send('Browser.setGeolocationOverride', { browserContextId: this._browserContextId, geolocation: geolocation || null });\n    }\n    async setExtraHTTPHeaders(headers) {\n        this._options.extraHTTPHeaders = headers;\n        let allHeaders = this._options.extraHTTPHeaders;\n        if (this._options.locale)\n            allHeaders = network.mergeHeaders([allHeaders, network.singleHeader('Accept-Language', this._options.locale)]);\n        await this._browser._connection.send('Browser.setExtraHTTPHeaders', { browserContextId: this._browserContextId, headers: allHeaders });\n    }\n    async setOffline(offline) {\n        this._options.offline = offline;\n        await this._browser._connection.send('Browser.setOnlineOverride', { browserContextId: this._browserContextId, override: offline ? 'offline' : 'online' });\n    }\n    async _doSetHTTPCredentials(httpCredentials) {\n        this._options.httpCredentials = httpCredentials;\n        await this._browser._connection.send('Browser.setHTTPCredentials', { browserContextId: this._browserContextId, credentials: httpCredentials || null });\n    }\n    async _doAddInitScript(source) {\n        await this._browser._connection.send('Browser.addScriptToEvaluateOnNewDocument', { browserContextId: this._browserContextId, script: source });\n    }\n    async _doExposeBinding(binding) {\n        if (binding.world !== 'main')\n            throw new Error('Only main context bindings are supported in Firefox.');\n        await this._browser._connection.send('Browser.addBinding', { browserContextId: this._browserContextId, name: binding.name, script: binding.source });\n    }\n    async _doUpdateRequestInterception() {\n        await this._browser._connection.send('Browser.setRequestInterception', { browserContextId: this._browserContextId, enabled: !!this._requestInterceptor });\n    }\n    async _doClose() {\n        utils_1.assert(this._browserContextId);\n        await this._browser._connection.send('Browser.removeBrowserContext', { browserContextId: this._browserContextId });\n        this._browser._contexts.delete(this._browserContextId);\n    }\n}\nexports.FFBrowserContext = FFBrowserContext;\nfunction toJugglerProxyOptions(proxy) {\n    const proxyServer = new URL(proxy.server);\n    let port = parseInt(proxyServer.port, 10);\n    let type = 'http';\n    if (proxyServer.protocol === 'socks5:')\n        type = 'socks';\n    else if (proxyServer.protocol === 'socks4:')\n        type = 'socks4';\n    else if (proxyServer.protocol === 'https:')\n        type = 'https';\n    if (proxyServer.port === '') {\n        if (proxyServer.protocol === 'http:')\n            port = 80;\n        else if (proxyServer.protocol === 'https:')\n            port = 443;\n    }\n    return {\n        type,\n        bypass: proxy.bypass ? proxy.bypass.split(',').map(domain => domain.trim()) : [],\n        host: proxyServer.hostname,\n        port,\n        username: proxy.username,\n        password: proxy.password\n    };\n}\n//# sourceMappingURL=ffBrowser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FFSession = exports.FFSessionEvents = exports.FFConnection = exports.kBrowserCloseMessageId = exports.ConnectionEvents = void 0;\nconst events_1 = require(\"events\");\nconst utils_1 = require(\"../../utils/utils\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst helper_1 = require(\"../helper\");\nexports.ConnectionEvents = {\n    Disconnected: Symbol('Disconnected'),\n};\n// FFPlaywright uses this special id to issue Browser.close command which we\n// should ignore.\nexports.kBrowserCloseMessageId = -9999;\nclass FFConnection extends events_1.EventEmitter {\n    constructor(transport, protocolLogger, browserLogsCollector) {\n        super();\n        this.setMaxListeners(0);\n        this._transport = transport;\n        this._protocolLogger = protocolLogger;\n        this._browserLogsCollector = browserLogsCollector;\n        this._lastId = 0;\n        this._callbacks = new Map();\n        this._transport.onmessage = this._onMessage.bind(this);\n        this._transport.onclose = this._onClose.bind(this);\n        this._sessions = new Map();\n        this._closed = false;\n        this.on = super.on;\n        this.addListener = super.addListener;\n        this.off = super.removeListener;\n        this.removeListener = super.removeListener;\n        this.once = super.once;\n    }\n    async send(method, params) {\n        this._checkClosed(method);\n        const id = this.nextMessageId();\n        this._rawSend({ id, method, params });\n        return new Promise((resolve, reject) => {\n            this._callbacks.set(id, { resolve, reject, error: new Error(), method });\n        });\n    }\n    nextMessageId() {\n        return ++this._lastId;\n    }\n    _checkClosed(method) {\n        if (this._closed)\n            throw new Error(`Protocol error (${method}): Browser closed.` + helper_1.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs()));\n    }\n    _rawSend(message) {\n        this._protocolLogger('send', message);\n        this._transport.send(message);\n    }\n    async _onMessage(message) {\n        this._protocolLogger('receive', message);\n        if (message.id === exports.kBrowserCloseMessageId)\n            return;\n        if (message.sessionId) {\n            const session = this._sessions.get(message.sessionId);\n            if (session)\n                session.dispatchMessage(message);\n        }\n        else if (message.id) {\n            const callback = this._callbacks.get(message.id);\n            // Callbacks could be all rejected if someone has called `.dispose()`.\n            if (callback) {\n                this._callbacks.delete(message.id);\n                if (message.error)\n                    callback.reject(createProtocolError(callback.error, callback.method, message.error));\n                else\n                    callback.resolve(message.result);\n            }\n        }\n        else {\n            Promise.resolve().then(() => this.emit(message.method, message.params));\n        }\n    }\n    _onClose() {\n        this._closed = true;\n        this._transport.onmessage = undefined;\n        this._transport.onclose = undefined;\n        const formattedBrowserLogs = helper_1.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());\n        for (const session of this._sessions.values())\n            session.dispose(formattedBrowserLogs);\n        this._sessions.clear();\n        for (const callback of this._callbacks.values())\n            callback.reject(stackTrace_1.rewriteErrorMessage(callback.error, `Protocol error (${callback.method}): Browser closed.` + formattedBrowserLogs));\n        this._callbacks.clear();\n        Promise.resolve().then(() => this.emit(exports.ConnectionEvents.Disconnected));\n    }\n    close() {\n        if (!this._closed)\n            this._transport.close();\n    }\n    createSession(sessionId, type) {\n        const session = new FFSession(this, type, sessionId, message => this._rawSend({ ...message, sessionId }));\n        this._sessions.set(sessionId, session);\n        return session;\n    }\n}\nexports.FFConnection = FFConnection;\nexports.FFSessionEvents = {\n    Disconnected: Symbol('Disconnected')\n};\nclass FFSession extends events_1.EventEmitter {\n    constructor(connection, targetType, sessionId, rawSend) {\n        super();\n        this._disposed = false;\n        this._crashed = false;\n        this.setMaxListeners(0);\n        this._callbacks = new Map();\n        this._connection = connection;\n        this._targetType = targetType;\n        this._sessionId = sessionId;\n        this._rawSend = rawSend;\n        this.on = super.on;\n        this.addListener = super.addListener;\n        this.off = super.removeListener;\n        this.removeListener = super.removeListener;\n        this.once = super.once;\n    }\n    markAsCrashed() {\n        this._crashed = true;\n    }\n    async send(method, params) {\n        if (this._crashed)\n            throw new Error('Page crashed');\n        this._connection._checkClosed(method);\n        if (this._disposed)\n            throw new Error(`Protocol error (${method}): Session closed. Most likely the ${this._targetType} has been closed.`);\n        const id = this._connection.nextMessageId();\n        this._rawSend({ method, params, id });\n        return new Promise((resolve, reject) => {\n            this._callbacks.set(id, { resolve, reject, error: new Error(), method });\n        });\n    }\n    sendMayFail(method, params) {\n        return this.send(method, params).catch(error => debugLogger_1.debugLogger.log('error', error));\n    }\n    dispatchMessage(object) {\n        if (object.id && this._callbacks.has(object.id)) {\n            const callback = this._callbacks.get(object.id);\n            this._callbacks.delete(object.id);\n            if (object.error)\n                callback.reject(createProtocolError(callback.error, callback.method, object.error));\n            else\n                callback.resolve(object.result);\n        }\n        else {\n            utils_1.assert(!object.id);\n            Promise.resolve().then(() => this.emit(object.method, object.params));\n        }\n    }\n    dispose(formattedBrowserLogs) {\n        for (const callback of this._callbacks.values())\n            callback.reject(stackTrace_1.rewriteErrorMessage(callback.error, `Protocol error (${callback.method}): Target closed.` + formattedBrowserLogs));\n        this._callbacks.clear();\n        this._disposed = true;\n        this._connection._sessions.delete(this._sessionId);\n        Promise.resolve().then(() => this.emit(exports.FFSessionEvents.Disconnected));\n    }\n}\nexports.FFSession = FFSession;\nfunction createProtocolError(error, method, protocolError) {\n    let message = `Protocol error (${method}): ${protocolError.message}`;\n    if ('data' in protocolError)\n        message += ` ${protocolError.data}`;\n    return stackTrace_1.rewriteErrorMessage(error, message);\n}\n//# sourceMappingURL=ffConnection.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FFExecutionContext = void 0;\nconst js = __importStar(require(\"../javascript\"));\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst utilityScriptSerializers_1 = require(\"../common/utilityScriptSerializers\");\nclass FFExecutionContext {\n    constructor(session, executionContextId) {\n        this._session = session;\n        this._executionContextId = executionContextId;\n    }\n    async rawEvaluate(expression) {\n        const payload = await this._session.send('Runtime.evaluate', {\n            expression,\n            returnByValue: false,\n            executionContextId: this._executionContextId,\n        }).catch(rewriteError);\n        checkException(payload.exceptionDetails);\n        return payload.result.objectId;\n    }\n    rawCallFunctionNoReply(func, ...args) {\n        this._session.send('Runtime.callFunction', {\n            functionDeclaration: func.toString(),\n            args: args.map(a => a instanceof js.JSHandle ? { objectId: a._objectId } : { value: a }),\n            returnByValue: true,\n            executionContextId: this._executionContextId\n        }).catch(() => { });\n    }\n    async evaluateWithArguments(expression, returnByValue, utilityScript, values, objectIds) {\n        const payload = await this._session.send('Runtime.callFunction', {\n            functionDeclaration: expression,\n            args: [\n                { objectId: utilityScript._objectId, value: undefined },\n                ...values.map(value => ({ value })),\n                ...objectIds.map(objectId => ({ objectId, value: undefined })),\n            ],\n            returnByValue,\n            executionContextId: this._executionContextId\n        }).catch(rewriteError);\n        checkException(payload.exceptionDetails);\n        if (returnByValue)\n            return utilityScriptSerializers_1.parseEvaluationResultValue(payload.result.value);\n        return utilityScript._context.createHandle(payload.result);\n    }\n    async getProperties(handle) {\n        const objectId = handle._objectId;\n        if (!objectId)\n            return new Map();\n        const response = await this._session.send('Runtime.getObjectProperties', {\n            executionContextId: this._executionContextId,\n            objectId,\n        });\n        const result = new Map();\n        for (const property of response.properties)\n            result.set(property.name, handle._context.createHandle(property.value));\n        return result;\n    }\n    createHandle(context, remoteObject) {\n        return new js.JSHandle(context, remoteObject.subtype || remoteObject.type || '', remoteObject.objectId, potentiallyUnserializableValue(remoteObject));\n    }\n    async releaseHandle(handle) {\n        if (!handle._objectId)\n            return;\n        await this._session.send('Runtime.disposeObject', {\n            executionContextId: this._executionContextId,\n            objectId: handle._objectId,\n        });\n    }\n}\nexports.FFExecutionContext = FFExecutionContext;\nfunction checkException(exceptionDetails) {\n    if (!exceptionDetails)\n        return;\n    if (exceptionDetails.value)\n        throw new Error('Evaluation failed: ' + JSON.stringify(exceptionDetails.value));\n    else\n        throw new Error('Evaluation failed: ' + exceptionDetails.text + '\\n' + exceptionDetails.stack);\n}\nfunction rewriteError(error) {\n    if (error.message.includes('cyclic object value') || error.message.includes('Object is not serializable'))\n        return { result: { type: 'undefined', value: undefined } };\n    if (error.message.includes('Failed to find execution context with id') || error.message.includes('Execution context was destroyed!'))\n        throw new Error('Execution context was destroyed, most likely because of a navigation.');\n    if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON'))\n        stackTrace_1.rewriteErrorMessage(error, error.message + ' Are you passing a nested JSHandle?');\n    throw error;\n}\nfunction potentiallyUnserializableValue(remoteObject) {\n    const value = remoteObject.value;\n    const unserializableValue = remoteObject.unserializableValue;\n    return unserializableValue ? js.parseUnserializableValue(unserializableValue) : value;\n}\n//# sourceMappingURL=ffExecutionContext.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawTouchscreenImpl = exports.RawMouseImpl = exports.RawKeyboardImpl = void 0;\nfunction toModifiersMask(modifiers) {\n    let mask = 0;\n    if (modifiers.has('Alt'))\n        mask |= 1;\n    if (modifiers.has('Control'))\n        mask |= 2;\n    if (modifiers.has('Shift'))\n        mask |= 4;\n    if (modifiers.has('Meta'))\n        mask |= 8;\n    return mask;\n}\nfunction toButtonNumber(button) {\n    if (button === 'left')\n        return 0;\n    if (button === 'middle')\n        return 1;\n    if (button === 'right')\n        return 2;\n    return 0;\n}\nfunction toButtonsMask(buttons) {\n    let mask = 0;\n    if (buttons.has('left'))\n        mask |= 1;\n    if (buttons.has('right'))\n        mask |= 2;\n    if (buttons.has('middle'))\n        mask |= 4;\n    return mask;\n}\nclass RawKeyboardImpl {\n    constructor(client) {\n        this._client = client;\n    }\n    async keydown(modifiers, code, keyCode, keyCodeWithoutLocation, key, location, autoRepeat, text) {\n        if (code === 'MetaLeft')\n            code = 'OSLeft';\n        if (code === 'MetaRight')\n            code = 'OSRight';\n        // Firefox will figure out Enter by itself\n        if (text === '\\r')\n            text = '';\n        await this._client.send('Page.dispatchKeyEvent', {\n            type: 'keydown',\n            keyCode: keyCodeWithoutLocation,\n            code,\n            key,\n            repeat: autoRepeat,\n            location,\n            text,\n        });\n    }\n    async keyup(modifiers, code, keyCode, keyCodeWithoutLocation, key, location) {\n        if (code === 'MetaLeft')\n            code = 'OSLeft';\n        if (code === 'MetaRight')\n            code = 'OSRight';\n        await this._client.send('Page.dispatchKeyEvent', {\n            type: 'keyup',\n            key,\n            keyCode: keyCodeWithoutLocation,\n            code,\n            location,\n            repeat: false\n        });\n    }\n    async sendText(text) {\n        await this._client.send('Page.insertText', { text });\n    }\n}\nexports.RawKeyboardImpl = RawKeyboardImpl;\nclass RawMouseImpl {\n    constructor(client) {\n        this._client = client;\n    }\n    async move(x, y, button, buttons, modifiers) {\n        await this._client.send('Page.dispatchMouseEvent', {\n            type: 'mousemove',\n            button: 0,\n            buttons: toButtonsMask(buttons),\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers)\n        });\n    }\n    async down(x, y, button, buttons, modifiers, clickCount) {\n        await this._client.send('Page.dispatchMouseEvent', {\n            type: 'mousedown',\n            button: toButtonNumber(button),\n            buttons: toButtonsMask(buttons),\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n    async up(x, y, button, buttons, modifiers, clickCount) {\n        await this._client.send('Page.dispatchMouseEvent', {\n            type: 'mouseup',\n            button: toButtonNumber(button),\n            buttons: toButtonsMask(buttons),\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n}\nexports.RawMouseImpl = RawMouseImpl;\nclass RawTouchscreenImpl {\n    constructor(client) {\n        this._client = client;\n    }\n    async tap(x, y, modifiers) {\n        await this._client.send('Page.dispatchTapEvent', {\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n        });\n    }\n}\nexports.RawTouchscreenImpl = RawTouchscreenImpl;\n//# sourceMappingURL=ffInput.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FFNetworkManager = void 0;\nconst helper_1 = require(\"../helper\");\nconst network = __importStar(require(\"../network\"));\nclass FFNetworkManager {\n    constructor(session, page) {\n        this._startTime = 0;\n        this._session = session;\n        this._requests = new Map();\n        this._page = page;\n        this._eventListeners = [\n            helper_1.helper.addEventListener(session, 'Network.requestWillBeSent', this._onRequestWillBeSent.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.responseReceived', this._onResponseReceived.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.requestFinished', this._onRequestFinished.bind(this)),\n            helper_1.helper.addEventListener(session, 'Network.requestFailed', this._onRequestFailed.bind(this)),\n        ];\n    }\n    dispose() {\n        helper_1.helper.removeEventListeners(this._eventListeners);\n    }\n    async setRequestInterception(enabled) {\n        await this._session.send('Network.setRequestInterception', { enabled });\n    }\n    _onRequestWillBeSent(event) {\n        const redirectedFrom = event.redirectedFrom ? (this._requests.get(event.redirectedFrom) || null) : null;\n        const frame = redirectedFrom ? redirectedFrom.request.frame() : (event.frameId ? this._page._frameManager.frame(event.frameId) : null);\n        if (!frame)\n            return;\n        if (redirectedFrom)\n            this._requests.delete(redirectedFrom._id);\n        const request = new InterceptableRequest(this._session, frame, redirectedFrom, event);\n        this._requests.set(request._id, request);\n        this._page._frameManager.requestStarted(request.request);\n    }\n    _onResponseReceived(event) {\n        const request = this._requests.get(event.requestId);\n        if (!request)\n            return;\n        const getResponseBody = async () => {\n            const response = await this._session.send('Network.getResponseBody', {\n                requestId: request._id\n            });\n            if (response.evicted)\n                throw new Error(`Response body for ${request.request.method()} ${request.request.url()} was evicted!`);\n            return Buffer.from(response.base64body, 'base64');\n        };\n        this._startTime = event.timing.startTime;\n        const timing = {\n            startTime: this._startTime / 1000,\n            domainLookupStart: this._relativeTiming(event.timing.domainLookupStart),\n            domainLookupEnd: this._relativeTiming(event.timing.domainLookupEnd),\n            connectStart: this._relativeTiming(event.timing.connectStart),\n            secureConnectionStart: this._relativeTiming(event.timing.secureConnectionStart),\n            connectEnd: this._relativeTiming(event.timing.connectEnd),\n            requestStart: this._relativeTiming(event.timing.requestStart),\n            responseStart: this._relativeTiming(event.timing.responseStart),\n        };\n        const response = new network.Response(request.request, event.status, event.statusText, event.headers, timing, getResponseBody);\n        this._page._frameManager.requestReceivedResponse(response);\n    }\n    _onRequestFinished(event) {\n        const request = this._requests.get(event.requestId);\n        if (!request)\n            return;\n        const response = request.request._existingResponse();\n        // Keep redirected requests in the map for future reference as redirectedFrom.\n        const isRedirected = response.status() >= 300 && response.status() <= 399;\n        if (isRedirected) {\n            response._requestFinished(this._relativeTiming(event.responseEndTime), 'Response body is unavailable for redirect responses');\n        }\n        else {\n            this._requests.delete(request._id);\n            response._requestFinished(this._relativeTiming(event.responseEndTime));\n        }\n        this._page._frameManager.requestFinished(request.request);\n    }\n    _onRequestFailed(event) {\n        const request = this._requests.get(event.requestId);\n        if (!request)\n            return;\n        this._requests.delete(request._id);\n        const response = request.request._existingResponse();\n        if (response)\n            response._requestFinished(-1);\n        request.request._setFailureText(event.errorCode);\n        this._page._frameManager.requestFailed(request.request, event.errorCode === 'NS_BINDING_ABORTED');\n    }\n    _relativeTiming(time) {\n        if (!time)\n            return -1;\n        return (time - this._startTime) / 1000;\n    }\n}\nexports.FFNetworkManager = FFNetworkManager;\nconst causeToResourceType = {\n    TYPE_INVALID: 'other',\n    TYPE_OTHER: 'other',\n    TYPE_SCRIPT: 'script',\n    TYPE_IMAGE: 'image',\n    TYPE_STYLESHEET: 'stylesheet',\n    TYPE_OBJECT: 'other',\n    TYPE_DOCUMENT: 'document',\n    TYPE_SUBDOCUMENT: 'document',\n    TYPE_REFRESH: 'document',\n    TYPE_XBL: 'other',\n    TYPE_PING: 'other',\n    TYPE_XMLHTTPREQUEST: 'xhr',\n    TYPE_OBJECT_SUBREQUEST: 'other',\n    TYPE_DTD: 'other',\n    TYPE_FONT: 'font',\n    TYPE_MEDIA: 'media',\n    TYPE_WEBSOCKET: 'websocket',\n    TYPE_CSP_REPORT: 'other',\n    TYPE_XSLT: 'other',\n    TYPE_BEACON: 'other',\n    TYPE_FETCH: 'fetch',\n    TYPE_IMAGESET: 'images',\n    TYPE_WEB_MANIFEST: 'manifest',\n};\nconst internalCauseToResourceType = {\n    TYPE_INTERNAL_EVENTSOURCE: 'eventsource',\n};\nclass InterceptableRequest {\n    constructor(session, frame, redirectedFrom, payload) {\n        this._id = payload.requestId;\n        this._session = session;\n        let postDataBuffer = null;\n        if (payload.postData)\n            postDataBuffer = Buffer.from(payload.postData, 'base64');\n        this.request = new network.Request(payload.isIntercepted ? this : null, frame, redirectedFrom ? redirectedFrom.request : null, payload.navigationId, payload.url, internalCauseToResourceType[payload.internalCause] || causeToResourceType[payload.cause] || 'other', payload.method, postDataBuffer, payload.headers);\n    }\n    async continue(overrides) {\n        await this._session.sendMayFail('Network.resumeInterceptedRequest', {\n            requestId: this._id,\n            url: overrides.url,\n            method: overrides.method,\n            headers: overrides.headers,\n            postData: overrides.postData ? Buffer.from(overrides.postData).toString('base64') : undefined\n        });\n    }\n    async fulfill(response) {\n        const base64body = response.isBase64 ? response.body : Buffer.from(response.body).toString('base64');\n        await this._session.sendMayFail('Network.fulfillInterceptedRequest', {\n            requestId: this._id,\n            status: response.status,\n            statusText: network.STATUS_TEXTS[String(response.status)] || '',\n            headers: response.headers,\n            base64body,\n        });\n    }\n    async abort(errorCode) {\n        await this._session.sendMayFail('Network.abortInterceptedRequest', {\n            requestId: this._id,\n            errorCode,\n        });\n    }\n}\n//# sourceMappingURL=ffNetworkManager.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FFPage = void 0;\nconst dialog = __importStar(require(\"../dialog\"));\nconst dom = __importStar(require(\"../dom\"));\nconst helper_1 = require(\"../helper\");\nconst utils_1 = require(\"../../utils/utils\");\nconst page_1 = require(\"../page\");\nconst screenshotter_1 = require(\"../screenshotter\");\nconst ffAccessibility_1 = require(\"./ffAccessibility\");\nconst ffConnection_1 = require(\"./ffConnection\");\nconst ffExecutionContext_1 = require(\"./ffExecutionContext\");\nconst ffInput_1 = require(\"./ffInput\");\nconst ffNetworkManager_1 = require(\"./ffNetworkManager\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst UTILITY_WORLD_NAME = '__playwright_utility_world__';\nclass FFPage {\n    constructor(session, browserContext, opener) {\n        this.cspErrorsAsynchronousForInlineScipts = true;\n        this._pageCallback = () => { };\n        this._initializedPage = null;\n        this._workers = new Map();\n        this._session = session;\n        this._opener = opener;\n        this.rawKeyboard = new ffInput_1.RawKeyboardImpl(session);\n        this.rawMouse = new ffInput_1.RawMouseImpl(session);\n        this.rawTouchscreen = new ffInput_1.RawTouchscreenImpl(session);\n        this._contextIdToContext = new Map();\n        this._browserContext = browserContext;\n        this._page = new page_1.Page(this, browserContext);\n        this._networkManager = new ffNetworkManager_1.FFNetworkManager(session, this._page);\n        this._page.on(page_1.Page.Events.FrameDetached, frame => this._removeContextsForFrame(frame));\n        // TODO: remove Page.willOpenNewWindowAsynchronously from the protocol.\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._session, 'Page.eventFired', this._onEventFired.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameAttached', this._onFrameAttached.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameDetached', this._onFrameDetached.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.navigationAborted', this._onNavigationAborted.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.navigationCommitted', this._onNavigationCommitted.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.navigationStarted', this._onNavigationStarted.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.sameDocumentNavigation', this._onSameDocumentNavigation.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Runtime.executionContextCreated', this._onExecutionContextCreated.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Runtime.executionContextDestroyed', this._onExecutionContextDestroyed.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.linkClicked', event => this._onLinkClicked(event.phase)),\n            helper_1.helper.addEventListener(this._session, 'Page.uncaughtError', this._onUncaughtError.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Runtime.console', this._onConsole.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.dialogOpened', this._onDialogOpened.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.bindingCalled', this._onBindingCalled.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.fileChooserOpened', this._onFileChooserOpened.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.workerCreated', this._onWorkerCreated.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.workerDestroyed', this._onWorkerDestroyed.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.dispatchMessageFromWorker', this._onDispatchMessageFromWorker.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.crashed', this._onCrashed.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.screencastStarted', this._onScreencastStarted.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.webSocketCreated', this._onWebSocketCreated.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.webSocketClosed', this._onWebSocketClosed.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.webSocketFrameReceived', this._onWebSocketFrameReceived.bind(this)),\n            helper_1.helper.addEventListener(this._session, 'Page.webSocketFrameSent', this._onWebSocketFrameSent.bind(this)),\n        ];\n        this._pagePromise = new Promise(f => this._pageCallback = f);\n        session.once(ffConnection_1.FFSessionEvents.Disconnected, () => this._page._didDisconnect());\n        this._session.once('Page.ready', () => {\n            this._pageCallback(this._page);\n            this._initializedPage = this._page;\n        });\n        // Ideally, we somehow ensure that utility world is created before Page.ready arrives, but currently it is racy.\n        // Therefore, we can end up with an initialized page without utility world, although very unlikely.\n        this._session.send('Page.addScriptToEvaluateOnNewDocument', { script: '', worldName: UTILITY_WORLD_NAME }).catch(this._pageCallback);\n    }\n    async pageOrError() {\n        return this._pagePromise;\n    }\n    openerDelegate() {\n        return this._opener;\n    }\n    _onWebSocketCreated(event) {\n        this._page._frameManager.onWebSocketCreated(webSocketId(event.frameId, event.wsid), event.requestURL);\n        this._page._frameManager.onWebSocketRequest(webSocketId(event.frameId, event.wsid));\n    }\n    _onWebSocketClosed(event) {\n        if (event.error)\n            this._page._frameManager.webSocketError(webSocketId(event.frameId, event.wsid), event.error);\n        this._page._frameManager.webSocketClosed(webSocketId(event.frameId, event.wsid));\n    }\n    _onWebSocketFrameReceived(event) {\n        this._page._frameManager.webSocketFrameReceived(webSocketId(event.frameId, event.wsid), event.opcode, event.data);\n    }\n    _onWebSocketFrameSent(event) {\n        this._page._frameManager.onWebSocketFrameSent(webSocketId(event.frameId, event.wsid), event.opcode, event.data);\n    }\n    _onExecutionContextCreated(payload) {\n        const { executionContextId, auxData } = payload;\n        const frame = this._page._frameManager.frame(auxData ? auxData.frameId : null);\n        if (!frame)\n            return;\n        const delegate = new ffExecutionContext_1.FFExecutionContext(this._session, executionContextId);\n        let worldName = null;\n        if (auxData.name === UTILITY_WORLD_NAME)\n            worldName = 'utility';\n        else if (!auxData.name)\n            worldName = 'main';\n        const context = new dom.FrameExecutionContext(delegate, frame, worldName);\n        if (worldName)\n            frame._contextCreated(worldName, context);\n        this._contextIdToContext.set(executionContextId, context);\n    }\n    _onExecutionContextDestroyed(payload) {\n        const { executionContextId } = payload;\n        const context = this._contextIdToContext.get(executionContextId);\n        if (!context)\n            return;\n        this._contextIdToContext.delete(executionContextId);\n        context.frame._contextDestroyed(context);\n    }\n    _removeContextsForFrame(frame) {\n        for (const [contextId, context] of this._contextIdToContext) {\n            if (context.frame === frame)\n                this._contextIdToContext.delete(contextId);\n        }\n    }\n    _onLinkClicked(phase) {\n        if (phase === 'before')\n            this._page._frameManager.frameWillPotentiallyRequestNavigation();\n        else\n            this._page._frameManager.frameDidPotentiallyRequestNavigation();\n    }\n    _onNavigationStarted(params) {\n        this._page._frameManager.frameRequestedNavigation(params.frameId, params.navigationId);\n    }\n    _onNavigationAborted(params) {\n        this._page._frameManager.frameAbortedNavigation(params.frameId, params.errorText, params.navigationId);\n    }\n    _onNavigationCommitted(params) {\n        for (const [workerId, worker] of this._workers) {\n            if (worker.frameId === params.frameId)\n                this._onWorkerDestroyed({ workerId });\n        }\n        this._page._frameManager.frameCommittedNewDocumentNavigation(params.frameId, params.url, params.name || '', params.navigationId || '', false);\n    }\n    _onSameDocumentNavigation(params) {\n        this._page._frameManager.frameCommittedSameDocumentNavigation(params.frameId, params.url);\n    }\n    _onFrameAttached(params) {\n        this._page._frameManager.frameAttached(params.frameId, params.parentFrameId);\n    }\n    _onFrameDetached(params) {\n        this._page._frameManager.frameDetached(params.frameId);\n    }\n    _onEventFired(payload) {\n        const { frameId, name } = payload;\n        if (name === 'load')\n            this._page._frameManager.frameLifecycleEvent(frameId, 'load');\n        if (name === 'DOMContentLoaded')\n            this._page._frameManager.frameLifecycleEvent(frameId, 'domcontentloaded');\n    }\n    _onUncaughtError(params) {\n        const message = params.message.startsWith('Error: ') ? params.message.substring(7) : params.message;\n        const error = new Error(message);\n        error.stack = params.stack;\n        this._page.emit(page_1.Page.Events.PageError, error);\n    }\n    _onConsole(payload) {\n        const { type, args, executionContextId, location } = payload;\n        const context = this._contextIdToContext.get(executionContextId);\n        this._page._addConsoleMessage(type, args.map(arg => context.createHandle(arg)), location);\n    }\n    _onDialogOpened(params) {\n        this._page.emit(page_1.Page.Events.Dialog, new dialog.Dialog(this._page, params.type, params.message, async (accept, promptText) => {\n            await this._session.sendMayFail('Page.handleDialog', { dialogId: params.dialogId, accept, promptText });\n        }, params.defaultValue));\n    }\n    async _onBindingCalled(event) {\n        const context = this._contextIdToContext.get(event.executionContextId);\n        const pageOrError = await this.pageOrError();\n        if (!(pageOrError instanceof Error))\n            await this._page._onBindingCalled(event.payload, context);\n    }\n    async _onFileChooserOpened(payload) {\n        const { executionContextId, element } = payload;\n        const context = this._contextIdToContext.get(executionContextId);\n        const handle = context.createHandle(element).asElement();\n        await this._page._onFileChooserOpened(handle);\n    }\n    async _onWorkerCreated(event) {\n        const workerId = event.workerId;\n        const worker = new page_1.Worker(this._page, event.url);\n        const workerSession = new ffConnection_1.FFSession(this._session._connection, 'worker', workerId, (message) => {\n            this._session.send('Page.sendMessageToWorker', {\n                frameId: event.frameId,\n                workerId: workerId,\n                message: JSON.stringify(message)\n            }).catch(e => {\n                workerSession.dispatchMessage({ id: message.id, method: '', params: {}, error: { message: e.message, data: undefined } });\n            });\n        });\n        this._workers.set(workerId, { session: workerSession, frameId: event.frameId });\n        this._page._addWorker(workerId, worker);\n        workerSession.once('Runtime.executionContextCreated', event => {\n            worker._createExecutionContext(new ffExecutionContext_1.FFExecutionContext(workerSession, event.executionContextId));\n        });\n        workerSession.on('Runtime.console', event => {\n            const { type, args, location } = event;\n            const context = worker._existingExecutionContext;\n            this._page._addConsoleMessage(type, args.map(arg => context.createHandle(arg)), location);\n        });\n        // Note: we receive worker exceptions directly from the page.\n    }\n    _onWorkerDestroyed(event) {\n        const workerId = event.workerId;\n        const worker = this._workers.get(workerId);\n        if (!worker)\n            return;\n        worker.session.dispose();\n        this._workers.delete(workerId);\n        this._page._removeWorker(workerId);\n    }\n    async _onDispatchMessageFromWorker(event) {\n        const worker = this._workers.get(event.workerId);\n        if (!worker)\n            return;\n        worker.session.dispatchMessage(JSON.parse(event.message));\n    }\n    async _onCrashed(event) {\n        this._session.markAsCrashed();\n        this._page._didCrash();\n    }\n    _onScreencastStarted(event) {\n        this._browserContext._browser._videoStarted(this._browserContext, event.screencastId, event.file, this.pageOrError());\n    }\n    async exposeBinding(binding) {\n        if (binding.world !== 'main')\n            throw new Error('Only main context bindings are supported in Firefox.');\n        await this._session.send('Page.addBinding', { name: binding.name, script: binding.source });\n    }\n    didClose() {\n        this._session.dispose();\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        this._networkManager.dispose();\n        this._page._didClose();\n    }\n    async navigateFrame(frame, url, referer) {\n        const response = await this._session.send('Page.navigate', { url, referer, frameId: frame._id });\n        return { newDocumentId: response.navigationId || undefined };\n    }\n    async updateExtraHTTPHeaders() {\n        await this._session.send('Network.setExtraHTTPHeaders', { headers: this._page._state.extraHTTPHeaders || [] });\n    }\n    async setViewportSize(viewportSize) {\n        utils_1.assert(this._page._state.viewportSize === viewportSize);\n        await this._session.send('Page.setViewportSize', {\n            viewportSize: {\n                width: viewportSize.width,\n                height: viewportSize.height,\n            },\n        });\n    }\n    async bringToFront() {\n        await this._session.send('Page.bringToFront', {});\n    }\n    async updateEmulateMedia() {\n        const colorScheme = this._page._state.colorScheme || this._browserContext._options.colorScheme || 'light';\n        await this._session.send('Page.setEmulatedMedia', {\n            // Empty string means reset.\n            type: this._page._state.mediaType === null ? '' : this._page._state.mediaType,\n            colorScheme\n        });\n    }\n    async updateRequestInterception() {\n        await this._networkManager.setRequestInterception(this._page._needsRequestInterception());\n    }\n    async setFileChooserIntercepted(enabled) {\n        await this._session.send('Page.setInterceptFileChooserDialog', { enabled }).catch(e => { }); // target can be closed.\n    }\n    async opener() {\n        if (!this._opener)\n            return null;\n        const result = await this._opener.pageOrError();\n        if (result instanceof page_1.Page && !result.isClosed())\n            return result;\n        return null;\n    }\n    async reload() {\n        await this._session.send('Page.reload', { frameId: this._page.mainFrame()._id });\n    }\n    async goBack() {\n        const { success } = await this._session.send('Page.goBack', { frameId: this._page.mainFrame()._id });\n        return success;\n    }\n    async goForward() {\n        const { success } = await this._session.send('Page.goForward', { frameId: this._page.mainFrame()._id });\n        return success;\n    }\n    async evaluateOnNewDocument(source) {\n        await this._session.send('Page.addScriptToEvaluateOnNewDocument', { script: source });\n    }\n    async closePage(runBeforeUnload) {\n        await this._session.send('Page.close', { runBeforeUnload });\n    }\n    canScreenshotOutsideViewport() {\n        return true;\n    }\n    async setBackgroundColor(color) {\n        if (color)\n            throw new Error('Not implemented');\n    }\n    async takeScreenshot(format, documentRect, viewportRect, quality) {\n        if (!documentRect) {\n            const context = await this._page.mainFrame()._utilityContext();\n            const scrollOffset = await context.evaluate(() => ({ x: window.scrollX, y: window.scrollY }));\n            documentRect = {\n                x: viewportRect.x + scrollOffset.x,\n                y: viewportRect.y + scrollOffset.y,\n                width: viewportRect.width,\n                height: viewportRect.height,\n            };\n        }\n        // TODO: remove fullPage option from Page.screenshot.\n        // TODO: remove Page.getBoundingBox method.\n        const { data } = await this._session.send('Page.screenshot', {\n            mimeType: ('image/' + format),\n            clip: documentRect,\n        }).catch(e => {\n            if (e instanceof Error && e.message.includes('document.documentElement is null'))\n                stackTrace_1.rewriteErrorMessage(e, screenshotter_1.kScreenshotDuringNavigationError);\n            throw e;\n        });\n        return Buffer.from(data, 'base64');\n    }\n    async resetViewport() {\n        utils_1.assert(false, 'Should not be called');\n    }\n    async getContentFrame(handle) {\n        const { contentFrameId } = await this._session.send('Page.describeNode', {\n            frameId: handle._context.frame._id,\n            objectId: handle._objectId,\n        });\n        if (!contentFrameId)\n            return null;\n        return this._page._frameManager.frame(contentFrameId);\n    }\n    async getOwnerFrame(handle) {\n        const { ownerFrameId } = await this._session.send('Page.describeNode', {\n            frameId: handle._context.frame._id,\n            objectId: handle._objectId\n        });\n        return ownerFrameId || null;\n    }\n    isElementHandle(remoteObject) {\n        return remoteObject.subtype === 'node';\n    }\n    async getBoundingBox(handle) {\n        const quads = await this.getContentQuads(handle);\n        if (!quads || !quads.length)\n            return null;\n        let minX = Infinity;\n        let maxX = -Infinity;\n        let minY = Infinity;\n        let maxY = -Infinity;\n        for (const quad of quads) {\n            for (const point of quad) {\n                minX = Math.min(minX, point.x);\n                maxX = Math.max(maxX, point.x);\n                minY = Math.min(minY, point.y);\n                maxY = Math.max(maxY, point.y);\n            }\n        }\n        return { x: minX, y: minY, width: maxX - minX, height: maxY - minY };\n    }\n    async scrollRectIntoViewIfNeeded(handle, rect) {\n        return await this._session.send('Page.scrollIntoViewIfNeeded', {\n            frameId: handle._context.frame._id,\n            objectId: handle._objectId,\n            rect,\n        }).then(() => 'done').catch(e => {\n            if (e instanceof Error && e.message.includes('Node is detached from document'))\n                return 'error:notconnected';\n            if (e instanceof Error && e.message.includes('Node does not have a layout object'))\n                return 'error:notvisible';\n            throw e;\n        });\n    }\n    rafCountForStablePosition() {\n        return 1;\n    }\n    async getContentQuads(handle) {\n        const result = await this._session.sendMayFail('Page.getContentQuads', {\n            frameId: handle._context.frame._id,\n            objectId: handle._objectId,\n        });\n        if (!result)\n            return null;\n        return result.quads.map(quad => [quad.p1, quad.p2, quad.p3, quad.p4]);\n    }\n    async setInputFiles(handle, files) {\n        await handle.evaluateInUtility(([injected, node, files]) => injected.setInputFiles(node, files), files);\n    }\n    async adoptElementHandle(handle, to) {\n        const result = await this._session.send('Page.adoptNode', {\n            frameId: handle._context.frame._id,\n            objectId: handle._objectId,\n            executionContextId: to._delegate._executionContextId\n        });\n        if (!result.remoteObject)\n            throw new Error('Unable to adopt element handle from a different document');\n        return to.createHandle(result.remoteObject);\n    }\n    async getAccessibilityTree(needle) {\n        return ffAccessibility_1.getAccessibilityTree(this._session, needle);\n    }\n    async inputActionEpilogue() {\n    }\n    async getFrameElement(frame) {\n        const parent = frame.parentFrame();\n        if (!parent)\n            throw new Error('Frame has been detached.');\n        const handles = await this._page.selectors._queryAll(parent, 'iframe', undefined);\n        const items = await Promise.all(handles.map(async (handle) => {\n            const frame = await handle.contentFrame().catch(e => null);\n            return { handle, frame };\n        }));\n        const result = items.find(item => item.frame === frame);\n        items.map(item => item === result ? Promise.resolve() : item.handle.dispose());\n        if (!result)\n            throw new Error('Frame has been detached.');\n        return result.handle;\n    }\n}\nexports.FFPage = FFPage;\nfunction webSocketId(frameId, wsid) {\n    return `${frameId}---${wsid}`;\n}\n//# sourceMappingURL=ffPage.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Firefox = void 0;\nconst os = __importStar(require(\"os\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst ffBrowser_1 = require(\"./ffBrowser\");\nconst ffConnection_1 = require(\"./ffConnection\");\nconst browserType_1 = require(\"../browserType\");\nclass Firefox extends browserType_1.BrowserType {\n    constructor(playwrightOptions) {\n        super('firefox', playwrightOptions);\n    }\n    _connectToTransport(transport, options) {\n        return ffBrowser_1.FFBrowser.connect(transport, options);\n    }\n    _rewriteStartupError(error) {\n        return error;\n    }\n    _amendEnvironment(env, userDataDir, executable, browserArguments) {\n        if (!path_1.default.isAbsolute(os.homedir()))\n            throw new Error(`Cannot launch Firefox with relative home directory. Did you set ${os.platform() === 'win32' ? 'USERPROFILE' : 'HOME'} to a relative path?`);\n        if (os.platform() === 'linux') {\n            return {\n                ...env,\n                // On linux Juggler ships the libstdc++ it was linked against.\n                LD_LIBRARY_PATH: `${path_1.default.dirname(executable)}:${process.env.LD_LIBRARY_PATH}`,\n            };\n        }\n        if (os.platform() === 'darwin') {\n            return {\n                ...env,\n                // @see https://github.com/microsoft/playwright/issues/5721\n                MOZ_WEBRENDER: 0,\n            };\n        }\n        return env;\n    }\n    _attemptToGracefullyCloseBrowser(transport) {\n        const message = { method: 'Browser.close', params: {}, id: ffConnection_1.kBrowserCloseMessageId };\n        transport.send(message);\n    }\n    _defaultArgs(options, isPersistent, userDataDir) {\n        const { args = [], devtools, headless } = options;\n        if (devtools)\n            console.warn('devtools parameter is not supported as a launch argument in Firefox. You can launch the devtools window manually.');\n        const userDataDirArg = args.find(arg => arg.startsWith('-profile') || arg.startsWith('--profile'));\n        if (userDataDirArg)\n            throw new Error('Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --profile argument');\n        if (args.find(arg => arg.startsWith('-juggler')))\n            throw new Error('Use the port parameter instead of -juggler argument');\n        const firefoxUserPrefs = isPersistent ? undefined : options.firefoxUserPrefs;\n        if (firefoxUserPrefs) {\n            const lines = [];\n            for (const [name, value] of Object.entries(firefoxUserPrefs))\n                lines.push(`user_pref(${JSON.stringify(name)}, ${JSON.stringify(value)});`);\n            fs_1.default.writeFileSync(path_1.default.join(userDataDir, 'user.js'), lines.join('\\n'));\n        }\n        const firefoxArguments = ['-no-remote'];\n        if (headless) {\n            firefoxArguments.push('-headless');\n        }\n        else {\n            firefoxArguments.push('-wait-for-browser');\n            firefoxArguments.push('-foreground');\n        }\n        firefoxArguments.push(`-profile`, userDataDir);\n        firefoxArguments.push('-juggler-pipe');\n        firefoxArguments.push(...args);\n        if (isPersistent)\n            firefoxArguments.push('about:blank');\n        else\n            firefoxArguments.push('-silent');\n        return firefoxArguments;\n    }\n}\nexports.Firefox = Firefox;\n//# sourceMappingURL=firefox.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Frame = exports.FrameManager = void 0;\nconst dom = __importStar(require(\"./dom\"));\nconst helper_1 = require(\"./helper\");\nconst js = __importStar(require(\"./javascript\"));\nconst network = __importStar(require(\"./network\"));\nconst page_1 = require(\"./page\");\nconst types = __importStar(require(\"./types\"));\nconst progress_1 = require(\"./progress\");\nconst utils_1 = require(\"../utils/utils\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass FrameManager {\n    constructor(page) {\n        this._frames = new Map();\n        this._consoleMessageTags = new Map();\n        this._signalBarriers = new Set();\n        this._webSockets = new Map();\n        this._page = page;\n        this._mainFrame = undefined;\n    }\n    dispose() {\n        for (const frame of this._frames.values())\n            frame._stopNetworkIdleTimer();\n    }\n    mainFrame() {\n        return this._mainFrame;\n    }\n    frames() {\n        const frames = [];\n        collect(this._mainFrame);\n        return frames;\n        function collect(frame) {\n            frames.push(frame);\n            for (const subframe of frame.childFrames())\n                collect(subframe);\n        }\n    }\n    frame(frameId) {\n        return this._frames.get(frameId) || null;\n    }\n    frameAttached(frameId, parentFrameId) {\n        const parentFrame = parentFrameId ? this._frames.get(parentFrameId) : null;\n        if (!parentFrame) {\n            if (this._mainFrame) {\n                // Update frame id to retain frame identity on cross-process navigation.\n                this._frames.delete(this._mainFrame._id);\n                this._mainFrame._id = frameId;\n            }\n            else {\n                utils_1.assert(!this._frames.has(frameId));\n                this._mainFrame = new Frame(this._page, frameId, parentFrame);\n            }\n            this._frames.set(frameId, this._mainFrame);\n            return this._mainFrame;\n        }\n        else {\n            utils_1.assert(!this._frames.has(frameId));\n            const frame = new Frame(this._page, frameId, parentFrame);\n            this._frames.set(frameId, frame);\n            this._page.emit(page_1.Page.Events.FrameAttached, frame);\n            return frame;\n        }\n    }\n    async waitForSignalsCreatedBy(progress, noWaitAfter, action, source) {\n        if (noWaitAfter)\n            return action();\n        const barrier = new SignalBarrier(progress);\n        this._signalBarriers.add(barrier);\n        if (progress)\n            progress.cleanupWhenAborted(() => this._signalBarriers.delete(barrier));\n        const result = await action();\n        if (source === 'input') {\n            await this._page._delegate.inputActionEpilogue();\n            if (progress)\n                await progress.afterInputAction();\n        }\n        await barrier.waitFor();\n        this._signalBarriers.delete(barrier);\n        // Resolve in the next task, after all waitForNavigations.\n        await new Promise(utils_1.makeWaitForNextTask());\n        return result;\n    }\n    frameWillPotentiallyRequestNavigation() {\n        for (const barrier of this._signalBarriers)\n            barrier.retain();\n    }\n    frameDidPotentiallyRequestNavigation() {\n        for (const barrier of this._signalBarriers)\n            barrier.release();\n    }\n    frameRequestedNavigation(frameId, documentId) {\n        const frame = this._frames.get(frameId);\n        if (!frame)\n            return;\n        for (const barrier of this._signalBarriers)\n            barrier.addFrameNavigation(frame);\n        if (frame._pendingDocument && frame._pendingDocument.documentId === documentId) {\n            // Do not override request with undefined.\n            return;\n        }\n        frame._pendingDocument = { documentId, request: undefined };\n    }\n    frameCommittedNewDocumentNavigation(frameId, url, name, documentId, initial) {\n        const frame = this._frames.get(frameId);\n        this.removeChildFramesRecursively(frame);\n        this.clearWebSockets(frame);\n        frame._url = url;\n        frame._name = name;\n        let keepPending;\n        if (frame._pendingDocument) {\n            if (frame._pendingDocument.documentId === undefined) {\n                // Pending with unknown documentId - assume it is the one being committed.\n                frame._pendingDocument.documentId = documentId;\n            }\n            if (frame._pendingDocument.documentId === documentId) {\n                // Committing a pending document.\n                frame._currentDocument = frame._pendingDocument;\n            }\n            else {\n                // Sometimes, we already have a new pending when the old one commits.\n                // An example would be Chromium error page followed by a new navigation request,\n                // where the error page commit arrives after Network.requestWillBeSent for the\n                // new navigation.\n                // We commit, but keep the pending request since it's not done yet.\n                keepPending = frame._pendingDocument;\n                frame._currentDocument = { documentId, request: undefined };\n            }\n            frame._pendingDocument = undefined;\n        }\n        else {\n            // No pending - just commit a new document.\n            frame._currentDocument = { documentId, request: undefined };\n        }\n        frame._onClearLifecycle();\n        const navigationEvent = { url, name, newDocument: frame._currentDocument };\n        frame.emit(Frame.Events.Navigation, navigationEvent);\n        if (!initial) {\n            debugLogger_1.debugLogger.log('api', `  navigated to \"${url}\"`);\n            this._page.frameNavigatedToNewDocument(frame);\n        }\n        // Restore pending if any - see comments above about keepPending.\n        frame._pendingDocument = keepPending;\n    }\n    frameCommittedSameDocumentNavigation(frameId, url) {\n        const frame = this._frames.get(frameId);\n        if (!frame)\n            return;\n        frame._url = url;\n        const navigationEvent = { url, name: frame._name };\n        frame.emit(Frame.Events.Navigation, navigationEvent);\n        debugLogger_1.debugLogger.log('api', `  navigated to \"${url}\"`);\n    }\n    frameAbortedNavigation(frameId, errorText, documentId) {\n        const frame = this._frames.get(frameId);\n        if (!frame || !frame._pendingDocument)\n            return;\n        if (documentId !== undefined && frame._pendingDocument.documentId !== documentId)\n            return;\n        const navigationEvent = {\n            url: frame._url,\n            name: frame._name,\n            newDocument: frame._pendingDocument,\n            error: new Error(errorText),\n        };\n        frame._pendingDocument = undefined;\n        frame.emit(Frame.Events.Navigation, navigationEvent);\n    }\n    frameDetached(frameId) {\n        const frame = this._frames.get(frameId);\n        if (frame)\n            this._removeFramesRecursively(frame);\n    }\n    frameStoppedLoading(frameId) {\n        this.frameLifecycleEvent(frameId, 'domcontentloaded');\n        this.frameLifecycleEvent(frameId, 'load');\n    }\n    frameLifecycleEvent(frameId, event) {\n        const frame = this._frames.get(frameId);\n        if (frame)\n            frame._onLifecycleEvent(event);\n    }\n    requestStarted(request) {\n        const frame = request.frame();\n        this._inflightRequestStarted(request);\n        if (request._documentId)\n            frame._pendingDocument = { documentId: request._documentId, request };\n        if (request._isFavicon) {\n            const route = request._route();\n            if (route)\n                route.continue();\n            return;\n        }\n        this._page._requestStarted(request);\n    }\n    requestReceivedResponse(response) {\n        if (!response.request()._isFavicon)\n            this._page.emit(page_1.Page.Events.Response, response);\n    }\n    requestFinished(request) {\n        this._inflightRequestFinished(request);\n        if (!request._isFavicon)\n            this._page.emit(page_1.Page.Events.RequestFinished, request);\n    }\n    requestFailed(request, canceled) {\n        const frame = request.frame();\n        this._inflightRequestFinished(request);\n        if (frame._pendingDocument && frame._pendingDocument.request === request) {\n            let errorText = request.failure().errorText;\n            if (canceled)\n                errorText += '; maybe frame was detached?';\n            this.frameAbortedNavigation(frame._id, errorText, frame._pendingDocument.documentId);\n        }\n        if (!request._isFavicon)\n            this._page.emit(page_1.Page.Events.RequestFailed, request);\n    }\n    removeChildFramesRecursively(frame) {\n        for (const child of frame.childFrames())\n            this._removeFramesRecursively(child);\n    }\n    _removeFramesRecursively(frame) {\n        this.removeChildFramesRecursively(frame);\n        frame._onDetached();\n        this._frames.delete(frame._id);\n        if (!this._page.isClosed())\n            this._page.emit(page_1.Page.Events.FrameDetached, frame);\n    }\n    _inflightRequestFinished(request) {\n        const frame = request.frame();\n        if (request._isFavicon)\n            return;\n        if (!frame._inflightRequests.has(request))\n            return;\n        frame._inflightRequests.delete(request);\n        if (frame._inflightRequests.size === 0)\n            frame._startNetworkIdleTimer();\n    }\n    _inflightRequestStarted(request) {\n        const frame = request.frame();\n        if (request._isFavicon)\n            return;\n        frame._inflightRequests.add(request);\n        if (frame._inflightRequests.size === 1)\n            frame._stopNetworkIdleTimer();\n    }\n    interceptConsoleMessage(message) {\n        if (message.type() !== 'debug')\n            return false;\n        const tag = message.text();\n        const handler = this._consoleMessageTags.get(tag);\n        if (!handler)\n            return false;\n        this._consoleMessageTags.delete(tag);\n        handler();\n        return true;\n    }\n    clearWebSockets(frame) {\n        // TODO: attribute sockets to frames.\n        if (frame.parentFrame())\n            return;\n        this._webSockets.clear();\n    }\n    onWebSocketCreated(requestId, url) {\n        const ws = new network.WebSocket(this._page, url);\n        this._webSockets.set(requestId, ws);\n    }\n    onWebSocketRequest(requestId) {\n        const ws = this._webSockets.get(requestId);\n        if (ws)\n            this._page.emit(page_1.Page.Events.WebSocket, ws);\n    }\n    onWebSocketResponse(requestId, status, statusText) {\n        const ws = this._webSockets.get(requestId);\n        if (status < 400)\n            return;\n        if (ws)\n            ws.error(`${statusText}: ${status}`);\n    }\n    onWebSocketFrameSent(requestId, opcode, data) {\n        const ws = this._webSockets.get(requestId);\n        if (ws)\n            ws.frameSent(opcode, data);\n    }\n    webSocketFrameReceived(requestId, opcode, data) {\n        const ws = this._webSockets.get(requestId);\n        if (ws)\n            ws.frameReceived(opcode, data);\n    }\n    webSocketClosed(requestId) {\n        const ws = this._webSockets.get(requestId);\n        if (ws)\n            ws.closed();\n        this._webSockets.delete(requestId);\n    }\n    webSocketError(requestId, errorMessage) {\n        const ws = this._webSockets.get(requestId);\n        if (ws)\n            ws.error(errorMessage);\n    }\n}\nexports.FrameManager = FrameManager;\nclass Frame extends instrumentation_1.SdkObject {\n    constructor(page, id, parentFrame) {\n        super(page);\n        this._firedLifecycleEvents = new Set();\n        this._subtreeLifecycleEvents = new Set();\n        this._url = '';\n        this._detached = false;\n        this._contextData = new Map();\n        this._childFrames = new Set();\n        this._name = '';\n        this._inflightRequests = new Set();\n        this._setContentCounter = 0;\n        this._detachedCallback = () => { };\n        this.uniqueId = parentFrame ? `frame@${utils_1.createGuid()}` : page.uniqueId;\n        this.attribution.frame = this;\n        this._id = id;\n        this._page = page;\n        this._parentFrame = parentFrame;\n        this._currentDocument = { documentId: undefined, request: undefined };\n        this._detachedPromise = new Promise(x => this._detachedCallback = x);\n        this._contextData.set('main', { contextPromise: new Promise(() => { }), contextResolveCallback: () => { }, context: null, rerunnableTasks: new Set() });\n        this._contextData.set('utility', { contextPromise: new Promise(() => { }), contextResolveCallback: () => { }, context: null, rerunnableTasks: new Set() });\n        this._setContext('main', null);\n        this._setContext('utility', null);\n        if (this._parentFrame)\n            this._parentFrame._childFrames.add(this);\n    }\n    _onLifecycleEvent(event) {\n        if (this._firedLifecycleEvents.has(event))\n            return;\n        this._firedLifecycleEvents.add(event);\n        // Recalculate subtree lifecycle for the whole tree - it should not be that big.\n        this._page.mainFrame()._recalculateLifecycle();\n    }\n    _onClearLifecycle() {\n        this._firedLifecycleEvents.clear();\n        // Recalculate subtree lifecycle for the whole tree - it should not be that big.\n        this._page.mainFrame()._recalculateLifecycle();\n        // Keep the current navigation request if any.\n        this._inflightRequests = new Set(Array.from(this._inflightRequests).filter(request => request === this._currentDocument.request));\n        this._stopNetworkIdleTimer();\n        if (this._inflightRequests.size === 0)\n            this._startNetworkIdleTimer();\n    }\n    _recalculateLifecycle() {\n        const events = new Set(this._firedLifecycleEvents);\n        for (const child of this._childFrames) {\n            child._recalculateLifecycle();\n            // We require a particular lifecycle event to be fired in the whole\n            // frame subtree, and then consider it done.\n            for (const event of events) {\n                if (!child._subtreeLifecycleEvents.has(event))\n                    events.delete(event);\n            }\n        }\n        const mainFrame = this._page.mainFrame();\n        for (const event of events) {\n            // Checking whether we have already notified about this event.\n            if (!this._subtreeLifecycleEvents.has(event)) {\n                this.emit(Frame.Events.AddLifecycle, event);\n                if (this === mainFrame && this._url !== 'about:blank')\n                    debugLogger_1.debugLogger.log('api', `  \"${event}\" event fired`);\n                if (this === mainFrame && event === 'load')\n                    this._page.emit(page_1.Page.Events.Load);\n                if (this === mainFrame && event === 'domcontentloaded')\n                    this._page.emit(page_1.Page.Events.DOMContentLoaded);\n            }\n        }\n        for (const event of this._subtreeLifecycleEvents) {\n            if (!events.has(event))\n                this.emit(Frame.Events.RemoveLifecycle, event);\n        }\n        this._subtreeLifecycleEvents = events;\n    }\n    async raceNavigationAction(action) {\n        return Promise.race([\n            this._page._disconnectedPromise.then(() => { throw new Error('Navigation failed because page was closed!'); }),\n            this._page._crashedPromise.then(() => { throw new Error('Navigation failed because page crashed!'); }),\n            this._detachedPromise.then(() => { throw new Error('Navigating frame was detached!'); }),\n            action(),\n        ]);\n    }\n    async goto(metadata, url, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this._goto(progress, url, options), this._page._timeoutSettings.navigationTimeout(options));\n    }\n    async _goto(progress, url, options) {\n        return this.raceNavigationAction(async () => {\n            const waitUntil = verifyLifecycle('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n            progress.log(`navigating to \"${url}\", waiting until \"${waitUntil}\"`);\n            const headers = this._page._state.extraHTTPHeaders || [];\n            const refererHeader = headers.find(h => h.name.toLowerCase() === 'referer');\n            let referer = refererHeader ? refererHeader.value : undefined;\n            if (options.referer !== undefined) {\n                if (referer !== undefined && referer !== options.referer)\n                    throw new Error('\"referer\" is already specified as extra HTTP header');\n                referer = options.referer;\n            }\n            url = helper_1.helper.completeUserURL(url);\n            const sameDocument = helper_1.helper.waitForEvent(progress, this, Frame.Events.Navigation, (e) => !e.newDocument);\n            const navigateResult = await this._page._delegate.navigateFrame(this, url, referer);\n            let event;\n            if (navigateResult.newDocumentId) {\n                sameDocument.dispose();\n                event = await helper_1.helper.waitForEvent(progress, this, Frame.Events.Navigation, (event) => {\n                    // We are interested either in this specific document, or any other document that\n                    // did commit and replaced the expected document.\n                    return event.newDocument && (event.newDocument.documentId === navigateResult.newDocumentId || !event.error);\n                }).promise;\n                if (event.newDocument.documentId !== navigateResult.newDocumentId) {\n                    // This is just a sanity check. In practice, new navigation should\n                    // cancel the previous one and report \"request cancelled\"-like error.\n                    throw new Error('Navigation interrupted by another one');\n                }\n                if (event.error)\n                    throw event.error;\n            }\n            else {\n                event = await sameDocument.promise;\n            }\n            if (!this._subtreeLifecycleEvents.has(waitUntil))\n                await helper_1.helper.waitForEvent(progress, this, Frame.Events.AddLifecycle, (e) => e === waitUntil).promise;\n            const request = event.newDocument ? event.newDocument.request : undefined;\n            const response = request ? request._finalRequest().response() : null;\n            await this._page._doSlowMo();\n            return response;\n        });\n    }\n    async _waitForNavigation(progress, options) {\n        const waitUntil = verifyLifecycle('waitUntil', options.waitUntil === undefined ? 'load' : options.waitUntil);\n        progress.log(`waiting for navigation until \"${waitUntil}\"`);\n        const navigationEvent = await helper_1.helper.waitForEvent(progress, this, Frame.Events.Navigation, (event) => {\n            // Any failed navigation results in a rejection.\n            if (event.error)\n                return true;\n            progress.log(`  navigated to \"${this._url}\"`);\n            return true;\n        }).promise;\n        if (navigationEvent.error)\n            throw navigationEvent.error;\n        if (!this._subtreeLifecycleEvents.has(waitUntil))\n            await helper_1.helper.waitForEvent(progress, this, Frame.Events.AddLifecycle, (e) => e === waitUntil).promise;\n        const request = navigationEvent.newDocument ? navigationEvent.newDocument.request : undefined;\n        return request ? request._finalRequest().response() : null;\n    }\n    async _waitForLoadState(progress, state) {\n        const waitUntil = verifyLifecycle('state', state);\n        if (!this._subtreeLifecycleEvents.has(waitUntil))\n            await helper_1.helper.waitForEvent(progress, this, Frame.Events.AddLifecycle, (e) => e === waitUntil).promise;\n    }\n    async frameElement() {\n        return this._page._delegate.getFrameElement(this);\n    }\n    _context(world) {\n        if (this._detached)\n            throw new Error(`Execution Context is not available in detached frame \"${this.url()}\" (are you trying to evaluate?)`);\n        return this._contextData.get(world).contextPromise;\n    }\n    _mainContext() {\n        return this._context('main');\n    }\n    _existingMainContext() {\n        var _a;\n        return ((_a = this._contextData.get('main')) === null || _a === void 0 ? void 0 : _a.context) || null;\n    }\n    _utilityContext() {\n        return this._context('utility');\n    }\n    async evaluateExpressionHandleAndWaitForSignals(expression, isFunction, arg, world = 'main') {\n        const context = await this._context(world);\n        const handle = await context.evaluateExpressionHandleAndWaitForSignals(expression, isFunction, arg);\n        if (world === 'main')\n            await this._page._doSlowMo();\n        return handle;\n    }\n    async evaluateExpression(expression, isFunction, arg, world = 'main') {\n        const context = await this._context(world);\n        const value = await context.evaluateExpression(expression, isFunction, arg);\n        if (world === 'main')\n            await this._page._doSlowMo();\n        return value;\n    }\n    async evaluateExpressionAndWaitForSignals(expression, isFunction, arg, world = 'main') {\n        const context = await this._context(world);\n        const value = await context.evaluateExpressionAndWaitForSignals(expression, isFunction, arg);\n        if (world === 'main')\n            await this._page._doSlowMo();\n        return value;\n    }\n    async $(selector) {\n        return this._page.selectors._query(this, selector);\n    }\n    async waitForSelector(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        if (options.visibility)\n            throw new Error('options.visibility is not supported, did you mean options.state?');\n        if (options.waitFor && options.waitFor !== 'visible')\n            throw new Error('options.waitFor is not supported, did you mean options.state?');\n        const { state = 'visible' } = options;\n        if (!['attached', 'detached', 'visible', 'hidden'].includes(state))\n            throw new Error(`state: expected one of (attached|detached|visible|hidden)`);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.waitForSelectorTask(info, state);\n        return controller.run(async (progress) => {\n            progress.log(`waiting for selector \"${selector}\"${state === 'attached' ? '' : ' to be ' + state}`);\n            const result = await this._scheduleRerunnableHandleTask(progress, info.world, task);\n            if (!result.asElement()) {\n                result.dispose();\n                return null;\n            }\n            const handle = result.asElement();\n            return handle._adoptTo(await this._mainContext());\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async dispatchEvent(metadata, selector, type, eventInit, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.dispatchEventTask(info, type, eventInit || {});\n        await controller.run(async (progress) => {\n            progress.log(`Dispatching \"${type}\" event on selector \"${selector}\"...`);\n            // Note: we always dispatch events in the main world.\n            await this._scheduleRerunnableTask(progress, 'main', task);\n        }, this._page._timeoutSettings.timeout(options));\n        await this._page._doSlowMo();\n    }\n    async evalOnSelectorAndWaitForSignals(selector, expression, isFunction, arg) {\n        const handle = await this.$(selector);\n        if (!handle)\n            throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n        const result = await handle.evaluateExpressionAndWaitForSignals(expression, isFunction, true, arg);\n        handle.dispose();\n        return result;\n    }\n    async evalOnSelectorAllAndWaitForSignals(selector, expression, isFunction, arg) {\n        const arrayHandle = await this._page.selectors._queryArray(this, selector);\n        const result = await arrayHandle.evaluateExpressionAndWaitForSignals(expression, isFunction, true, arg);\n        arrayHandle.dispose();\n        return result;\n    }\n    async $$(selector) {\n        return this._page.selectors._queryAll(this, selector, undefined, true /* adoptToMain */);\n    }\n    async content() {\n        const context = await this._utilityContext();\n        return context.evaluate(() => {\n            let retVal = '';\n            if (document.doctype)\n                retVal = new XMLSerializer().serializeToString(document.doctype);\n            if (document.documentElement)\n                retVal += document.documentElement.outerHTML;\n            return retVal;\n        });\n    }\n    async setContent(metadata, html, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this.raceNavigationAction(async () => {\n            const waitUntil = options.waitUntil === undefined ? 'load' : options.waitUntil;\n            progress.log(`setting frame content, waiting until \"${waitUntil}\"`);\n            const tag = `--playwright--set--content--${this._id}--${++this._setContentCounter}--`;\n            const context = await this._utilityContext();\n            const lifecyclePromise = new Promise((resolve, reject) => {\n                this._page._frameManager._consoleMessageTags.set(tag, () => {\n                    // Clear lifecycle right after document.open() - see 'tag' below.\n                    this._onClearLifecycle();\n                    this._waitForLoadState(progress, waitUntil).then(resolve).catch(reject);\n                });\n            });\n            const contentPromise = context.evaluate(({ html, tag }) => {\n                window.stop();\n                document.open();\n                console.debug(tag); // eslint-disable-line no-console\n                document.write(html);\n                document.close();\n            }, { html, tag });\n            await Promise.all([contentPromise, lifecyclePromise]);\n            await this._page._doSlowMo();\n        }), this._page._timeoutSettings.navigationTimeout(options));\n    }\n    name() {\n        return this._name || '';\n    }\n    url() {\n        return this._url;\n    }\n    parentFrame() {\n        return this._parentFrame;\n    }\n    childFrames() {\n        return Array.from(this._childFrames);\n    }\n    async addScriptTag(params) {\n        const { url = null, content = null, type = '' } = params;\n        if (!url && !content)\n            throw new Error('Provide an object with a `url`, `path` or `content` property');\n        const context = await this._mainContext();\n        return this._raceWithCSPError(async () => {\n            if (url !== null)\n                return (await context.evaluateHandle(addScriptUrl, { url, type })).asElement();\n            const result = (await context.evaluateHandle(addScriptContent, { content: content, type })).asElement();\n            // Another round trip to the browser to ensure that we receive CSP error messages\n            // (if any) logged asynchronously in a separate task on the content main thread.\n            if (this._page._delegate.cspErrorsAsynchronousForInlineScipts)\n                await context.evaluate(() => true);\n            return result;\n        });\n        async function addScriptUrl(params) {\n            const script = document.createElement('script');\n            script.src = params.url;\n            if (params.type)\n                script.type = params.type;\n            const promise = new Promise((res, rej) => {\n                script.onload = res;\n                script.onerror = e => rej(typeof e === 'string' ? new Error(e) : new Error(`Failed to load script at ${script.src}`));\n            });\n            document.head.appendChild(script);\n            await promise;\n            return script;\n        }\n        function addScriptContent(params) {\n            const script = document.createElement('script');\n            script.type = params.type || 'text/javascript';\n            script.text = params.content;\n            let error = null;\n            script.onerror = e => error = e;\n            document.head.appendChild(script);\n            if (error)\n                throw error;\n            return script;\n        }\n    }\n    async addStyleTag(params) {\n        const { url = null, content = null } = params;\n        if (!url && !content)\n            throw new Error('Provide an object with a `url`, `path` or `content` property');\n        const context = await this._mainContext();\n        return this._raceWithCSPError(async () => {\n            if (url !== null)\n                return (await context.evaluateHandle(addStyleUrl, url)).asElement();\n            return (await context.evaluateHandle(addStyleContent, content)).asElement();\n        });\n        async function addStyleUrl(url) {\n            const link = document.createElement('link');\n            link.rel = 'stylesheet';\n            link.href = url;\n            const promise = new Promise((res, rej) => {\n                link.onload = res;\n                link.onerror = rej;\n            });\n            document.head.appendChild(link);\n            await promise;\n            return link;\n        }\n        async function addStyleContent(content) {\n            const style = document.createElement('style');\n            style.type = 'text/css';\n            style.appendChild(document.createTextNode(content));\n            const promise = new Promise((res, rej) => {\n                style.onload = res;\n                style.onerror = rej;\n            });\n            document.head.appendChild(style);\n            await promise;\n            return style;\n        }\n    }\n    async _raceWithCSPError(func) {\n        const listeners = [];\n        let result;\n        let error;\n        let cspMessage;\n        const actionPromise = new Promise(async (resolve) => {\n            try {\n                result = await func();\n            }\n            catch (e) {\n                error = e;\n            }\n            resolve();\n        });\n        const errorPromise = new Promise(resolve => {\n            listeners.push(helper_1.helper.addEventListener(this._page, page_1.Page.Events.Console, (message) => {\n                if (message.type() === 'error' && message.text().includes('Content Security Policy')) {\n                    cspMessage = message;\n                    resolve();\n                }\n            }));\n        });\n        await Promise.race([actionPromise, errorPromise]);\n        helper_1.helper.removeEventListeners(listeners);\n        if (cspMessage)\n            throw new Error(cspMessage.text());\n        if (error)\n            throw error;\n        return result;\n    }\n    async _retryWithProgressIfNotConnected(progress, selector, action) {\n        const info = this._page.selectors._parseSelector(selector);\n        while (progress.isRunning()) {\n            progress.log(`waiting for selector \"${selector}\"`);\n            const task = dom.waitForSelectorTask(info, 'attached');\n            const handle = await this._scheduleRerunnableHandleTask(progress, info.world, task);\n            const element = handle.asElement();\n            progress.cleanupWhenAborted(() => {\n                // Do not await here to avoid being blocked, either by stalled\n                // page (e.g. alert) or unresolved navigation in Chromium.\n                element.dispose();\n            });\n            const result = await action(element);\n            element.dispose();\n            if (result === 'error:notconnected') {\n                progress.log('element was detached from the DOM, retrying');\n                continue;\n            }\n            return result;\n        }\n        return undefined;\n    }\n    async _retryWithSelectorIfNotConnected(controller, selector, options, action) {\n        return controller.run(async (progress) => {\n            return this._retryWithProgressIfNotConnected(progress, selector, handle => action(progress, handle));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async click(metadata, selector, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._click(progress, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async dblclick(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._dblclick(progress, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async tap(metadata, selector, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._tap(progress, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async fill(metadata, selector, value, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._fill(progress, value, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async focus(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        await this._retryWithSelectorIfNotConnected(controller, selector, options, (progress, handle) => handle._focus(progress));\n        await this._page._doSlowMo();\n    }\n    async textContent(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.textContentTask(info);\n        return controller.run(async (progress) => {\n            progress.log(`  retrieving textContent from \"${selector}\"`);\n            return this._scheduleRerunnableTask(progress, info.world, task);\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async innerText(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.innerTextTask(info);\n        return controller.run(async (progress) => {\n            progress.log(`  retrieving innerText from \"${selector}\"`);\n            const result = dom.throwFatalDOMError(await this._scheduleRerunnableTask(progress, info.world, task));\n            return result.innerText;\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async innerHTML(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.innerHTMLTask(info);\n        return controller.run(async (progress) => {\n            progress.log(`  retrieving innerHTML from \"${selector}\"`);\n            return this._scheduleRerunnableTask(progress, info.world, task);\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async getAttribute(metadata, selector, name, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.getAttributeTask(info, name);\n        return controller.run(async (progress) => {\n            progress.log(`  retrieving attribute \"${name}\" from \"${selector}\"`);\n            return this._scheduleRerunnableTask(progress, info.world, task);\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _checkElementState(metadata, selector, state, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        const info = this._page.selectors._parseSelector(selector);\n        const task = dom.elementStateTask(info, state);\n        const result = await controller.run(async (progress) => {\n            progress.log(`  checking \"${state}\" state of \"${selector}\"`);\n            return this._scheduleRerunnableTask(progress, info.world, task);\n        }, this._page._timeoutSettings.timeout(options));\n        return dom.throwFatalDOMError(dom.throwRetargetableDOMError(result));\n    }\n    async isVisible(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            progress.log(`  checking visibility of \"${selector}\"`);\n            const element = await this.$(selector);\n            return element ? await element.isVisible() : false;\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async isHidden(metadata, selector, options = {}) {\n        return !(await this.isVisible(metadata, selector, options));\n    }\n    async isDisabled(metadata, selector, options = {}) {\n        return this._checkElementState(metadata, selector, 'disabled', options);\n    }\n    async isEnabled(metadata, selector, options = {}) {\n        return this._checkElementState(metadata, selector, 'enabled', options);\n    }\n    async isEditable(metadata, selector, options = {}) {\n        return this._checkElementState(metadata, selector, 'editable', options);\n    }\n    async isChecked(metadata, selector, options = {}) {\n        return this._checkElementState(metadata, selector, 'checked', options);\n    }\n    async hover(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._hover(progress, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async selectOption(metadata, selector, elements, values, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._selectOption(progress, elements, values, options));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async setInputFiles(metadata, selector, files, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._setInputFiles(progress, files, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async type(metadata, selector, text, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._type(progress, text, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async press(metadata, selector, key, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._press(progress, key, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async check(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._setChecked(progress, true, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async uncheck(metadata, selector, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(async (progress) => {\n            return dom.assertDone(await this._retryWithProgressIfNotConnected(progress, selector, handle => handle._setChecked(progress, false, options)));\n        }, this._page._timeoutSettings.timeout(options));\n    }\n    async _waitForFunctionExpression(metadata, expression, isFunction, arg, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        if (typeof options.pollingInterval === 'number')\n            utils_1.assert(options.pollingInterval > 0, 'Cannot poll with non-positive interval: ' + options.pollingInterval);\n        expression = js.normalizeEvaluationExpression(expression, isFunction);\n        const task = injectedScript => injectedScript.evaluateHandle((injectedScript, { expression, isFunction, polling, arg }) => {\n            const predicate = (arg) => {\n                let result = self.eval(expression);\n                if (isFunction === true) {\n                    result = result(arg);\n                }\n                else if (isFunction === false) {\n                    result = result;\n                }\n                else {\n                    // auto detect.\n                    if (typeof result === 'function')\n                        result = result(arg);\n                }\n                return result;\n            };\n            if (typeof polling !== 'number')\n                return injectedScript.pollRaf((progress, continuePolling) => predicate(arg) || continuePolling);\n            return injectedScript.pollInterval(polling, (progress, continuePolling) => predicate(arg) || continuePolling);\n        }, { expression, isFunction, polling: options.pollingInterval, arg });\n        return controller.run(progress => this._scheduleRerunnableHandleTask(progress, 'main', task), this._page._timeoutSettings.timeout(options));\n    }\n    async title() {\n        const context = await this._utilityContext();\n        return context.evaluate(() => document.title);\n    }\n    _onDetached() {\n        this._stopNetworkIdleTimer();\n        this._detached = true;\n        this._detachedCallback();\n        for (const data of this._contextData.values()) {\n            for (const rerunnableTask of data.rerunnableTasks)\n                rerunnableTask.terminate(new Error('waitForFunction failed: frame got detached.'));\n        }\n        if (this._parentFrame)\n            this._parentFrame._childFrames.delete(this);\n        this._parentFrame = null;\n    }\n    _scheduleRerunnableTask(progress, world, task) {\n        const data = this._contextData.get(world);\n        const rerunnableTask = new RerunnableTask(data, progress, task, true /* returnByValue */);\n        if (this._detached)\n            rerunnableTask.terminate(new Error('waitForFunction failed: frame got detached.'));\n        if (data.context)\n            rerunnableTask.rerun(data.context);\n        return rerunnableTask.promise;\n    }\n    _scheduleRerunnableHandleTask(progress, world, task) {\n        const data = this._contextData.get(world);\n        const rerunnableTask = new RerunnableTask(data, progress, task, false /* returnByValue */);\n        if (this._detached)\n            rerunnableTask.terminate(new Error('waitForFunction failed: frame got detached.'));\n        if (data.context)\n            rerunnableTask.rerun(data.context);\n        return rerunnableTask.promise;\n    }\n    _setContext(world, context) {\n        const data = this._contextData.get(world);\n        data.context = context;\n        if (context) {\n            data.contextResolveCallback.call(null, context);\n            for (const rerunnableTask of data.rerunnableTasks)\n                rerunnableTask.rerun(context);\n        }\n        else {\n            data.contextPromise = new Promise(fulfill => {\n                data.contextResolveCallback = fulfill;\n            });\n        }\n    }\n    _contextCreated(world, context) {\n        const data = this._contextData.get(world);\n        // In case of multiple sessions to the same target, there's a race between\n        // connections so we might end up creating multiple isolated worlds.\n        // We can use either.\n        if (data.context)\n            this._setContext(world, null);\n        this._setContext(world, context);\n    }\n    _contextDestroyed(context) {\n        for (const [world, data] of this._contextData) {\n            if (data.context === context)\n                this._setContext(world, null);\n        }\n    }\n    _startNetworkIdleTimer() {\n        utils_1.assert(!this._networkIdleTimer);\n        // We should not start a timer and report networkidle in detached frames.\n        // This happens at least in Firefox for child frames, where we may get requestFinished\n        // after the frame was detached - probably a race in the Firefox itself.\n        if (this._firedLifecycleEvents.has('networkidle') || this._detached)\n            return;\n        this._networkIdleTimer = setTimeout(() => this._onLifecycleEvent('networkidle'), 500);\n    }\n    _stopNetworkIdleTimer() {\n        if (this._networkIdleTimer)\n            clearTimeout(this._networkIdleTimer);\n        this._networkIdleTimer = undefined;\n    }\n    async extendInjectedScript(source, arg) {\n        const mainContext = await this._mainContext();\n        const injectedScriptHandle = await mainContext.injectedScript();\n        return injectedScriptHandle.evaluateHandle((injectedScript, { source, arg }) => {\n            return injectedScript.extend(source, arg);\n        }, { source, arg });\n    }\n}\nexports.Frame = Frame;\nFrame.Events = {\n    Navigation: 'navigation',\n    AddLifecycle: 'addlifecycle',\n    RemoveLifecycle: 'removelifecycle',\n};\nclass RerunnableTask {\n    constructor(data, progress, task, returnByValue) {\n        this._resolve = () => { };\n        this._reject = () => { };\n        this._task = task;\n        this._progress = progress;\n        this._returnByValue = returnByValue;\n        this._contextData = data;\n        this._contextData.rerunnableTasks.add(this);\n        this.promise = new Promise((resolve, reject) => {\n            // The task is either resolved with a value, or rejected with a meaningful evaluation error.\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    terminate(error) {\n        this._reject(error);\n    }\n    async rerun(context) {\n        try {\n            const injectedScript = await context.injectedScript();\n            const pollHandler = new dom.InjectedScriptPollHandler(this._progress, await this._task(injectedScript));\n            const result = this._returnByValue ? await pollHandler.finish() : await pollHandler.finishHandle();\n            this._contextData.rerunnableTasks.delete(this);\n            this._resolve(result);\n        }\n        catch (e) {\n            // When the page is navigated, the promise is rejected.\n            // We will try again in the new execution context.\n            if (e.message.includes('Execution context was destroyed'))\n                return;\n            // We could have tried to evaluate in a context which was already\n            // destroyed.\n            if (e.message.includes('Cannot find context with specified id'))\n                return;\n            this._contextData.rerunnableTasks.delete(this);\n            this._reject(e);\n        }\n    }\n}\nclass SignalBarrier {\n    constructor(progress) {\n        this._protectCount = 0;\n        this._promiseCallback = () => { };\n        this._progress = progress;\n        this._promise = new Promise(f => this._promiseCallback = f);\n        this.retain();\n    }\n    waitFor() {\n        this.release();\n        return this._promise;\n    }\n    async addFrameNavigation(frame) {\n        // Auto-wait top-level navigations only.\n        if (frame.parentFrame())\n            return;\n        this.retain();\n        const waiter = helper_1.helper.waitForEvent(null, frame, Frame.Events.Navigation, (e) => {\n            if (!e.error && this._progress)\n                this._progress.log(`  navigated to \"${frame._url}\"`);\n            return true;\n        });\n        await Promise.race([\n            frame._page._disconnectedPromise,\n            frame._page._crashedPromise,\n            frame._detachedPromise,\n            waiter.promise,\n        ]).catch(e => { });\n        waiter.dispose();\n        this.release();\n    }\n    retain() {\n        ++this._protectCount;\n    }\n    release() {\n        --this._protectCount;\n        if (!this._protectCount)\n            this._promiseCallback();\n    }\n}\nfunction verifyLifecycle(name, waitUntil) {\n    if (waitUntil === 'networkidle0')\n        waitUntil = 'networkidle';\n    if (!types.kLifecycleEvents.has(waitUntil))\n        throw new Error(`${name}: expected one of (load|domcontentloaded|networkidle)`);\n    return waitUntil;\n}\n//# sourceMappingURL=frames.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.helper = void 0;\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nclass Helper {\n    static addEventListener(emitter, eventName, handler) {\n        emitter.on(eventName, handler);\n        return { emitter, eventName, handler };\n    }\n    static removeEventListeners(listeners) {\n        for (const listener of listeners)\n            listener.emitter.removeListener(listener.eventName, listener.handler);\n        listeners.splice(0, listeners.length);\n    }\n    static completeUserURL(urlString) {\n        if (urlString.startsWith('localhost') || urlString.startsWith('127.0.0.1'))\n            urlString = 'http://' + urlString;\n        return urlString;\n    }\n    static enclosingIntRect(rect) {\n        const x = Math.floor(rect.x + 1e-3);\n        const y = Math.floor(rect.y + 1e-3);\n        const x2 = Math.ceil(rect.x + rect.width - 1e-3);\n        const y2 = Math.ceil(rect.y + rect.height - 1e-3);\n        return { x, y, width: x2 - x, height: y2 - y };\n    }\n    static enclosingIntSize(size) {\n        return { width: Math.floor(size.width + 1e-3), height: Math.floor(size.height + 1e-3) };\n    }\n    static getViewportSizeFromWindowFeatures(features) {\n        const widthString = features.find(f => f.startsWith('width='));\n        const heightString = features.find(f => f.startsWith('height='));\n        const width = widthString ? parseInt(widthString.substring(6), 10) : NaN;\n        const height = heightString ? parseInt(heightString.substring(7), 10) : NaN;\n        if (!Number.isNaN(width) && !Number.isNaN(height))\n            return { width, height };\n        return null;\n    }\n    static waitForEvent(progress, emitter, event, predicate) {\n        const listeners = [];\n        const promise = new Promise((resolve, reject) => {\n            listeners.push(exports.helper.addEventListener(emitter, event, eventArg => {\n                try {\n                    if (predicate && !predicate(eventArg))\n                        return;\n                    exports.helper.removeEventListeners(listeners);\n                    resolve(eventArg);\n                }\n                catch (e) {\n                    exports.helper.removeEventListeners(listeners);\n                    reject(e);\n                }\n            }));\n        });\n        const dispose = () => exports.helper.removeEventListeners(listeners);\n        if (progress)\n            progress.cleanupWhenAborted(dispose);\n        return { promise, dispose };\n    }\n    static secondsToRoundishMillis(value) {\n        return ((value * 1000000) | 0) / 1000;\n    }\n    static millisToRoundishMillis(value) {\n        return ((value * 1000) | 0) / 1000;\n    }\n    static debugProtocolLogger(protocolLogger) {\n        return (direction, message) => {\n            if (protocolLogger)\n                protocolLogger(direction, message);\n            if (debugLogger_1.debugLogger.isEnabled('protocol'))\n                debugLogger_1.debugLogger.log('protocol', (direction === 'send' ? 'SEND  ' : ' RECV ') + JSON.stringify(message));\n        };\n    }\n    static formatBrowserLogs(logs) {\n        if (!logs.length)\n            return '';\n        return '\\n' + '='.repeat(20) + ' Browser output: ' + '='.repeat(20) + '\\n' + logs.join('\\n');\n    }\n}\nexports.helper = Helper;\n//# sourceMappingURL=helper.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Touchscreen = exports.Mouse = exports.Keyboard = exports.keypadLocation = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst keyboardLayout = __importStar(require(\"./usKeyboardLayout\"));\nexports.keypadLocation = keyboardLayout.keypadLocation;\nconst kModifiers = ['Alt', 'Control', 'Meta', 'Shift'];\nclass Keyboard {\n    constructor(raw, page) {\n        this._pressedModifiers = new Set();\n        this._pressedKeys = new Set();\n        this._raw = raw;\n        this._page = page;\n    }\n    async down(key) {\n        const description = this._keyDescriptionForString(key);\n        const autoRepeat = this._pressedKeys.has(description.code);\n        this._pressedKeys.add(description.code);\n        if (kModifiers.includes(description.key))\n            this._pressedModifiers.add(description.key);\n        const text = description.text;\n        await this._raw.keydown(this._pressedModifiers, description.code, description.keyCode, description.keyCodeWithoutLocation, description.key, description.location, autoRepeat, text);\n        await this._page._doSlowMo();\n    }\n    _keyDescriptionForString(keyString) {\n        let description = usKeyboardLayout.get(keyString);\n        utils_1.assert(description, `Unknown key: \"${keyString}\"`);\n        const shift = this._pressedModifiers.has('Shift');\n        description = shift && description.shifted ? description.shifted : description;\n        // if any modifiers besides shift are pressed, no text should be sent\n        if (this._pressedModifiers.size > 1 || (!this._pressedModifiers.has('Shift') && this._pressedModifiers.size === 1))\n            return { ...description, text: '' };\n        return description;\n    }\n    async up(key) {\n        const description = this._keyDescriptionForString(key);\n        if (kModifiers.includes(description.key))\n            this._pressedModifiers.delete(description.key);\n        this._pressedKeys.delete(description.code);\n        await this._raw.keyup(this._pressedModifiers, description.code, description.keyCode, description.keyCodeWithoutLocation, description.key, description.location);\n        await this._page._doSlowMo();\n    }\n    async insertText(text) {\n        await this._raw.sendText(text);\n        await this._page._doSlowMo();\n    }\n    async type(text, options) {\n        const delay = (options && options.delay) || undefined;\n        for (const char of text) {\n            if (usKeyboardLayout.has(char)) {\n                await this.press(char, { delay });\n            }\n            else {\n                if (delay)\n                    await new Promise(f => setTimeout(f, delay));\n                await this.insertText(char);\n            }\n        }\n    }\n    async press(key, options = {}) {\n        function split(keyString) {\n            const keys = [];\n            let building = '';\n            for (const char of keyString) {\n                if (char === '+' && building) {\n                    keys.push(building);\n                    building = '';\n                }\n                else {\n                    building += char;\n                }\n            }\n            keys.push(building);\n            return keys;\n        }\n        const tokens = split(key);\n        const promises = [];\n        key = tokens[tokens.length - 1];\n        for (let i = 0; i < tokens.length - 1; ++i)\n            promises.push(this.down(tokens[i]));\n        promises.push(this.down(key));\n        if (options.delay) {\n            await Promise.all(promises);\n            await new Promise(f => setTimeout(f, options.delay));\n        }\n        promises.push(this.up(key));\n        for (let i = tokens.length - 2; i >= 0; --i)\n            promises.push(this.up(tokens[i]));\n        await Promise.all(promises);\n    }\n    async _ensureModifiers(modifiers) {\n        for (const modifier of modifiers) {\n            if (!kModifiers.includes(modifier))\n                throw new Error('Unknown modifier ' + modifier);\n        }\n        const restore = Array.from(this._pressedModifiers);\n        const promises = [];\n        for (const key of kModifiers) {\n            const needDown = modifiers.includes(key);\n            const isDown = this._pressedModifiers.has(key);\n            if (needDown && !isDown)\n                promises.push(this.down(key));\n            else if (!needDown && isDown)\n                promises.push(this.up(key));\n        }\n        await Promise.all(promises);\n        return restore;\n    }\n    _modifiers() {\n        return this._pressedModifiers;\n    }\n}\nexports.Keyboard = Keyboard;\nclass Mouse {\n    constructor(raw, page) {\n        this._x = 0;\n        this._y = 0;\n        this._lastButton = 'none';\n        this._buttons = new Set();\n        this._raw = raw;\n        this._page = page;\n        this._keyboard = this._page.keyboard;\n    }\n    async move(x, y, options = {}) {\n        const { steps = 1 } = options;\n        const fromX = this._x;\n        const fromY = this._y;\n        this._x = x;\n        this._y = y;\n        for (let i = 1; i <= steps; i++) {\n            const middleX = fromX + (x - fromX) * (i / steps);\n            const middleY = fromY + (y - fromY) * (i / steps);\n            await this._raw.move(middleX, middleY, this._lastButton, this._buttons, this._keyboard._modifiers());\n            await this._page._doSlowMo();\n        }\n    }\n    async down(options = {}) {\n        const { button = 'left', clickCount = 1 } = options;\n        this._lastButton = button;\n        this._buttons.add(button);\n        await this._raw.down(this._x, this._y, this._lastButton, this._buttons, this._keyboard._modifiers(), clickCount);\n        await this._page._doSlowMo();\n    }\n    async up(options = {}) {\n        const { button = 'left', clickCount = 1 } = options;\n        this._lastButton = 'none';\n        this._buttons.delete(button);\n        await this._raw.up(this._x, this._y, button, this._buttons, this._keyboard._modifiers(), clickCount);\n        await this._page._doSlowMo();\n    }\n    async click(x, y, options = {}) {\n        const { delay = null, clickCount = 1 } = options;\n        if (delay) {\n            this.move(x, y);\n            for (let cc = 1; cc <= clickCount; ++cc) {\n                await this.down({ ...options, clickCount: cc });\n                await new Promise(f => setTimeout(f, delay));\n                await this.up({ ...options, clickCount: cc });\n                if (cc < clickCount)\n                    await new Promise(f => setTimeout(f, delay));\n            }\n        }\n        else {\n            const promises = [];\n            promises.push(this.move(x, y));\n            for (let cc = 1; cc <= clickCount; ++cc) {\n                promises.push(this.down({ ...options, clickCount: cc }));\n                promises.push(this.up({ ...options, clickCount: cc }));\n            }\n            await Promise.all(promises);\n        }\n    }\n    async dblclick(x, y, options = {}) {\n        await this.click(x, y, { ...options, clickCount: 2 });\n    }\n}\nexports.Mouse = Mouse;\nconst aliases = new Map([\n    ['ShiftLeft', ['Shift']],\n    ['ControlLeft', ['Control']],\n    ['AltLeft', ['Alt']],\n    ['MetaLeft', ['Meta']],\n    ['Enter', ['\\n', '\\r']],\n]);\nconst usKeyboardLayout = buildLayoutClosure(keyboardLayout.USKeyboardLayout);\nfunction buildLayoutClosure(layout) {\n    const result = new Map();\n    for (const code in layout) {\n        const definition = layout[code];\n        const description = {\n            key: definition.key || '',\n            keyCode: definition.keyCode || 0,\n            keyCodeWithoutLocation: definition.keyCodeWithoutLocation || definition.keyCode || 0,\n            code,\n            text: definition.text || '',\n            location: definition.location || 0,\n        };\n        if (definition.key.length === 1)\n            description.text = description.key;\n        // Generate shifted definition.\n        let shiftedDescription;\n        if (definition.shiftKey) {\n            utils_1.assert(definition.shiftKey.length === 1);\n            shiftedDescription = { ...description };\n            shiftedDescription.key = definition.shiftKey;\n            shiftedDescription.text = definition.shiftKey;\n            if (definition.shiftKeyCode)\n                shiftedDescription.keyCode = definition.shiftKeyCode;\n        }\n        // Map from code: Digit3 -> { ... descrption, shifted }\n        result.set(code, { ...description, shifted: shiftedDescription });\n        // Map from aliases: Shift -> non-shiftable definition\n        if (aliases.has(code)) {\n            for (const alias of aliases.get(code))\n                result.set(alias, description);\n        }\n        // Do not use numpad when converting keys to codes.\n        if (definition.location)\n            continue;\n        // Map from key, no shifted\n        if (description.key.length === 1)\n            result.set(description.key, description);\n        // Map from shiftKey, no shifted\n        if (shiftedDescription)\n            result.set(shiftedDescription.key, { ...shiftedDescription, shifted: undefined });\n    }\n    return result;\n}\nclass Touchscreen {\n    constructor(raw, page) {\n        this._raw = raw;\n        this._page = page;\n    }\n    async tap(x, y) {\n        if (!this._page._browserContext._options.hasTouch)\n            throw new Error('hasTouch must be enabled on the browser context before using the touchscreen.');\n        await this._raw.tap(x, y, this._page.keyboard._modifiers());\n        await this._page._doSlowMo();\n    }\n}\nexports.Touchscreen = Touchscreen;\n//# sourceMappingURL=input.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.internalCallMetadata = exports.multiplexInstrumentation = exports.SdkObject = void 0;\nconst events_1 = require(\"events\");\nclass SdkObject extends events_1.EventEmitter {\n    constructor(parent) {\n        super();\n        this.setMaxListeners(0);\n        this.attribution = { ...parent.attribution };\n        this.instrumentation = parent.instrumentation;\n    }\n}\nexports.SdkObject = SdkObject;\nfunction multiplexInstrumentation(listeners) {\n    return new Proxy({}, {\n        get: (obj, prop) => {\n            if (!prop.startsWith('on'))\n                return obj[prop];\n            return async (...params) => {\n                var _a, _b;\n                for (const listener of listeners)\n                    await ((_b = (_a = listener)[prop]) === null || _b === void 0 ? void 0 : _b.call(_a, ...params));\n            };\n        },\n    });\n}\nexports.multiplexInstrumentation = multiplexInstrumentation;\nfunction internalCallMetadata() {\n    return {\n        id: 0,\n        startTime: 0,\n        endTime: 0,\n        type: 'Internal',\n        method: '',\n        params: {},\n        log: [],\n    };\n}\nexports.internalCallMetadata = internalCallMetadata;\n//# sourceMappingURL=instrumentation.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizeEvaluationExpression = exports.parseUnserializableValue = exports.evaluateExpressionAndWaitForSignals = exports.evaluateExpression = exports.evaluate = exports.JSHandle = exports.ExecutionContext = void 0;\nconst utilityScriptSource = __importStar(require(\"../generated/utilityScriptSource\"));\nconst utilityScriptSerializers_1 = require(\"./common/utilityScriptSerializers\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass ExecutionContext extends instrumentation_1.SdkObject {\n    constructor(parent, delegate) {\n        super(parent);\n        this._delegate = delegate;\n    }\n    async waitForSignalsCreatedBy(action) {\n        return action();\n    }\n    adoptIfNeeded(handle) {\n        return null;\n    }\n    utilityScript() {\n        if (!this._utilityScriptPromise) {\n            const source = `\n      (() => {\n        ${utilityScriptSource.source}\n        return new pwExport();\n      })();`;\n            this._utilityScriptPromise = this._delegate.rawEvaluate(source).then(objectId => new JSHandle(this, 'object', objectId));\n        }\n        return this._utilityScriptPromise;\n    }\n    createHandle(remoteObject) {\n        return this._delegate.createHandle(this, remoteObject);\n    }\n    async rawEvaluate(expression) {\n        // Make sure to never return a value.\n        await this._delegate.rawEvaluate(expression + '; 0');\n    }\n    async doSlowMo() {\n        // overrided in FrameExecutionContext\n    }\n}\nexports.ExecutionContext = ExecutionContext;\nclass JSHandle extends instrumentation_1.SdkObject {\n    constructor(context, type, objectId, value) {\n        super(context);\n        this._disposed = false;\n        this._context = context;\n        this._objectId = objectId;\n        this._value = value;\n        this._objectType = type;\n        if (this._objectId)\n            this._value = 'JSHandle@' + this._objectType;\n        this._preview = 'JSHandle@' + String(this._objectId ? this._objectType : this._value);\n    }\n    callFunctionNoReply(func, arg) {\n        this._context._delegate.rawCallFunctionNoReply(func, this, arg);\n    }\n    async evaluate(pageFunction, arg) {\n        return evaluate(this._context, true /* returnByValue */, pageFunction, this, arg);\n    }\n    async evaluateHandle(pageFunction, arg) {\n        return evaluate(this._context, false /* returnByValue */, pageFunction, this, arg);\n    }\n    async evaluateExpressionAndWaitForSignals(expression, isFunction, returnByValue, arg) {\n        const value = await evaluateExpressionAndWaitForSignals(this._context, returnByValue, expression, isFunction, this, arg);\n        await this._context.doSlowMo();\n        return value;\n    }\n    async getProperty(propertyName) {\n        const objectHandle = await this.evaluateHandle((object, propertyName) => {\n            const result = { __proto__: null };\n            result[propertyName] = object[propertyName];\n            return result;\n        }, propertyName);\n        const properties = await objectHandle.getProperties();\n        const result = properties.get(propertyName);\n        objectHandle.dispose();\n        return result;\n    }\n    getProperties() {\n        return this._context._delegate.getProperties(this);\n    }\n    async jsonValue() {\n        if (!this._objectId)\n            return this._value;\n        const utilityScript = await this._context.utilityScript();\n        const script = `(utilityScript, ...args) => utilityScript.jsonValue(...args)`;\n        return this._context._delegate.evaluateWithArguments(script, true, utilityScript, [true], [this._objectId]);\n    }\n    asElement() {\n        return null;\n    }\n    dispose() {\n        if (this._disposed)\n            return;\n        this._disposed = true;\n        this._context._delegate.releaseHandle(this).catch(e => { });\n    }\n    toString() {\n        return this._preview;\n    }\n    _setPreviewCallback(callback) {\n        this._previewCallback = callback;\n    }\n    _setPreview(preview) {\n        this._preview = preview;\n        if (this._previewCallback)\n            this._previewCallback(preview);\n    }\n}\nexports.JSHandle = JSHandle;\nasync function evaluate(context, returnByValue, pageFunction, ...args) {\n    return evaluateExpression(context, returnByValue, String(pageFunction), typeof pageFunction === 'function', ...args);\n}\nexports.evaluate = evaluate;\nasync function evaluateExpression(context, returnByValue, expression, isFunction, ...args) {\n    const utilityScript = await context.utilityScript();\n    expression = normalizeEvaluationExpression(expression, isFunction);\n    const handles = [];\n    const toDispose = [];\n    const pushHandle = (handle) => {\n        handles.push(handle);\n        return handles.length - 1;\n    };\n    args = args.map(arg => utilityScriptSerializers_1.serializeAsCallArgument(arg, handle => {\n        if (handle instanceof JSHandle) {\n            if (!handle._objectId)\n                return { fallThrough: handle._value };\n            if (handle._disposed)\n                throw new Error('JSHandle is disposed!');\n            const adopted = context.adoptIfNeeded(handle);\n            if (adopted === null)\n                return { h: pushHandle(Promise.resolve(handle)) };\n            toDispose.push(adopted);\n            return { h: pushHandle(adopted) };\n        }\n        return { fallThrough: handle };\n    }));\n    const utilityScriptObjectIds = [];\n    for (const handle of await Promise.all(handles)) {\n        if (handle._context !== context)\n            throw new Error('JSHandles can be evaluated only in the context they were created!');\n        utilityScriptObjectIds.push(handle._objectId);\n    }\n    // See UtilityScript for arguments.\n    const utilityScriptValues = [isFunction, returnByValue, expression, args.length, ...args];\n    const script = `(utilityScript, ...args) => utilityScript.evaluate(...args)`;\n    try {\n        return await context._delegate.evaluateWithArguments(script, returnByValue, utilityScript, utilityScriptValues, utilityScriptObjectIds);\n    }\n    finally {\n        toDispose.map(handlePromise => handlePromise.then(handle => handle.dispose()));\n    }\n}\nexports.evaluateExpression = evaluateExpression;\nasync function evaluateExpressionAndWaitForSignals(context, returnByValue, expression, isFunction, ...args) {\n    return await context.waitForSignalsCreatedBy(() => evaluateExpression(context, returnByValue, expression, isFunction, ...args));\n}\nexports.evaluateExpressionAndWaitForSignals = evaluateExpressionAndWaitForSignals;\nfunction parseUnserializableValue(unserializableValue) {\n    if (unserializableValue === 'NaN')\n        return NaN;\n    if (unserializableValue === 'Infinity')\n        return Infinity;\n    if (unserializableValue === '-Infinity')\n        return -Infinity;\n    if (unserializableValue === '-0')\n        return -0;\n}\nexports.parseUnserializableValue = parseUnserializableValue;\nfunction normalizeEvaluationExpression(expression, isFunction) {\n    expression = expression.trim();\n    if (isFunction) {\n        try {\n            new Function('(' + expression + ')');\n        }\n        catch (e1) {\n            // This means we might have a function shorthand. Try another\n            // time prefixing 'function '.\n            if (expression.startsWith('async '))\n                expression = 'async function ' + expression.substring('async '.length);\n            else\n                expression = 'function ' + expression;\n            try {\n                new Function('(' + expression + ')');\n            }\n            catch (e2) {\n                // We tried hard to serialize, but there's a weird beast here.\n                throw new Error('Passed function is not well-serializable!');\n            }\n        }\n    }\n    if (/^(async)?\\s*function(\\s|\\()/.test(expression))\n        expression = '(' + expression + ')';\n    return expression;\n}\nexports.normalizeEvaluationExpression = normalizeEvaluationExpression;\n//# sourceMappingURL=javascript.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.macEditingCommands = void 0;\nexports.macEditingCommands = {\n    'Backspace': 'deleteBackward:',\n    'Enter': 'insertNewline:',\n    'NumpadEnter': 'insertNewline:',\n    'Escape': 'cancelOperation:',\n    'ArrowUp': 'moveUp:',\n    'ArrowDown': 'moveDown:',\n    'ArrowLeft': 'moveLeft:',\n    'ArrowRight': 'moveRight:',\n    'F5': 'complete:',\n    'Delete': 'deleteForward:',\n    'Home': 'scrollToBeginningOfDocument:',\n    'End': 'scrollToEndOfDocument:',\n    'PageUp': 'scrollPageUp:',\n    'PageDown': 'scrollPageDown:',\n    'Shift+Backspace': 'deleteBackward:',\n    'Shift+Enter': 'insertNewline:',\n    'Shift+NumpadEnter': 'insertNewline:',\n    'Shift+Escape': 'cancelOperation:',\n    'Shift+ArrowUp': 'moveUpAndModifySelection:',\n    'Shift+ArrowDown': 'moveDownAndModifySelection:',\n    'Shift+ArrowLeft': 'moveLeftAndModifySelection:',\n    'Shift+ArrowRight': 'moveRightAndModifySelection:',\n    'Shift+F5': 'complete:',\n    'Shift+Delete': 'deleteForward:',\n    'Shift+Home': 'moveToBeginningOfDocumentAndModifySelection:',\n    'Shift+End': 'moveToEndOfDocumentAndModifySelection:',\n    'Shift+PageUp': 'pageUpAndModifySelection:',\n    'Shift+PageDown': 'pageDownAndModifySelection:',\n    'Shift+Numpad5': 'delete:',\n    'Control+Tab': 'selectNextKeyView:',\n    'Control+Enter': 'insertLineBreak:',\n    'Control+NumpadEnter': 'insertLineBreak:',\n    'Control+Quote': 'insertSingleQuoteIgnoringSubstitution:',\n    'Control+KeyA': 'moveToBeginningOfParagraph:',\n    'Control+KeyB': 'moveBackward:',\n    'Control+KeyD': 'deleteForward:',\n    'Control+KeyE': 'moveToEndOfParagraph:',\n    'Control+KeyF': 'moveForward:',\n    'Control+KeyH': 'deleteBackward:',\n    'Control+KeyK': 'deleteToEndOfParagraph:',\n    'Control+KeyL': 'centerSelectionInVisibleArea:',\n    'Control+KeyN': 'moveDown:',\n    'Control+KeyO': ['insertNewlineIgnoringFieldEditor:', 'moveBackward:'],\n    'Control+KeyP': 'moveUp:',\n    'Control+KeyT': 'transpose:',\n    'Control+KeyV': 'pageDown:',\n    'Control+KeyY': 'yank:',\n    'Control+Backspace': 'deleteBackwardByDecomposingPreviousCharacter:',\n    'Control+ArrowUp': 'scrollPageUp:',\n    'Control+ArrowDown': 'scrollPageDown:',\n    'Control+ArrowLeft': 'moveToLeftEndOfLine:',\n    'Control+ArrowRight': 'moveToRightEndOfLine:',\n    'Shift+Control+Enter': 'insertLineBreak:',\n    'Shift+Control+NumpadEnter': 'insertLineBreak:',\n    'Shift+Control+Tab': 'selectPreviousKeyView:',\n    'Shift+Control+Quote': 'insertDoubleQuoteIgnoringSubstitution:',\n    'Shift+Control+KeyA': 'moveToBeginningOfParagraphAndModifySelection:',\n    'Shift+Control+KeyB': 'moveBackwardAndModifySelection:',\n    'Shift+Control+KeyE': 'moveToEndOfParagraphAndModifySelection:',\n    'Shift+Control+KeyF': 'moveForwardAndModifySelection:',\n    'Shift+Control+KeyN': 'moveDownAndModifySelection:',\n    'Shift+Control+KeyP': 'moveUpAndModifySelection:',\n    'Shift+Control+KeyV': 'pageDownAndModifySelection:',\n    'Shift+Control+Backspace': 'deleteBackwardByDecomposingPreviousCharacter:',\n    'Shift+Control+ArrowUp': 'scrollPageUp:',\n    'Shift+Control+ArrowDown': 'scrollPageDown:',\n    'Shift+Control+ArrowLeft': 'moveToLeftEndOfLineAndModifySelection:',\n    'Shift+Control+ArrowRight': 'moveToRightEndOfLineAndModifySelection:',\n    'Alt+Backspace': 'deleteWordBackward:',\n    'Alt+Enter': 'insertNewlineIgnoringFieldEditor:',\n    'Alt+NumpadEnter': 'insertNewlineIgnoringFieldEditor:',\n    'Alt+Escape': 'complete:',\n    'Alt+ArrowUp': ['moveBackward:', 'moveToBeginningOfParagraph:'],\n    'Alt+ArrowDown': ['moveForward:', 'moveToEndOfParagraph:'],\n    'Alt+ArrowLeft': 'moveWordLeft:',\n    'Alt+ArrowRight': 'moveWordRight:',\n    'Alt+Delete': 'deleteWordForward:',\n    'Alt+PageUp': 'pageUp:',\n    'Alt+PageDown': 'pageDown:',\n    'Shift+Alt+Backspace': 'deleteWordBackward:',\n    'Shift+Alt+Enter': 'insertNewlineIgnoringFieldEditor:',\n    'Shift+Alt+NumpadEnter': 'insertNewlineIgnoringFieldEditor:',\n    'Shift+Alt+Escape': 'complete:',\n    'Shift+Alt+ArrowUp': 'moveParagraphBackwardAndModifySelection:',\n    'Shift+Alt+ArrowDown': 'moveParagraphForwardAndModifySelection:',\n    'Shift+Alt+ArrowLeft': 'moveWordLeftAndModifySelection:',\n    'Shift+Alt+ArrowRight': 'moveWordRightAndModifySelection:',\n    'Shift+Alt+Delete': 'deleteWordForward:',\n    'Shift+Alt+PageUp': 'pageUp:',\n    'Shift+Alt+PageDown': 'pageDown:',\n    'Control+Alt+KeyB': 'moveWordBackward:',\n    'Control+Alt+KeyF': 'moveWordForward:',\n    'Control+Alt+Backspace': 'deleteWordBackward:',\n    'Shift+Control+Alt+KeyB': 'moveWordBackwardAndModifySelection:',\n    'Shift+Control+Alt+KeyF': 'moveWordForwardAndModifySelection:',\n    'Shift+Control+Alt+Backspace': 'deleteWordBackward:',\n    'Meta+NumpadSubtract': 'cancel:',\n    'Meta+Backspace': 'deleteToBeginningOfLine:',\n    'Meta+ArrowUp': 'moveToBeginningOfDocument:',\n    'Meta+ArrowDown': 'moveToEndOfDocument:',\n    'Meta+ArrowLeft': 'moveToLeftEndOfLine:',\n    'Meta+ArrowRight': 'moveToRightEndOfLine:',\n    'Shift+Meta+NumpadSubtract': 'cancel:',\n    'Shift+Meta+Backspace': 'deleteToBeginningOfLine:',\n    'Shift+Meta+ArrowUp': 'moveToBeginningOfDocumentAndModifySelection:',\n    'Shift+Meta+ArrowDown': 'moveToEndOfDocumentAndModifySelection:',\n    'Shift+Meta+ArrowLeft': 'moveToLeftEndOfLineAndModifySelection:',\n    'Shift+Meta+ArrowRight': 'moveToRightEndOfLineAndModifySelection:',\n    'Meta+KeyA': 'selectAll:',\n};\n//# sourceMappingURL=macEditingCommands.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeHeaders = exports.singleHeader = exports.STATUS_TEXTS = exports.WebSocket = exports.Response = exports.Route = exports.Request = exports.stripFragmentFromUrl = exports.parsedURL = exports.rewriteCookies = exports.filterCookies = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst instrumentation_1 = require(\"./instrumentation\");\nfunction filterCookies(cookies, urls) {\n    const parsedURLs = urls.map(s => new URL(s));\n    // Chromiums's cookies are missing sameSite when it is 'None'\n    return cookies.filter(c => {\n        // Firefox and WebKit can return cookies with empty values.\n        if (!c.value)\n            return false;\n        if (!parsedURLs.length)\n            return true;\n        for (const parsedURL of parsedURLs) {\n            let domain = c.domain;\n            if (!domain.startsWith('.'))\n                domain = '.' + domain;\n            if (!('.' + parsedURL.hostname).endsWith(domain))\n                continue;\n            if (!parsedURL.pathname.startsWith(c.path))\n                continue;\n            if (parsedURL.protocol !== 'https:' && c.secure)\n                continue;\n            return true;\n        }\n        return false;\n    });\n}\nexports.filterCookies = filterCookies;\nfunction rewriteCookies(cookies) {\n    return cookies.map(c => {\n        utils_1.assert(c.name, 'Cookie should have a name');\n        utils_1.assert(c.value, 'Cookie should have a value');\n        utils_1.assert(c.url || (c.domain && c.path), 'Cookie should have a url or a domain/path pair');\n        utils_1.assert(!(c.url && c.domain), 'Cookie should have either url or domain');\n        utils_1.assert(!(c.url && c.path), 'Cookie should have either url or domain');\n        const copy = { ...c };\n        if (copy.url) {\n            utils_1.assert(copy.url !== 'about:blank', `Blank page can not have cookie \"${c.name}\"`);\n            utils_1.assert(!copy.url.startsWith('data:'), `Data URL page can not have cookie \"${c.name}\"`);\n            const url = new URL(copy.url);\n            copy.domain = url.hostname;\n            copy.path = url.pathname.substring(0, url.pathname.lastIndexOf('/') + 1);\n            copy.secure = url.protocol === 'https:';\n        }\n        return copy;\n    });\n}\nexports.rewriteCookies = rewriteCookies;\nfunction parsedURL(url) {\n    try {\n        return new URL(url);\n    }\n    catch (e) {\n        return null;\n    }\n}\nexports.parsedURL = parsedURL;\nfunction stripFragmentFromUrl(url) {\n    if (!url.includes('#'))\n        return url;\n    return url.substring(0, url.indexOf('#'));\n}\nexports.stripFragmentFromUrl = stripFragmentFromUrl;\nclass Request extends instrumentation_1.SdkObject {\n    constructor(routeDelegate, frame, redirectedFrom, documentId, url, resourceType, method, postData, headers) {\n        super(frame);\n        this._response = null;\n        this._redirectedTo = null;\n        this._failureText = null;\n        this._headersMap = new Map();\n        this._waitForResponsePromiseCallback = () => { };\n        this._responseEndTiming = -1;\n        utils_1.assert(!url.startsWith('data:'), 'Data urls should not fire requests');\n        utils_1.assert(!(routeDelegate && redirectedFrom), 'Should not be able to intercept redirects');\n        this._routeDelegate = routeDelegate;\n        this._frame = frame;\n        this._redirectedFrom = redirectedFrom;\n        if (redirectedFrom)\n            redirectedFrom._redirectedTo = this;\n        this._documentId = documentId;\n        this._url = stripFragmentFromUrl(url);\n        this._resourceType = resourceType;\n        this._method = method;\n        this._postData = postData;\n        this._headers = headers;\n        for (const { name, value } of this._headers)\n            this._headersMap.set(name.toLowerCase(), value);\n        this._waitForResponsePromise = new Promise(f => this._waitForResponsePromiseCallback = f);\n        this._isFavicon = url.endsWith('/favicon.ico');\n    }\n    _setFailureText(failureText) {\n        this._failureText = failureText;\n        this._waitForResponsePromiseCallback(null);\n    }\n    url() {\n        return this._url;\n    }\n    resourceType() {\n        return this._resourceType;\n    }\n    method() {\n        return this._method;\n    }\n    postDataBuffer() {\n        return this._postData;\n    }\n    headers() {\n        return this._headers;\n    }\n    headerValue(name) {\n        return this._headersMap.get(name);\n    }\n    response() {\n        return this._waitForResponsePromise;\n    }\n    _existingResponse() {\n        return this._response;\n    }\n    _setResponse(response) {\n        this._response = response;\n        this._waitForResponsePromiseCallback(response);\n    }\n    _finalRequest() {\n        return this._redirectedTo ? this._redirectedTo._finalRequest() : this;\n    }\n    frame() {\n        return this._frame;\n    }\n    isNavigationRequest() {\n        return !!this._documentId;\n    }\n    redirectedFrom() {\n        return this._redirectedFrom;\n    }\n    failure() {\n        if (this._failureText === null)\n            return null;\n        return {\n            errorText: this._failureText\n        };\n    }\n    _route() {\n        if (!this._routeDelegate)\n            return null;\n        return new Route(this, this._routeDelegate);\n    }\n    updateWithRawHeaders(headers) {\n        this._headers = headers;\n        this._headersMap.clear();\n        for (const { name, value } of this._headers)\n            this._headersMap.set(name.toLowerCase(), value);\n        if (!this._headersMap.has('host')) {\n            const host = new URL(this._url).host;\n            this._headers.push({ name: 'host', value: host });\n            this._headersMap.set('host', host);\n        }\n    }\n}\nexports.Request = Request;\nclass Route extends instrumentation_1.SdkObject {\n    constructor(request, delegate) {\n        super(request.frame());\n        this._handled = false;\n        this._request = request;\n        this._delegate = delegate;\n    }\n    request() {\n        return this._request;\n    }\n    async abort(errorCode = 'failed') {\n        utils_1.assert(!this._handled, 'Route is already handled!');\n        this._handled = true;\n        await this._delegate.abort(errorCode);\n    }\n    async fulfill(response) {\n        utils_1.assert(!this._handled, 'Route is already handled!');\n        this._handled = true;\n        await this._delegate.fulfill({\n            status: response.status === undefined ? 200 : response.status,\n            headers: response.headers || [],\n            body: response.body || '',\n            isBase64: response.isBase64 || false,\n        });\n    }\n    async continue(overrides = {}) {\n        utils_1.assert(!this._handled, 'Route is already handled!');\n        if (overrides.url) {\n            const newUrl = new URL(overrides.url);\n            const oldUrl = new URL(this._request.url());\n            if (oldUrl.protocol !== newUrl.protocol)\n                throw new Error('New URL must have same protocol as overridden URL');\n        }\n        await this._delegate.continue(overrides);\n    }\n}\nexports.Route = Route;\nclass Response extends instrumentation_1.SdkObject {\n    constructor(request, status, statusText, headers, timing, getResponseBodyCallback) {\n        super(request.frame());\n        this._contentPromise = null;\n        this._finishedPromiseCallback = () => { };\n        this._headersMap = new Map();\n        this._request = request;\n        this._timing = timing;\n        this._status = status;\n        this._statusText = statusText;\n        this._url = request.url();\n        this._headers = headers;\n        for (const { name, value } of this._headers)\n            this._headersMap.set(name.toLowerCase(), value);\n        this._getResponseBodyCallback = getResponseBodyCallback;\n        this._finishedPromise = new Promise(f => {\n            this._finishedPromiseCallback = f;\n        });\n        this._request._setResponse(this);\n    }\n    _requestFinished(responseEndTiming, error) {\n        this._request._responseEndTiming = Math.max(responseEndTiming, this._timing.responseStart);\n        this._finishedPromiseCallback({ error });\n    }\n    url() {\n        return this._url;\n    }\n    status() {\n        return this._status;\n    }\n    statusText() {\n        return this._statusText;\n    }\n    headers() {\n        return this._headers;\n    }\n    headerValue(name) {\n        return this._headersMap.get(name);\n    }\n    finished() {\n        return this._finishedPromise.then(({ error }) => error ? new Error(error) : null);\n    }\n    timing() {\n        return this._timing;\n    }\n    body() {\n        if (!this._contentPromise) {\n            this._contentPromise = this._finishedPromise.then(async ({ error }) => {\n                if (error)\n                    throw new Error(error);\n                return this._getResponseBodyCallback();\n            });\n        }\n        return this._contentPromise;\n    }\n    request() {\n        return this._request;\n    }\n    frame() {\n        return this._request.frame();\n    }\n}\nexports.Response = Response;\nclass WebSocket extends instrumentation_1.SdkObject {\n    constructor(parent, url) {\n        super(parent);\n        this._url = url;\n    }\n    url() {\n        return this._url;\n    }\n    frameSent(opcode, data) {\n        this.emit(WebSocket.Events.FrameSent, { opcode, data });\n    }\n    frameReceived(opcode, data) {\n        this.emit(WebSocket.Events.FrameReceived, { opcode, data });\n    }\n    error(errorMessage) {\n        this.emit(WebSocket.Events.SocketError, errorMessage);\n    }\n    closed() {\n        this.emit(WebSocket.Events.Close);\n    }\n}\nexports.WebSocket = WebSocket;\nWebSocket.Events = {\n    Close: 'close',\n    SocketError: 'socketerror',\n    FrameReceived: 'framereceived',\n    FrameSent: 'framesent',\n};\n// List taken from https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml with extra 306 and 418 codes.\nexports.STATUS_TEXTS = {\n    '100': 'Continue',\n    '101': 'Switching Protocols',\n    '102': 'Processing',\n    '103': 'Early Hints',\n    '200': 'OK',\n    '201': 'Created',\n    '202': 'Accepted',\n    '203': 'Non-Authoritative Information',\n    '204': 'No Content',\n    '205': 'Reset Content',\n    '206': 'Partial Content',\n    '207': 'Multi-Status',\n    '208': 'Already Reported',\n    '226': 'IM Used',\n    '300': 'Multiple Choices',\n    '301': 'Moved Permanently',\n    '302': 'Found',\n    '303': 'See Other',\n    '304': 'Not Modified',\n    '305': 'Use Proxy',\n    '306': 'Switch Proxy',\n    '307': 'Temporary Redirect',\n    '308': 'Permanent Redirect',\n    '400': 'Bad Request',\n    '401': 'Unauthorized',\n    '402': 'Payment Required',\n    '403': 'Forbidden',\n    '404': 'Not Found',\n    '405': 'Method Not Allowed',\n    '406': 'Not Acceptable',\n    '407': 'Proxy Authentication Required',\n    '408': 'Request Timeout',\n    '409': 'Conflict',\n    '410': 'Gone',\n    '411': 'Length Required',\n    '412': 'Precondition Failed',\n    '413': 'Payload Too Large',\n    '414': 'URI Too Long',\n    '415': 'Unsupported Media Type',\n    '416': 'Range Not Satisfiable',\n    '417': 'Expectation Failed',\n    '418': 'I\\'m a teapot',\n    '421': 'Misdirected Request',\n    '422': 'Unprocessable Entity',\n    '423': 'Locked',\n    '424': 'Failed Dependency',\n    '425': 'Too Early',\n    '426': 'Upgrade Required',\n    '428': 'Precondition Required',\n    '429': 'Too Many Requests',\n    '431': 'Request Header Fields Too Large',\n    '451': 'Unavailable For Legal Reasons',\n    '500': 'Internal Server Error',\n    '501': 'Not Implemented',\n    '502': 'Bad Gateway',\n    '503': 'Service Unavailable',\n    '504': 'Gateway Timeout',\n    '505': 'HTTP Version Not Supported',\n    '506': 'Variant Also Negotiates',\n    '507': 'Insufficient Storage',\n    '508': 'Loop Detected',\n    '510': 'Not Extended',\n    '511': 'Network Authentication Required',\n};\nfunction singleHeader(name, value) {\n    return [{ name, value }];\n}\nexports.singleHeader = singleHeader;\nfunction mergeHeaders(headers) {\n    const lowerCaseToValue = new Map();\n    const lowerCaseToOriginalCase = new Map();\n    for (const h of headers) {\n        if (!h)\n            continue;\n        for (const { name, value } of h) {\n            const lower = name.toLowerCase();\n            lowerCaseToOriginalCase.set(lower, name);\n            lowerCaseToValue.set(lower, value);\n        }\n    }\n    const result = [];\n    for (const [lower, value] of lowerCaseToValue)\n        result.push({ name: lowerCaseToOriginalCase.get(lower), value });\n    return result;\n}\nexports.mergeHeaders = mergeHeaders;\n//# sourceMappingURL=network.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PageBinding = exports.Worker = exports.Page = void 0;\nconst frames = __importStar(require(\"./frames\"));\nconst input = __importStar(require(\"./input\"));\nconst js = __importStar(require(\"./javascript\"));\nconst network = __importStar(require(\"./network\"));\nconst screenshotter_1 = require(\"./screenshotter\");\nconst timeoutSettings_1 = require(\"../utils/timeoutSettings\");\nconst types = __importStar(require(\"./types\"));\nconst browserContext_1 = require(\"./browserContext\");\nconst console_1 = require(\"./console\");\nconst accessibility = __importStar(require(\"./accessibility\"));\nconst fileChooser_1 = require(\"./fileChooser\");\nconst progress_1 = require(\"./progress\");\nconst utils_1 = require(\"../utils/utils\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass Page extends instrumentation_1.SdkObject {\n    constructor(delegate, browserContext) {\n        super(browserContext);\n        this._closedState = 'open';\n        this._disconnected = false;\n        this._pageBindings = new Map();\n        this._evaluateOnNewDocumentSources = [];\n        this._workers = new Map();\n        this._video = null;\n        this.uniqueId = 'page@' + utils_1.createGuid();\n        this.attribution.page = this;\n        this._delegate = delegate;\n        this._closedCallback = () => { };\n        this._closedPromise = new Promise(f => this._closedCallback = f);\n        this._disconnectedCallback = () => { };\n        this._disconnectedPromise = new Promise(f => this._disconnectedCallback = f);\n        this._crashedCallback = () => { };\n        this._crashedPromise = new Promise(f => this._crashedCallback = f);\n        this._browserContext = browserContext;\n        this._state = {\n            viewportSize: browserContext._options.viewport || null,\n            mediaType: null,\n            colorScheme: null,\n            extraHTTPHeaders: null,\n        };\n        this.accessibility = new accessibility.Accessibility(delegate.getAccessibilityTree.bind(delegate));\n        this.keyboard = new input.Keyboard(delegate.rawKeyboard, this);\n        this.mouse = new input.Mouse(delegate.rawMouse, this);\n        this.touchscreen = new input.Touchscreen(delegate.rawTouchscreen, this);\n        this._timeoutSettings = new timeoutSettings_1.TimeoutSettings(browserContext._timeoutSettings);\n        this._screenshotter = new screenshotter_1.Screenshotter(this);\n        this._frameManager = new frames.FrameManager(this);\n        if (delegate.pdf)\n            this.pdf = delegate.pdf.bind(delegate);\n        this.coverage = delegate.coverage ? delegate.coverage() : null;\n        this.selectors = browserContext.selectors();\n    }\n    async reportAsNew() {\n        const pageOrError = await this._delegate.pageOrError();\n        if (pageOrError instanceof Error) {\n            // Initialization error could have happened because of\n            // context/browser closure. Just ignore the page.\n            if (this._browserContext.isClosingOrClosed())\n                return;\n            this._setIsError(pageOrError);\n        }\n        this._browserContext.emit(browserContext_1.BrowserContext.Events.Page, this);\n        const openerDelegate = this._delegate.openerDelegate();\n        if (openerDelegate) {\n            openerDelegate.pageOrError().then(openerPage => {\n                if (openerPage instanceof Page && !openerPage.isClosed())\n                    openerPage.emit(Page.Events.Popup, this);\n            });\n        }\n    }\n    async _doSlowMo() {\n        const slowMo = this._browserContext._browser.options.slowMo;\n        if (!slowMo)\n            return;\n        await new Promise(x => setTimeout(x, slowMo));\n    }\n    _didClose() {\n        this._frameManager.dispose();\n        utils_1.assert(this._closedState !== 'closed', 'Page closed twice');\n        this._closedState = 'closed';\n        this.emit(Page.Events.Close);\n        this._closedCallback();\n    }\n    _didCrash() {\n        this._frameManager.dispose();\n        this.emit(Page.Events.Crash);\n        this._crashedCallback(new Error('Page crashed'));\n    }\n    _didDisconnect() {\n        this._frameManager.dispose();\n        utils_1.assert(!this._disconnected, 'Page disconnected twice');\n        this._disconnected = true;\n        this._disconnectedCallback(new Error('Page closed'));\n    }\n    async _onFileChooserOpened(handle) {\n        let multiple;\n        try {\n            multiple = await handle.evaluate(element => !!element.multiple);\n        }\n        catch (e) {\n            // Frame/context may be gone during async processing. Do not throw.\n            return;\n        }\n        if (!this.listenerCount(Page.Events.FileChooser)) {\n            handle.dispose();\n            return;\n        }\n        const fileChooser = new fileChooser_1.FileChooser(this, handle, multiple);\n        this.emit(Page.Events.FileChooser, fileChooser);\n    }\n    context() {\n        return this._browserContext;\n    }\n    async opener() {\n        return await this._delegate.opener();\n    }\n    mainFrame() {\n        return this._frameManager.mainFrame();\n    }\n    frames() {\n        return this._frameManager.frames();\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n    }\n    async exposeBinding(name, needsHandle, playwrightBinding, world = 'main') {\n        const identifier = PageBinding.identifier(name, world);\n        if (this._pageBindings.has(identifier))\n            throw new Error(`Function \"${name}\" has been already registered`);\n        if (this._browserContext._pageBindings.has(identifier))\n            throw new Error(`Function \"${name}\" has been already registered in the browser context`);\n        const binding = new PageBinding(name, playwrightBinding, needsHandle, world);\n        this._pageBindings.set(identifier, binding);\n        await this._delegate.exposeBinding(binding);\n    }\n    setExtraHTTPHeaders(headers) {\n        this._state.extraHTTPHeaders = headers;\n        return this._delegate.updateExtraHTTPHeaders();\n    }\n    async _onBindingCalled(payload, context) {\n        if (this._disconnected || this._closedState === 'closed')\n            return;\n        await PageBinding.dispatch(this, payload, context);\n    }\n    _addConsoleMessage(type, args, location, text) {\n        const message = new console_1.ConsoleMessage(type, text, args, location);\n        const intercepted = this._frameManager.interceptConsoleMessage(message);\n        if (intercepted || !this.listenerCount(Page.Events.Console))\n            args.forEach(arg => arg.dispose());\n        else\n            this.emit(Page.Events.Console, message);\n    }\n    async reload(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this.mainFrame().raceNavigationAction(async () => {\n            // Note: waitForNavigation may fail before we get response to reload(),\n            // so we should await it immediately.\n            const [response] = await Promise.all([\n                this.mainFrame()._waitForNavigation(progress, options),\n                this._delegate.reload(),\n            ]);\n            await this._doSlowMo();\n            return response;\n        }), this._timeoutSettings.navigationTimeout(options));\n    }\n    async goBack(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this.mainFrame().raceNavigationAction(async () => {\n            // Note: waitForNavigation may fail before we get response to goBack,\n            // so we should catch it immediately.\n            let error;\n            const waitPromise = this.mainFrame()._waitForNavigation(progress, options).catch(e => {\n                error = e;\n                return null;\n            });\n            const result = await this._delegate.goBack();\n            if (!result)\n                return null;\n            const response = await waitPromise;\n            if (error)\n                throw error;\n            await this._doSlowMo();\n            return response;\n        }), this._timeoutSettings.navigationTimeout(options));\n    }\n    async goForward(metadata, options) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this.mainFrame().raceNavigationAction(async () => {\n            // Note: waitForNavigation may fail before we get response to goForward,\n            // so we should catch it immediately.\n            let error;\n            const waitPromise = this.mainFrame()._waitForNavigation(progress, options).catch(e => {\n                error = e;\n                return null;\n            });\n            const result = await this._delegate.goForward();\n            if (!result)\n                return null;\n            const response = await waitPromise;\n            if (error)\n                throw error;\n            await this._doSlowMo();\n            return response;\n        }), this._timeoutSettings.navigationTimeout(options));\n    }\n    async emulateMedia(options) {\n        if (options.media !== undefined)\n            utils_1.assert(options.media === null || types.mediaTypes.has(options.media), 'media: expected one of (screen|print|null)');\n        if (options.colorScheme !== undefined)\n            utils_1.assert(options.colorScheme === null || types.colorSchemes.has(options.colorScheme), 'colorScheme: expected one of (dark|light|no-preference|null)');\n        if (options.media !== undefined)\n            this._state.mediaType = options.media;\n        if (options.colorScheme !== undefined)\n            this._state.colorScheme = options.colorScheme;\n        await this._delegate.updateEmulateMedia();\n        await this._doSlowMo();\n    }\n    async setViewportSize(viewportSize) {\n        this._state.viewportSize = { ...viewportSize };\n        await this._delegate.setViewportSize(this._state.viewportSize);\n        await this._doSlowMo();\n    }\n    viewportSize() {\n        return this._state.viewportSize;\n    }\n    async bringToFront() {\n        await this._delegate.bringToFront();\n    }\n    async _addInitScriptExpression(source) {\n        this._evaluateOnNewDocumentSources.push(source);\n        await this._delegate.evaluateOnNewDocument(source);\n    }\n    _needsRequestInterception() {\n        return !!this._clientRequestInterceptor || !!this._serverRequestInterceptor || !!this._browserContext._requestInterceptor;\n    }\n    async _setClientRequestInterceptor(handler) {\n        this._clientRequestInterceptor = handler;\n        await this._delegate.updateRequestInterception();\n    }\n    async _setServerRequestInterceptor(handler) {\n        this._serverRequestInterceptor = handler;\n        await this._delegate.updateRequestInterception();\n    }\n    _requestStarted(request) {\n        this.emit(Page.Events.Request, request);\n        const route = request._route();\n        if (!route)\n            return;\n        if (this._serverRequestInterceptor) {\n            this._serverRequestInterceptor(route, request);\n            return;\n        }\n        if (this._clientRequestInterceptor) {\n            this._clientRequestInterceptor(route, request);\n            return;\n        }\n        if (this._browserContext._requestInterceptor) {\n            this._browserContext._requestInterceptor(route, request);\n            return;\n        }\n        route.continue();\n    }\n    async screenshot(metadata, options = {}) {\n        const controller = new progress_1.ProgressController(metadata, this);\n        return controller.run(progress => this._screenshotter.screenshotPage(progress, options), this._timeoutSettings.timeout(options));\n    }\n    async close(metadata, options) {\n        if (this._closedState === 'closed')\n            return;\n        const runBeforeUnload = !!options && !!options.runBeforeUnload;\n        if (this._closedState !== 'closing') {\n            this._closedState = 'closing';\n            utils_1.assert(!this._disconnected, 'Protocol error: Connection closed. Most likely the page has been closed.');\n            // This might throw if the browser context containing the page closes\n            // while we are trying to close the page.\n            await this._delegate.closePage(runBeforeUnload).catch(e => debugLogger_1.debugLogger.log('error', e));\n        }\n        if (!runBeforeUnload)\n            await this._closedPromise;\n        if (this._ownedContext)\n            await this._ownedContext.close(metadata);\n    }\n    _setIsError(error) {\n        this._pageIsError = error;\n        if (!this._frameManager.mainFrame())\n            this._frameManager.frameAttached('<dummy>', null);\n    }\n    isClosed() {\n        return this._closedState === 'closed';\n    }\n    _addWorker(workerId, worker) {\n        this._workers.set(workerId, worker);\n        this.emit(Page.Events.Worker, worker);\n    }\n    _removeWorker(workerId) {\n        const worker = this._workers.get(workerId);\n        if (!worker)\n            return;\n        worker.emit(Worker.Events.Close, worker);\n        this._workers.delete(workerId);\n    }\n    _clearWorkers() {\n        for (const [workerId, worker] of this._workers) {\n            worker.emit(Worker.Events.Close, worker);\n            this._workers.delete(workerId);\n        }\n    }\n    async _setFileChooserIntercepted(enabled) {\n        await this._delegate.setFileChooserIntercepted(enabled);\n    }\n    videoStarted(video) {\n        this._video = video;\n        this.emit(Page.Events.VideoStarted, video);\n    }\n    frameNavigatedToNewDocument(frame) {\n        this.emit(Page.Events.InternalFrameNavigatedToNewDocument, frame);\n        const url = frame.url();\n        if (!url.startsWith('http'))\n            return;\n        const purl = network.parsedURL(url);\n        if (purl)\n            this._browserContext.addVisitedOrigin(purl.origin);\n    }\n    allBindings() {\n        return [...this._browserContext._pageBindings.values(), ...this._pageBindings.values()];\n    }\n    getBinding(name, world) {\n        const identifier = PageBinding.identifier(name, world);\n        return this._pageBindings.get(identifier) || this._browserContext._pageBindings.get(identifier);\n    }\n}\nexports.Page = Page;\nPage.Events = {\n    Close: 'close',\n    Crash: 'crash',\n    Console: 'console',\n    Dialog: 'dialog',\n    InternalDialogClosed: 'internaldialogclosed',\n    Download: 'download',\n    FileChooser: 'filechooser',\n    DOMContentLoaded: 'domcontentloaded',\n    // Can't use just 'error' due to node.js special treatment of error events.\n    // @see https://nodejs.org/api/events.html#events_error_events\n    PageError: 'pageerror',\n    Request: 'request',\n    Response: 'response',\n    RequestFailed: 'requestfailed',\n    RequestFinished: 'requestfinished',\n    FrameAttached: 'frameattached',\n    FrameDetached: 'framedetached',\n    InternalFrameNavigatedToNewDocument: 'internalframenavigatedtonewdocument',\n    Load: 'load',\n    Popup: 'popup',\n    WebSocket: 'websocket',\n    Worker: 'worker',\n    VideoStarted: 'videostarted',\n};\nclass Worker extends instrumentation_1.SdkObject {\n    constructor(parent, url) {\n        super(parent);\n        this._existingExecutionContext = null;\n        this._url = url;\n        this._executionContextCallback = () => { };\n        this._executionContextPromise = new Promise(x => this._executionContextCallback = x);\n    }\n    _createExecutionContext(delegate) {\n        this._existingExecutionContext = new js.ExecutionContext(this, delegate);\n        this._executionContextCallback(this._existingExecutionContext);\n    }\n    url() {\n        return this._url;\n    }\n    async evaluateExpression(expression, isFunction, arg) {\n        return js.evaluateExpression(await this._executionContextPromise, true /* returnByValue */, expression, isFunction, arg);\n    }\n    async evaluateExpressionHandle(expression, isFunction, arg) {\n        return js.evaluateExpression(await this._executionContextPromise, false /* returnByValue */, expression, isFunction, arg);\n    }\n}\nexports.Worker = Worker;\nWorker.Events = {\n    Close: 'close',\n};\nclass PageBinding {\n    constructor(name, playwrightFunction, needsHandle, world) {\n        this.name = name;\n        this.playwrightFunction = playwrightFunction;\n        this.source = `(${addPageBinding.toString()})(${JSON.stringify(name)}, ${needsHandle})`;\n        this.needsHandle = needsHandle;\n        this.world = world;\n    }\n    static identifier(name, world) {\n        return world + ':' + name;\n    }\n    static async dispatch(page, payload, context) {\n        const { name, seq, args } = JSON.parse(payload);\n        try {\n            utils_1.assert(context.world);\n            const binding = page.getBinding(name, context.world);\n            let result;\n            if (binding.needsHandle) {\n                const handle = await context.evaluateHandle(takeHandle, { name, seq }).catch(e => null);\n                result = await binding.playwrightFunction({ frame: context.frame, page, context: page._browserContext }, handle);\n            }\n            else {\n                result = await binding.playwrightFunction({ frame: context.frame, page, context: page._browserContext }, ...args);\n            }\n            context.evaluate(deliverResult, { name, seq, result }).catch(e => debugLogger_1.debugLogger.log('error', e));\n        }\n        catch (error) {\n            if (utils_1.isError(error))\n                context.evaluate(deliverError, { name, seq, message: error.message, stack: error.stack }).catch(e => debugLogger_1.debugLogger.log('error', e));\n            else\n                context.evaluate(deliverErrorValue, { name, seq, error }).catch(e => debugLogger_1.debugLogger.log('error', e));\n        }\n        function takeHandle(arg) {\n            const handle = window[arg.name]['handles'].get(arg.seq);\n            window[arg.name]['handles'].delete(arg.seq);\n            return handle;\n        }\n        function deliverResult(arg) {\n            window[arg.name]['callbacks'].get(arg.seq).resolve(arg.result);\n            window[arg.name]['callbacks'].delete(arg.seq);\n        }\n        function deliverError(arg) {\n            const error = new Error(arg.message);\n            error.stack = arg.stack;\n            window[arg.name]['callbacks'].get(arg.seq).reject(error);\n            window[arg.name]['callbacks'].delete(arg.seq);\n        }\n        function deliverErrorValue(arg) {\n            window[arg.name]['callbacks'].get(arg.seq).reject(arg.error);\n            window[arg.name]['callbacks'].delete(arg.seq);\n        }\n    }\n}\nexports.PageBinding = PageBinding;\nfunction addPageBinding(bindingName, needsHandle) {\n    const binding = window[bindingName];\n    if (binding.__installed)\n        return;\n    window[bindingName] = (...args) => {\n        const me = window[bindingName];\n        if (needsHandle && args.slice(1).some(arg => arg !== undefined))\n            throw new Error(`exposeBindingHandle supports a single argument, ${args.length} received`);\n        let callbacks = me['callbacks'];\n        if (!callbacks) {\n            callbacks = new Map();\n            me['callbacks'] = callbacks;\n        }\n        const seq = (me['lastSeq'] || 0) + 1;\n        me['lastSeq'] = seq;\n        let handles = me['handles'];\n        if (!handles) {\n            handles = new Map();\n            me['handles'] = handles;\n        }\n        const promise = new Promise((resolve, reject) => callbacks.set(seq, { resolve, reject }));\n        if (needsHandle) {\n            handles.set(seq, args[0]);\n            binding(JSON.stringify({ name: bindingName, seq }));\n        }\n        else {\n            binding(JSON.stringify({ name: bindingName, seq, args }));\n        }\n        return promise;\n    };\n    window[bindingName].__installed = true;\n}\n//# sourceMappingURL=page.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PipeTransport = void 0;\nconst utils_1 = require(\"../utils/utils\");\nconst debugLogger_1 = require(\"../utils/debugLogger\");\nclass PipeTransport {\n    constructor(pipeWrite, pipeRead) {\n        this._pendingMessage = '';\n        this._waitForNextTask = utils_1.makeWaitForNextTask();\n        this._closed = false;\n        this._pipeWrite = pipeWrite;\n        pipeRead.on('data', buffer => this._dispatch(buffer));\n        pipeRead.on('close', () => {\n            this._closed = true;\n            if (this.onclose)\n                this.onclose.call(null);\n        });\n        pipeRead.on('error', e => debugLogger_1.debugLogger.log('error', e));\n        pipeWrite.on('error', e => debugLogger_1.debugLogger.log('error', e));\n        this.onmessage = undefined;\n        this.onclose = undefined;\n    }\n    send(message) {\n        if (this._closed)\n            throw new Error('Pipe has been closed');\n        this._pipeWrite.write(JSON.stringify(message));\n        this._pipeWrite.write('\\0');\n    }\n    close() {\n        throw new Error('unimplemented');\n    }\n    _dispatch(buffer) {\n        let end = buffer.indexOf('\\0');\n        if (end === -1) {\n            this._pendingMessage += buffer.toString();\n            return;\n        }\n        const message = this._pendingMessage + buffer.toString(undefined, 0, end);\n        this._waitForNextTask(() => {\n            if (this.onmessage)\n                this.onmessage.call(null, JSON.parse(message));\n        });\n        let start = end + 1;\n        end = buffer.indexOf('\\0', start);\n        while (end !== -1) {\n            const message = buffer.toString(undefined, start, end);\n            this._waitForNextTask(() => {\n                if (this.onmessage)\n                    this.onmessage.call(null, JSON.parse(message));\n            });\n            start = end + 1;\n            end = buffer.indexOf('\\0', start);\n        }\n        this._pendingMessage = buffer.toString(undefined, start);\n    }\n}\nexports.PipeTransport = PipeTransport;\n//# sourceMappingURL=pipeTransport.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createPlaywright = exports.Playwright = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst tracer_1 = require(\"./trace/recorder/tracer\");\nconst android_1 = require(\"./android/android\");\nconst backendAdb_1 = require(\"./android/backendAdb\");\nconst chromium_1 = require(\"./chromium/chromium\");\nconst electron_1 = require(\"./electron/electron\");\nconst firefox_1 = require(\"./firefox/firefox\");\nconst selectors_1 = require(\"./selectors\");\nconst harTracer_1 = require(\"./supplements/har/harTracer\");\nconst inspectorController_1 = require(\"./supplements/inspectorController\");\nconst webkit_1 = require(\"./webkit/webkit\");\nconst registry_1 = require(\"../utils/registry\");\nconst instrumentation_1 = require(\"./instrumentation\");\nclass Playwright extends instrumentation_1.SdkObject {\n    constructor(isInternal) {\n        const listeners = [];\n        if (!isInternal) {\n            listeners.push(new tracer_1.Tracer());\n            listeners.push(new harTracer_1.HarTracer());\n            listeners.push(new inspectorController_1.InspectorController());\n        }\n        const instrumentation = instrumentation_1.multiplexInstrumentation(listeners);\n        super({ attribution: {}, instrumentation });\n        this.options = {\n            registry: new registry_1.Registry(path_1.default.join(__dirname, '..', '..')),\n            rootSdkObject: this,\n        };\n        this.chromium = new chromium_1.Chromium(this.options);\n        this.firefox = new firefox_1.Firefox(this.options);\n        this.webkit = new webkit_1.WebKit(this.options);\n        this.electron = new electron_1.Electron(this.options);\n        this.android = new android_1.Android(new backendAdb_1.AdbBackend(), this.options);\n        this.selectors = selectors_1.serverSelectors;\n    }\n}\nexports.Playwright = Playwright;\nfunction createPlaywright(isInternal = false) {\n    return new Playwright(isInternal);\n}\nexports.createPlaywright = createPlaywright;\n//# sourceMappingURL=playwright.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.envArrayToObject = exports.launchProcess = exports.gracefullyCloseAll = void 0;\nconst childProcess = __importStar(require(\"child_process\"));\nconst readline = __importStar(require(\"readline\"));\nconst helper_1 = require(\"./helper\");\nconst utils_1 = require(\"../utils/utils\");\nconst gracefullyCloseSet = new Set();\nasync function gracefullyCloseAll() {\n    await Promise.all(Array.from(gracefullyCloseSet).map(gracefullyClose => gracefullyClose().catch(e => { })));\n}\nexports.gracefullyCloseAll = gracefullyCloseAll;\n// We currently spawn a process per page when recording video in Chromium.\n//  This triggers \"too many listeners\" on the process object once you have more than 10 pages open.\nconst maxListeners = process.getMaxListeners();\nif (maxListeners !== 0)\n    process.setMaxListeners(Math.max(maxListeners || 0, 100));\nasync function launchProcess(options) {\n    const cleanup = () => utils_1.removeFolders(options.tempDirectories);\n    const stdio = options.stdio === 'pipe' ? ['ignore', 'pipe', 'pipe', 'pipe', 'pipe'] : ['pipe', 'pipe', 'pipe'];\n    options.log(`<launching> ${options.executablePath} ${options.args.join(' ')}`);\n    const spawnedProcess = childProcess.spawn(options.executablePath, options.args, {\n        // On non-windows platforms, `detached: true` makes child process a leader of a new\n        // process group, making it possible to kill child process tree with `.kill(-pid)` command.\n        // @see https://nodejs.org/api/child_process.html#child_process_options_detached\n        detached: process.platform !== 'win32',\n        env: options.env,\n        cwd: options.cwd,\n        stdio,\n    });\n    // Prevent Unhandled 'error' event.\n    spawnedProcess.on('error', () => { });\n    if (!spawnedProcess.pid) {\n        let failed;\n        const failedPromise = new Promise((f, r) => failed = f);\n        spawnedProcess.once('error', error => {\n            failed(new Error('Failed to launch: ' + error));\n        });\n        return cleanup().then(() => failedPromise).then(e => Promise.reject(e));\n    }\n    options.log(`<launched> pid=${spawnedProcess.pid}`);\n    const stdout = readline.createInterface({ input: spawnedProcess.stdout });\n    stdout.on('line', (data) => {\n        options.log(`[pid=${spawnedProcess.pid}][out] ` + data);\n    });\n    const stderr = readline.createInterface({ input: spawnedProcess.stderr });\n    stderr.on('line', (data) => {\n        options.log(`[pid=${spawnedProcess.pid}][err] ` + data);\n    });\n    let processClosed = false;\n    let fulfillClose = () => { };\n    const waitForClose = new Promise(f => fulfillClose = f);\n    let fulfillCleanup = () => { };\n    const waitForCleanup = new Promise(f => fulfillCleanup = f);\n    spawnedProcess.once('exit', (exitCode, signal) => {\n        options.log(`[pid=${spawnedProcess.pid}] <process did exit: exitCode=${exitCode}, signal=${signal}>`);\n        processClosed = true;\n        helper_1.helper.removeEventListeners(listeners);\n        gracefullyCloseSet.delete(gracefullyClose);\n        options.onExit(exitCode, signal);\n        fulfillClose();\n        // Cleanup as process exits.\n        cleanup().then(fulfillCleanup);\n    });\n    const listeners = [helper_1.helper.addEventListener(process, 'exit', killProcess)];\n    if (options.handleSIGINT) {\n        listeners.push(helper_1.helper.addEventListener(process, 'SIGINT', () => {\n            gracefullyClose().then(() => {\n                // Give tests a chance to dispatch any async calls.\n                if (utils_1.isUnderTest())\n                    setTimeout(() => process.exit(130), 0);\n                else\n                    process.exit(130);\n            });\n        }));\n    }\n    if (options.handleSIGTERM)\n        listeners.push(helper_1.helper.addEventListener(process, 'SIGTERM', gracefullyClose));\n    if (options.handleSIGHUP)\n        listeners.push(helper_1.helper.addEventListener(process, 'SIGHUP', gracefullyClose));\n    gracefullyCloseSet.add(gracefullyClose);\n    let gracefullyClosing = false;\n    async function gracefullyClose() {\n        gracefullyCloseSet.delete(gracefullyClose);\n        // We keep listeners until we are done, to handle 'exit' and 'SIGINT' while\n        // asynchronously closing to prevent zombie processes. This might introduce\n        // reentrancy to this function, for example user sends SIGINT second time.\n        // In this case, let's forcefully kill the process.\n        if (gracefullyClosing) {\n            options.log(`[pid=${spawnedProcess.pid}] <forecefully close>`);\n            killProcess();\n            await waitForClose; // Ensure the process is dead and we called options.onkill.\n            return;\n        }\n        gracefullyClosing = true;\n        options.log(`[pid=${spawnedProcess.pid}] <gracefully close start>`);\n        await options.attemptToGracefullyClose().catch(() => killProcess());\n        await waitForCleanup; // Ensure the process is dead and we have cleaned up.\n        options.log(`[pid=${spawnedProcess.pid}] <gracefully close end>`);\n    }\n    // This method has to be sync to be used as 'exit' event handler.\n    function killProcess() {\n        options.log(`[pid=${spawnedProcess.pid}] <kill>`);\n        helper_1.helper.removeEventListeners(listeners);\n        if (spawnedProcess.pid && !spawnedProcess.killed && !processClosed) {\n            // Force kill the browser.\n            try {\n                if (process.platform === 'win32')\n                    childProcess.execSync(`taskkill /pid ${spawnedProcess.pid} /T /F`, { stdio: 'ignore' });\n                else\n                    process.kill(-spawnedProcess.pid, 'SIGKILL');\n            }\n            catch (e) {\n                // the process might have already stopped\n            }\n        }\n        cleanup();\n    }\n    function killAndWait() {\n        killProcess();\n        return waitForCleanup;\n    }\n    return { launchedProcess: spawnedProcess, gracefullyClose, kill: killAndWait };\n}\nexports.launchProcess = launchProcess;\nfunction envArrayToObject(env) {\n    const result = {};\n    for (const { name, value } of env)\n        result[name] = value;\n    return result;\n}\nexports.envArrayToObject = envArrayToObject;\n//# sourceMappingURL=processLauncher.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressController = void 0;\nconst errors_1 = require(\"../utils/errors\");\nconst utils_1 = require(\"../utils/utils\");\nclass ProgressController {\n    constructor(metadata, sdkObject) {\n        // Promise and callback that forcefully abort the progress.\n        // This promise always rejects.\n        this._forceAbort = () => { };\n        // Cleanups to be run only in the case of abort.\n        this._cleanups = [];\n        this._logName = 'api';\n        this._state = 'before';\n        this._deadline = 0;\n        this._timeout = 0;\n        this.metadata = metadata;\n        this.sdkObject = sdkObject;\n        this.instrumentation = sdkObject.instrumentation;\n        this._forceAbortPromise = new Promise((resolve, reject) => this._forceAbort = reject);\n        this._forceAbortPromise.catch(e => null); // Prevent unhandled promise rejection.\n    }\n    setLogName(logName) {\n        this._logName = logName;\n    }\n    async run(task, timeout) {\n        if (timeout) {\n            this._timeout = timeout;\n            this._deadline = timeout ? utils_1.monotonicTime() + timeout : 0;\n        }\n        utils_1.assert(this._state === 'before');\n        this._state = 'running';\n        const progress = {\n            log: message => {\n                if (this._state === 'running')\n                    this.metadata.log.push(message);\n                // Note: we might be sending logs after progress has finished, for example browser logs.\n                this.instrumentation.onCallLog(this._logName, message, this.sdkObject, this.metadata);\n            },\n            timeUntilDeadline: () => this._deadline ? this._deadline - utils_1.monotonicTime() : 2147483647,\n            isRunning: () => this._state === 'running',\n            cleanupWhenAborted: (cleanup) => {\n                if (this._state === 'running')\n                    this._cleanups.push(cleanup);\n                else\n                    runCleanup(cleanup);\n            },\n            throwIfAborted: () => {\n                if (this._state === 'aborted')\n                    throw new AbortedError();\n            },\n            beforeInputAction: async (element) => {\n                await this.instrumentation.onBeforeInputAction(this.sdkObject, this.metadata, element);\n            },\n            afterInputAction: async () => {\n                await this.instrumentation.onAfterInputAction(this.sdkObject, this.metadata);\n            },\n            metadata: this.metadata\n        };\n        const timeoutError = new errors_1.TimeoutError(`Timeout ${this._timeout}ms exceeded.`);\n        const timer = setTimeout(() => this._forceAbort(timeoutError), progress.timeUntilDeadline());\n        try {\n            const promise = task(progress);\n            const result = await Promise.race([promise, this._forceAbortPromise]);\n            this._state = 'finished';\n            return result;\n        }\n        catch (e) {\n            this._state = 'aborted';\n            await Promise.all(this._cleanups.splice(0).map(runCleanup));\n            throw e;\n        }\n        finally {\n            clearTimeout(timer);\n        }\n    }\n}\nexports.ProgressController = ProgressController;\nasync function runCleanup(cleanup) {\n    try {\n        await cleanup();\n    }\n    catch (e) {\n    }\n}\nclass AbortedError extends Error {\n}\n//# sourceMappingURL=progress.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.kScreenshotDuringNavigationError = exports.Screenshotter = void 0;\nconst helper_1 = require(\"./helper\");\nconst stackTrace_1 = require(\"../utils/stackTrace\");\nconst utils_1 = require(\"../utils/utils\");\nclass Screenshotter {\n    constructor(page) {\n        this._queue = new TaskQueue();\n        this._page = page;\n        this._queue = new TaskQueue();\n    }\n    async _originalViewportSize() {\n        const originalViewportSize = this._page.viewportSize();\n        let viewportSize = originalViewportSize;\n        if (!viewportSize) {\n            const context = await this._page.mainFrame()._utilityContext();\n            viewportSize = await context.evaluate(() => ({ width: window.innerWidth, height: window.innerHeight }));\n        }\n        return { viewportSize, originalViewportSize };\n    }\n    async _fullPageSize() {\n        const context = await this._page.mainFrame()._utilityContext();\n        const fullPageSize = await context.evaluate(() => {\n            if (!document.body || !document.documentElement)\n                return null;\n            return {\n                width: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth, document.body.offsetWidth, document.documentElement.offsetWidth, document.body.clientWidth, document.documentElement.clientWidth),\n                height: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight),\n            };\n        });\n        if (!fullPageSize)\n            throw new Error(exports.kScreenshotDuringNavigationError);\n        return fullPageSize;\n    }\n    async screenshotPage(progress, options) {\n        const format = validateScreenshotOptions(options);\n        return this._queue.postTask(async () => {\n            const { viewportSize, originalViewportSize } = await this._originalViewportSize();\n            if (options.fullPage) {\n                const fullPageSize = await this._fullPageSize();\n                let documentRect = { x: 0, y: 0, width: fullPageSize.width, height: fullPageSize.height };\n                let overriddenViewportSize = null;\n                const fitsViewport = fullPageSize.width <= viewportSize.width && fullPageSize.height <= viewportSize.height;\n                if (!this._page._delegate.canScreenshotOutsideViewport() && !fitsViewport) {\n                    overriddenViewportSize = fullPageSize;\n                    progress.throwIfAborted(); // Avoid side effects.\n                    await this._page.setViewportSize(overriddenViewportSize);\n                    progress.cleanupWhenAborted(() => this._restoreViewport(originalViewportSize));\n                }\n                if (options.clip)\n                    documentRect = trimClipToSize(options.clip, documentRect);\n                const buffer = await this._screenshot(progress, format, documentRect, undefined, options);\n                progress.throwIfAborted(); // Avoid restoring after failure - should be done by cleanup.\n                if (overriddenViewportSize)\n                    await this._restoreViewport(originalViewportSize);\n                return buffer;\n            }\n            const viewportRect = options.clip ? trimClipToSize(options.clip, viewportSize) : { x: 0, y: 0, ...viewportSize };\n            return await this._screenshot(progress, format, undefined, viewportRect, options);\n        }).catch(rewriteError);\n    }\n    async screenshotElement(progress, handle, options = {}) {\n        const format = validateScreenshotOptions(options);\n        return this._queue.postTask(async () => {\n            const { viewportSize, originalViewportSize } = await this._originalViewportSize();\n            await handle._waitAndScrollIntoViewIfNeeded(progress);\n            let boundingBox = await handle.boundingBox();\n            utils_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n            utils_1.assert(boundingBox.width !== 0, 'Node has 0 width.');\n            utils_1.assert(boundingBox.height !== 0, 'Node has 0 height.');\n            let overriddenViewportSize = null;\n            const fitsViewport = boundingBox.width <= viewportSize.width && boundingBox.height <= viewportSize.height;\n            if (!this._page._delegate.canScreenshotOutsideViewport() && !fitsViewport) {\n                overriddenViewportSize = helper_1.helper.enclosingIntSize({\n                    width: Math.max(viewportSize.width, boundingBox.width),\n                    height: Math.max(viewportSize.height, boundingBox.height),\n                });\n                progress.throwIfAborted(); // Avoid side effects.\n                await this._page.setViewportSize(overriddenViewportSize);\n                progress.cleanupWhenAborted(() => this._restoreViewport(originalViewportSize));\n                await handle._waitAndScrollIntoViewIfNeeded(progress);\n                boundingBox = await handle.boundingBox();\n                utils_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n                utils_1.assert(boundingBox.width !== 0, 'Node has 0 width.');\n                utils_1.assert(boundingBox.height !== 0, 'Node has 0 height.');\n            }\n            const context = await this._page.mainFrame()._utilityContext();\n            const scrollOffset = await context.evaluate(() => ({ x: window.scrollX, y: window.scrollY }));\n            const documentRect = { ...boundingBox };\n            documentRect.x += scrollOffset.x;\n            documentRect.y += scrollOffset.y;\n            const buffer = await this._screenshot(progress, format, helper_1.helper.enclosingIntRect(documentRect), undefined, options);\n            progress.throwIfAborted(); // Avoid restoring after failure - should be done by cleanup.\n            if (overriddenViewportSize)\n                await this._restoreViewport(originalViewportSize);\n            return buffer;\n        }).catch(rewriteError);\n    }\n    async _screenshot(progress, format, documentRect, viewportRect, options) {\n        if (options.__testHookBeforeScreenshot)\n            await options.__testHookBeforeScreenshot();\n        progress.throwIfAborted(); // Screenshotting is expensive - avoid extra work.\n        const shouldSetDefaultBackground = options.omitBackground && format === 'png';\n        if (shouldSetDefaultBackground) {\n            await this._page._delegate.setBackgroundColor({ r: 0, g: 0, b: 0, a: 0 });\n            progress.cleanupWhenAborted(() => this._page._delegate.setBackgroundColor());\n        }\n        const buffer = await this._page._delegate.takeScreenshot(format, documentRect, viewportRect, options.quality);\n        progress.throwIfAborted(); // Avoid restoring after failure - should be done by cleanup.\n        if (shouldSetDefaultBackground)\n            await this._page._delegate.setBackgroundColor();\n        progress.throwIfAborted(); // Avoid side effects.\n        if (options.__testHookAfterScreenshot)\n            await options.__testHookAfterScreenshot();\n        return buffer;\n    }\n    async _restoreViewport(originalViewportSize) {\n        utils_1.assert(!this._page._delegate.canScreenshotOutsideViewport());\n        if (originalViewportSize)\n            await this._page.setViewportSize(originalViewportSize);\n        else\n            await this._page._delegate.resetViewport();\n    }\n}\nexports.Screenshotter = Screenshotter;\nclass TaskQueue {\n    constructor() {\n        this._chain = Promise.resolve();\n    }\n    postTask(task) {\n        const result = this._chain.then(task);\n        this._chain = result.catch(() => { });\n        return result;\n    }\n}\nfunction trimClipToSize(clip, size) {\n    const p1 = {\n        x: Math.max(0, Math.min(clip.x, size.width)),\n        y: Math.max(0, Math.min(clip.y, size.height))\n    };\n    const p2 = {\n        x: Math.max(0, Math.min(clip.x + clip.width, size.width)),\n        y: Math.max(0, Math.min(clip.y + clip.height, size.height))\n    };\n    const result = { x: p1.x, y: p1.y, width: p2.x - p1.x, height: p2.y - p1.y };\n    utils_1.assert(result.width && result.height, 'Clipped area is either empty or outside the resulting image');\n    return result;\n}\nfunction validateScreenshotOptions(options) {\n    let format = null;\n    // options.type takes precedence over inferring the type from options.path\n    // because it may be a 0-length file with no extension created beforehand (i.e. as a temp file).\n    if (options.type) {\n        utils_1.assert(options.type === 'png' || options.type === 'jpeg', 'Unknown options.type value: ' + options.type);\n        format = options.type;\n    }\n    if (!format)\n        format = 'png';\n    if (options.quality !== undefined) {\n        utils_1.assert(format === 'jpeg', 'options.quality is unsupported for the ' + format + ' screenshots');\n        utils_1.assert(typeof options.quality === 'number', 'Expected options.quality to be a number but found ' + (typeof options.quality));\n        utils_1.assert(Number.isInteger(options.quality), 'Expected options.quality to be an integer');\n        utils_1.assert(options.quality >= 0 && options.quality <= 100, 'Expected options.quality to be between 0 and 100 (inclusive), got ' + options.quality);\n    }\n    if (options.clip) {\n        utils_1.assert(typeof options.clip.x === 'number', 'Expected options.clip.x to be a number but found ' + (typeof options.clip.x));\n        utils_1.assert(typeof options.clip.y === 'number', 'Expected options.clip.y to be a number but found ' + (typeof options.clip.y));\n        utils_1.assert(typeof options.clip.width === 'number', 'Expected options.clip.width to be a number but found ' + (typeof options.clip.width));\n        utils_1.assert(typeof options.clip.height === 'number', 'Expected options.clip.height to be a number but found ' + (typeof options.clip.height));\n        utils_1.assert(options.clip.width !== 0, 'Expected options.clip.width not to be 0.');\n        utils_1.assert(options.clip.height !== 0, 'Expected options.clip.height not to be 0.');\n    }\n    return format;\n}\nexports.kScreenshotDuringNavigationError = 'Cannot take a screenshot while page is navigating';\nfunction rewriteError(e) {\n    if (typeof e === 'object' && e instanceof Error && e.message.includes('Execution context was destroyed'))\n        stackTrace_1.rewriteErrorMessage(e, exports.kScreenshotDuringNavigationError);\n    throw e;\n}\n//# sourceMappingURL=screenshotter.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serverSelectors = exports.Selectors = void 0;\nconst selectorParser_1 = require(\"./common/selectorParser\");\nclass Selectors {\n    constructor() {\n        // Note: keep in sync with InjectedScript class.\n        this._builtinEngines = new Set([\n            'css', 'css:light',\n            'xpath', 'xpath:light',\n            'text', 'text:light',\n            'id', 'id:light',\n            'data-testid', 'data-testid:light',\n            'data-test-id', 'data-test-id:light',\n            'data-test', 'data-test:light',\n        ]);\n        this._engines = new Map();\n    }\n    async register(name, source, contentScript = false) {\n        if (!name.match(/^[a-zA-Z_0-9-]+$/))\n            throw new Error('Selector engine name may only contain [a-zA-Z0-9_] characters');\n        // Note: we keep 'zs' for future use.\n        if (this._builtinEngines.has(name) || name === 'zs' || name === 'zs:light')\n            throw new Error(`\"${name}\" is a predefined selector engine`);\n        if (this._engines.has(name))\n            throw new Error(`\"${name}\" selector engine has been already registered`);\n        this._engines.set(name, { source, contentScript });\n    }\n    async _query(frame, selector, scope) {\n        const info = this._parseSelector(selector);\n        const context = await frame._context(info.world);\n        const injectedScript = await context.injectedScript();\n        const handle = await injectedScript.evaluateHandle((injected, { parsed, scope }) => {\n            return injected.querySelector(parsed, scope || document);\n        }, { parsed: info.parsed, scope });\n        const elementHandle = handle.asElement();\n        if (!elementHandle) {\n            handle.dispose();\n            return null;\n        }\n        const mainContext = await frame._mainContext();\n        return this._adoptIfNeeded(elementHandle, mainContext);\n    }\n    async _queryArray(frame, selector, scope) {\n        const info = this._parseSelector(selector);\n        const context = await frame._mainContext();\n        const injectedScript = await context.injectedScript();\n        const arrayHandle = await injectedScript.evaluateHandle((injected, { parsed, scope }) => {\n            return injected.querySelectorAll(parsed, scope || document);\n        }, { parsed: info.parsed, scope });\n        return arrayHandle;\n    }\n    async _queryAll(frame, selector, scope, adoptToMain) {\n        const info = this._parseSelector(selector);\n        const context = await frame._context(info.world);\n        const injectedScript = await context.injectedScript();\n        const arrayHandle = await injectedScript.evaluateHandle((injected, { parsed, scope }) => {\n            return injected.querySelectorAll(parsed, scope || document);\n        }, { parsed: info.parsed, scope });\n        const properties = await arrayHandle.getProperties();\n        arrayHandle.dispose();\n        // Note: adopting elements one by one may be slow. If we encounter the issue here,\n        // we might introduce 'useMainContext' option or similar to speed things up.\n        const targetContext = adoptToMain ? await frame._mainContext() : context;\n        const result = [];\n        for (const property of properties.values()) {\n            const elementHandle = property.asElement();\n            if (elementHandle)\n                result.push(this._adoptIfNeeded(elementHandle, targetContext));\n            else\n                property.dispose();\n        }\n        return Promise.all(result);\n    }\n    async _adoptIfNeeded(handle, context) {\n        if (handle._context === context)\n            return handle;\n        const adopted = handle._page._delegate.adoptElementHandle(handle, context);\n        handle.dispose();\n        return adopted;\n    }\n    _parseSelector(selector) {\n        const parsed = selectorParser_1.parseSelector(selector);\n        let needsMainWorld = false;\n        for (const part of parsed.parts) {\n            if (!Array.isArray(part)) {\n                const custom = this._engines.get(part.name);\n                if (!custom && !this._builtinEngines.has(part.name))\n                    throw new Error(`Unknown engine \"${part.name}\" while parsing selector ${selector}`);\n                if (custom && !custom.contentScript)\n                    needsMainWorld = true;\n            }\n        }\n        return {\n            parsed,\n            selector,\n            world: needsMainWorld ? 'main' : 'utility',\n        };\n    }\n}\nexports.Selectors = Selectors;\nexports.serverSelectors = new Selectors();\n//# sourceMappingURL=selectors.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemorySnapshotter = void 0;\nconst httpServer_1 = require(\"../../utils/httpServer\");\nconst helper_1 = require(\"../helper\");\nconst snapshotServer_1 = require(\"./snapshotServer\");\nconst snapshotStorage_1 = require(\"./snapshotStorage\");\nconst snapshotter_1 = require(\"./snapshotter\");\nconst kSnapshotInterval = 25;\nclass InMemorySnapshotter extends snapshotStorage_1.BaseSnapshotStorage {\n    constructor(context) {\n        super();\n        this._blobs = new Map();\n        this._server = new httpServer_1.HttpServer();\n        new snapshotServer_1.SnapshotServer(this._server, this);\n        this._snapshotter = new snapshotter_1.Snapshotter(context, this);\n    }\n    async initialize() {\n        await this._snapshotter.initialize();\n        return await this._server.start();\n    }\n    async start() {\n        await this._snapshotter.setAutoSnapshotInterval(kSnapshotInterval);\n    }\n    async dispose() {\n        this._snapshotter.dispose();\n        await this._server.stop();\n    }\n    async captureSnapshot(page, snapshotName, element) {\n        if (this._frameSnapshots.has(snapshotName))\n            throw new Error('Duplicate snapshot name: ' + snapshotName);\n        this._snapshotter.captureSnapshot(page, snapshotName, element);\n        return new Promise(fulfill => {\n            const listener = helper_1.helper.addEventListener(this, 'snapshot', (renderer) => {\n                if (renderer.snapshotName === snapshotName) {\n                    helper_1.helper.removeEventListeners([listener]);\n                    fulfill(renderer);\n                }\n            });\n        });\n    }\n    async setAutoSnapshotInterval(interval) {\n        await this._snapshotter.setAutoSnapshotInterval(interval);\n    }\n    onBlob(blob) {\n        this._blobs.set(blob.sha1, blob.buffer);\n    }\n    onResourceSnapshot(resource) {\n        this.addResource(resource);\n    }\n    onFrameSnapshot(snapshot) {\n        this.addFrameSnapshot(snapshot);\n    }\n    resourceContent(sha1) {\n        return this._blobs.get(sha1);\n    }\n}\nexports.InMemorySnapshotter = InMemorySnapshotter;\n//# sourceMappingURL=inMemorySnapshotter.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PersistentSnapshotter = void 0;\nconst events_1 = require(\"events\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util_1 = __importDefault(require(\"util\"));\nconst snapshotter_1 = require(\"./snapshotter\");\nconst fsWriteFileAsync = util_1.default.promisify(fs_1.default.writeFile.bind(fs_1.default));\nconst fsAppendFileAsync = util_1.default.promisify(fs_1.default.appendFile.bind(fs_1.default));\nconst fsMkdirAsync = util_1.default.promisify(fs_1.default.mkdir.bind(fs_1.default));\nconst kSnapshotInterval = 100;\nclass PersistentSnapshotter extends events_1.EventEmitter {\n    constructor(context, tracePrefix, resourcesDir) {\n        super();\n        this._writeArtifactChain = Promise.resolve();\n        this._resourcesDir = resourcesDir;\n        this._networkTrace = tracePrefix + '-network.trace';\n        this._snapshotTrace = tracePrefix + '-dom.trace';\n        this._snapshotter = new snapshotter_1.Snapshotter(context, this);\n    }\n    async start() {\n        await fsMkdirAsync(this._resourcesDir, { recursive: true }).catch(() => { });\n        await fsAppendFileAsync(this._networkTrace, Buffer.from([]));\n        await fsAppendFileAsync(this._snapshotTrace, Buffer.from([]));\n        await this._snapshotter.initialize();\n        await this._snapshotter.setAutoSnapshotInterval(kSnapshotInterval);\n    }\n    async dispose() {\n        this._snapshotter.dispose();\n        await this._writeArtifactChain;\n    }\n    captureSnapshot(page, snapshotName, element) {\n        this._snapshotter.captureSnapshot(page, snapshotName, element);\n    }\n    onBlob(blob) {\n        this._writeArtifactChain = this._writeArtifactChain.then(async () => {\n            await fsWriteFileAsync(path_1.default.join(this._resourcesDir, blob.sha1), blob.buffer).catch(() => { });\n        });\n    }\n    onResourceSnapshot(resource) {\n        this._writeArtifactChain = this._writeArtifactChain.then(async () => {\n            await fsAppendFileAsync(this._networkTrace, JSON.stringify(resource) + '\\n');\n        });\n    }\n    onFrameSnapshot(snapshot) {\n        this._writeArtifactChain = this._writeArtifactChain.then(async () => {\n            await fsAppendFileAsync(this._snapshotTrace, JSON.stringify(snapshot) + '\\n');\n        });\n    }\n}\nexports.PersistentSnapshotter = PersistentSnapshotter;\n//# sourceMappingURL=persistentSnapshotter.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SnapshotRenderer = void 0;\nclass SnapshotRenderer {\n    constructor(contextResources, snapshots, index) {\n        this._contextResources = contextResources;\n        this._snapshots = snapshots;\n        this._index = index;\n        this.snapshotName = snapshots[index].snapshotName;\n    }\n    snapshot() {\n        return this._snapshots[this._index];\n    }\n    render() {\n        const visit = (n, snapshotIndex) => {\n            // Text node.\n            if (typeof n === 'string')\n                return escapeText(n);\n            if (!n._string) {\n                if (Array.isArray(n[0])) {\n                    // Node reference.\n                    const referenceIndex = snapshotIndex - n[0][0];\n                    if (referenceIndex >= 0 && referenceIndex < snapshotIndex) {\n                        const nodes = snapshotNodes(this._snapshots[referenceIndex]);\n                        const nodeIndex = n[0][1];\n                        if (nodeIndex >= 0 && nodeIndex < nodes.length)\n                            n._string = visit(nodes[nodeIndex], referenceIndex);\n                    }\n                }\n                else if (typeof n[0] === 'string') {\n                    // Element node.\n                    const builder = [];\n                    builder.push('<', n[0]);\n                    for (const [attr, value] of Object.entries(n[1] || {}))\n                        builder.push(' ', attr, '=\"', escapeAttribute(value), '\"');\n                    builder.push('>');\n                    for (let i = 2; i < n.length; i++)\n                        builder.push(visit(n[i], snapshotIndex));\n                    if (!autoClosing.has(n[0]))\n                        builder.push('</', n[0], '>');\n                    n._string = builder.join('');\n                }\n                else {\n                    // Why are we here? Let's not throw, just in case.\n                    n._string = '';\n                }\n            }\n            return n._string;\n        };\n        const snapshot = this._snapshots[this._index];\n        let html = visit(snapshot.html, this._index);\n        if (!html)\n            return { html: '', resources: {} };\n        if (snapshot.doctype)\n            html = `<!DOCTYPE ${snapshot.doctype}>` + html;\n        html += `\n      <style>*[__playwright_target__=\"${this.snapshotName}\"] { background-color: #6fa8dc7f; }</style>\n      <script>${snapshotScript()}</script>\n    `;\n        const resources = {};\n        for (const [url, contextResources] of this._contextResources) {\n            const contextResource = contextResources.find(r => r.frameId === snapshot.frameId) || contextResources[0];\n            if (contextResource)\n                resources[url] = { resourceId: contextResource.resourceId };\n        }\n        for (const o of snapshot.resourceOverrides) {\n            const resource = resources[o.url];\n            resource.sha1 = o.sha1;\n        }\n        return { html, resources };\n    }\n}\nexports.SnapshotRenderer = SnapshotRenderer;\nconst autoClosing = new Set(['AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT', 'KEYGEN', 'LINK', 'MENUITEM', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR']);\nconst escaped = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '\\'': '&#39;' };\nfunction escapeAttribute(s) {\n    return s.replace(/[&<>\"']/ug, char => escaped[char]);\n}\nfunction escapeText(s) {\n    return s.replace(/[&<]/ug, char => escaped[char]);\n}\nfunction snapshotNodes(snapshot) {\n    if (!snapshot._nodes) {\n        const nodes = [];\n        const visit = (n) => {\n            if (typeof n === 'string') {\n                nodes.push(n);\n            }\n            else if (typeof n[0] === 'string') {\n                for (let i = 2; i < n.length; i++)\n                    visit(n[i]);\n                nodes.push(n);\n            }\n        };\n        visit(snapshot.html);\n        snapshot._nodes = nodes;\n    }\n    return snapshot._nodes;\n}\nfunction snapshotScript() {\n    function applyPlaywrightAttributes(shadowAttribute, scrollTopAttribute, scrollLeftAttribute) {\n        const scrollTops = [];\n        const scrollLefts = [];\n        const visit = (root) => {\n            // Collect all scrolled elements for later use.\n            for (const e of root.querySelectorAll(`[${scrollTopAttribute}]`))\n                scrollTops.push(e);\n            for (const e of root.querySelectorAll(`[${scrollLeftAttribute}]`))\n                scrollLefts.push(e);\n            for (const iframe of root.querySelectorAll('iframe')) {\n                const src = iframe.getAttribute('src');\n                if (!src) {\n                    iframe.setAttribute('src', 'data:text/html,<body style=\"background: #ddd\"></body>');\n                }\n                else {\n                    // Append query parameters to inherit ?name= or ?time= values from parent.\n                    iframe.setAttribute('src', window.location.origin + src + window.location.search);\n                }\n            }\n            for (const element of root.querySelectorAll(`template[${shadowAttribute}]`)) {\n                const template = element;\n                const shadowRoot = template.parentElement.attachShadow({ mode: 'open' });\n                shadowRoot.appendChild(template.content);\n                template.remove();\n                visit(shadowRoot);\n            }\n        };\n        visit(document);\n        const onLoad = () => {\n            window.removeEventListener('load', onLoad);\n            for (const element of scrollTops) {\n                element.scrollTop = +element.getAttribute(scrollTopAttribute);\n                element.removeAttribute(scrollTopAttribute);\n            }\n            for (const element of scrollLefts) {\n                element.scrollLeft = +element.getAttribute(scrollLeftAttribute);\n                element.removeAttribute(scrollLeftAttribute);\n            }\n        };\n        window.addEventListener('load', onLoad);\n    }\n    const kShadowAttribute = '__playwright_shadow_root_';\n    const kScrollTopAttribute = '__playwright_scroll_top_';\n    const kScrollLeftAttribute = '__playwright_scroll_left_';\n    return `\\n(${applyPlaywrightAttributes.toString()})('${kShadowAttribute}', '${kScrollTopAttribute}', '${kScrollLeftAttribute}')`;\n}\n//# sourceMappingURL=snapshotRenderer.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SnapshotServer = void 0;\nconst querystring_1 = __importDefault(require(\"querystring\"));\nclass SnapshotServer {\n    constructor(server, snapshotStorage) {\n        this._snapshotStorage = snapshotStorage;\n        server.routePrefix('/snapshot/', this._serveSnapshot.bind(this));\n        server.routePrefix('/resources/', this._serveResource.bind(this));\n    }\n    _serveSnapshotRoot(request, response) {\n        response.statusCode = 200;\n        response.setHeader('Cache-Control', 'public, max-age=31536000');\n        response.setHeader('Content-Type', 'text/html');\n        response.end(`\n      <style>\n        html, body {\n          margin: 0;\n          padding: 0;\n        }\n        iframe {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          border: none;\n        }\n      </style>\n      <body>\n        <script>\n        (${rootScript})();\n        </script>\n      </body>\n    `);\n        return true;\n    }\n    _serveServiceWorker(request, response) {\n        function serviceWorkerMain(self /* ServiceWorkerGlobalScope */) {\n            const snapshotResources = new Map();\n            self.addEventListener('install', function (event) {\n            });\n            self.addEventListener('activate', function (event) {\n                event.waitUntil(self.clients.claim());\n            });\n            function respond404() {\n                return new Response(null, { status: 404 });\n            }\n            function respondNotAvailable() {\n                return new Response('<body style=\"background: #ddd\"></body>', { status: 200, headers: { 'Content-Type': 'text/html' } });\n            }\n            function removeHash(url) {\n                try {\n                    const u = new URL(url);\n                    u.hash = '';\n                    return u.toString();\n                }\n                catch (e) {\n                    return url;\n                }\n            }\n            async function doFetch(event /* FetchEvent */) {\n                const request = event.request;\n                const pathname = new URL(request.url).pathname;\n                if (pathname === '/snapshot/service-worker.js' || pathname === '/snapshot/')\n                    return fetch(event.request);\n                const snapshotUrl = request.mode === 'navigate' ?\n                    request.url : (await self.clients.get(event.clientId)).url;\n                if (request.mode === 'navigate') {\n                    const htmlResponse = await fetch(event.request);\n                    const { html, resources } = await htmlResponse.json();\n                    if (!html)\n                        return respondNotAvailable();\n                    snapshotResources.set(snapshotUrl, resources);\n                    const response = new Response(html, { status: 200, headers: { 'Content-Type': 'text/html' } });\n                    return response;\n                }\n                const resources = snapshotResources.get(snapshotUrl);\n                const urlWithoutHash = removeHash(request.url);\n                const resource = resources[urlWithoutHash];\n                if (!resource)\n                    return respond404();\n                const fetchUrl = resource.sha1 ?\n                    `/resources/${resource.resourceId}/override/${resource.sha1}` :\n                    `/resources/${resource.resourceId}`;\n                const fetchedResponse = await fetch(fetchUrl);\n                const headers = new Headers(fetchedResponse.headers);\n                // We make a copy of the response, instead of just forwarding,\n                // so that response url is not inherited as \"/resources/...\", but instead\n                // as the original request url.\n                // Response url turns into resource base uri that is used to resolve\n                // relative links, e.g. url(/foo/bar) in style sheets.\n                if (resource.sha1) {\n                    // No cache, so that we refetch overridden resources.\n                    headers.set('Cache-Control', 'no-cache');\n                }\n                const response = new Response(fetchedResponse.body, {\n                    status: fetchedResponse.status,\n                    statusText: fetchedResponse.statusText,\n                    headers,\n                });\n                return response;\n            }\n            self.addEventListener('fetch', function (event) {\n                event.respondWith(doFetch(event));\n            });\n        }\n        response.statusCode = 200;\n        response.setHeader('Cache-Control', 'public, max-age=31536000');\n        response.setHeader('Content-Type', 'application/javascript');\n        response.end(`(${serviceWorkerMain.toString()})(self)`);\n        return true;\n    }\n    _serveSnapshot(request, response) {\n        if (request.url.endsWith('/snapshot/'))\n            return this._serveSnapshotRoot(request, response);\n        if (request.url.endsWith('/snapshot/service-worker.js'))\n            return this._serveServiceWorker(request, response);\n        response.statusCode = 200;\n        response.setHeader('Cache-Control', 'public, max-age=31536000');\n        response.setHeader('Content-Type', 'application/json');\n        const [pageId, query] = request.url.substring('/snapshot/'.length).split('?');\n        const parsed = querystring_1.default.parse(query);\n        const snapshot = parsed.name ? this._snapshotStorage.snapshotByName(pageId, parsed.name) : this._snapshotStorage.snapshotByTime(pageId, parsed.time);\n        const snapshotData = snapshot ? snapshot.render() : { html: '' };\n        response.end(JSON.stringify(snapshotData));\n        return true;\n    }\n    _serveResource(request, response) {\n        // - /resources/<resourceId>\n        // - /resources/<resourceId>/override/<overrideSha1>\n        const parts = request.url.split('/');\n        if (!parts[0])\n            parts.shift();\n        if (!parts[parts.length - 1])\n            parts.pop();\n        if (parts[0] !== 'resources')\n            return false;\n        let resourceId;\n        let overrideSha1;\n        if (parts.length === 2) {\n            resourceId = parts[1];\n        }\n        else if (parts.length === 4 && parts[2] === 'override') {\n            resourceId = parts[1];\n            overrideSha1 = parts[3];\n        }\n        else {\n            return false;\n        }\n        const resource = this._snapshotStorage.resourceById(resourceId);\n        if (!resource)\n            return false;\n        const sha1 = overrideSha1 || resource.responseSha1;\n        try {\n            const content = this._snapshotStorage.resourceContent(sha1);\n            if (!content)\n                return false;\n            response.statusCode = 200;\n            let contentType = resource.contentType;\n            const isTextEncoding = /^text\\/|^application\\/(javascript|json)/.test(contentType);\n            if (isTextEncoding && !contentType.includes('charset'))\n                contentType = `${contentType}; charset=utf-8`;\n            response.setHeader('Content-Type', contentType);\n            for (const { name, value } of resource.responseHeaders)\n                response.setHeader(name, value);\n            response.removeHeader('Content-Encoding');\n            response.removeHeader('Access-Control-Allow-Origin');\n            response.setHeader('Access-Control-Allow-Origin', '*');\n            response.removeHeader('Content-Length');\n            response.setHeader('Content-Length', content.byteLength);\n            response.setHeader('Cache-Control', 'public, max-age=31536000');\n            response.end(content);\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    }\n}\nexports.SnapshotServer = SnapshotServer;\nfunction rootScript() {\n    if (!navigator.serviceWorker)\n        return;\n    navigator.serviceWorker.register('./service-worker.js');\n    let showPromise = Promise.resolve();\n    if (!navigator.serviceWorker.controller) {\n        showPromise = new Promise(resolve => {\n            navigator.serviceWorker.oncontrollerchange = () => resolve();\n        });\n    }\n    const pointElement = document.createElement('div');\n    pointElement.style.position = 'fixed';\n    pointElement.style.backgroundColor = 'red';\n    pointElement.style.width = '20px';\n    pointElement.style.height = '20px';\n    pointElement.style.borderRadius = '10px';\n    pointElement.style.margin = '-10px 0 0 -10px';\n    pointElement.style.zIndex = '2147483647';\n    let current = document.createElement('iframe');\n    document.body.appendChild(current);\n    let next = document.createElement('iframe');\n    document.body.appendChild(next);\n    next.style.visibility = 'hidden';\n    const onload = () => {\n        const temp = current;\n        current = next;\n        next = temp;\n        current.style.visibility = 'visible';\n        next.style.visibility = 'hidden';\n    };\n    current.onload = onload;\n    next.onload = onload;\n    window.showSnapshot = async (url, options = {}) => {\n        await showPromise;\n        next.src = url;\n        if (options.point) {\n            pointElement.style.left = options.point.x + 'px';\n            pointElement.style.top = options.point.y + 'px';\n            document.documentElement.appendChild(pointElement);\n        }\n        else {\n            pointElement.remove();\n        }\n    };\n    window.addEventListener('message', event => {\n        window.showSnapshot(window.location.href + event.data.snapshotUrl);\n    }, false);\n}\n//# sourceMappingURL=snapshotServer.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PersistentSnapshotStorage = exports.BaseSnapshotStorage = void 0;\nconst events_1 = require(\"events\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util_1 = __importDefault(require(\"util\"));\nconst snapshotRenderer_1 = require(\"./snapshotRenderer\");\nclass BaseSnapshotStorage extends events_1.EventEmitter {\n    constructor() {\n        super(...arguments);\n        this._resources = [];\n        this._resourceMap = new Map();\n        this._frameSnapshots = new Map();\n        this._contextResources = new Map();\n    }\n    addResource(resource) {\n        this._resourceMap.set(resource.resourceId, resource);\n        this._resources.push(resource);\n        let resources = this._contextResources.get(resource.url);\n        if (!resources) {\n            resources = [];\n            this._contextResources.set(resource.url, resources);\n        }\n        resources.push({ frameId: resource.frameId, resourceId: resource.resourceId });\n    }\n    addFrameSnapshot(snapshot) {\n        let frameSnapshots = this._frameSnapshots.get(snapshot.frameId);\n        if (!frameSnapshots) {\n            frameSnapshots = {\n                raw: [],\n                renderer: [],\n            };\n            this._frameSnapshots.set(snapshot.frameId, frameSnapshots);\n        }\n        frameSnapshots.raw.push(snapshot);\n        const renderer = new snapshotRenderer_1.SnapshotRenderer(new Map(this._contextResources), frameSnapshots.raw, frameSnapshots.raw.length - 1);\n        frameSnapshots.renderer.push(renderer);\n        this.emit('snapshot', renderer);\n    }\n    resourceById(resourceId) {\n        return this._resourceMap.get(resourceId);\n    }\n    resources() {\n        return this._resources.slice();\n    }\n    snapshotByName(frameId, snapshotName) {\n        var _a;\n        return (_a = this._frameSnapshots.get(frameId)) === null || _a === void 0 ? void 0 : _a.renderer.find(r => r.snapshotName === snapshotName);\n    }\n    snapshotByTime(frameId, timestamp) {\n        var _a;\n        let result = undefined;\n        for (const snapshot of ((_a = this._frameSnapshots.get(frameId)) === null || _a === void 0 ? void 0 : _a.renderer.values()) || []) {\n            if (timestamp && snapshot.snapshot().timestamp <= timestamp)\n                result = snapshot;\n        }\n        return result;\n    }\n}\nexports.BaseSnapshotStorage = BaseSnapshotStorage;\nconst fsReadFileAsync = util_1.default.promisify(fs_1.default.readFile.bind(fs_1.default));\nclass PersistentSnapshotStorage extends BaseSnapshotStorage {\n    async load(tracePrefix, resourcesDir) {\n        this._resourcesDir = resourcesDir;\n        const networkTrace = await fsReadFileAsync(tracePrefix + '-network.trace', 'utf8');\n        const resources = networkTrace.split('\\n').map(line => line.trim()).filter(line => !!line).map(line => JSON.parse(line));\n        resources.forEach(r => this.addResource(r));\n        const snapshotTrace = await fsReadFileAsync(path_1.default.join(tracePrefix + '-dom.trace'), 'utf8');\n        const snapshots = snapshotTrace.split('\\n').map(line => line.trim()).filter(line => !!line).map(line => JSON.parse(line));\n        snapshots.forEach(s => this.addFrameSnapshot(s));\n    }\n    resourceContent(sha1) {\n        return fs_1.default.readFileSync(path_1.default.join(this._resourcesDir, sha1));\n    }\n}\nexports.PersistentSnapshotStorage = PersistentSnapshotStorage;\n//# sourceMappingURL=snapshotStorage.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Snapshotter = void 0;\nconst browserContext_1 = require(\"../browserContext\");\nconst page_1 = require(\"../page\");\nconst helper_1 = require(\"../helper\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst snapshotterInjected_1 = require(\"./snapshotterInjected\");\nconst utils_1 = require(\"../../utils/utils\");\nclass Snapshotter {\n    constructor(context, delegate) {\n        this._eventListeners = [];\n        this._interval = 0;\n        this._context = context;\n        this._delegate = delegate;\n        for (const page of context.pages())\n            this._onPage(page);\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._context, browserContext_1.BrowserContext.Events.Page, this._onPage.bind(this)),\n        ];\n    }\n    async initialize() {\n        await this._context.exposeBinding(snapshotterInjected_1.kSnapshotBinding, false, (source, data) => {\n            const snapshot = {\n                snapshotName: data.snapshotName,\n                pageId: source.page.uniqueId,\n                frameId: source.frame.uniqueId,\n                frameUrl: data.url,\n                doctype: data.doctype,\n                html: data.html,\n                viewport: data.viewport,\n                timestamp: utils_1.monotonicTime(),\n                pageTimestamp: data.timestamp,\n                collectionTime: data.collectionTime,\n                resourceOverrides: [],\n            };\n            for (const { url, content } of data.resourceOverrides) {\n                if (typeof content === 'string') {\n                    const buffer = Buffer.from(content);\n                    const sha1 = utils_1.calculateSha1(buffer);\n                    this._delegate.onBlob({ sha1, buffer });\n                    snapshot.resourceOverrides.push({ url, sha1 });\n                }\n                else {\n                    snapshot.resourceOverrides.push({ url, ref: content });\n                }\n            }\n            this._delegate.onFrameSnapshot(snapshot);\n        });\n        const initScript = '(' + snapshotterInjected_1.frameSnapshotStreamer.toString() + ')()';\n        await this._context._doAddInitScript(initScript);\n        const frames = [];\n        for (const page of this._context.pages())\n            frames.push(...page.frames());\n        frames.map(frame => {\n            var _a;\n            (_a = frame._existingMainContext()) === null || _a === void 0 ? void 0 : _a.rawEvaluate(initScript).catch(debugExceptionHandler);\n        });\n    }\n    dispose() {\n        helper_1.helper.removeEventListeners(this._eventListeners);\n    }\n    captureSnapshot(page, snapshotName, element) {\n        // This needs to be sync, as in not awaiting for anything before we issue the command.\n        const expression = `window[${JSON.stringify(snapshotterInjected_1.kSnapshotStreamer)}].captureSnapshot(${JSON.stringify(snapshotName)})`;\n        element === null || element === void 0 ? void 0 : element.callFunctionNoReply((element, snapshotName) => {\n            element.setAttribute('__playwright_target__', snapshotName);\n        }, snapshotName);\n        const snapshotFrame = (frame) => {\n            const context = frame._existingMainContext();\n            context === null || context === void 0 ? void 0 : context.rawEvaluate(expression).catch(debugExceptionHandler);\n        };\n        page.frames().map(frame => snapshotFrame(frame));\n    }\n    async setAutoSnapshotInterval(interval) {\n        this._interval = interval;\n        const frames = [];\n        for (const page of this._context.pages())\n            frames.push(...page.frames());\n        await Promise.all(frames.map(frame => setIntervalInFrame(frame, interval)));\n    }\n    _onPage(page) {\n        const processNewFrame = (frame) => {\n            var _a;\n            annotateFrameHierarchy(frame);\n            setIntervalInFrame(frame, this._interval);\n            // FIXME: make addInitScript work for pages w/ setContent.\n            const initScript = '(' + snapshotterInjected_1.frameSnapshotStreamer.toString() + ')()';\n            (_a = frame._existingMainContext()) === null || _a === void 0 ? void 0 : _a.rawEvaluate(initScript).catch(debugExceptionHandler);\n        };\n        for (const frame of page.frames())\n            processNewFrame(frame);\n        this._eventListeners.push(helper_1.helper.addEventListener(page, page_1.Page.Events.FrameAttached, processNewFrame));\n        // Push streamer interval on navigation.\n        this._eventListeners.push(helper_1.helper.addEventListener(page, page_1.Page.Events.InternalFrameNavigatedToNewDocument, frame => {\n            setIntervalInFrame(frame, this._interval);\n        }));\n        // Capture resources.\n        this._eventListeners.push(helper_1.helper.addEventListener(page, page_1.Page.Events.Response, (response) => {\n            this._saveResource(page, response).catch(e => debugLogger_1.debugLogger.log('error', e));\n        }));\n    }\n    async _saveResource(page, response) {\n        const isRedirect = response.status() >= 300 && response.status() <= 399;\n        if (isRedirect)\n            return;\n        // Shortcut all redirects - we cannot intercept them properly.\n        let original = response.request();\n        while (original.redirectedFrom())\n            original = original.redirectedFrom();\n        const url = original.url();\n        let contentType = '';\n        for (const { name, value } of response.headers()) {\n            if (name.toLowerCase() === 'content-type')\n                contentType = value;\n        }\n        const method = original.method();\n        const status = response.status();\n        const requestBody = original.postDataBuffer();\n        const requestSha1 = requestBody ? utils_1.calculateSha1(requestBody) : 'none';\n        const requestHeaders = original.headers();\n        const body = await response.body().catch(e => debugLogger_1.debugLogger.log('error', e));\n        const responseSha1 = body ? utils_1.calculateSha1(body) : 'none';\n        const resource = {\n            pageId: page.uniqueId,\n            frameId: response.frame().uniqueId,\n            resourceId: 'resource@' + utils_1.createGuid(),\n            url,\n            contentType,\n            responseHeaders: response.headers(),\n            requestHeaders,\n            method,\n            status,\n            requestSha1,\n            responseSha1,\n            timestamp: utils_1.monotonicTime()\n        };\n        this._delegate.onResourceSnapshot(resource);\n        if (requestBody)\n            this._delegate.onBlob({ sha1: requestSha1, buffer: requestBody });\n        if (body)\n            this._delegate.onBlob({ sha1: responseSha1, buffer: body });\n    }\n}\nexports.Snapshotter = Snapshotter;\nasync function setIntervalInFrame(frame, interval) {\n    const context = frame._existingMainContext();\n    await (context === null || context === void 0 ? void 0 : context.evaluate(({ kSnapshotStreamer, interval }) => {\n        window[kSnapshotStreamer].setSnapshotInterval(interval);\n    }, { kSnapshotStreamer: snapshotterInjected_1.kSnapshotStreamer, interval }).catch(debugExceptionHandler));\n}\nasync function annotateFrameHierarchy(frame) {\n    try {\n        const frameElement = await frame.frameElement();\n        const parent = frame.parentFrame();\n        if (!parent)\n            return;\n        const context = await parent._mainContext();\n        await (context === null || context === void 0 ? void 0 : context.evaluate(({ kSnapshotStreamer, frameElement, frameId }) => {\n            window[kSnapshotStreamer].markIframe(frameElement, frameId);\n        }, { kSnapshotStreamer: snapshotterInjected_1.kSnapshotStreamer, frameElement, frameId: frame.uniqueId }));\n        frameElement.dispose();\n    }\n    catch (e) {\n    }\n}\nfunction debugExceptionHandler(e) {\n    // console.error(e);\n}\n//# sourceMappingURL=snapshotter.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.frameSnapshotStreamer = exports.kSnapshotBinding = exports.kSnapshotStreamer = void 0;\nexports.kSnapshotStreamer = '__playwright_snapshot_streamer_';\nexports.kSnapshotBinding = '__playwright_snapshot_binding_';\nfunction frameSnapshotStreamer() {\n    // Communication with Playwright.\n    const kSnapshotStreamer = '__playwright_snapshot_streamer_';\n    const kSnapshotBinding = '__playwright_snapshot_binding_';\n    if (window[kSnapshotStreamer])\n        return;\n    // Attributes present in the snapshot.\n    const kShadowAttribute = '__playwright_shadow_root_';\n    const kScrollTopAttribute = '__playwright_scroll_top_';\n    const kScrollLeftAttribute = '__playwright_scroll_left_';\n    // Symbols for our own info on Nodes/StyleSheets.\n    const kSnapshotFrameId = Symbol('__playwright_snapshot_frameid_');\n    const kCachedData = Symbol('__playwright_snapshot_cache_');\n    function ensureCachedData(obj) {\n        if (!obj[kCachedData])\n            obj[kCachedData] = {};\n        return obj[kCachedData];\n    }\n    function removeHash(url) {\n        try {\n            const u = new URL(url);\n            u.hash = '';\n            return u.toString();\n        }\n        catch (e) {\n            return url;\n        }\n    }\n    class Streamer {\n        constructor() {\n            this._removeNoScript = true;\n            this._lastSnapshotNumber = 0;\n            this._staleStyleSheets = new Set();\n            this._allStyleSheetsWithUrlOverride = new Set();\n            this._readingStyleSheet = false; // To avoid invalidating due to our own reads.\n            this._interval = 0;\n            this._interceptNativeMethod(window.CSSStyleSheet.prototype, 'insertRule', (sheet) => this._invalidateStyleSheet(sheet));\n            this._interceptNativeMethod(window.CSSStyleSheet.prototype, 'deleteRule', (sheet) => this._invalidateStyleSheet(sheet));\n            this._interceptNativeMethod(window.CSSStyleSheet.prototype, 'addRule', (sheet) => this._invalidateStyleSheet(sheet));\n            this._interceptNativeMethod(window.CSSStyleSheet.prototype, 'removeRule', (sheet) => this._invalidateStyleSheet(sheet));\n            this._interceptNativeGetter(window.CSSStyleSheet.prototype, 'rules', (sheet) => this._invalidateStyleSheet(sheet));\n            this._interceptNativeGetter(window.CSSStyleSheet.prototype, 'cssRules', (sheet) => this._invalidateStyleSheet(sheet));\n            this._fakeBase = document.createElement('base');\n            this._observer = new MutationObserver(list => this._handleMutations(list));\n            const observerConfig = { attributes: true, subtree: true };\n            this._observer.observe(document, observerConfig);\n        }\n        _interceptNativeMethod(obj, method, cb) {\n            const native = obj[method];\n            if (!native)\n                return;\n            obj[method] = function (...args) {\n                const result = native.call(this, ...args);\n                cb(this, result);\n                return result;\n            };\n        }\n        _interceptNativeGetter(obj, prop, cb) {\n            const descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            Object.defineProperty(obj, prop, {\n                ...descriptor,\n                get: function () {\n                    const result = descriptor.get.call(this);\n                    cb(this, result);\n                    return result;\n                },\n            });\n        }\n        _handleMutations(list) {\n            for (const mutation of list)\n                ensureCachedData(mutation.target).attributesCached = undefined;\n        }\n        _invalidateStyleSheet(sheet) {\n            if (this._readingStyleSheet)\n                return;\n            this._staleStyleSheets.add(sheet);\n            if (sheet.href !== null)\n                this._allStyleSheetsWithUrlOverride.add(sheet);\n        }\n        _updateStyleElementStyleSheetTextIfNeeded(sheet) {\n            const data = ensureCachedData(sheet);\n            if (this._staleStyleSheets.has(sheet)) {\n                this._staleStyleSheets.delete(sheet);\n                try {\n                    data.cssText = this._getSheetText(sheet);\n                }\n                catch (e) {\n                    // Sometimes we cannot access cross-origin stylesheets.\n                }\n            }\n            return data.cssText;\n        }\n        // Returns either content, ref, or no override.\n        _updateLinkStyleSheetTextIfNeeded(sheet, snapshotNumber) {\n            const data = ensureCachedData(sheet);\n            if (this._staleStyleSheets.has(sheet)) {\n                this._staleStyleSheets.delete(sheet);\n                try {\n                    data.cssText = this._getSheetText(sheet);\n                    data.cssRef = snapshotNumber;\n                    return data.cssText;\n                }\n                catch (e) {\n                    // Sometimes we cannot access cross-origin stylesheets.\n                }\n            }\n            return data.cssRef === undefined ? undefined : snapshotNumber - data.cssRef;\n        }\n        markIframe(iframeElement, frameId) {\n            iframeElement[kSnapshotFrameId] = frameId;\n        }\n        captureSnapshot(snapshotName) {\n            this._streamSnapshot(snapshotName);\n        }\n        setSnapshotInterval(interval) {\n            this._interval = interval;\n            if (interval)\n                this._streamSnapshot();\n        }\n        _streamSnapshot(snapshotName) {\n            if (this._timer) {\n                clearTimeout(this._timer);\n                this._timer = undefined;\n            }\n            try {\n                const snapshot = this._captureSnapshot(snapshotName);\n                if (snapshot)\n                    window[kSnapshotBinding](snapshot);\n            }\n            catch (e) {\n            }\n            if (this._interval)\n                this._timer = setTimeout(() => this._streamSnapshot(), this._interval);\n        }\n        _sanitizeUrl(url) {\n            if (url.startsWith('javascript:'))\n                return '';\n            return url;\n        }\n        _sanitizeSrcSet(srcset) {\n            return srcset.split(',').map(src => {\n                src = src.trim();\n                const spaceIndex = src.lastIndexOf(' ');\n                if (spaceIndex === -1)\n                    return this._sanitizeUrl(src);\n                return this._sanitizeUrl(src.substring(0, spaceIndex).trim()) + src.substring(spaceIndex);\n            }).join(',');\n        }\n        _resolveUrl(base, url) {\n            if (url === '')\n                return '';\n            try {\n                return new URL(url, base).href;\n            }\n            catch (e) {\n                return url;\n            }\n        }\n        _getSheetBase(sheet) {\n            let rootSheet = sheet;\n            while (rootSheet.parentStyleSheet)\n                rootSheet = rootSheet.parentStyleSheet;\n            if (rootSheet.ownerNode)\n                return rootSheet.ownerNode.baseURI;\n            return document.baseURI;\n        }\n        _getSheetText(sheet) {\n            this._readingStyleSheet = true;\n            try {\n                const rules = [];\n                for (const rule of sheet.cssRules)\n                    rules.push(rule.cssText);\n                return rules.join('\\n');\n            }\n            finally {\n                this._readingStyleSheet = false;\n            }\n        }\n        _captureSnapshot(snapshotName) {\n            const timestamp = performance.now();\n            const snapshotNumber = ++this._lastSnapshotNumber;\n            let nodeCounter = 0;\n            let shadowDomNesting = 0;\n            // Ensure we are up to date.\n            this._handleMutations(this._observer.takeRecords());\n            const visitNode = (node) => {\n                const nodeType = node.nodeType;\n                const nodeName = nodeType === Node.DOCUMENT_FRAGMENT_NODE ? 'template' : node.nodeName;\n                if (nodeType !== Node.ELEMENT_NODE &&\n                    nodeType !== Node.DOCUMENT_FRAGMENT_NODE &&\n                    nodeType !== Node.TEXT_NODE)\n                    return;\n                if (nodeName === 'SCRIPT')\n                    return;\n                if (this._removeNoScript && nodeName === 'NOSCRIPT')\n                    return;\n                const data = ensureCachedData(node);\n                const values = [];\n                let equals = !!data.cached;\n                let extraNodes = 0;\n                const expectValue = (value) => {\n                    equals = equals && data.cached[values.length] === value;\n                    values.push(value);\n                };\n                const checkAndReturn = (n) => {\n                    data.attributesCached = true;\n                    if (equals)\n                        return { equals: true, n: [[snapshotNumber - data.ref[0], data.ref[1]]] };\n                    nodeCounter += extraNodes;\n                    data.ref = [snapshotNumber, nodeCounter++];\n                    data.cached = values;\n                    return { equals: false, n };\n                };\n                if (nodeType === Node.TEXT_NODE) {\n                    const value = node.nodeValue || '';\n                    expectValue(value);\n                    return checkAndReturn(value);\n                }\n                if (nodeName === 'STYLE') {\n                    const sheet = node.sheet;\n                    let cssText;\n                    if (sheet)\n                        cssText = this._updateStyleElementStyleSheetTextIfNeeded(sheet);\n                    cssText = cssText || node.textContent || '';\n                    expectValue(cssText);\n                    // Compensate for the extra 'cssText' text node.\n                    extraNodes++;\n                    return checkAndReturn(['style', {}, cssText]);\n                }\n                const attrs = {};\n                const result = [nodeName, attrs];\n                const visitChild = (child) => {\n                    const snapshotted = visitNode(child);\n                    if (snapshotted) {\n                        result.push(snapshotted.n);\n                        expectValue(child);\n                        equals = equals && snapshotted.equals;\n                    }\n                };\n                if (nodeType === Node.DOCUMENT_FRAGMENT_NODE)\n                    attrs[kShadowAttribute] = 'open';\n                if (nodeType === Node.ELEMENT_NODE) {\n                    const element = node;\n                    if (nodeName === 'INPUT') {\n                        const value = element.value;\n                        expectValue('value');\n                        expectValue(value);\n                        attrs['value'] = value;\n                        if (element.checked) {\n                            expectValue('checked');\n                            attrs['checked'] = '';\n                        }\n                    }\n                    if (element === document.scrollingElement) {\n                        // TODO: restoring scroll positions of all elements\n                        // is somewhat expensive. Figure this out.\n                        if (element.scrollTop) {\n                            expectValue(kScrollTopAttribute);\n                            expectValue(element.scrollTop);\n                            attrs[kScrollTopAttribute] = '' + element.scrollTop;\n                        }\n                        if (element.scrollLeft) {\n                            expectValue(kScrollLeftAttribute);\n                            expectValue(element.scrollLeft);\n                            attrs[kScrollLeftAttribute] = '' + element.scrollLeft;\n                        }\n                    }\n                    if (element.shadowRoot) {\n                        ++shadowDomNesting;\n                        visitChild(element.shadowRoot);\n                        --shadowDomNesting;\n                    }\n                }\n                if (nodeName === 'TEXTAREA') {\n                    const value = node.value;\n                    expectValue(value);\n                    extraNodes++; // Compensate for the extra text node.\n                    result.push(value);\n                }\n                else {\n                    if (nodeName === 'HEAD') {\n                        // Insert fake <base> first, to ensure all <link> elements use the proper base uri.\n                        this._fakeBase.setAttribute('href', document.baseURI);\n                        visitChild(this._fakeBase);\n                    }\n                    for (let child = node.firstChild; child; child = child.nextSibling)\n                        visitChild(child);\n                }\n                // Process iframe src attribute before bailing out since it depends on a symbol, not the DOM.\n                if (nodeName === 'IFRAME' || nodeName === 'FRAME') {\n                    const element = node;\n                    for (let i = 0; i < element.attributes.length; i++) {\n                        const frameId = element[kSnapshotFrameId];\n                        const name = 'src';\n                        const value = frameId ? `/snapshot/${frameId}` : '';\n                        expectValue(name);\n                        expectValue(value);\n                        attrs[name] = value;\n                    }\n                }\n                // We can skip attributes comparison because nothing else has changed,\n                // and mutation observer didn't tell us about the attributes.\n                if (equals && data.attributesCached && !shadowDomNesting)\n                    return checkAndReturn(result);\n                if (nodeType === Node.ELEMENT_NODE) {\n                    const element = node;\n                    for (let i = 0; i < element.attributes.length; i++) {\n                        const name = element.attributes[i].name;\n                        if (name === 'value' && (nodeName === 'INPUT' || nodeName === 'TEXTAREA'))\n                            continue;\n                        if (nodeName === 'LINK' && name === 'integrity')\n                            continue;\n                        if (nodeName === 'IFRAME' && name === 'src')\n                            continue;\n                        let value = element.attributes[i].value;\n                        if (name === 'src' && (nodeName === 'IMG'))\n                            value = this._sanitizeUrl(value);\n                        else if (name === 'srcset' && (nodeName === 'IMG'))\n                            value = this._sanitizeSrcSet(value);\n                        else if (name === 'srcset' && (nodeName === 'SOURCE'))\n                            value = this._sanitizeSrcSet(value);\n                        else if (name === 'href' && (nodeName === 'LINK'))\n                            value = this._sanitizeUrl(value);\n                        else if (name.startsWith('on'))\n                            value = '';\n                        expectValue(name);\n                        expectValue(value);\n                        attrs[name] = value;\n                    }\n                }\n                if (result.length === 2 && !Object.keys(attrs).length)\n                    result.pop(); // Remove empty attrs when there are no children.\n                return checkAndReturn(result);\n            };\n            let html;\n            let htmlEquals = false;\n            if (document.documentElement) {\n                const { equals, n } = visitNode(document.documentElement);\n                htmlEquals = equals;\n                html = n;\n            }\n            else {\n                html = ['html'];\n            }\n            const result = {\n                html,\n                doctype: document.doctype ? document.doctype.name : undefined,\n                resourceOverrides: [],\n                viewport: {\n                    width: Math.max(document.body ? document.body.offsetWidth : 0, document.documentElement ? document.documentElement.offsetWidth : 0),\n                    height: Math.max(document.body ? document.body.offsetHeight : 0, document.documentElement ? document.documentElement.offsetHeight : 0),\n                },\n                url: location.href,\n                snapshotName,\n                timestamp,\n                collectionTime: 0,\n            };\n            let allOverridesAreRefs = true;\n            for (const sheet of this._allStyleSheetsWithUrlOverride) {\n                const content = this._updateLinkStyleSheetTextIfNeeded(sheet, snapshotNumber);\n                if (content === undefined) {\n                    // Unable to capture stylsheet contents.\n                    continue;\n                }\n                if (typeof content !== 'number')\n                    allOverridesAreRefs = false;\n                const base = this._getSheetBase(sheet);\n                const url = removeHash(this._resolveUrl(base, sheet.href));\n                result.resourceOverrides.push({ url, content });\n            }\n            result.collectionTime = performance.now() - result.timestamp;\n            if (!snapshotName && htmlEquals && allOverridesAreRefs)\n                return undefined;\n            return result;\n        }\n    }\n    window[kSnapshotStreamer] = new Streamer();\n}\nexports.frameSnapshotStreamer = frameSnapshotStreamer;\n//# sourceMappingURL=snapshotterInjected.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HarTracer = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst browserContext_1 = require(\"../../browserContext\");\nconst helper_1 = require(\"../../helper\");\nconst network = __importStar(require(\"../../network\"));\nconst page_1 = require(\"../../page\");\nconst fsWriteFileAsync = util.promisify(fs_1.default.writeFile.bind(fs_1.default));\nclass HarTracer {\n    constructor() {\n        this._contextTracers = new Map();\n    }\n    async onContextCreated(context) {\n        if (!context._options.recordHar)\n            return;\n        const contextTracer = new HarContextTracer(context, context._options.recordHar);\n        this._contextTracers.set(context, contextTracer);\n    }\n    async onContextWillDestroy(context) {\n        const contextTracer = this._contextTracers.get(context);\n        if (contextTracer) {\n            this._contextTracers.delete(context);\n            await contextTracer.flush();\n        }\n    }\n}\nexports.HarTracer = HarTracer;\nclass HarContextTracer {\n    constructor(context, options) {\n        this._pageEntries = new Map();\n        this._entries = new Map();\n        this._lastPage = 0;\n        this._barrierPromises = new Set();\n        this._options = options;\n        this._log = {\n            version: '1.2',\n            creator: {\n                name: 'Playwright',\n                version: require('../../../../package.json')['version'],\n            },\n            browser: {\n                name: context._browser.options.name,\n                version: context._browser.version()\n            },\n            pages: [],\n            entries: []\n        };\n        context.on(browserContext_1.BrowserContext.Events.Page, page => this._onPage(page));\n    }\n    _onPage(page) {\n        const pageEntry = {\n            startedDateTime: new Date(),\n            id: `page_${this._lastPage++}`,\n            title: '',\n            pageTimings: {\n                onContentLoad: -1,\n                onLoad: -1,\n            },\n        };\n        this._pageEntries.set(page, pageEntry);\n        this._log.pages.push(pageEntry);\n        page.on(page_1.Page.Events.Request, (request) => this._onRequest(page, request));\n        page.on(page_1.Page.Events.Response, (response) => this._onResponse(page, response));\n        page.on(page_1.Page.Events.DOMContentLoaded, () => {\n            const promise = page.mainFrame().evaluateExpression(String(() => {\n                return {\n                    title: document.title,\n                    domContentLoaded: performance.timing.domContentLoadedEventStart,\n                };\n            }), true, undefined, 'utility').then(result => {\n                pageEntry.title = result.title;\n                pageEntry.pageTimings.onContentLoad = result.domContentLoaded;\n            }).catch(() => { });\n            this._addBarrier(page, promise);\n        });\n        page.on(page_1.Page.Events.Load, () => {\n            const promise = page.mainFrame().evaluateExpression(String(() => {\n                return {\n                    title: document.title,\n                    loaded: performance.timing.loadEventStart,\n                };\n            }), true, undefined, 'utility').then(result => {\n                pageEntry.title = result.title;\n                pageEntry.pageTimings.onLoad = result.loaded;\n            }).catch(() => { });\n            this._addBarrier(page, promise);\n        });\n    }\n    _addBarrier(page, promise) {\n        const race = Promise.race([\n            new Promise(f => page.on('close', () => {\n                this._barrierPromises.delete(race);\n                f();\n            })),\n            promise\n        ]);\n        this._barrierPromises.add(race);\n    }\n    _onRequest(page, request) {\n        const pageEntry = this._pageEntries.get(page);\n        const url = network.parsedURL(request.url());\n        if (!url)\n            return;\n        const harEntry = {\n            pageref: pageEntry.id,\n            startedDateTime: new Date(),\n            time: -1,\n            request: {\n                method: request.method(),\n                url: request.url(),\n                httpVersion: 'HTTP/1.1',\n                cookies: [],\n                headers: [],\n                queryString: [...url.searchParams].map(e => ({ name: e[0], value: e[1] })),\n                postData: undefined,\n                headersSize: -1,\n                bodySize: -1,\n            },\n            response: {\n                status: -1,\n                statusText: '',\n                httpVersion: 'HTTP/1.1',\n                cookies: [],\n                headers: [],\n                content: {\n                    size: -1,\n                    mimeType: request.headerValue('content-type') || 'application/octet-stream',\n                },\n                headersSize: -1,\n                bodySize: -1,\n                redirectURL: ''\n            },\n            cache: {\n                beforeRequest: null,\n                afterRequest: null,\n            },\n            timings: {\n                send: -1,\n                wait: -1,\n                receive: -1\n            },\n        };\n        if (request.redirectedFrom()) {\n            const fromEntry = this._entries.get(request.redirectedFrom());\n            fromEntry.response.redirectURL = request.url();\n        }\n        this._log.entries.push(harEntry);\n        this._entries.set(request, harEntry);\n    }\n    _onResponse(page, response) {\n        const pageEntry = this._pageEntries.get(page);\n        const harEntry = this._entries.get(response.request());\n        // Rewrite provisional headers with actual\n        const request = response.request();\n        harEntry.request.headers = request.headers().map(header => ({ name: header.name, value: header.value }));\n        harEntry.request.cookies = cookiesForHar(request.headerValue('cookie'), ';');\n        harEntry.request.postData = postDataForHar(request) || undefined;\n        harEntry.response = {\n            status: response.status(),\n            statusText: response.statusText(),\n            httpVersion: 'HTTP/1.1',\n            cookies: cookiesForHar(response.headerValue('set-cookie'), '\\n'),\n            headers: response.headers().map(header => ({ name: header.name, value: header.value })),\n            content: {\n                size: -1,\n                mimeType: response.headerValue('content-type') || 'application/octet-stream',\n            },\n            headersSize: -1,\n            bodySize: -1,\n            redirectURL: ''\n        };\n        const timing = response.timing();\n        if (pageEntry.startedDateTime.valueOf() > timing.startTime)\n            pageEntry.startedDateTime = new Date(timing.startTime);\n        harEntry.timings = {\n            dns: timing.domainLookupEnd !== -1 ? helper_1.helper.millisToRoundishMillis(timing.domainLookupEnd - timing.domainLookupStart) : -1,\n            connect: timing.connectEnd !== -1 ? helper_1.helper.millisToRoundishMillis(timing.connectEnd - timing.connectStart) : -1,\n            ssl: timing.connectEnd !== -1 ? helper_1.helper.millisToRoundishMillis(timing.connectEnd - timing.secureConnectionStart) : -1,\n            send: 0,\n            wait: timing.responseStart !== -1 ? helper_1.helper.millisToRoundishMillis(timing.responseStart - timing.requestStart) : -1,\n            receive: response.request()._responseEndTiming !== -1 ? helper_1.helper.millisToRoundishMillis(response.request()._responseEndTiming - timing.responseStart) : -1,\n        };\n        if (!this._options.omitContent && response.status() === 200) {\n            const promise = response.body().then(buffer => {\n                harEntry.response.content.text = buffer.toString('base64');\n                harEntry.response.content.encoding = 'base64';\n            }).catch(() => { });\n            this._addBarrier(page, promise);\n        }\n    }\n    async flush() {\n        await Promise.all(this._barrierPromises);\n        for (const pageEntry of this._log.pages) {\n            if (pageEntry.pageTimings.onContentLoad >= 0)\n                pageEntry.pageTimings.onContentLoad -= pageEntry.startedDateTime.valueOf();\n            else\n                pageEntry.pageTimings.onContentLoad = -1;\n            if (pageEntry.pageTimings.onLoad >= 0)\n                pageEntry.pageTimings.onLoad -= pageEntry.startedDateTime.valueOf();\n            else\n                pageEntry.pageTimings.onLoad = -1;\n        }\n        await fsWriteFileAsync(this._options.path, JSON.stringify({ log: this._log }, undefined, 2));\n    }\n}\nfunction postDataForHar(request) {\n    const postData = request.postDataBuffer();\n    if (!postData)\n        return null;\n    const contentType = request.headerValue('content-type') || 'application/octet-stream';\n    const result = {\n        mimeType: contentType,\n        text: contentType === 'application/octet-stream' ? '' : postData.toString(),\n        params: []\n    };\n    if (contentType === 'application/x-www-form-urlencoded') {\n        const parsed = new URLSearchParams(postData.toString());\n        for (const [name, value] of parsed.entries())\n            result.params.push({ name, value });\n    }\n    return result;\n}\nfunction cookiesForHar(header, separator) {\n    if (!header)\n        return [];\n    return header.split(separator).map(c => parseCookie(c));\n}\nfunction parseCookie(c) {\n    const cookie = {\n        name: '',\n        value: ''\n    };\n    let first = true;\n    for (const pair of c.split(/; */)) {\n        const indexOfEquals = pair.indexOf('=');\n        const name = indexOfEquals !== -1 ? pair.substr(0, indexOfEquals).trim() : pair.trim();\n        const value = indexOfEquals !== -1 ? pair.substr(indexOfEquals + 1, pair.length).trim() : '';\n        if (first) {\n            first = false;\n            cookie.name = name;\n            cookie.value = value;\n            continue;\n        }\n        if (name === 'Domain')\n            cookie.domain = value;\n        if (name === 'Expires')\n            cookie.expires = new Date(value);\n        if (name === 'HttpOnly')\n            cookie.httpOnly = true;\n        if (name === 'Max-Age')\n            cookie.expires = new Date(Date.now() + (+value) * 1000);\n        if (name === 'Path')\n            cookie.path = value;\n        if (name === 'SameSite')\n            cookie.sameSite = value;\n        if (name === 'Secure')\n            cookie.secure = true;\n    }\n    return cookie;\n}\n//# sourceMappingURL=harTracer.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InspectorController = void 0;\nconst recorderSupplement_1 = require(\"./recorderSupplement\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst utils_1 = require(\"../../utils/utils\");\nclass InspectorController {\n    constructor() {\n        this._waitOperations = new Map();\n    }\n    async onContextCreated(context) {\n        if (utils_1.isDebugMode())\n            await recorderSupplement_1.RecorderSupplement.getOrCreate(context, { pauseOnNextStatement: true });\n    }\n    async onBeforeCall(sdkObject, metadata) {\n        var _a, _b;\n        const context = sdkObject.attribution.context;\n        if (!context)\n            return;\n        // Process logs for waitForNavigation/waitForLoadState\n        if ((_b = (_a = metadata.params) === null || _a === void 0 ? void 0 : _a.info) === null || _b === void 0 ? void 0 : _b.waitId) {\n            const info = metadata.params.info;\n            switch (info.phase) {\n                case 'before':\n                    metadata.method = info.name;\n                    metadata.stack = info.stack;\n                    this._waitOperations.set(info.waitId, metadata);\n                    break;\n                case 'log':\n                    const originalMetadata = this._waitOperations.get(info.waitId);\n                    originalMetadata.log.push(info.message);\n                    this.onCallLog('api', info.message, sdkObject, originalMetadata);\n                // Fall through.\n                case 'after':\n                    return;\n            }\n        }\n        if (shouldOpenInspector(sdkObject, metadata))\n            await recorderSupplement_1.RecorderSupplement.getOrCreate(context, { pauseOnNextStatement: true });\n        const recorder = await recorderSupplement_1.RecorderSupplement.getNoCreate(context);\n        await (recorder === null || recorder === void 0 ? void 0 : recorder.onBeforeCall(sdkObject, metadata));\n    }\n    async onAfterCall(sdkObject, metadata) {\n        var _a, _b;\n        if (!sdkObject.attribution.context)\n            return;\n        // Process logs for waitForNavigation/waitForLoadState\n        if ((_b = (_a = metadata.params) === null || _a === void 0 ? void 0 : _a.info) === null || _b === void 0 ? void 0 : _b.waitId) {\n            const info = metadata.params.info;\n            switch (info.phase) {\n                case 'before':\n                    metadata.endTime = 0;\n                // Fall through.\n                case 'log':\n                    return;\n                case 'after':\n                    const originalMetadata = this._waitOperations.get(info.waitId);\n                    originalMetadata.endTime = metadata.endTime;\n                    originalMetadata.error = info.error;\n                    this._waitOperations.delete(info.waitId);\n                    metadata = originalMetadata;\n                    break;\n            }\n        }\n        const recorder = await recorderSupplement_1.RecorderSupplement.getNoCreate(sdkObject.attribution.context);\n        await (recorder === null || recorder === void 0 ? void 0 : recorder.onAfterCall(sdkObject, metadata));\n    }\n    async onBeforeInputAction(sdkObject, metadata) {\n        if (!sdkObject.attribution.context)\n            return;\n        const recorder = await recorderSupplement_1.RecorderSupplement.getNoCreate(sdkObject.attribution.context);\n        await (recorder === null || recorder === void 0 ? void 0 : recorder.onBeforeInputAction(sdkObject, metadata));\n    }\n    async onCallLog(logName, message, sdkObject, metadata) {\n        debugLogger_1.debugLogger.log(logName, message);\n        if (!sdkObject.attribution.context)\n            return;\n        const recorder = await recorderSupplement_1.RecorderSupplement.getNoCreate(sdkObject.attribution.context);\n        await (recorder === null || recorder === void 0 ? void 0 : recorder.updateCallLog([metadata]));\n    }\n}\nexports.InspectorController = InspectorController;\nfunction shouldOpenInspector(sdkObject, metadata) {\n    var _a;\n    if (!((_a = sdkObject.attribution.browser) === null || _a === void 0 ? void 0 : _a.options.headful) && !utils_1.isUnderTest())\n        return false;\n    return metadata.method === 'pause';\n}\n//# sourceMappingURL=inspectorController.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGenerator = void 0;\nconst events_1 = require(\"events\");\nconst utils_1 = require(\"./utils\");\nclass CodeGenerator extends events_1.EventEmitter {\n    constructor(browserName, generateHeaders, launchOptions, contextOptions, deviceName, saveStorage) {\n        super();\n        this._currentAction = null;\n        this._lastAction = null;\n        this._actions = [];\n        launchOptions = { headless: false, ...launchOptions };\n        this._enabled = generateHeaders;\n        this._options = { browserName, generateHeaders, launchOptions, contextOptions, deviceName, saveStorage };\n        this.restart();\n    }\n    restart() {\n        this._currentAction = null;\n        this._lastAction = null;\n        this._actions = [];\n    }\n    setEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    addAction(action) {\n        if (!this._enabled)\n            return;\n        this.willPerformAction(action);\n        this.didPerformAction(action);\n    }\n    willPerformAction(action) {\n        if (!this._enabled)\n            return;\n        this._currentAction = action;\n    }\n    performedActionFailed(action) {\n        if (!this._enabled)\n            return;\n        if (this._currentAction === action)\n            this._currentAction = null;\n    }\n    didPerformAction(actionInContext) {\n        if (!this._enabled)\n            return;\n        const { action, pageAlias } = actionInContext;\n        let eraseLastAction = false;\n        if (this._lastAction && this._lastAction.pageAlias === pageAlias) {\n            const { action: lastAction } = this._lastAction;\n            // We augment last action based on the type.\n            if (this._lastAction && action.name === 'fill' && lastAction.name === 'fill') {\n                if (action.selector === lastAction.selector)\n                    eraseLastAction = true;\n            }\n            if (lastAction && action.name === 'click' && lastAction.name === 'click') {\n                if (action.selector === lastAction.selector && action.clickCount > lastAction.clickCount)\n                    eraseLastAction = true;\n            }\n            if (lastAction && action.name === 'navigate' && lastAction.name === 'navigate') {\n                if (action.url === lastAction.url) {\n                    // Already at a target URL.\n                    this._currentAction = null;\n                    return;\n                }\n            }\n            for (const name of ['check', 'uncheck']) {\n                // Check and uncheck erase click.\n                if (lastAction && action.name === name && lastAction.name === 'click') {\n                    if (action.selector === lastAction.selector)\n                        eraseLastAction = true;\n                }\n            }\n        }\n        this._lastAction = actionInContext;\n        this._currentAction = null;\n        if (eraseLastAction)\n            this._actions.pop();\n        this._actions.push(actionInContext);\n        this.emit('change');\n    }\n    commitLastAction() {\n        if (!this._enabled)\n            return;\n        const action = this._lastAction;\n        if (action)\n            action.committed = true;\n    }\n    signal(pageAlias, frame, signal) {\n        if (!this._enabled)\n            return;\n        // Signal either arrives while action is being performed or shortly after.\n        if (this._currentAction) {\n            this._currentAction.action.signals.push(signal);\n            return;\n        }\n        if (this._lastAction && !this._lastAction.committed) {\n            const signals = this._lastAction.action.signals;\n            if (signal.name === 'navigation' && signals.length && signals[signals.length - 1].name === 'download')\n                return;\n            if (signal.name === 'download' && signals.length && signals[signals.length - 1].name === 'navigation')\n                signals.length = signals.length - 1;\n            signal.isAsync = true;\n            this._lastAction.action.signals.push(signal);\n            this.emit('change');\n            return;\n        }\n        if (signal.name === 'navigation') {\n            this.addAction({\n                pageAlias,\n                ...utils_1.describeFrame(frame),\n                committed: true,\n                action: {\n                    name: 'navigate',\n                    url: frame.url(),\n                    signals: [],\n                },\n            });\n        }\n    }\n    generateText(languageGenerator) {\n        const text = [];\n        if (this._options.generateHeaders)\n            text.push(languageGenerator.generateHeader(this._options));\n        for (const action of this._actions)\n            text.push(languageGenerator.generateAction(action));\n        if (this._options.generateHeaders)\n            text.push(languageGenerator.generateFooter(this._options.saveStorage));\n        return text.join('\\n');\n    }\n}\nexports.CodeGenerator = CodeGenerator;\n//# sourceMappingURL=codeGenerator.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CSharpLanguageGenerator = void 0;\nconst language_1 = require(\"./language\");\nconst recorderActions_1 = require(\"./recorderActions\");\nconst utils_1 = require(\"./utils\");\nconst deviceDescriptors = require(\"../../deviceDescriptors\");\nclass CSharpLanguageGenerator {\n    constructor() {\n        this.id = 'csharp';\n        this.fileName = '<csharp>';\n        this.highlighter = 'csharp';\n    }\n    generateAction(actionInContext) {\n        const { action, pageAlias } = actionInContext;\n        const formatter = new CSharpFormatter(0);\n        formatter.newLine();\n        formatter.add('// ' + recorderActions_1.actionTitle(action));\n        if (action.name === 'openPage') {\n            formatter.add(`var ${pageAlias} = await context.NewPageAsync();`);\n            if (action.url && action.url !== 'about:blank' && action.url !== 'chrome://newtab/')\n                formatter.add(`${pageAlias}.GoToAsync('${action.url}');`);\n            return formatter.format();\n        }\n        const subject = actionInContext.isMainFrame ? pageAlias :\n            (actionInContext.frameName ?\n                `${pageAlias}.GetFrame(name: ${quote(actionInContext.frameName)})` :\n                `${pageAlias}.GetFrame(url: ${quote(actionInContext.frameUrl)})`);\n        const signals = language_1.toSignalMap(action);\n        if (signals.dialog) {\n            formatter.add(`    void ${pageAlias}_Dialog${signals.dialog.dialogAlias}_EventHandler(object sender, DialogEventArgs e)\n      {\n          Console.WriteLine($\"Dialog message: {e.Dialog.Message}\");\n          e.Dialog.DismissAsync();\n          ${pageAlias}.Dialog -= ${pageAlias}_Dialog${signals.dialog.dialogAlias}_EventHandler;\n      }\n      ${pageAlias}.Dialog += ${pageAlias}_Dialog${signals.dialog.dialogAlias}_EventHandler;`);\n        }\n        const emitTaskWhenAll = signals.waitForNavigation || signals.popup || signals.download;\n        if (emitTaskWhenAll) {\n            if (signals.popup)\n                formatter.add(`var ${signals.popup.popupAlias}Task = ${pageAlias}.WaitForEventAsync(PageEvent.Popup)`);\n            else if (signals.download)\n                formatter.add(`var downloadTask = ${pageAlias}.WaitForEventAsync(PageEvent.Download);`);\n            formatter.add(`await Task.WhenAll(`);\n        }\n        // Popup signals.\n        if (signals.popup)\n            formatter.add(`${signals.popup.popupAlias}Task,`);\n        // Navigation signal.\n        if (signals.waitForNavigation)\n            formatter.add(`${pageAlias}.WaitForNavigationAsync(/*${quote(signals.waitForNavigation.url)}*/),`);\n        // Download signals.\n        if (signals.download)\n            formatter.add(`downloadTask,`);\n        const prefix = (signals.popup || signals.waitForNavigation || signals.download) ? '' : 'await ';\n        const actionCall = this._generateActionCall(action);\n        const suffix = emitTaskWhenAll ? ');' : ';';\n        formatter.add(`${prefix}${subject}.${actionCall}${suffix}`);\n        if (signals.assertNavigation)\n            formatter.add(`  // Assert.Equal(${quote(signals.assertNavigation.url)}, ${pageAlias}.Url);`);\n        return formatter.format();\n    }\n    _generateActionCall(action) {\n        switch (action.name) {\n            case 'openPage':\n                throw Error('Not reached');\n            case 'closePage':\n                return 'CloseAsync()';\n            case 'click': {\n                let method = 'ClickAsync';\n                if (action.clickCount === 2)\n                    method = 'DblClickAsync';\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const options = {};\n                if (action.button !== 'left')\n                    options.button = action.button;\n                if (modifiers.length)\n                    options.modifiers = modifiers;\n                if (action.clickCount > 2)\n                    options.clickCount = action.clickCount;\n                const optionsString = formatOptions(options, true, false);\n                return `${method}(${quote(action.selector)}${optionsString})`;\n            }\n            case 'check':\n                return `CheckAsync(${quote(action.selector)})`;\n            case 'uncheck':\n                return `UncheckAsync(${quote(action.selector)})`;\n            case 'fill':\n                return `FillAsync(${quote(action.selector)}, ${quote(action.text)})`;\n            case 'setInputFiles':\n                return `SetInputFilesAsync(${quote(action.selector)}, ${formatObject(action.files.length === 1 ? action.files[0] : action.files)})`;\n            case 'press': {\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const shortcut = [...modifiers, action.key].join('+');\n                return `PressAsync(${quote(action.selector)}, ${quote(shortcut)})`;\n            }\n            case 'navigate':\n                return `GoToAsync(${quote(action.url)})`;\n            case 'select':\n                return `SelectOptionAsync(${quote(action.selector)}, ${formatObject(action.options.length > 1 ? action.options : action.options[0])})`;\n        }\n    }\n    generateHeader(options) {\n        const formatter = new CSharpFormatter(0);\n        formatter.add(`\n      await Playwright.InstallAsync();\n      using var playwright = await Playwright.CreateAsync();\n      await using var browser = await playwright.${toPascal(options.browserName)}.LaunchAsync(${formatArgs(options.launchOptions)}\n      );\n      var context = await browser.NewContextAsync(${formatContextOptions(options.contextOptions, options.deviceName)});`);\n        return formatter.format();\n    }\n    generateFooter(saveStorage) {\n        const storageStateLine = saveStorage ? `\\nawait context.StorageStateAsync(path: \"${saveStorage}\");` : '';\n        return `\\n// ---------------------${storageStateLine}`;\n    }\n}\nexports.CSharpLanguageGenerator = CSharpLanguageGenerator;\nfunction formatValue(value) {\n    if (value === false)\n        return 'false';\n    if (value === true)\n        return 'true';\n    if (value === undefined)\n        return 'null';\n    if (Array.isArray(value))\n        return `new [] {${value.map(formatValue).join(', ')}}`;\n    if (typeof value === 'string')\n        return quote(value);\n    return String(value);\n}\nfunction formatOptions(value, hasArguments, isInitializing) {\n    const keys = Object.keys(value);\n    if (!keys.length)\n        return '';\n    return (hasArguments ? ', ' : '') + keys.map(key => `${key}${isInitializing ? ': ' : ' = '}${formatValue(value[key])}`).join(', ');\n}\nfunction formatArgs(value, indent = '    ') {\n    if (typeof value === 'string')\n        return quote(value);\n    if (Array.isArray(value))\n        return `new [] {${value.map(o => formatObject(o)).join(', ')}}`;\n    if (typeof value === 'object') {\n        const keys = Object.keys(value);\n        if (!keys.length)\n            return '';\n        const tokens = [];\n        for (const key of keys)\n            tokens.push(`${keys.length !== 1 ? indent : ''}${key}: ${formatObject(value[key], indent, key)}`);\n        return `\\n${indent}${tokens.join(`,\\n${indent}`)}`;\n    }\n    return String(value);\n}\nfunction formatObject(value, indent = '    ', name = '') {\n    if (typeof value === 'string') {\n        if (name === 'permissions' || name === 'colorScheme')\n            return `${getClassName(name)}.${toPascal(value)}`;\n        return quote(value);\n    }\n    if (Array.isArray(value))\n        return `new[] { ${value.map(o => formatObject(o, indent, name)).join(', ')} }`;\n    if (typeof value === 'object') {\n        const keys = Object.keys(value);\n        if (!keys.length)\n            return '';\n        const tokens = [];\n        for (const key of keys)\n            tokens.push(`${toPascal(key)} = ${formatObject(value[key], indent, key)},`);\n        if (name)\n            return `new ${getClassName(name)}\\n{\\n${indent}${tokens.join(`\\n${indent}`)}\\n${indent}}`;\n        return `{\\n${indent}${tokens.join(`\\n${indent}`)}\\n${indent}}`;\n    }\n    if (name === 'latitude' || name === 'longitude')\n        return String(value) + 'm';\n    return String(value);\n}\nfunction getClassName(value) {\n    switch (value) {\n        case 'viewport': return 'ViewportSize';\n        case 'proxy': return 'ProxySettings';\n        case 'permissions': return 'ContextPermission';\n        default: return toPascal(value);\n    }\n}\nfunction toPascal(value) {\n    return value[0].toUpperCase() + value.slice(1);\n}\nfunction formatContextOptions(options, deviceName) {\n    const device = deviceName && deviceDescriptors[deviceName];\n    if (!device)\n        return formatArgs(options);\n    const serializedObject = formatObject(language_1.sanitizeDeviceOptions(device, options), '    ');\n    // When there are no additional context options, we still want to spread the device inside.\n    if (!serializedObject)\n        return `playwright.Devices[\"${deviceName}\"]`;\n    let result = `new BrowserContextOptions(playwright.Devices[\"${deviceName}\"])`;\n    if (serializedObject) {\n        const lines = serializedObject.split('\\n');\n        result = `${result} \\n${lines.join('\\n')}`;\n    }\n    return result;\n}\nclass CSharpFormatter {\n    constructor(offset = 0) {\n        this._lines = [];\n        this._baseIndent = ' '.repeat(4);\n        this._baseOffset = ' '.repeat(offset);\n    }\n    prepend(text) {\n        this._lines = text.trim().split('\\n').map(line => line.trim()).concat(this._lines);\n    }\n    add(text) {\n        this._lines.push(...text.trim().split('\\n').map(line => line.trim()));\n    }\n    newLine() {\n        this._lines.push('');\n    }\n    format() {\n        let spaces = '';\n        let previousLine = '';\n        return this._lines.map((line) => {\n            if (line === '')\n                return line;\n            if (line.startsWith('}') || line.startsWith(']') || line.includes('});') || line === ');')\n                spaces = spaces.substring(this._baseIndent.length);\n            const extraSpaces = /^(for|while|if).*\\(.*\\)$/.test(previousLine) ? this._baseIndent : '';\n            previousLine = line;\n            line = spaces + extraSpaces + line;\n            if (line.endsWith('{') || line.endsWith('[') || line.endsWith('('))\n                spaces += this._baseIndent;\n            if (line.endsWith('});'))\n                spaces = spaces.substring(this._baseIndent.length);\n            return this._baseOffset + line;\n        }).join('\\n');\n    }\n}\nfunction quote(text) {\n    return `\"${text.replace(/[\"]/g, '\\\\\"')}\"`;\n}\n//# sourceMappingURL=csharp.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JavaLanguageGenerator = void 0;\nconst language_1 = require(\"./language\");\nconst recorderActions_1 = require(\"./recorderActions\");\nconst utils_1 = require(\"./utils\");\nconst deviceDescriptors = require(\"../../deviceDescriptors\");\nconst javascript_1 = require(\"./javascript\");\nclass JavaLanguageGenerator {\n    constructor() {\n        this.id = 'java';\n        this.fileName = '<java>';\n        this.highlighter = 'java';\n    }\n    generateAction(actionInContext) {\n        const { action, pageAlias } = actionInContext;\n        const formatter = new javascript_1.JavaScriptFormatter(6);\n        formatter.newLine();\n        formatter.add('// ' + recorderActions_1.actionTitle(action));\n        if (action.name === 'openPage') {\n            formatter.add(`Page ${pageAlias} = context.newPage();`);\n            if (action.url && action.url !== 'about:blank' && action.url !== 'chrome://newtab/')\n                formatter.add(`${pageAlias}.navigate(\"${action.url}\");`);\n            return formatter.format();\n        }\n        const subject = actionInContext.isMainFrame ? pageAlias :\n            (actionInContext.frameName ?\n                `${pageAlias}.frame(${quote(actionInContext.frameName)})` :\n                `${pageAlias}.frameByUrl(${quote(actionInContext.frameUrl)})`);\n        const signals = language_1.toSignalMap(action);\n        if (signals.dialog) {\n            formatter.add(`  ${pageAlias}.onceDialog(dialog -> {\n        System.out.println(String.format(\"Dialog message: %s\", dialog.message()));\n        dialog.dismiss();\n      });`);\n        }\n        const actionCall = this._generateActionCall(action);\n        let code = `${subject}.${actionCall};`;\n        if (signals.popup) {\n            code = `Page ${signals.popup.popupAlias} = ${pageAlias}.waitForPopup(() -> {\n        ${code}\n      });`;\n        }\n        if (signals.download) {\n            code = `Download download = ${pageAlias}.waitForDownload(() -> {\n        ${code}\n      });`;\n        }\n        if (signals.waitForNavigation) {\n            code = `\n      // ${pageAlias}.waitForNavigation(new Page.WaitForNavigationOptions().setUrl(${quote(signals.waitForNavigation.url)}), () ->\n      ${pageAlias}.waitForNavigation(() -> {\n        ${code}\n      });`;\n        }\n        formatter.add(code);\n        if (signals.assertNavigation)\n            formatter.add(`// assert ${pageAlias}.url().equals(${quote(signals.assertNavigation.url)});`);\n        return formatter.format();\n    }\n    _generateActionCall(action) {\n        switch (action.name) {\n            case 'openPage':\n                throw Error('Not reached');\n            case 'closePage':\n                return 'close()';\n            case 'click': {\n                let method = 'click';\n                if (action.clickCount === 2)\n                    method = 'dblclick';\n                return `${method}(${quote(action.selector)})`;\n            }\n            case 'check':\n                return `check(${quote(action.selector)})`;\n            case 'uncheck':\n                return `uncheck(${quote(action.selector)})`;\n            case 'fill':\n                return `fill(${quote(action.selector)}, ${quote(action.text)})`;\n            case 'setInputFiles':\n                return `setInputFiles(${quote(action.selector)}, ${formatPath(action.files.length === 1 ? action.files[0] : action.files)})`;\n            case 'press': {\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const shortcut = [...modifiers, action.key].join('+');\n                return `press(${quote(action.selector)}, ${quote(shortcut)})`;\n            }\n            case 'navigate':\n                return `navigate(${quote(action.url)})`;\n            case 'select':\n                return `selectOption(${quote(action.selector)}, ${formatSelectOption(action.options.length > 1 ? action.options : action.options[0])})`;\n        }\n    }\n    generateHeader(options) {\n        const formatter = new javascript_1.JavaScriptFormatter();\n        formatter.add(`\n    import com.microsoft.playwright.*;\n    import com.microsoft.playwright.options.*;\n\n    public class Example {\n      public static void main(String[] args) {\n        try (Playwright playwright = Playwright.create()) {\n          Browser browser = playwright.${options.browserName}().launch(${formatLaunchOptions(options.launchOptions)});\n          BrowserContext context = browser.newContext(${formatContextOptions(options.contextOptions, options.deviceName)});`);\n        return formatter.format();\n    }\n    generateFooter(saveStorage) {\n        const storageStateLine = saveStorage ? `\\n      context.storageState(new BrowserContext.StorageStateOptions().setPath(${quote(saveStorage)}));` : '';\n        return `\\n      // ---------------------${storageStateLine}\n    }\n  }\n}`;\n    }\n}\nexports.JavaLanguageGenerator = JavaLanguageGenerator;\nfunction formatPath(files) {\n    if (Array.isArray(files)) {\n        if (files.length === 0)\n            return 'new Path[0]';\n        return `new Path[] {${files.map(s => 'Paths.get(' + quote(s) + ')').join(', ')}}`;\n    }\n    return `Paths.get(${quote(files)})`;\n}\nfunction formatSelectOption(options) {\n    if (Array.isArray(options)) {\n        if (options.length === 0)\n            return 'new String[0]';\n        return `new String[] {${options.map(s => quote(s)).join(', ')}}`;\n    }\n    return quote(options);\n}\nfunction formatLaunchOptions(options) {\n    const lines = [];\n    if (!Object.keys(options).length)\n        return '';\n    lines.push('new BrowserType.LaunchOptions()');\n    if (typeof options.headless === 'boolean')\n        lines.push(`  .setHeadless(false)`);\n    if (options.channel)\n        lines.push(`  .setChannel(\"${options.channel}\")`);\n    return lines.join('\\n');\n}\nfunction formatContextOptions(contextOptions, deviceName) {\n    const lines = [];\n    if (!Object.keys(contextOptions).length && !deviceName)\n        return '';\n    const device = deviceName ? deviceDescriptors[deviceName] : {};\n    const options = { ...device, ...contextOptions };\n    lines.push('new Browser.NewContextOptions()');\n    if (options.colorScheme)\n        lines.push(`  .setColorScheme(ColorScheme.${options.colorScheme.toUpperCase()})`);\n    if (options.geolocation)\n        lines.push(`  .setGeolocation(${options.geolocation.latitude}, ${options.geolocation.longitude})`);\n    if (options.locale)\n        lines.push(`  .setLocale(\"${options.locale}\")`);\n    if (options.proxy)\n        lines.push(`  .setProxy(new Proxy(\"${options.proxy.server}\"))`);\n    if (options.timezoneId)\n        lines.push(`  .setTimezoneId(\"${options.timezoneId}\")`);\n    if (options.userAgent)\n        lines.push(`  .setUserAgent(\"${options.userAgent}\")`);\n    if (options.viewport)\n        lines.push(`  .setViewportSize(${options.viewport.width}, ${options.viewport.height})`);\n    if (options.deviceScaleFactor)\n        lines.push(`  .setDeviceScaleFactor(${options.deviceScaleFactor})`);\n    if (options.isMobile)\n        lines.push(`  .setIsMobile(${options.isMobile})`);\n    if (options.hasTouch)\n        lines.push(`  .setHasTouch(${options.hasTouch})`);\n    if (options.storageState)\n        lines.push(`  .setStorageStatePath(Paths.get(${quote(options.storageState)}))`);\n    return lines.join('\\n');\n}\nfunction quote(text, char = '\\\"') {\n    if (char === '\\'')\n        return char + text.replace(/[']/g, '\\\\\\'') + char;\n    if (char === '\"')\n        return char + text.replace(/[\"]/g, '\\\\\"') + char;\n    if (char === '`')\n        return char + text.replace(/[`]/g, '\\\\`') + char;\n    throw new Error('Invalid escape char');\n}\n//# sourceMappingURL=java.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JavaScriptFormatter = exports.JavaScriptLanguageGenerator = void 0;\nconst language_1 = require(\"./language\");\nconst recorderActions_1 = require(\"./recorderActions\");\nconst utils_1 = require(\"./utils\");\nconst deviceDescriptors = require(\"../../deviceDescriptors\");\nclass JavaScriptLanguageGenerator {\n    constructor() {\n        this.id = 'javascript';\n        this.fileName = '<javascript>';\n        this.highlighter = 'javascript';\n    }\n    generateAction(actionInContext) {\n        const { action, pageAlias } = actionInContext;\n        const formatter = new JavaScriptFormatter(2);\n        formatter.newLine();\n        formatter.add('// ' + recorderActions_1.actionTitle(action));\n        if (action.name === 'openPage') {\n            formatter.add(`const ${pageAlias} = await context.newPage();`);\n            if (action.url && action.url !== 'about:blank' && action.url !== 'chrome://newtab/')\n                formatter.add(`${pageAlias}.goto('${action.url}');`);\n            return formatter.format();\n        }\n        const subject = actionInContext.isMainFrame ? pageAlias :\n            (actionInContext.frameName ?\n                `${pageAlias}.frame(${formatObject({ name: actionInContext.frameName })})` :\n                `${pageAlias}.frame(${formatObject({ url: actionInContext.frameUrl })})`);\n        const signals = language_1.toSignalMap(action);\n        if (signals.dialog) {\n            formatter.add(`  ${pageAlias}.once('dialog', dialog => {\n    console.log(\\`Dialog message: $\\{dialog.message()}\\`);\n    dialog.dismiss().catch(() => {});\n  });`);\n        }\n        const emitPromiseAll = signals.waitForNavigation || signals.popup || signals.download;\n        if (emitPromiseAll) {\n            // Generate either await Promise.all([]) or\n            // const [popup1] = await Promise.all([]).\n            let leftHandSide = '';\n            if (signals.popup)\n                leftHandSide = `const [${signals.popup.popupAlias}] = `;\n            else if (signals.download)\n                leftHandSide = `const [download] = `;\n            formatter.add(`${leftHandSide}await Promise.all([`);\n        }\n        // Popup signals.\n        if (signals.popup)\n            formatter.add(`${pageAlias}.waitForEvent('popup'),`);\n        // Navigation signal.\n        if (signals.waitForNavigation)\n            formatter.add(`${pageAlias}.waitForNavigation(/*{ url: ${quote(signals.waitForNavigation.url)} }*/),`);\n        // Download signals.\n        if (signals.download)\n            formatter.add(`${pageAlias}.waitForEvent('download'),`);\n        const prefix = (signals.popup || signals.waitForNavigation || signals.download) ? '' : 'await ';\n        const actionCall = this._generateActionCall(action);\n        const suffix = (signals.waitForNavigation || emitPromiseAll) ? '' : ';';\n        formatter.add(`${prefix}${subject}.${actionCall}${suffix}`);\n        if (emitPromiseAll)\n            formatter.add(`]);`);\n        else if (signals.assertNavigation)\n            formatter.add(`  // assert.equal(${pageAlias}.url(), ${quote(signals.assertNavigation.url)});`);\n        return formatter.format();\n    }\n    _generateActionCall(action) {\n        switch (action.name) {\n            case 'openPage':\n                throw Error('Not reached');\n            case 'closePage':\n                return 'close()';\n            case 'click': {\n                let method = 'click';\n                if (action.clickCount === 2)\n                    method = 'dblclick';\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const options = {};\n                if (action.button !== 'left')\n                    options.button = action.button;\n                if (modifiers.length)\n                    options.modifiers = modifiers;\n                if (action.clickCount > 2)\n                    options.clickCount = action.clickCount;\n                const optionsString = formatOptions(options);\n                return `${method}(${quote(action.selector)}${optionsString})`;\n            }\n            case 'check':\n                return `check(${quote(action.selector)})`;\n            case 'uncheck':\n                return `uncheck(${quote(action.selector)})`;\n            case 'fill':\n                return `fill(${quote(action.selector)}, ${quote(action.text)})`;\n            case 'setInputFiles':\n                return `setInputFiles(${quote(action.selector)}, ${formatObject(action.files.length === 1 ? action.files[0] : action.files)})`;\n            case 'press': {\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const shortcut = [...modifiers, action.key].join('+');\n                return `press(${quote(action.selector)}, ${quote(shortcut)})`;\n            }\n            case 'navigate':\n                return `goto(${quote(action.url)})`;\n            case 'select':\n                return `selectOption(${quote(action.selector)}, ${formatObject(action.options.length > 1 ? action.options : action.options[0])})`;\n        }\n    }\n    generateHeader(options) {\n        const formatter = new JavaScriptFormatter();\n        formatter.add(`\n      const { ${options.browserName}${options.deviceName ? ', devices' : ''} } = require('playwright');\n\n      (async () => {\n        const browser = await ${options.browserName}.launch(${formatObjectOrVoid(options.launchOptions)});\n        const context = await browser.newContext(${formatContextOptions(options.contextOptions, options.deviceName)});`);\n        return formatter.format();\n    }\n    generateFooter(saveStorage) {\n        const storageStateLine = saveStorage ? `\\n  await context.storageState({ path: '${saveStorage}' });` : '';\n        return `\\n  // ---------------------${storageStateLine}\n  await context.close();\n  await browser.close();\n})();`;\n    }\n}\nexports.JavaScriptLanguageGenerator = JavaScriptLanguageGenerator;\nfunction formatOptions(value) {\n    const keys = Object.keys(value);\n    if (!keys.length)\n        return '';\n    return ', ' + formatObject(value);\n}\nfunction formatObject(value, indent = '  ') {\n    if (typeof value === 'string')\n        return quote(value);\n    if (Array.isArray(value))\n        return `[${value.map(o => formatObject(o)).join(', ')}]`;\n    if (typeof value === 'object') {\n        const keys = Object.keys(value);\n        if (!keys.length)\n            return '{}';\n        const tokens = [];\n        for (const key of keys)\n            tokens.push(`${key}: ${formatObject(value[key])}`);\n        return `{\\n${indent}${tokens.join(`,\\n${indent}`)}\\n}`;\n    }\n    return String(value);\n}\nfunction formatObjectOrVoid(value, indent = '  ') {\n    const result = formatObject(value, indent);\n    return result === '{}' ? '' : result;\n}\nfunction formatContextOptions(options, deviceName) {\n    const device = deviceName && deviceDescriptors[deviceName];\n    if (!device)\n        return formatObjectOrVoid(options);\n    // Filter out all the properties from the device descriptor.\n    let serializedObject = formatObjectOrVoid(language_1.sanitizeDeviceOptions(device, options));\n    // When there are no additional context options, we still want to spread the device inside.\n    if (!serializedObject)\n        serializedObject = '{\\n}';\n    const lines = serializedObject.split('\\n');\n    lines.splice(1, 0, `...devices['${deviceName}'],`);\n    return lines.join('\\n');\n}\nclass JavaScriptFormatter {\n    constructor(offset = 0) {\n        this._lines = [];\n        this._baseIndent = ' '.repeat(2);\n        this._baseOffset = ' '.repeat(offset);\n    }\n    prepend(text) {\n        this._lines = text.trim().split('\\n').map(line => line.trim()).concat(this._lines);\n    }\n    add(text) {\n        this._lines.push(...text.trim().split('\\n').map(line => line.trim()));\n    }\n    newLine() {\n        this._lines.push('');\n    }\n    format() {\n        let spaces = '';\n        let previousLine = '';\n        return this._lines.map((line) => {\n            if (line === '')\n                return line;\n            if (line.startsWith('}') || line.startsWith(']'))\n                spaces = spaces.substring(this._baseIndent.length);\n            const extraSpaces = /^(for|while|if|try).*\\(.*\\)$/.test(previousLine) ? this._baseIndent : '';\n            previousLine = line;\n            const callCarryOver = line.startsWith('.set');\n            line = spaces + extraSpaces + (callCarryOver ? this._baseIndent : '') + line;\n            if (line.endsWith('{') || line.endsWith('['))\n                spaces += this._baseIndent;\n            return this._baseOffset + line;\n        }).join('\\n');\n    }\n}\nexports.JavaScriptFormatter = JavaScriptFormatter;\nfunction quote(text, char = '\\'') {\n    if (char === '\\'')\n        return char + text.replace(/[']/g, '\\\\\\'') + char;\n    if (char === '\"')\n        return char + text.replace(/[\"]/g, '\\\\\"') + char;\n    if (char === '`')\n        return char + text.replace(/[`]/g, '\\\\`') + char;\n    throw new Error('Invalid escape char');\n}\n//# sourceMappingURL=javascript.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toSignalMap = exports.sanitizeDeviceOptions = void 0;\nfunction sanitizeDeviceOptions(device, options) {\n    // Filter out all the properties from the device descriptor.\n    const cleanedOptions = {};\n    for (const property in options) {\n        if (JSON.stringify(device[property]) !== JSON.stringify(options[property]))\n            cleanedOptions[property] = options[property];\n    }\n    return cleanedOptions;\n}\nexports.sanitizeDeviceOptions = sanitizeDeviceOptions;\nfunction toSignalMap(action) {\n    let waitForNavigation;\n    let assertNavigation;\n    let popup;\n    let download;\n    let dialog;\n    for (const signal of action.signals) {\n        if (signal.name === 'navigation' && signal.isAsync)\n            waitForNavigation = signal;\n        else if (signal.name === 'navigation' && !signal.isAsync)\n            assertNavigation = signal;\n        else if (signal.name === 'popup')\n            popup = signal;\n        else if (signal.name === 'download')\n            download = signal;\n        else if (signal.name === 'dialog')\n            dialog = signal;\n    }\n    return {\n        waitForNavigation,\n        assertNavigation,\n        popup,\n        download,\n        dialog,\n    };\n}\nexports.toSignalMap = toSignalMap;\n//# sourceMappingURL=language.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PythonLanguageGenerator = void 0;\nconst language_1 = require(\"./language\");\nconst recorderActions_1 = require(\"./recorderActions\");\nconst utils_1 = require(\"./utils\");\nconst deviceDescriptors = require(\"../../deviceDescriptors\");\nclass PythonLanguageGenerator {\n    constructor(isAsync) {\n        this.id = 'python';\n        this.fileName = '<python>';\n        this.highlighter = 'python';\n        this.id = isAsync ? 'python-async' : 'python';\n        this.fileName = isAsync ? '<async python>' : '<python>';\n        this._isAsync = isAsync;\n        this._awaitPrefix = isAsync ? 'await ' : '';\n        this._asyncPrefix = isAsync ? 'async ' : '';\n    }\n    generateAction(actionInContext) {\n        const { action, pageAlias } = actionInContext;\n        const formatter = new PythonFormatter(4);\n        formatter.newLine();\n        formatter.add('# ' + recorderActions_1.actionTitle(action));\n        if (action.name === 'openPage') {\n            formatter.add(`${pageAlias} = ${this._awaitPrefix}context.new_page()`);\n            if (action.url && action.url !== 'about:blank' && action.url !== 'chrome://newtab/')\n                formatter.add(`${pageAlias}.goto('${action.url}')`);\n            return formatter.format();\n        }\n        const subject = actionInContext.isMainFrame ? pageAlias :\n            (actionInContext.frameName ?\n                `${pageAlias}.frame(${formatOptions({ name: actionInContext.frameName }, false)})` :\n                `${pageAlias}.frame(${formatOptions({ url: actionInContext.frameUrl }, false)})`);\n        const signals = language_1.toSignalMap(action);\n        if (signals.dialog)\n            formatter.add(`  ${pageAlias}.once(\"dialog\", lambda dialog: dialog.dismiss())`);\n        const actionCall = this._generateActionCall(action);\n        let code = `${this._awaitPrefix}${subject}.${actionCall}`;\n        if (signals.popup) {\n            code = `${this._asyncPrefix}with ${pageAlias}.expect_popup() as popup_info {\n        ${code}\n      }\n      ${signals.popup.popupAlias} = ${this._awaitPrefix}popup_info.value`;\n        }\n        if (signals.download) {\n            code = `${this._asyncPrefix}with ${pageAlias}.expect_download() as download_info {\n        ${code}\n      }\n      download = ${this._awaitPrefix}download_info.value`;\n        }\n        if (signals.waitForNavigation) {\n            code = `\n      # ${this._asyncPrefix}with ${pageAlias}.expect_navigation(url=${quote(signals.waitForNavigation.url)}):\n      ${this._asyncPrefix}with ${pageAlias}.expect_navigation() {\n        ${code}\n      }`;\n        }\n        formatter.add(code);\n        if (signals.assertNavigation)\n            formatter.add(`  # assert ${pageAlias}.url == ${quote(signals.assertNavigation.url)}`);\n        return formatter.format();\n    }\n    _generateActionCall(action) {\n        switch (action.name) {\n            case 'openPage':\n                throw Error('Not reached');\n            case 'closePage':\n                return 'close()';\n            case 'click': {\n                let method = 'click';\n                if (action.clickCount === 2)\n                    method = 'dblclick';\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const options = {};\n                if (action.button !== 'left')\n                    options.button = action.button;\n                if (modifiers.length)\n                    options.modifiers = modifiers;\n                if (action.clickCount > 2)\n                    options.clickCount = action.clickCount;\n                const optionsString = formatOptions(options, true);\n                return `${method}(${quote(action.selector)}${optionsString})`;\n            }\n            case 'check':\n                return `check(${quote(action.selector)})`;\n            case 'uncheck':\n                return `uncheck(${quote(action.selector)})`;\n            case 'fill':\n                return `fill(${quote(action.selector)}, ${quote(action.text)})`;\n            case 'setInputFiles':\n                return `set_input_files(${quote(action.selector)}, ${formatValue(action.files.length === 1 ? action.files[0] : action.files)})`;\n            case 'press': {\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const shortcut = [...modifiers, action.key].join('+');\n                return `press(${quote(action.selector)}, ${quote(shortcut)})`;\n            }\n            case 'navigate':\n                return `goto(${quote(action.url)})`;\n            case 'select':\n                return `select_option(${quote(action.selector)}, ${formatValue(action.options.length === 1 ? action.options[0] : action.options)})`;\n        }\n    }\n    generateHeader(options) {\n        const formatter = new PythonFormatter();\n        if (this._isAsync) {\n            formatter.add(`\nimport asyncio\nfrom playwright.async_api import async_playwright\n\nasync def run(playwright) {\n    browser = await playwright.${options.browserName}.launch(${formatOptions(options.launchOptions, false)})\n    context = await browser.new_context(${formatContextOptions(options.contextOptions, options.deviceName)})`);\n        }\n        else {\n            formatter.add(`\nfrom playwright.sync_api import sync_playwright\n\ndef run(playwright) {\n    browser = playwright.${options.browserName}.launch(${formatOptions(options.launchOptions, false)})\n    context = browser.new_context(${formatContextOptions(options.contextOptions, options.deviceName)})`);\n        }\n        return formatter.format();\n    }\n    generateFooter(saveStorage) {\n        if (this._isAsync) {\n            const storageStateLine = saveStorage ? `\\n    await context.storage_state(path=\"${saveStorage}\")` : '';\n            return `\\n    # ---------------------${storageStateLine}\n    await context.close()\n    await browser.close()\n\nasync def main():\n    async with async_playwright() as playwright:\n        await run(playwright)\nasyncio.run(main())`;\n        }\n        else {\n            const storageStateLine = saveStorage ? `\\n    context.storage_state(path=\"${saveStorage}\")` : '';\n            return `\\n    # ---------------------${storageStateLine}\n    context.close()\n    browser.close()\n\nwith sync_playwright() as playwright:\n    run(playwright)`;\n        }\n    }\n}\nexports.PythonLanguageGenerator = PythonLanguageGenerator;\nfunction formatValue(value) {\n    if (value === false)\n        return 'False';\n    if (value === true)\n        return 'True';\n    if (value === undefined)\n        return 'None';\n    if (Array.isArray(value))\n        return `[${value.map(formatValue).join(', ')}]`;\n    if (typeof value === 'string')\n        return quote(value);\n    return String(value);\n}\nfunction toSnakeCase(name) {\n    const toSnakeCaseRegex = /((?<=[a-z0-9])[A-Z]|(?!^)[A-Z](?=[a-z]))/g;\n    return name.replace(toSnakeCaseRegex, `_$1`).toLowerCase();\n}\nfunction formatOptions(value, hasArguments) {\n    const keys = Object.keys(value);\n    if (!keys.length)\n        return '';\n    return (hasArguments ? ', ' : '') + keys.map(key => `${toSnakeCase(key)}=${formatValue(value[key])}`).join(', ');\n}\nfunction formatContextOptions(options, deviceName) {\n    const device = deviceName && deviceDescriptors[deviceName];\n    if (!device)\n        return formatOptions(options, false);\n    return `**playwright.devices[\"${deviceName}\"]` + formatOptions(language_1.sanitizeDeviceOptions(device, options), true);\n}\nclass PythonFormatter {\n    constructor(offset = 0) {\n        this._lines = [];\n        this._baseIndent = ' '.repeat(4);\n        this._baseOffset = ' '.repeat(offset);\n    }\n    prepend(text) {\n        this._lines = text.trim().split('\\n').map(line => line.trim()).concat(this._lines);\n    }\n    add(text) {\n        this._lines.push(...text.trim().split('\\n').map(line => line.trim()));\n    }\n    newLine() {\n        this._lines.push('');\n    }\n    format() {\n        let spaces = '';\n        const lines = [];\n        this._lines.forEach((line) => {\n            if (line === '')\n                return lines.push(line);\n            if (line === '}') {\n                spaces = spaces.substring(this._baseIndent.length);\n                return;\n            }\n            line = spaces + line;\n            if (line.endsWith('{')) {\n                spaces += this._baseIndent;\n                line = line.substring(0, line.length - 1).trimEnd() + ':';\n            }\n            return lines.push(this._baseOffset + line);\n        });\n        return lines.join('\\n');\n    }\n}\nfunction quote(text, char = '\\\"') {\n    if (char === '\\'')\n        return char + text.replace(/[']/g, '\\\\\\'') + char;\n    if (char === '\"')\n        return char + text.replace(/[\"]/g, '\\\\\"') + char;\n    if (char === '`')\n        return char + text.replace(/[`]/g, '\\\\`') + char;\n    throw new Error('Invalid escape char');\n}\n//# sourceMappingURL=python.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.actionTitle = void 0;\nfunction actionTitle(action) {\n    switch (action.name) {\n        case 'openPage':\n            return `Open new page`;\n        case 'closePage':\n            return `Close page`;\n        case 'check':\n            return `Check ${action.selector}`;\n        case 'uncheck':\n            return `Uncheck ${action.selector}`;\n        case 'click': {\n            if (action.clickCount === 1)\n                return `Click ${action.selector}`;\n            if (action.clickCount === 2)\n                return `Double click ${action.selector}`;\n            if (action.clickCount === 3)\n                return `Triple click ${action.selector}`;\n            return `${action.clickCount} click`;\n        }\n        case 'fill':\n            return `Fill ${action.selector}`;\n        case 'setInputFiles':\n            if (action.files.length === 0)\n                return `Clear selected files`;\n            else\n                return `Upload ${action.files.join(', ')}`;\n        case 'navigate':\n            return `Go to ${action.url}`;\n        case 'press':\n            return `Press ${action.key}` + (action.modifiers ? ' with modifiers' : '');\n        case 'select':\n            return `Select ${action.options.join(', ')}`;\n    }\n}\nexports.actionTitle = actionTitle;\n//# sourceMappingURL=recorderActions.js.map",null,"\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.metadataToCallLog = void 0;\nfunction metadataToCallLog(metadata, status, snapshots) {\n    var _a, _b;\n    const title = metadata.apiName || metadata.method;\n    if (metadata.error)\n        status = 'error';\n    const params = {\n        url: (_a = metadata.params) === null || _a === void 0 ? void 0 : _a.url,\n        selector: (_b = metadata.params) === null || _b === void 0 ? void 0 : _b.selector,\n    };\n    let duration = metadata.endTime ? metadata.endTime - metadata.startTime : undefined;\n    if (typeof duration === 'number' && metadata.pauseStartTime && metadata.pauseEndTime) {\n        duration -= (metadata.pauseEndTime - metadata.pauseStartTime);\n        duration = Math.max(duration, 0);\n    }\n    const callLog = {\n        id: metadata.id,\n        messages: metadata.log,\n        title,\n        status,\n        error: metadata.error,\n        params,\n        duration,\n        snapshots: {\n            before: showBeforeSnapshot(metadata) && snapshots.has(`before@${metadata.id}`),\n            action: showActionSnapshot(metadata) && snapshots.has(`action@${metadata.id}`),\n            after: showAfterSnapshot(metadata) && snapshots.has(`after@${metadata.id}`),\n        }\n    };\n    return callLog;\n}\nexports.metadataToCallLog = metadataToCallLog;\nfunction showBeforeSnapshot(metadata) {\n    return metadata.method === 'close';\n}\nfunction showActionSnapshot(metadata) {\n    return ['click', 'dblclick', 'check', 'uncheck', 'fill', 'press'].includes(metadata.method);\n}\nfunction showAfterSnapshot(metadata) {\n    return ['goto', 'click', 'dblclick', 'dblclick', 'check', 'uncheck', 'fill', 'press'].includes(metadata.method);\n}\n//# sourceMappingURL=recorderUtils.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.describeFrame = exports.toModifiers = exports.toClickOptions = void 0;\nfunction toClickOptions(action) {\n    let method = 'click';\n    if (action.clickCount === 2)\n        method = 'dblclick';\n    const modifiers = toModifiers(action.modifiers);\n    const options = {};\n    if (action.button !== 'left')\n        options.button = action.button;\n    if (modifiers.length)\n        options.modifiers = modifiers;\n    if (action.clickCount > 2)\n        options.clickCount = action.clickCount;\n    return { method, options };\n}\nexports.toClickOptions = toClickOptions;\nfunction toModifiers(modifiers) {\n    const result = [];\n    if (modifiers & 1)\n        result.push('Alt');\n    if (modifiers & 2)\n        result.push('Control');\n    if (modifiers & 4)\n        result.push('Meta');\n    if (modifiers & 8)\n        result.push('Shift');\n    return result;\n}\nexports.toModifiers = toModifiers;\nfunction describeFrame(frame) {\n    const page = frame._page;\n    if (page.mainFrame() === frame)\n        return { isMainFrame: true, frameUrl: frame.url() };\n    const frames = page.frames().filter(f => f.name() === frame.name());\n    if (frames.length === 1 && frames[0] === frame)\n        return { isMainFrame: false, frameUrl: frame.url(), frameName: frame.name() };\n    return { isMainFrame: false, frameUrl: frame.url() };\n}\nexports.describeFrame = describeFrame;\n//# sourceMappingURL=utils.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecorderSupplement = void 0;\nconst fs = __importStar(require(\"fs\"));\nconst codeGenerator_1 = require(\"./recorder/codeGenerator\");\nconst utils_1 = require(\"./recorder/utils\");\nconst page_1 = require(\"../page\");\nconst frames_1 = require(\"../frames\");\nconst browserContext_1 = require(\"../browserContext\");\nconst java_1 = require(\"./recorder/java\");\nconst javascript_1 = require(\"./recorder/javascript\");\nconst csharp_1 = require(\"./recorder/csharp\");\nconst python_1 = require(\"./recorder/python\");\nconst recorderSource = __importStar(require(\"../../generated/recorderSource\"));\nconst consoleApiSource = __importStar(require(\"../../generated/consoleApiSource\"));\nconst recorderApp_1 = require(\"./recorder/recorderApp\");\nconst instrumentation_1 = require(\"../instrumentation\");\nconst utils_2 = require(\"../../utils/utils\");\nconst inMemorySnapshotter_1 = require(\"../snapshot/inMemorySnapshotter\");\nconst recorderUtils_1 = require(\"./recorder/recorderUtils\");\nconst symbol = Symbol('RecorderSupplement');\nclass RecorderSupplement {\n    constructor(context, params) {\n        this._pageAliases = new Map();\n        this._lastPopupOrdinal = 0;\n        this._lastDialogOrdinal = 0;\n        this._timers = new Set();\n        this._highlightedSelector = '';\n        this._recorderApp = null;\n        this._currentCallsMetadata = new Map();\n        this._pausedCallsMetadata = new Map();\n        this._userSources = new Map();\n        this._snapshots = new Set();\n        this._allMetadatas = new Map();\n        this._context = context;\n        this._params = params;\n        this._mode = params.startRecording ? 'recording' : 'none';\n        this._pauseOnNextStatement = !!params.pauseOnNextStatement;\n        const language = params.language || context._options.sdkLanguage;\n        const languages = new Set([\n            new java_1.JavaLanguageGenerator(),\n            new javascript_1.JavaScriptLanguageGenerator(),\n            new python_1.PythonLanguageGenerator(false),\n            new python_1.PythonLanguageGenerator(true),\n            new csharp_1.CSharpLanguageGenerator(),\n        ]);\n        const primaryLanguage = [...languages].find(l => l.id === language);\n        if (!primaryLanguage)\n            throw new Error(`\\n===============================\\nUnsupported language: '${language}'\\n===============================\\n`);\n        languages.delete(primaryLanguage);\n        const orderedLanguages = [primaryLanguage, ...languages];\n        this._recorderSources = [];\n        const generator = new codeGenerator_1.CodeGenerator(context._browser.options.name, !!params.startRecording, params.launchOptions || {}, params.contextOptions || {}, params.device, params.saveStorage);\n        let text = '';\n        generator.on('change', () => {\n            var _a;\n            this._recorderSources = [];\n            for (const languageGenerator of orderedLanguages) {\n                const source = {\n                    file: languageGenerator.fileName,\n                    text: generator.generateText(languageGenerator),\n                    language: languageGenerator.highlighter,\n                    highlight: []\n                };\n                source.revealLine = source.text.split('\\n').length - 1;\n                this._recorderSources.push(source);\n                if (languageGenerator === orderedLanguages[0])\n                    text = source.text;\n            }\n            this._pushAllSources();\n            (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setFile(primaryLanguage.fileName);\n        });\n        if (params.outputFile) {\n            context.on(browserContext_1.BrowserContext.Events.BeforeClose, () => {\n                fs.writeFileSync(params.outputFile, text);\n                text = '';\n            });\n            process.on('exit', () => {\n                if (text)\n                    fs.writeFileSync(params.outputFile, text);\n            });\n        }\n        this._generator = generator;\n        this._snapshotter = new inMemorySnapshotter_1.InMemorySnapshotter(context);\n    }\n    static getOrCreate(context, params = {}) {\n        let recorderPromise = context[symbol];\n        if (!recorderPromise) {\n            const recorder = new RecorderSupplement(context, params);\n            recorderPromise = recorder.install().then(() => recorder);\n            context[symbol] = recorderPromise;\n        }\n        return recorderPromise;\n    }\n    static getNoCreate(context) {\n        return context[symbol];\n    }\n    async install() {\n        const recorderApp = await recorderApp_1.RecorderApp.open(this._context);\n        this._recorderApp = recorderApp;\n        recorderApp.once('close', () => {\n            this._snapshotter.dispose().catch(() => { });\n            this._recorderApp = null;\n        });\n        recorderApp.on('event', (data) => {\n            if (data.event === 'setMode') {\n                this._setMode(data.params.mode);\n                this._refreshOverlay();\n                return;\n            }\n            if (data.event === 'selectorUpdated') {\n                this._highlightedSelector = data.params.selector;\n                this._refreshOverlay();\n                return;\n            }\n            if (data.event === 'callLogHovered') {\n                this._hoveredSnapshot = undefined;\n                if (this._isPaused() && data.params.callLogId)\n                    this._hoveredSnapshot = data.params;\n                this._refreshOverlay();\n                return;\n            }\n            if (data.event === 'step') {\n                this._resume(true);\n                return;\n            }\n            if (data.event === 'resume') {\n                this._resume(false);\n                return;\n            }\n            if (data.event === 'pause') {\n                this._pauseOnNextStatement = true;\n                return;\n            }\n            if (data.event === 'clear') {\n                this._clearScript();\n                return;\n            }\n        });\n        await Promise.all([\n            recorderApp.setMode(this._mode),\n            recorderApp.setPaused(!!this._pausedCallsMetadata.size),\n            this._pushAllSources()\n        ]);\n        this._context.on(browserContext_1.BrowserContext.Events.Page, page => this._onPage(page));\n        for (const page of this._context.pages())\n            this._onPage(page);\n        this._context.once(browserContext_1.BrowserContext.Events.Close, () => {\n            for (const timer of this._timers)\n                clearTimeout(timer);\n            this._timers.clear();\n            recorderApp.close().catch(() => { });\n        });\n        // Input actions that potentially lead to navigation are intercepted on the page and are\n        // performed by the Playwright.\n        await this._context.exposeBinding('_playwrightRecorderPerformAction', false, (source, action) => this._performAction(source.frame, action));\n        // Other non-essential actions are simply being recorded.\n        await this._context.exposeBinding('_playwrightRecorderRecordAction', false, (source, action) => this._recordAction(source.frame, action));\n        // Commits last action so that no further signals are added to it.\n        await this._context.exposeBinding('_playwrightRecorderCommitAction', false, (source, action) => this._generator.commitLastAction());\n        await this._context.exposeBinding('_playwrightRecorderState', false, source => {\n            let snapshotUrl;\n            let actionSelector = this._highlightedSelector;\n            let actionPoint;\n            if (this._hoveredSnapshot) {\n                const metadata = this._allMetadatas.get(this._hoveredSnapshot.callLogId);\n                snapshotUrl = `${metadata.pageId}?name=${this._hoveredSnapshot.phase}@${this._hoveredSnapshot.callLogId}`;\n                actionPoint = this._hoveredSnapshot.phase === 'action' ? metadata === null || metadata === void 0 ? void 0 : metadata.point : undefined;\n            }\n            else {\n                for (const [metadata, sdkObject] of this._currentCallsMetadata) {\n                    if (source.page === sdkObject.attribution.page) {\n                        actionPoint = metadata.point || actionPoint;\n                        actionSelector = actionSelector || metadata.params.selector;\n                    }\n                }\n            }\n            const uiState = {\n                mode: this._mode,\n                actionPoint,\n                actionSelector,\n                snapshotUrl,\n            };\n            return uiState;\n        });\n        await this._context.exposeBinding('_playwrightRecorderSetSelector', false, async (_, selector) => {\n            var _a, _b;\n            this._setMode('none');\n            await ((_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setSelector(selector, true));\n            await ((_b = this._recorderApp) === null || _b === void 0 ? void 0 : _b.bringToFront());\n        });\n        await this._context.exposeBinding('_playwrightResume', false, () => {\n            this._resume(false).catch(() => { });\n        });\n        const snapshotBaseUrl = await this._snapshotter.initialize() + '/snapshot/';\n        await this._context.extendInjectedScript(recorderSource.source, { isUnderTest: utils_2.isUnderTest(), snapshotBaseUrl });\n        await this._context.extendInjectedScript(consoleApiSource.source);\n        this._context.recorderAppForTest = recorderApp;\n    }\n    async pause(metadata) {\n        const result = new Promise(f => {\n            this._pausedCallsMetadata.set(metadata, f);\n        });\n        this._recorderApp.setPaused(true);\n        metadata.pauseStartTime = utils_2.monotonicTime();\n        this._updateUserSources();\n        this.updateCallLog([metadata]);\n        return result;\n    }\n    _isPaused() {\n        return !!this._pausedCallsMetadata.size;\n    }\n    _setMode(mode) {\n        var _a;\n        this._mode = mode;\n        (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setMode(this._mode);\n        this._generator.setEnabled(this._mode === 'recording');\n        if (this._mode !== 'none')\n            this._context.pages()[0].bringToFront().catch(() => { });\n    }\n    async _resume(step) {\n        var _a;\n        this._pauseOnNextStatement = step;\n        (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setPaused(false);\n        const endTime = utils_2.monotonicTime();\n        for (const [metadata, callback] of this._pausedCallsMetadata) {\n            metadata.pauseEndTime = endTime;\n            callback();\n        }\n        this._pausedCallsMetadata.clear();\n        this._updateUserSources();\n        this.updateCallLog([...this._currentCallsMetadata.keys()]);\n    }\n    _refreshOverlay() {\n        for (const page of this._context.pages())\n            page.mainFrame().evaluateExpression('window._playwrightRefreshOverlay()', false, undefined, 'main').catch(() => { });\n    }\n    async _onPage(page) {\n        // First page is called page, others are called popup1, popup2, etc.\n        const frame = page.mainFrame();\n        page.on('close', () => {\n            this._pageAliases.delete(page);\n            this._generator.addAction({\n                pageAlias,\n                ...utils_1.describeFrame(page.mainFrame()),\n                committed: true,\n                action: {\n                    name: 'closePage',\n                    signals: [],\n                }\n            });\n        });\n        frame.on(frames_1.Frame.Events.Navigation, () => this._onFrameNavigated(frame, page));\n        page.on(page_1.Page.Events.Download, () => this._onDownload(page));\n        page.on(page_1.Page.Events.Popup, popup => this._onPopup(page, popup));\n        page.on(page_1.Page.Events.Dialog, () => this._onDialog(page));\n        const suffix = this._pageAliases.size ? String(++this._lastPopupOrdinal) : '';\n        const pageAlias = 'page' + suffix;\n        this._pageAliases.set(page, pageAlias);\n        const isPopup = !!await page.opener();\n        // Could happen due to the await above.\n        if (page.isClosed())\n            return;\n        if (!isPopup) {\n            this._generator.addAction({\n                pageAlias,\n                ...utils_1.describeFrame(page.mainFrame()),\n                committed: true,\n                action: {\n                    name: 'openPage',\n                    url: page.mainFrame().url(),\n                    signals: [],\n                }\n            });\n        }\n    }\n    _clearScript() {\n        this._generator.restart();\n        if (!!this._params.startRecording) {\n            for (const page of this._context.pages())\n                this._onFrameNavigated(page.mainFrame(), page);\n        }\n    }\n    async _performAction(frame, action) {\n        const page = frame._page;\n        const actionInContext = {\n            pageAlias: this._pageAliases.get(page),\n            ...utils_1.describeFrame(frame),\n            action\n        };\n        this._generator.willPerformAction(actionInContext);\n        const noCallMetadata = instrumentation_1.internalCallMetadata();\n        try {\n            const kActionTimeout = 5000;\n            if (action.name === 'click') {\n                const { options } = utils_1.toClickOptions(action);\n                await frame.click(noCallMetadata, action.selector, { ...options, timeout: kActionTimeout });\n            }\n            if (action.name === 'press') {\n                const modifiers = utils_1.toModifiers(action.modifiers);\n                const shortcut = [...modifiers, action.key].join('+');\n                await frame.press(noCallMetadata, action.selector, shortcut, { timeout: kActionTimeout });\n            }\n            if (action.name === 'check')\n                await frame.check(noCallMetadata, action.selector, { timeout: kActionTimeout });\n            if (action.name === 'uncheck')\n                await frame.uncheck(noCallMetadata, action.selector, { timeout: kActionTimeout });\n            if (action.name === 'select')\n                await frame.selectOption(noCallMetadata, action.selector, [], action.options.map(value => ({ value })), { timeout: kActionTimeout });\n        }\n        catch (e) {\n            this._generator.performedActionFailed(actionInContext);\n            return;\n        }\n        const timer = setTimeout(() => {\n            actionInContext.committed = true;\n            this._timers.delete(timer);\n        }, 5000);\n        this._generator.didPerformAction(actionInContext);\n        this._timers.add(timer);\n    }\n    async _recordAction(frame, action) {\n        this._generator.addAction({\n            pageAlias: this._pageAliases.get(frame._page),\n            ...utils_1.describeFrame(frame),\n            action\n        });\n    }\n    _onFrameNavigated(frame, page) {\n        const pageAlias = this._pageAliases.get(page);\n        this._generator.signal(pageAlias, frame, { name: 'navigation', url: frame.url() });\n    }\n    _onPopup(page, popup) {\n        const pageAlias = this._pageAliases.get(page);\n        const popupAlias = this._pageAliases.get(popup);\n        this._generator.signal(pageAlias, page.mainFrame(), { name: 'popup', popupAlias });\n    }\n    _onDownload(page) {\n        const pageAlias = this._pageAliases.get(page);\n        this._generator.signal(pageAlias, page.mainFrame(), { name: 'download' });\n    }\n    _onDialog(page) {\n        const pageAlias = this._pageAliases.get(page);\n        this._generator.signal(pageAlias, page.mainFrame(), { name: 'dialog', dialogAlias: String(++this._lastDialogOrdinal) });\n    }\n    _captureSnapshot(sdkObject, metadata, phase) {\n        if (sdkObject.attribution.page) {\n            const snapshotName = `${phase}@${metadata.id}`;\n            this._snapshots.add(snapshotName);\n            this._snapshotter.captureSnapshot(sdkObject.attribution.page, snapshotName);\n        }\n    }\n    async onBeforeCall(sdkObject, metadata) {\n        var _a;\n        if (this._mode === 'recording')\n            return;\n        this._captureSnapshot(sdkObject, metadata, 'before');\n        this._currentCallsMetadata.set(metadata, sdkObject);\n        this._allMetadatas.set(metadata.id, metadata);\n        this._updateUserSources();\n        this.updateCallLog([metadata]);\n        if (shouldPauseOnCall(sdkObject, metadata) || (this._pauseOnNextStatement && shouldPauseOnStep(sdkObject, metadata)))\n            await this.pause(metadata);\n        if (metadata.params && metadata.params.selector) {\n            this._highlightedSelector = metadata.params.selector;\n            await ((_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setSelector(this._highlightedSelector));\n        }\n    }\n    async onAfterCall(sdkObject, metadata) {\n        if (this._mode === 'recording')\n            return;\n        this._captureSnapshot(sdkObject, metadata, 'after');\n        if (!metadata.error)\n            this._currentCallsMetadata.delete(metadata);\n        this._pausedCallsMetadata.delete(metadata);\n        this._updateUserSources();\n        this.updateCallLog([metadata]);\n    }\n    _updateUserSources() {\n        var _a;\n        // Remove old decorations.\n        for (const source of this._userSources.values()) {\n            source.highlight = [];\n            source.revealLine = undefined;\n        }\n        // Apply new decorations.\n        let fileToSelect = undefined;\n        for (const metadata of this._currentCallsMetadata.keys()) {\n            if (!metadata.stack || !metadata.stack[0])\n                continue;\n            const { file, line } = metadata.stack[0];\n            let source = this._userSources.get(file);\n            if (!source) {\n                source = { file, text: this._readSource(file), highlight: [], language: languageForFile(file) };\n                this._userSources.set(file, source);\n            }\n            if (line) {\n                const paused = this._pausedCallsMetadata.has(metadata);\n                source.highlight.push({ line, type: metadata.error ? 'error' : (paused ? 'paused' : 'running') });\n                source.revealLine = line;\n                fileToSelect = source.file;\n            }\n        }\n        this._pushAllSources();\n        if (fileToSelect)\n            (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setFile(fileToSelect);\n    }\n    _pushAllSources() {\n        var _a;\n        (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.setSources([...this._recorderSources, ...this._userSources.values()]);\n    }\n    async onBeforeInputAction(sdkObject, metadata) {\n        if (this._mode === 'recording')\n            return;\n        this._captureSnapshot(sdkObject, metadata, 'action');\n        if (this._pauseOnNextStatement)\n            await this.pause(metadata);\n    }\n    updateCallLog(metadatas) {\n        var _a;\n        if (this._mode === 'recording')\n            return;\n        const logs = [];\n        for (const metadata of metadatas) {\n            if (!metadata.method)\n                continue;\n            let status = 'done';\n            if (this._currentCallsMetadata.has(metadata))\n                status = 'in-progress';\n            if (this._pausedCallsMetadata.has(metadata))\n                status = 'paused';\n            logs.push(recorderUtils_1.metadataToCallLog(metadata, status, this._snapshots));\n        }\n        (_a = this._recorderApp) === null || _a === void 0 ? void 0 : _a.updateCallLogs(logs);\n    }\n    _readSource(fileName) {\n        try {\n            return fs.readFileSync(fileName, 'utf-8');\n        }\n        catch (e) {\n            return '// No source available';\n        }\n    }\n}\nexports.RecorderSupplement = RecorderSupplement;\nfunction languageForFile(file) {\n    if (file.endsWith('.py'))\n        return 'python';\n    if (file.endsWith('.java'))\n        return 'java';\n    if (file.endsWith('.cs'))\n        return 'csharp';\n    return 'javascript';\n}\nfunction shouldPauseOnCall(sdkObject, metadata) {\n    var _a;\n    if (!((_a = sdkObject.attribution.browser) === null || _a === void 0 ? void 0 : _a.options.headful) && !utils_2.isUnderTest())\n        return false;\n    return metadata.method === 'pause';\n}\nfunction shouldPauseOnStep(sdkObject, metadata) {\n    return metadata.method === 'goto' || metadata.method === 'close';\n}\n//# sourceMappingURL=recorderSupplement.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tracer = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util = __importStar(require(\"util\"));\nconst utils_1 = require(\"../../../utils/utils\");\nconst browserContext_1 = require(\"../../browserContext\");\nconst frames_1 = require(\"../../frames\");\nconst helper_1 = require(\"../../helper\");\nconst page_1 = require(\"../../page\");\nconst persistentSnapshotter_1 = require(\"../../snapshot/persistentSnapshotter\");\nconst fsAppendFileAsync = util.promisify(fs_1.default.appendFile.bind(fs_1.default));\nconst envTrace = utils_1.getFromENV('PWTRACE_RESOURCE_DIR');\nclass Tracer {\n    constructor() {\n        this._contextTracers = new Map();\n    }\n    async onContextCreated(context) {\n        const traceDir = context._options._traceDir;\n        if (!traceDir)\n            return;\n        const resourcesDir = envTrace || path_1.default.join(traceDir, 'resources');\n        const tracePath = path_1.default.join(traceDir, utils_1.createGuid());\n        const contextTracer = new ContextTracer(context, resourcesDir, tracePath);\n        await contextTracer.start();\n        this._contextTracers.set(context, contextTracer);\n    }\n    async onContextDidDestroy(context) {\n        const contextTracer = this._contextTracers.get(context);\n        if (contextTracer) {\n            await contextTracer.dispose().catch(e => { });\n            this._contextTracers.delete(context);\n        }\n    }\n    async onBeforeInputAction(sdkObject, metadata, element) {\n        var _a;\n        (_a = this._contextTracers.get(sdkObject.attribution.context)) === null || _a === void 0 ? void 0 : _a._captureSnapshot('action', sdkObject, metadata, element);\n    }\n    async onBeforeCall(sdkObject, metadata, element) {\n        var _a;\n        (_a = this._contextTracers.get(sdkObject.attribution.context)) === null || _a === void 0 ? void 0 : _a._captureSnapshot('before', sdkObject, metadata, element);\n    }\n    async onAfterCall(sdkObject, metadata) {\n        var _a, _b;\n        (_a = this._contextTracers.get(sdkObject.attribution.context)) === null || _a === void 0 ? void 0 : _a._captureSnapshot('after', sdkObject, metadata);\n        (_b = this._contextTracers.get(sdkObject.attribution.context)) === null || _b === void 0 ? void 0 : _b.onAfterCall(sdkObject, metadata);\n    }\n}\nexports.Tracer = Tracer;\nconst snapshotsSymbol = Symbol('snapshots');\n// This is an official way to pass snapshots between onBefore/AfterInputAction and onAfterCall.\nfunction snapshotsForMetadata(metadata) {\n    if (!metadata[snapshotsSymbol])\n        metadata[snapshotsSymbol] = [];\n    return metadata[snapshotsSymbol];\n}\nclass ContextTracer {\n    constructor(context, resourcesDir, tracePrefix) {\n        this._disposed = false;\n        const traceFile = tracePrefix + '-actions.trace';\n        this._contextId = 'context@' + utils_1.createGuid();\n        this._appendEventChain = utils_1.mkdirIfNeeded(traceFile).then(() => traceFile);\n        const event = {\n            timestamp: utils_1.monotonicTime(),\n            type: 'context-created',\n            browserName: context._browser.options.name,\n            contextId: this._contextId,\n            isMobile: !!context._options.isMobile,\n            deviceScaleFactor: context._options.deviceScaleFactor || 1,\n            viewportSize: context._options.viewport || undefined,\n            debugName: context._options._debugName,\n        };\n        this._appendTraceEvent(event);\n        this._snapshotter = new persistentSnapshotter_1.PersistentSnapshotter(context, tracePrefix, resourcesDir);\n        this._eventListeners = [\n            helper_1.helper.addEventListener(context, browserContext_1.BrowserContext.Events.Page, this._onPage.bind(this)),\n        ];\n    }\n    async start() {\n        await this._snapshotter.start();\n    }\n    async _captureSnapshot(name, sdkObject, metadata, element) {\n        if (!sdkObject.attribution.page)\n            return;\n        const snapshotName = `${name}@${metadata.id}`;\n        snapshotsForMetadata(metadata).push({ title: name, snapshotName });\n        this._snapshotter.captureSnapshot(sdkObject.attribution.page, snapshotName, element);\n    }\n    async onAfterCall(sdkObject, metadata) {\n        if (!sdkObject.attribution.page)\n            return;\n        const event = {\n            timestamp: utils_1.monotonicTime(),\n            type: 'action',\n            contextId: this._contextId,\n            metadata,\n            snapshots: snapshotsForMetadata(metadata),\n        };\n        this._appendTraceEvent(event);\n    }\n    _onPage(page) {\n        const pageId = page.uniqueId;\n        const event = {\n            timestamp: utils_1.monotonicTime(),\n            type: 'page-created',\n            contextId: this._contextId,\n            pageId,\n        };\n        this._appendTraceEvent(event);\n        page.on(page_1.Page.Events.Dialog, (dialog) => {\n            if (this._disposed)\n                return;\n            const event = {\n                timestamp: utils_1.monotonicTime(),\n                type: 'dialog-opened',\n                contextId: this._contextId,\n                pageId,\n                dialogType: dialog.type(),\n                message: dialog.message(),\n            };\n            this._appendTraceEvent(event);\n        });\n        page.on(page_1.Page.Events.InternalDialogClosed, (dialog) => {\n            if (this._disposed)\n                return;\n            const event = {\n                timestamp: utils_1.monotonicTime(),\n                type: 'dialog-closed',\n                contextId: this._contextId,\n                pageId,\n                dialogType: dialog.type(),\n            };\n            this._appendTraceEvent(event);\n        });\n        page.mainFrame().on(frames_1.Frame.Events.Navigation, (navigationEvent) => {\n            if (this._disposed || page.mainFrame().url() === 'about:blank')\n                return;\n            const event = {\n                timestamp: utils_1.monotonicTime(),\n                type: 'navigation',\n                contextId: this._contextId,\n                pageId,\n                url: navigationEvent.url,\n                sameDocument: !navigationEvent.newDocument,\n            };\n            this._appendTraceEvent(event);\n        });\n        page.on(page_1.Page.Events.Load, () => {\n            if (this._disposed || page.mainFrame().url() === 'about:blank')\n                return;\n            const event = {\n                timestamp: utils_1.monotonicTime(),\n                type: 'load',\n                contextId: this._contextId,\n                pageId,\n            };\n            this._appendTraceEvent(event);\n        });\n        page.once(page_1.Page.Events.Close, () => {\n            if (this._disposed)\n                return;\n            const event = {\n                timestamp: utils_1.monotonicTime(),\n                type: 'page-destroyed',\n                contextId: this._contextId,\n                pageId,\n            };\n            this._appendTraceEvent(event);\n        });\n    }\n    async dispose() {\n        this._disposed = true;\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        await this._snapshotter.dispose();\n        const event = {\n            timestamp: utils_1.monotonicTime(),\n            type: 'context-destroyed',\n            contextId: this._contextId,\n        };\n        this._appendTraceEvent(event);\n        // Ensure all writes are finished.\n        await this._appendEventChain;\n    }\n    _appendTraceEvent(event) {\n        // Serialize all writes to the trace file.\n        this._appendEventChain = this._appendEventChain.then(async (traceFile) => {\n            await fsAppendFileAsync(traceFile, JSON.stringify(event) + '\\n');\n            return traceFile;\n        });\n    }\n}\n//# sourceMappingURL=tracer.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebSocketTransport = void 0;\nconst ws_1 = __importDefault(require(\"ws\"));\nconst utils_1 = require(\"../utils/utils\");\nclass WebSocketTransport {\n    constructor(progress, url) {\n        this.wsEndpoint = url;\n        this._ws = new ws_1.default(url, [], {\n            perMessageDeflate: false,\n            maxPayload: 256 * 1024 * 1024,\n            handshakeTimeout: progress.timeUntilDeadline(),\n        });\n        this._progress = progress;\n        // The 'ws' module in node sometimes sends us multiple messages in a single task.\n        // In Web, all IO callbacks (e.g. WebSocket callbacks)\n        // are dispatched into separate tasks, so there's no need\n        // to do anything extra.\n        const messageWrap = utils_1.makeWaitForNextTask();\n        this._ws.addEventListener('message', event => {\n            messageWrap(() => {\n                if (this.onmessage)\n                    this.onmessage.call(null, JSON.parse(event.data));\n            });\n        });\n        this._ws.addEventListener('close', event => {\n            this._progress && this._progress.log(`<ws disconnected> ${url}`);\n            if (this.onclose)\n                this.onclose.call(null);\n        });\n        // Prevent Error: read ECONNRESET.\n        this._ws.addEventListener('error', () => { });\n    }\n    static async connect(progress, url) {\n        progress.log(`<ws connecting> ${url}`);\n        const transport = new WebSocketTransport(progress, url);\n        let success = false;\n        progress.cleanupWhenAborted(async () => {\n            if (!success)\n                await transport.closeAndWait().catch(e => null);\n        });\n        await new Promise((fulfill, reject) => {\n            transport._ws.addEventListener('open', async () => {\n                progress.log(`<ws connected> ${url}`);\n                fulfill(transport);\n            });\n            transport._ws.addEventListener('error', event => {\n                progress.log(`<ws connect error> ${url} ${event.message}`);\n                reject(new Error('WebSocket error: ' + event.message));\n                transport._ws.close();\n            });\n        });\n        success = true;\n        return transport;\n    }\n    send(message) {\n        this._ws.send(JSON.stringify(message));\n    }\n    close() {\n        this._progress && this._progress.log(`<ws disconnecting> ${this._ws.url}`);\n        this._ws.close();\n    }\n    async closeAndWait() {\n        const promise = new Promise(f => this._ws.once('close', f));\n        this.close();\n        await promise; // Make sure to await the actual disconnect.\n    }\n}\nexports.WebSocketTransport = WebSocketTransport;\n//# sourceMappingURL=transport.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.colorSchemes = exports.mediaTypes = exports.kLifecycleEvents = void 0;\nexports.kLifecycleEvents = new Set(['load', 'domcontentloaded', 'networkidle']);\nexports.mediaTypes = new Set(['screen', 'print']);\nexports.colorSchemes = new Set(['dark', 'light', 'no-preference']);\n//# sourceMappingURL=types.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.USKeyboardLayout = exports.keypadLocation = void 0;\nexports.keypadLocation = 3;\nexports.USKeyboardLayout = {\n    // Functions row\n    'Escape': { 'keyCode': 27, 'key': 'Escape' },\n    'F1': { 'keyCode': 112, 'key': 'F1' },\n    'F2': { 'keyCode': 113, 'key': 'F2' },\n    'F3': { 'keyCode': 114, 'key': 'F3' },\n    'F4': { 'keyCode': 115, 'key': 'F4' },\n    'F5': { 'keyCode': 116, 'key': 'F5' },\n    'F6': { 'keyCode': 117, 'key': 'F6' },\n    'F7': { 'keyCode': 118, 'key': 'F7' },\n    'F8': { 'keyCode': 119, 'key': 'F8' },\n    'F9': { 'keyCode': 120, 'key': 'F9' },\n    'F10': { 'keyCode': 121, 'key': 'F10' },\n    'F11': { 'keyCode': 122, 'key': 'F11' },\n    'F12': { 'keyCode': 123, 'key': 'F12' },\n    // Numbers row\n    'Backquote': { 'keyCode': 192, 'shiftKey': '~', 'key': '`' },\n    'Digit1': { 'keyCode': 49, 'shiftKey': '!', 'key': '1' },\n    'Digit2': { 'keyCode': 50, 'shiftKey': '@', 'key': '2' },\n    'Digit3': { 'keyCode': 51, 'shiftKey': '#', 'key': '3' },\n    'Digit4': { 'keyCode': 52, 'shiftKey': '$', 'key': '4' },\n    'Digit5': { 'keyCode': 53, 'shiftKey': '%', 'key': '5' },\n    'Digit6': { 'keyCode': 54, 'shiftKey': '^', 'key': '6' },\n    'Digit7': { 'keyCode': 55, 'shiftKey': '&', 'key': '7' },\n    'Digit8': { 'keyCode': 56, 'shiftKey': '*', 'key': '8' },\n    'Digit9': { 'keyCode': 57, 'shiftKey': '\\(', 'key': '9' },\n    'Digit0': { 'keyCode': 48, 'shiftKey': ')', 'key': '0' },\n    'Minus': { 'keyCode': 189, 'shiftKey': '_', 'key': '-' },\n    'Equal': { 'keyCode': 187, 'shiftKey': '+', 'key': '=' },\n    'Backslash': { 'keyCode': 220, 'shiftKey': '|', 'key': '\\\\' },\n    'Backspace': { 'keyCode': 8, 'key': 'Backspace' },\n    // First row\n    'Tab': { 'keyCode': 9, 'key': 'Tab' },\n    'KeyQ': { 'keyCode': 81, 'shiftKey': 'Q', 'key': 'q' },\n    'KeyW': { 'keyCode': 87, 'shiftKey': 'W', 'key': 'w' },\n    'KeyE': { 'keyCode': 69, 'shiftKey': 'E', 'key': 'e' },\n    'KeyR': { 'keyCode': 82, 'shiftKey': 'R', 'key': 'r' },\n    'KeyT': { 'keyCode': 84, 'shiftKey': 'T', 'key': 't' },\n    'KeyY': { 'keyCode': 89, 'shiftKey': 'Y', 'key': 'y' },\n    'KeyU': { 'keyCode': 85, 'shiftKey': 'U', 'key': 'u' },\n    'KeyI': { 'keyCode': 73, 'shiftKey': 'I', 'key': 'i' },\n    'KeyO': { 'keyCode': 79, 'shiftKey': 'O', 'key': 'o' },\n    'KeyP': { 'keyCode': 80, 'shiftKey': 'P', 'key': 'p' },\n    'BracketLeft': { 'keyCode': 219, 'shiftKey': '{', 'key': '[' },\n    'BracketRight': { 'keyCode': 221, 'shiftKey': '}', 'key': ']' },\n    // Second row\n    'CapsLock': { 'keyCode': 20, 'key': 'CapsLock' },\n    'KeyA': { 'keyCode': 65, 'shiftKey': 'A', 'key': 'a' },\n    'KeyS': { 'keyCode': 83, 'shiftKey': 'S', 'key': 's' },\n    'KeyD': { 'keyCode': 68, 'shiftKey': 'D', 'key': 'd' },\n    'KeyF': { 'keyCode': 70, 'shiftKey': 'F', 'key': 'f' },\n    'KeyG': { 'keyCode': 71, 'shiftKey': 'G', 'key': 'g' },\n    'KeyH': { 'keyCode': 72, 'shiftKey': 'H', 'key': 'h' },\n    'KeyJ': { 'keyCode': 74, 'shiftKey': 'J', 'key': 'j' },\n    'KeyK': { 'keyCode': 75, 'shiftKey': 'K', 'key': 'k' },\n    'KeyL': { 'keyCode': 76, 'shiftKey': 'L', 'key': 'l' },\n    'Semicolon': { 'keyCode': 186, 'shiftKey': ':', 'key': ';' },\n    'Quote': { 'keyCode': 222, 'shiftKey': '\"', 'key': '\\'' },\n    'Enter': { 'keyCode': 13, 'key': 'Enter', 'text': '\\r' },\n    // Third row\n    'ShiftLeft': { 'keyCode': 160, 'keyCodeWithoutLocation': 16, 'key': 'Shift', 'location': 1 },\n    'KeyZ': { 'keyCode': 90, 'shiftKey': 'Z', 'key': 'z' },\n    'KeyX': { 'keyCode': 88, 'shiftKey': 'X', 'key': 'x' },\n    'KeyC': { 'keyCode': 67, 'shiftKey': 'C', 'key': 'c' },\n    'KeyV': { 'keyCode': 86, 'shiftKey': 'V', 'key': 'v' },\n    'KeyB': { 'keyCode': 66, 'shiftKey': 'B', 'key': 'b' },\n    'KeyN': { 'keyCode': 78, 'shiftKey': 'N', 'key': 'n' },\n    'KeyM': { 'keyCode': 77, 'shiftKey': 'M', 'key': 'm' },\n    'Comma': { 'keyCode': 188, 'shiftKey': '\\<', 'key': ',' },\n    'Period': { 'keyCode': 190, 'shiftKey': '>', 'key': '.' },\n    'Slash': { 'keyCode': 191, 'shiftKey': '?', 'key': '/' },\n    'ShiftRight': { 'keyCode': 161, 'keyCodeWithoutLocation': 16, 'key': 'Shift', 'location': 2 },\n    // Last row\n    'ControlLeft': { 'keyCode': 162, 'keyCodeWithoutLocation': 17, 'key': 'Control', 'location': 1 },\n    'MetaLeft': { 'keyCode': 91, 'key': 'Meta', 'location': 1 },\n    'AltLeft': { 'keyCode': 164, 'keyCodeWithoutLocation': 18, 'key': 'Alt', 'location': 1 },\n    'Space': { 'keyCode': 32, 'key': ' ' },\n    'AltRight': { 'keyCode': 165, 'keyCodeWithoutLocation': 18, 'key': 'Alt', 'location': 2 },\n    'AltGraph': { 'keyCode': 225, 'key': 'AltGraph' },\n    'MetaRight': { 'keyCode': 92, 'key': 'Meta', 'location': 2 },\n    'ContextMenu': { 'keyCode': 93, 'key': 'ContextMenu' },\n    'ControlRight': { 'keyCode': 163, 'keyCodeWithoutLocation': 17, 'key': 'Control', 'location': 2 },\n    // Center block\n    'PrintScreen': { 'keyCode': 44, 'key': 'PrintScreen' },\n    'ScrollLock': { 'keyCode': 145, 'key': 'ScrollLock' },\n    'Pause': { 'keyCode': 19, 'key': 'Pause' },\n    'PageUp': { 'keyCode': 33, 'key': 'PageUp' },\n    'PageDown': { 'keyCode': 34, 'key': 'PageDown' },\n    'Insert': { 'keyCode': 45, 'key': 'Insert' },\n    'Delete': { 'keyCode': 46, 'key': 'Delete' },\n    'Home': { 'keyCode': 36, 'key': 'Home' },\n    'End': { 'keyCode': 35, 'key': 'End' },\n    'ArrowLeft': { 'keyCode': 37, 'key': 'ArrowLeft' },\n    'ArrowUp': { 'keyCode': 38, 'key': 'ArrowUp' },\n    'ArrowRight': { 'keyCode': 39, 'key': 'ArrowRight' },\n    'ArrowDown': { 'keyCode': 40, 'key': 'ArrowDown' },\n    // Numpad\n    'NumLock': { 'keyCode': 144, 'key': 'NumLock' },\n    'NumpadDivide': { 'keyCode': 111, 'key': '/', 'location': 3 },\n    'NumpadMultiply': { 'keyCode': 106, 'key': '*', 'location': 3 },\n    'NumpadSubtract': { 'keyCode': 109, 'key': '-', 'location': 3 },\n    'Numpad7': { 'keyCode': 36, 'shiftKeyCode': 103, 'key': 'Home', 'shiftKey': '7', 'location': 3 },\n    'Numpad8': { 'keyCode': 38, 'shiftKeyCode': 104, 'key': 'ArrowUp', 'shiftKey': '8', 'location': 3 },\n    'Numpad9': { 'keyCode': 33, 'shiftKeyCode': 105, 'key': 'PageUp', 'shiftKey': '9', 'location': 3 },\n    'Numpad4': { 'keyCode': 37, 'shiftKeyCode': 100, 'key': 'ArrowLeft', 'shiftKey': '4', 'location': 3 },\n    'Numpad5': { 'keyCode': 12, 'shiftKeyCode': 101, 'key': 'Clear', 'shiftKey': '5', 'location': 3 },\n    'Numpad6': { 'keyCode': 39, 'shiftKeyCode': 102, 'key': 'ArrowRight', 'shiftKey': '6', 'location': 3 },\n    'NumpadAdd': { 'keyCode': 107, 'key': '+', 'location': 3 },\n    'Numpad1': { 'keyCode': 35, 'shiftKeyCode': 97, 'key': 'End', 'shiftKey': '1', 'location': 3 },\n    'Numpad2': { 'keyCode': 40, 'shiftKeyCode': 98, 'key': 'ArrowDown', 'shiftKey': '2', 'location': 3 },\n    'Numpad3': { 'keyCode': 34, 'shiftKeyCode': 99, 'key': 'PageDown', 'shiftKey': '3', 'location': 3 },\n    'Numpad0': { 'keyCode': 45, 'shiftKeyCode': 96, 'key': 'Insert', 'shiftKey': '0', 'location': 3 },\n    'NumpadDecimal': { 'keyCode': 46, 'shiftKeyCode': 110, 'key': '\\u0000', 'shiftKey': '.', 'location': 3 },\n    'NumpadEnter': { 'keyCode': 13, 'key': 'Enter', 'text': '\\r', 'location': 3 },\n};\n//# sourceMappingURL=usKeyboardLayout.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawnAsync = exports.validateHostRequirements = void 0;\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst fs_1 = __importDefault(require(\"fs\"));\nconst util = __importStar(require(\"util\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst os = __importStar(require(\"os\"));\nconst child_process_1 = require(\"child_process\");\nconst ubuntuVersion_1 = require(\"../utils/ubuntuVersion\");\nconst utils = __importStar(require(\"../utils/utils\"));\nconst binaryPaths_1 = require(\"../utils/binaryPaths\");\nconst accessAsync = util.promisify(fs_1.default.access.bind(fs_1.default));\nconst checkExecutable = (filePath) => accessAsync(filePath, fs_1.default.constants.X_OK).then(() => true).catch(e => false);\nconst statAsync = util.promisify(fs_1.default.stat.bind(fs_1.default));\nconst readdirAsync = util.promisify(fs_1.default.readdir.bind(fs_1.default));\nasync function validateHostRequirements(registry, browserName) {\n    if (utils.getAsBooleanFromENV('PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS')) {\n        process.stdout.write('Skipping host requirements validation logic because `PLAYWRIGHT_SKIP_VALIDATE_HOST_REQUIREMENTS` env variable is set.\\n');\n        return;\n    }\n    const ubuntuVersion = await ubuntuVersion_1.getUbuntuVersion();\n    if (browserName === 'firefox' && ubuntuVersion === '16.04')\n        throw new Error(`Cannot launch firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04`);\n    if (os.platform() === 'linux')\n        return await validateDependenciesLinux(registry, browserName);\n    if (os.platform() === 'win32' && os.arch() === 'x64')\n        return await validateDependenciesWindows(registry, browserName);\n}\nexports.validateHostRequirements = validateHostRequirements;\nconst DL_OPEN_LIBRARIES = {\n    chromium: [],\n    webkit: ['libGLESv2.so.2', 'libx264.so'],\n    firefox: [],\n    clank: [],\n    ffmpeg: [],\n};\nfunction isSupportedWindowsVersion() {\n    if (os.platform() !== 'win32' || os.arch() !== 'x64')\n        return false;\n    const [major, minor] = os.release().split('.').map(token => parseInt(token, 10));\n    // This is based on: https://stackoverflow.com/questions/42524606/how-to-get-windows-version-using-node-js/44916050#44916050\n    // The table with versions is taken from: https://docs.microsoft.com/en-us/windows/win32/api/winnt/ns-winnt-osversioninfoexw#remarks\n    // Windows 7 is not supported and is encoded as `6.1`.\n    return major > 6 || (major === 6 && minor > 1);\n}\nasync function validateDependenciesWindows(registry, browserName) {\n    const directoryPaths = registry.windowsExeAndDllDirectories(browserName);\n    const lddPaths = [];\n    for (const directoryPath of directoryPaths)\n        lddPaths.push(...(await executablesOrSharedLibraries(directoryPath)));\n    const allMissingDeps = await Promise.all(lddPaths.map(lddPath => missingFileDependenciesWindows(lddPath)));\n    const missingDeps = new Set();\n    for (const deps of allMissingDeps) {\n        for (const dep of deps)\n            missingDeps.add(dep);\n    }\n    if (!missingDeps.size)\n        return;\n    let isCrtMissing = false;\n    let isMediaFoundationMissing = false;\n    for (const dep of missingDeps) {\n        if (dep.startsWith('api-ms-win-crt') || dep === 'vcruntime140.dll' || dep === 'vcruntime140_1.dll' || dep === 'msvcp140.dll')\n            isCrtMissing = true;\n        else if (dep === 'mf.dll' || dep === 'mfplat.dll' || dep === 'msmpeg2vdec.dll' || dep === 'evr.dll' || dep === 'avrt.dll')\n            isMediaFoundationMissing = true;\n    }\n    const details = [];\n    if (isCrtMissing) {\n        details.push(`Some of the Universal C Runtime files cannot be found on the system. You can fix`, `that by installing Microsoft Visual C++ Redistributable for Visual Studio from:`, `https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads`, ``);\n    }\n    if (isMediaFoundationMissing) {\n        details.push(`Some of the Media Foundation files cannot be found on the system. If you are`, `on Windows Server try fixing this by running the following command in PowerShell`, `as Administrator:`, ``, `    Install-WindowsFeature Server-Media-Foundation`, ``, `For Windows N editions visit:`, `https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions`, ``);\n    }\n    details.push(`Full list of missing libraries:`, `    ${[...missingDeps].join('\\n    ')}`, ``);\n    const message = `Host system is missing dependencies!\\n\\n${details.join('\\n')}`;\n    if (isSupportedWindowsVersion()) {\n        throw new Error(message);\n    }\n    else {\n        console.warn(`WARNING: running on unsupported windows version!`);\n        console.warn(message);\n    }\n}\nasync function validateDependenciesLinux(registry, browserName) {\n    const directoryPaths = registry.linuxLddDirectories(browserName);\n    const lddPaths = [];\n    for (const directoryPath of directoryPaths)\n        lddPaths.push(...(await executablesOrSharedLibraries(directoryPath)));\n    const allMissingDeps = await Promise.all(lddPaths.map(lddPath => missingFileDependencies(lddPath, directoryPaths)));\n    const missingDeps = new Set();\n    for (const deps of allMissingDeps) {\n        for (const dep of deps)\n            missingDeps.add(dep);\n    }\n    for (const dep of (await missingDLOPENLibraries(browserName)))\n        missingDeps.add(dep);\n    if (!missingDeps.size)\n        return;\n    // Check Ubuntu version.\n    const missingPackages = new Set();\n    const ubuntuVersion = await ubuntuVersion_1.getUbuntuVersion();\n    let libraryToPackageNameMapping = null;\n    if (ubuntuVersion === '18.04')\n        libraryToPackageNameMapping = LIBRARY_TO_PACKAGE_NAME_UBUNTU_18_04;\n    else if (ubuntuVersion === '20.04')\n        libraryToPackageNameMapping = LIBRARY_TO_PACKAGE_NAME_UBUNTU_20_04;\n    libraryToPackageNameMapping = Object.assign({}, libraryToPackageNameMapping, MANUAL_LIBRARY_TO_PACKAGE_NAME_UBUNTU);\n    if (libraryToPackageNameMapping) {\n        // Translate missing dependencies to package names to install with apt.\n        for (const missingDep of missingDeps) {\n            const packageName = libraryToPackageNameMapping[missingDep];\n            if (packageName) {\n                missingPackages.add(packageName);\n                missingDeps.delete(missingDep);\n            }\n        }\n    }\n    let missingPackagesMessage = '';\n    if (missingPackages.size) {\n        missingPackagesMessage = [\n            `  Install missing packages with:`,\n            `      sudo apt-get install ${[...missingPackages].join('\\\\\\n          ')}`,\n            ``,\n            ``,\n        ].join('\\n');\n    }\n    let missingDependenciesMessage = '';\n    if (missingDeps.size) {\n        const header = missingPackages.size ? `Missing libraries we didn't find packages for:` : `Missing libraries are:`;\n        missingDependenciesMessage = [\n            `  ${header}`,\n            `      ${[...missingDeps].join('\\n      ')}`,\n            ``,\n        ].join('\\n');\n    }\n    throw new Error('Host system is missing dependencies!\\n\\n' + missingPackagesMessage + missingDependenciesMessage);\n}\nfunction isSharedLib(basename) {\n    switch (os.platform()) {\n        case 'linux':\n            return basename.endsWith('.so') || basename.includes('.so.');\n        case 'win32':\n            return basename.endsWith('.dll');\n        default:\n            return false;\n    }\n}\nasync function executablesOrSharedLibraries(directoryPath) {\n    const allPaths = (await readdirAsync(directoryPath)).map(file => path_1.default.resolve(directoryPath, file));\n    const allStats = await Promise.all(allPaths.map(aPath => statAsync(aPath)));\n    const filePaths = allPaths.filter((aPath, index) => allStats[index].isFile());\n    const executablersOrLibraries = (await Promise.all(filePaths.map(async (filePath) => {\n        const basename = path_1.default.basename(filePath).toLowerCase();\n        if (isSharedLib(basename))\n            return filePath;\n        if (await checkExecutable(filePath))\n            return filePath;\n        return false;\n    }))).filter(Boolean);\n    return executablersOrLibraries;\n}\nasync function missingFileDependenciesWindows(filePath) {\n    const executable = binaryPaths_1.printDepsWindowsExecutable();\n    if (!executable)\n        return [];\n    const dirname = path_1.default.dirname(filePath);\n    const { stdout, code } = await spawnAsync(executable, [filePath], {\n        cwd: dirname,\n        env: {\n            ...process.env,\n            LD_LIBRARY_PATH: process.env.LD_LIBRARY_PATH ? `${process.env.LD_LIBRARY_PATH}:${dirname}` : dirname,\n        },\n    });\n    if (code !== 0)\n        return [];\n    const missingDeps = stdout.split('\\n').map(line => line.trim()).filter(line => line.endsWith('not found') && line.includes('=>')).map(line => line.split('=>')[0].trim().toLowerCase());\n    return missingDeps;\n}\nasync function missingFileDependencies(filePath, extraLDPaths) {\n    const dirname = path_1.default.dirname(filePath);\n    let LD_LIBRARY_PATH = extraLDPaths.join(':');\n    if (process.env.LD_LIBRARY_PATH)\n        LD_LIBRARY_PATH = `${process.env.LD_LIBRARY_PATH}:${LD_LIBRARY_PATH}`;\n    const { stdout, code } = await spawnAsync('ldd', [filePath], {\n        cwd: dirname,\n        env: {\n            ...process.env,\n            LD_LIBRARY_PATH,\n        },\n    });\n    if (code !== 0)\n        return [];\n    const missingDeps = stdout.split('\\n').map(line => line.trim()).filter(line => line.endsWith('not found') && line.includes('=>')).map(line => line.split('=>')[0].trim());\n    return missingDeps;\n}\nasync function missingDLOPENLibraries(browserName) {\n    const libraries = DL_OPEN_LIBRARIES[browserName];\n    if (!libraries.length)\n        return [];\n    // NOTE: Using full-qualified path to `ldconfig` since `/sbin` is not part of the\n    // default PATH in CRON.\n    // @see https://github.com/microsoft/playwright/issues/3397\n    const { stdout, code, error } = await spawnAsync('/sbin/ldconfig', ['-p'], {});\n    if (code !== 0 || error)\n        return [];\n    const isLibraryAvailable = (library) => stdout.toLowerCase().includes(library.toLowerCase());\n    return libraries.filter(library => !isLibraryAvailable(library));\n}\nfunction spawnAsync(cmd, args, options) {\n    const process = child_process_1.spawn(cmd, args, options);\n    return new Promise(resolve => {\n        let stdout = '';\n        let stderr = '';\n        process.stdout.on('data', data => stdout += data);\n        process.stderr.on('data', data => stderr += data);\n        process.on('close', code => resolve({ stdout, stderr, code }));\n        process.on('error', error => resolve({ stdout, stderr, code: 0, error }));\n    });\n}\nexports.spawnAsync = spawnAsync;\n// This list is generted with the following program:\n// ./utils/linux-browser-dependencies/run.sh ubuntu:18.04\nconst LIBRARY_TO_PACKAGE_NAME_UBUNTU_18_04 = {\n    'libasound.so.2': 'libasound2',\n    'libatk-1.0.so.0': 'libatk1.0-0',\n    'libatk-bridge-2.0.so.0': 'libatk-bridge2.0-0',\n    'libatspi.so.0': 'libatspi2.0-0',\n    'libbrotlidec.so.1': 'libbrotli1',\n    'libcairo-gobject.so.2': 'libcairo-gobject2',\n    'libcairo.so.2': 'libcairo2',\n    'libcups.so.2': 'libcups2',\n    'libdbus-1.so.3': 'libdbus-1-3',\n    'libdbus-glib-1.so.2': 'libdbus-glib-1-2',\n    'libdrm.so.2': 'libdrm2',\n    'libEGL.so.1': 'libegl1',\n    'libenchant.so.1': 'libenchant1c2a',\n    'libepoxy.so.0': 'libepoxy0',\n    'libevent-2.1.so.6': 'libevent-2.1-6',\n    'libfontconfig.so.1': 'libfontconfig1',\n    'libfreetype.so.6': 'libfreetype6',\n    'libgbm.so.1': 'libgbm1',\n    'libgdk_pixbuf-2.0.so.0': 'libgdk-pixbuf2.0-0',\n    'libgdk-3.so.0': 'libgtk-3-0',\n    'libgdk-x11-2.0.so.0': 'libgtk2.0-0',\n    'libgio-2.0.so.0': 'libglib2.0-0',\n    'libGL.so.1': 'libgl1',\n    'libGLESv2.so.2': 'libgles2',\n    'libglib-2.0.so.0': 'libglib2.0-0',\n    'libgmodule-2.0.so.0': 'libglib2.0-0',\n    'libgobject-2.0.so.0': 'libglib2.0-0',\n    'libgstapp-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstaudio-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstbase-1.0.so.0': 'libgstreamer1.0-0',\n    'libgstcodecparsers-1.0.so.0': 'gstreamer1.0-plugins-bad',\n    'libgstfft-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstgl-1.0.so.0': 'libgstreamer-gl1.0-0',\n    'libgstpbutils-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstreamer-1.0.so.0': 'libgstreamer1.0-0',\n    'libgsttag-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstvideo-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgthread-2.0.so.0': 'libglib2.0-0',\n    'libgtk-3.so.0': 'libgtk-3-0',\n    'libgtk-x11-2.0.so.0': 'libgtk2.0-0',\n    'libharfbuzz-icu.so.0': 'libharfbuzz-icu0',\n    'libharfbuzz.so.0': 'libharfbuzz0b',\n    'libhyphen.so.0': 'libhyphen0',\n    'libicudata.so.60': 'libicu60',\n    'libicui18n.so.60': 'libicu60',\n    'libicuuc.so.60': 'libicu60',\n    'libjpeg.so.8': 'libjpeg-turbo8',\n    'libnotify.so.4': 'libnotify4',\n    'libnspr4.so': 'libnspr4',\n    'libnss3.so': 'libnss3',\n    'libnssutil3.so': 'libnss3',\n    'libopenjp2.so.7': 'libopenjp2-7',\n    'libopus.so.0': 'libopus0',\n    'libpango-1.0.so.0': 'libpango-1.0-0',\n    'libpangocairo-1.0.so.0': 'libpangocairo-1.0-0',\n    'libpangoft2-1.0.so.0': 'libpangoft2-1.0-0',\n    'libpng16.so.16': 'libpng16-16',\n    'libsecret-1.so.0': 'libsecret-1-0',\n    'libsmime3.so': 'libnss3',\n    'libvpx.so.5': 'libvpx5',\n    'libwayland-client.so.0': 'libwayland-client0',\n    'libwayland-egl.so.1': 'libwayland-egl1',\n    'libwayland-server.so.0': 'libwayland-server0',\n    'libwebp.so.6': 'libwebp6',\n    'libwebpdemux.so.2': 'libwebpdemux2',\n    'libwoff2dec.so.1.0.2': 'libwoff1',\n    'libX11-xcb.so.1': 'libx11-xcb1',\n    'libX11.so.6': 'libx11-6',\n    'libxcb-dri3.so.0': 'libxcb-dri3-0',\n    'libxcb-shm.so.0': 'libxcb-shm0',\n    'libxcb.so.1': 'libxcb1',\n    'libXcomposite.so.1': 'libxcomposite1',\n    'libXcursor.so.1': 'libxcursor1',\n    'libXdamage.so.1': 'libxdamage1',\n    'libXext.so.6': 'libxext6',\n    'libXfixes.so.3': 'libxfixes3',\n    'libXi.so.6': 'libxi6',\n    'libxkbcommon.so.0': 'libxkbcommon0',\n    'libxml2.so.2': 'libxml2',\n    'libXrandr.so.2': 'libxrandr2',\n    'libXrender.so.1': 'libxrender1',\n    'libxslt.so.1': 'libxslt1.1',\n    'libXt.so.6': 'libxt6',\n    'libXtst.so.6': 'libxtst6',\n};\n// This list is generted with the following program:\n// ./utils/linux-browser-dependencies/run.sh ubuntu:20.04\nconst LIBRARY_TO_PACKAGE_NAME_UBUNTU_20_04 = {\n    'libasound.so.2': 'libasound2',\n    'libatk-1.0.so.0': 'libatk1.0-0',\n    'libatk-bridge-2.0.so.0': 'libatk-bridge2.0-0',\n    'libatspi.so.0': 'libatspi2.0-0',\n    'libcairo-gobject.so.2': 'libcairo-gobject2',\n    'libcairo.so.2': 'libcairo2',\n    'libcups.so.2': 'libcups2',\n    'libdbus-1.so.3': 'libdbus-1-3',\n    'libdbus-glib-1.so.2': 'libdbus-glib-1-2',\n    'libdrm.so.2': 'libdrm2',\n    'libEGL.so.1': 'libegl1',\n    'libenchant.so.1': 'libenchant1c2a',\n    'libepoxy.so.0': 'libepoxy0',\n    'libfontconfig.so.1': 'libfontconfig1',\n    'libfreetype.so.6': 'libfreetype6',\n    'libgbm.so.1': 'libgbm1',\n    'libgdk_pixbuf-2.0.so.0': 'libgdk-pixbuf2.0-0',\n    'libgdk-3.so.0': 'libgtk-3-0',\n    'libgdk-x11-2.0.so.0': 'libgtk2.0-0',\n    'libgio-2.0.so.0': 'libglib2.0-0',\n    'libGL.so.1': 'libgl1',\n    'libGLESv2.so.2': 'libgles2',\n    'libglib-2.0.so.0': 'libglib2.0-0',\n    'libgmodule-2.0.so.0': 'libglib2.0-0',\n    'libgobject-2.0.so.0': 'libglib2.0-0',\n    'libgstapp-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstaudio-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstbase-1.0.so.0': 'libgstreamer1.0-0',\n    'libgstcodecparsers-1.0.so.0': 'gstreamer1.0-plugins-bad',\n    'libgstfft-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstgl-1.0.so.0': 'libgstreamer-gl1.0-0',\n    'libgstpbutils-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstreamer-1.0.so.0': 'libgstreamer1.0-0',\n    'libgsttag-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgstvideo-1.0.so.0': 'gstreamer1.0-plugins-base',\n    'libgthread-2.0.so.0': 'libglib2.0-0',\n    'libgtk-3.so.0': 'libgtk-3-0',\n    'libgtk-x11-2.0.so.0': 'libgtk2.0-0',\n    'libharfbuzz-icu.so.0': 'libharfbuzz-icu0',\n    'libharfbuzz.so.0': 'libharfbuzz0b',\n    'libhyphen.so.0': 'libhyphen0',\n    'libicui18n.so.66': 'libicu66',\n    'libicuuc.so.66': 'libicu66',\n    'libjpeg.so.8': 'libjpeg-turbo8',\n    'libnotify.so.4': 'libnotify4',\n    'libnspr4.so': 'libnspr4',\n    'libnss3.so': 'libnss3',\n    'libnssutil3.so': 'libnss3',\n    'libopenjp2.so.7': 'libopenjp2-7',\n    'libopus.so.0': 'libopus0',\n    'libpango-1.0.so.0': 'libpango-1.0-0',\n    'libpangocairo-1.0.so.0': 'libpangocairo-1.0-0',\n    'libpangoft2-1.0.so.0': 'libpangoft2-1.0-0',\n    'libpng16.so.16': 'libpng16-16',\n    'libsecret-1.so.0': 'libsecret-1-0',\n    'libsmime3.so': 'libnss3',\n    'libsoup-2.4.so.1': 'libsoup2.4-1',\n    'libvpx.so.6': 'libvpx6',\n    'libwayland-client.so.0': 'libwayland-client0',\n    'libwayland-egl.so.1': 'libwayland-egl1',\n    'libwayland-server.so.0': 'libwayland-server0',\n    'libwebp.so.6': 'libwebp6',\n    'libwebpdemux.so.2': 'libwebpdemux2',\n    'libwoff2dec.so.1.0.2': 'libwoff1',\n    'libX11-xcb.so.1': 'libx11-xcb1',\n    'libX11.so.6': 'libx11-6',\n    'libxcb-dri3.so.0': 'libxcb-dri3-0',\n    'libxcb-shm.so.0': 'libxcb-shm0',\n    'libxcb.so.1': 'libxcb1',\n    'libXcomposite.so.1': 'libxcomposite1',\n    'libXcursor.so.1': 'libxcursor1',\n    'libXdamage.so.1': 'libxdamage1',\n    'libXext.so.6': 'libxext6',\n    'libXfixes.so.3': 'libxfixes3',\n    'libXi.so.6': 'libxi6',\n    'libxkbcommon.so.0': 'libxkbcommon0',\n    'libxml2.so.2': 'libxml2',\n    'libXrandr.so.2': 'libxrandr2',\n    'libXrender.so.1': 'libxrender1',\n    'libxslt.so.1': 'libxslt1.1',\n    'libXt.so.6': 'libxt6',\n    'libXtst.so.6': 'libxtst6',\n};\nconst MANUAL_LIBRARY_TO_PACKAGE_NAME_UBUNTU = {\n    // libgstlibav.so (the only actual library provided by gstreamer1.0-libav) is not\n    // in the ldconfig cache, so we detect the actual library required for playing h.264\n    // and if it's missing recommend installing missing gstreamer lib.\n    // gstreamer1.0-libav -> libavcodec57 -> libx264-152\n    'libx264.so': 'gstreamer1.0-libav',\n};\n//# sourceMappingURL=validateDependencies.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WebKit = void 0;\nconst wkBrowser_1 = require(\"../webkit/wkBrowser\");\nconst path_1 = __importDefault(require(\"path\"));\nconst wkConnection_1 = require(\"./wkConnection\");\nconst browserType_1 = require(\"../browserType\");\nclass WebKit extends browserType_1.BrowserType {\n    constructor(playwrightOptions) {\n        super('webkit', playwrightOptions);\n    }\n    _connectToTransport(transport, options) {\n        return wkBrowser_1.WKBrowser.connect(transport, options);\n    }\n    _amendEnvironment(env, userDataDir, executable, browserArguments) {\n        return { ...env, CURL_COOKIE_JAR_PATH: path_1.default.join(userDataDir, 'cookiejar.db') };\n    }\n    _rewriteStartupError(error) {\n        return error;\n    }\n    _attemptToGracefullyCloseBrowser(transport) {\n        transport.send({ method: 'Playwright.close', params: {}, id: wkConnection_1.kBrowserCloseMessageId });\n    }\n    _defaultArgs(options, isPersistent, userDataDir) {\n        const { args = [], proxy, devtools, headless } = options;\n        if (devtools)\n            console.warn('devtools parameter as a launch argument in WebKit is not supported. Also starting Web Inspector manually will terminate the execution in WebKit.');\n        const userDataDirArg = args.find(arg => arg.startsWith('--user-data-dir'));\n        if (userDataDirArg)\n            throw new Error('Pass userDataDir parameter to `browserType.launchPersistentContext(userDataDir, ...)` instead of specifying --user-data-dir argument');\n        if (args.find(arg => !arg.startsWith('-')))\n            throw new Error('Arguments can not specify page to be opened');\n        const webkitArguments = ['--inspector-pipe'];\n        if (headless)\n            webkitArguments.push('--headless');\n        if (isPersistent)\n            webkitArguments.push(`--user-data-dir=${userDataDir}`);\n        else\n            webkitArguments.push(`--no-startup-window`);\n        if (proxy) {\n            if (process.platform === 'darwin') {\n                webkitArguments.push(`--proxy=${proxy.server}`);\n                if (proxy.bypass)\n                    webkitArguments.push(`--proxy-bypass-list=${proxy.bypass}`);\n            }\n            else if (process.platform === 'linux') {\n                webkitArguments.push(`--proxy=${proxy.server}`);\n                if (proxy.bypass)\n                    webkitArguments.push(...proxy.bypass.split(',').map(t => `--ignore-host=${t}`));\n            }\n            else if (process.platform === 'win32') {\n                webkitArguments.push(`--curl-proxy=${proxy.server}`);\n                if (proxy.bypass)\n                    webkitArguments.push(`--curl-noproxy=${proxy.bypass}`);\n            }\n        }\n        webkitArguments.push(...args);\n        if (isPersistent)\n            webkitArguments.push('about:blank');\n        return webkitArguments;\n    }\n}\nexports.WebKit = WebKit;\n//# sourceMappingURL=webkit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAccessibilityTree = void 0;\nasync function getAccessibilityTree(session, needle) {\n    const objectId = needle ? needle._objectId : undefined;\n    const { axNode } = await session.send('Page.accessibilitySnapshot', { objectId });\n    const tree = new WKAXNode(axNode);\n    return {\n        tree,\n        needle: needle ? tree._findNeedle() : null\n    };\n}\nexports.getAccessibilityTree = getAccessibilityTree;\nconst WKRoleToARIARole = new Map(Object.entries({\n    'TextField': 'textbox',\n}));\n// WebKit localizes role descriptions on mac, but the english versions only add noise.\nconst WKUnhelpfulRoleDescriptions = new Map(Object.entries({\n    'WebArea': 'HTML content',\n    'Summary': 'summary',\n    'DescriptionList': 'description list',\n    'ImageMap': 'image map',\n    'ListMarker': 'list marker',\n    'Video': 'video playback',\n    'Mark': 'highlighted',\n    'contentinfo': 'content information',\n    'Details': 'details',\n    'DescriptionListDetail': 'description',\n    'DescriptionListTerm': 'term',\n    'alertdialog': 'web alert dialog',\n    'dialog': 'web dialog',\n    'status': 'application status',\n    'tabpanel': 'tab panel',\n    'application': 'web application',\n}));\nclass WKAXNode {\n    constructor(payload) {\n        this._payload = payload;\n        this._children = [];\n        for (const payload of this._payload.children || [])\n            this._children.push(new WKAXNode(payload));\n    }\n    children() {\n        return this._children;\n    }\n    _findNeedle() {\n        if (this._payload.found)\n            return this;\n        for (const child of this._children) {\n            const found = child._findNeedle();\n            if (found)\n                return found;\n        }\n        return null;\n    }\n    isControl() {\n        switch (this._payload.role) {\n            case 'button':\n            case 'checkbox':\n            case 'ColorWell':\n            case 'combobox':\n            case 'DisclosureTriangle':\n            case 'listbox':\n            case 'menu':\n            case 'menubar':\n            case 'menuitem':\n            case 'menuitemcheckbox':\n            case 'menuitemradio':\n            case 'radio':\n            case 'scrollbar':\n            case 'searchbox':\n            case 'slider':\n            case 'spinbutton':\n            case 'switch':\n            case 'tab':\n            case 'textbox':\n            case 'TextField':\n            case 'tree':\n                return true;\n            default:\n                return false;\n        }\n    }\n    _isTextControl() {\n        switch (this._payload.role) {\n            case 'combobox':\n            case 'searchfield':\n            case 'textbox':\n            case 'TextField':\n                return true;\n        }\n        return false;\n    }\n    _name() {\n        if (this._payload.role === 'text')\n            return this._payload.value || '';\n        return this._payload.name || '';\n    }\n    isInteresting(insideControl) {\n        const { role, focusable } = this._payload;\n        const name = this._name();\n        if (role === 'ScrollArea')\n            return false;\n        if (role === 'WebArea')\n            return true;\n        if (focusable || role === 'MenuListOption')\n            return true;\n        // If it's not focusable but has a control role, then it's interesting.\n        if (this.isControl())\n            return true;\n        // A non focusable child of a control is not interesting\n        if (insideControl)\n            return false;\n        return this.isLeafNode() && !!name;\n    }\n    _hasRendundantTextChild() {\n        if (this._children.length !== 1)\n            return false;\n        const child = this._children[0];\n        return child._payload.role === 'text' && this._payload.name === child._payload.value;\n    }\n    isLeafNode() {\n        if (!this._children.length)\n            return true;\n        // WebKit on Linux ignores everything inside text controls, normalize this behavior\n        if (this._isTextControl())\n            return true;\n        // WebKit for mac has text nodes inside heading, li, menuitem, a, and p nodes\n        if (this._hasRendundantTextChild())\n            return true;\n        return false;\n    }\n    serialize() {\n        const node = {\n            role: WKRoleToARIARole.get(this._payload.role) || this._payload.role,\n            name: this._name(),\n        };\n        if ('description' in this._payload && this._payload.description !== node.name)\n            node.description = this._payload.description;\n        if ('roledescription' in this._payload) {\n            const roledescription = this._payload.roledescription;\n            if (roledescription !== this._payload.role && WKUnhelpfulRoleDescriptions.get(this._payload.role) !== roledescription)\n                node.roledescription = roledescription;\n        }\n        if ('value' in this._payload && this._payload.role !== 'text') {\n            if (typeof this._payload.value === 'string')\n                node.valueString = this._payload.value;\n            else if (typeof this._payload.value === 'number')\n                node.valueNumber = this._payload.value;\n        }\n        if ('checked' in this._payload)\n            node.checked = this._payload.checked === 'true' ? 'checked' : this._payload.checked === 'false' ? 'unchecked' : 'mixed';\n        if ('pressed' in this._payload)\n            node.pressed = this._payload.pressed === 'true' ? 'pressed' : this._payload.pressed === 'false' ? 'released' : 'mixed';\n        const userStringProperties = [\n            'keyshortcuts',\n            'valuetext'\n        ];\n        for (const userStringProperty of userStringProperties) {\n            if (!(userStringProperty in this._payload))\n                continue;\n            node[userStringProperty] = this._payload[userStringProperty];\n        }\n        const booleanProperties = [\n            'disabled',\n            'expanded',\n            'focused',\n            'modal',\n            'multiline',\n            'multiselectable',\n            'readonly',\n            'required',\n            'selected',\n        ];\n        for (const booleanProperty of booleanProperties) {\n            // WebArea and ScorllArea treat focus differently than other nodes. They report whether their frame  has focus,\n            // not whether focus is specifically on the root node.\n            if (booleanProperty === 'focused' && (this._payload.role === 'WebArea' || this._payload.role === 'ScrollArea'))\n                continue;\n            const value = this._payload[booleanProperty];\n            if (!value)\n                continue;\n            node[booleanProperty] = value;\n        }\n        const numericalProperties = [\n            'level',\n            'valuemax',\n            'valuemin',\n        ];\n        for (const numericalProperty of numericalProperties) {\n            if (!(numericalProperty in this._payload))\n                continue;\n            node[numericalProperty] = this._payload[numericalProperty];\n        }\n        const tokenProperties = [\n            'autocomplete',\n            'haspopup',\n            'invalid',\n        ];\n        for (const tokenProperty of tokenProperties) {\n            const value = this._payload[tokenProperty];\n            if (!value || value === 'false')\n                continue;\n            node[tokenProperty] = value;\n        }\n        const orientationIsApplicable = new Set([\n            'ScrollArea',\n            'scrollbar',\n            'listbox',\n            'combobox',\n            'menu',\n            'tree',\n            'separator',\n            'slider',\n            'tablist',\n            'toolbar',\n        ]);\n        if (this._payload.orientation && orientationIsApplicable.has(this._payload.role))\n            node.orientation = this._payload.orientation;\n        return node;\n    }\n}\n//# sourceMappingURL=wkAccessibility.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKBrowserContext = exports.WKBrowser = void 0;\nconst browser_1 = require(\"../browser\");\nconst browserContext_1 = require(\"../browserContext\");\nconst helper_1 = require(\"../helper\");\nconst utils_1 = require(\"../../utils/utils\");\nconst network = __importStar(require(\"../network\"));\nconst wkConnection_1 = require(\"./wkConnection\");\nconst wkPage_1 = require(\"./wkPage\");\nconst DEFAULT_USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.2 Safari/605.1.15';\nconst BROWSER_VERSION = '14.2';\nclass WKBrowser extends browser_1.Browser {\n    constructor(transport, options) {\n        super(options);\n        this._contexts = new Map();\n        this._wkPages = new Map();\n        this._connection = new wkConnection_1.WKConnection(transport, this._onDisconnect.bind(this), options.protocolLogger, options.browserLogsCollector);\n        this._browserSession = this._connection.browserSession;\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.pageProxyCreated', this._onPageProxyCreated.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.pageProxyDestroyed', this._onPageProxyDestroyed.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.provisionalLoadFailed', event => this._onProvisionalLoadFailed(event)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.windowOpen', event => this._onWindowOpen(event)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.downloadCreated', this._onDownloadCreated.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.downloadFilenameSuggested', this._onDownloadFilenameSuggested.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.downloadFinished', this._onDownloadFinished.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, 'Playwright.screencastFinished', this._onScreencastFinished.bind(this)),\n            helper_1.helper.addEventListener(this._browserSession, wkConnection_1.kPageProxyMessageReceived, this._onPageProxyMessageReceived.bind(this)),\n        ];\n    }\n    static async connect(transport, options) {\n        const browser = new WKBrowser(transport, options);\n        if (options.__testHookOnConnectToBrowser)\n            await options.__testHookOnConnectToBrowser();\n        const promises = [\n            browser._browserSession.send('Playwright.enable'),\n        ];\n        if (options.persistent) {\n            browser._defaultContext = new WKBrowserContext(browser, undefined, options.persistent);\n            promises.push(browser._defaultContext._initialize());\n        }\n        await Promise.all(promises);\n        return browser;\n    }\n    _onDisconnect() {\n        for (const wkPage of this._wkPages.values())\n            wkPage.dispose(true);\n        this._didClose();\n    }\n    async newContext(options) {\n        browserContext_1.validateBrowserContextOptions(options, this.options);\n        const createOptions = options.proxy ? {\n            proxyServer: options.proxy.server,\n            proxyBypassList: options.proxy.bypass\n        } : undefined;\n        const { browserContextId } = await this._browserSession.send('Playwright.createContext', createOptions);\n        options.userAgent = options.userAgent || DEFAULT_USER_AGENT;\n        const context = new WKBrowserContext(this, browserContextId, options);\n        await context._initialize();\n        this._contexts.set(browserContextId, context);\n        return context;\n    }\n    contexts() {\n        return Array.from(this._contexts.values());\n    }\n    version() {\n        return BROWSER_VERSION;\n    }\n    _onDownloadCreated(payload) {\n        const page = this._wkPages.get(payload.pageProxyId);\n        if (!page)\n            return;\n        // In some cases, e.g. blob url download, we receive only frameScheduledNavigation\n        // but no signals that the navigation was canceled and replaced by download. Fix it\n        // here by simulating cancelled provisional load which matches downloads from network.\n        //\n        // TODO: this is racy, because download might be unrelated any navigation, and we will\n        // abort navgitation that is still running. We should be able to fix this by\n        // instrumenting policy decision start/proceed/cancel.\n        page._page._frameManager.frameAbortedNavigation(payload.frameId, 'Download is starting');\n        let originPage = page._initializedPage;\n        // If it's a new window download, report it on the opener page.\n        if (!originPage) {\n            // Resume the page creation with an error. The page will automatically close right\n            // after the download begins.\n            page._firstNonInitialNavigationCommittedReject(new Error('Starting new page download'));\n            if (page._opener)\n                originPage = page._opener._initializedPage;\n        }\n        if (!originPage)\n            return;\n        this._downloadCreated(originPage, payload.uuid, payload.url);\n    }\n    _onDownloadFilenameSuggested(payload) {\n        this._downloadFilenameSuggested(payload.uuid, payload.suggestedFilename);\n    }\n    _onDownloadFinished(payload) {\n        this._downloadFinished(payload.uuid, payload.error);\n    }\n    _onScreencastFinished(payload) {\n        this._videoFinished(payload.screencastId);\n    }\n    _onPageProxyCreated(event) {\n        const pageProxyId = event.pageProxyId;\n        let context = null;\n        if (event.browserContextId) {\n            // FIXME: we don't know about the default context id, so assume that all targets from\n            // unknown contexts are created in the 'default' context which can in practice be represented\n            // by multiple actual contexts in WebKit. Solving this properly will require adding context\n            // lifecycle events.\n            context = this._contexts.get(event.browserContextId) || null;\n        }\n        if (!context)\n            context = this._defaultContext;\n        if (!context)\n            return;\n        const pageProxySession = new wkConnection_1.WKSession(this._connection, pageProxyId, `The page has been closed.`, (message) => {\n            this._connection.rawSend({ ...message, pageProxyId });\n        });\n        const opener = event.openerId ? this._wkPages.get(event.openerId) : undefined;\n        const wkPage = new wkPage_1.WKPage(context, pageProxySession, opener || null);\n        this._wkPages.set(pageProxyId, wkPage);\n        wkPage._page.reportAsNew();\n    }\n    _onPageProxyDestroyed(event) {\n        const pageProxyId = event.pageProxyId;\n        const wkPage = this._wkPages.get(pageProxyId);\n        if (!wkPage)\n            return;\n        wkPage.didClose();\n        wkPage.dispose(false);\n        this._wkPages.delete(pageProxyId);\n    }\n    _onPageProxyMessageReceived(event) {\n        const wkPage = this._wkPages.get(event.pageProxyId);\n        if (!wkPage)\n            return;\n        wkPage.dispatchMessageToSession(event.message);\n    }\n    _onProvisionalLoadFailed(event) {\n        const wkPage = this._wkPages.get(event.pageProxyId);\n        if (!wkPage)\n            return;\n        wkPage.handleProvisionalLoadFailed(event);\n    }\n    _onWindowOpen(event) {\n        const wkPage = this._wkPages.get(event.pageProxyId);\n        if (!wkPage)\n            return;\n        wkPage.handleWindowOpen(event);\n    }\n    isConnected() {\n        return !this._connection.isClosed();\n    }\n}\nexports.WKBrowser = WKBrowser;\nclass WKBrowserContext extends browserContext_1.BrowserContext {\n    constructor(browser, browserContextId, options) {\n        super(browser, options, browserContextId);\n        this._browser = browser;\n        this._evaluateOnNewDocumentSources = [];\n        this._authenticateProxyViaHeader();\n    }\n    async _initialize() {\n        utils_1.assert(!this._wkPages().length);\n        const browserContextId = this._browserContextId;\n        const promises = [super._initialize()];\n        if (this._browser.options.downloadsPath) {\n            promises.push(this._browser._browserSession.send('Playwright.setDownloadBehavior', {\n                behavior: this._options.acceptDownloads ? 'allow' : 'deny',\n                downloadPath: this._browser.options.downloadsPath,\n                browserContextId\n            }));\n        }\n        if (this._options.ignoreHTTPSErrors)\n            promises.push(this._browser._browserSession.send('Playwright.setIgnoreCertificateErrors', { browserContextId, ignore: true }));\n        if (this._options.locale)\n            promises.push(this._browser._browserSession.send('Playwright.setLanguages', { browserContextId, languages: [this._options.locale] }));\n        if (this._options.permissions)\n            promises.push(this.grantPermissions(this._options.permissions));\n        if (this._options.geolocation)\n            promises.push(this.setGeolocation(this._options.geolocation));\n        if (this._options.offline)\n            promises.push(this.setOffline(this._options.offline));\n        if (this._options.httpCredentials)\n            promises.push(this.setHTTPCredentials(this._options.httpCredentials));\n        await Promise.all(promises);\n    }\n    _wkPages() {\n        return Array.from(this._browser._wkPages.values()).filter(wkPage => wkPage._browserContext === this);\n    }\n    pages() {\n        return this._wkPages().map(wkPage => wkPage._initializedPage).filter(pageOrNull => !!pageOrNull);\n    }\n    async newPageDelegate() {\n        browserContext_1.assertBrowserContextIsNotOwned(this);\n        const { pageProxyId } = await this._browser._browserSession.send('Playwright.createPage', { browserContextId: this._browserContextId });\n        return this._browser._wkPages.get(pageProxyId);\n    }\n    async _doCookies(urls) {\n        const { cookies } = await this._browser._browserSession.send('Playwright.getAllCookies', { browserContextId: this._browserContextId });\n        return network.filterCookies(cookies.map((c) => {\n            const copy = { ...c };\n            copy.expires = c.expires === -1 ? -1 : c.expires / 1000;\n            delete copy.session;\n            return copy;\n        }), urls);\n    }\n    async addCookies(cookies) {\n        const cc = network.rewriteCookies(cookies).map(c => ({\n            ...c,\n            session: c.expires === -1 || c.expires === undefined,\n            expires: c.expires && c.expires !== -1 ? c.expires * 1000 : c.expires\n        }));\n        await this._browser._browserSession.send('Playwright.setCookies', { cookies: cc, browserContextId: this._browserContextId });\n    }\n    async clearCookies() {\n        await this._browser._browserSession.send('Playwright.deleteAllCookies', { browserContextId: this._browserContextId });\n    }\n    async _doGrantPermissions(origin, permissions) {\n        await Promise.all(this.pages().map(page => page._delegate._grantPermissions(origin, permissions)));\n    }\n    async _doClearPermissions() {\n        await Promise.all(this.pages().map(page => page._delegate._clearPermissions()));\n    }\n    async setGeolocation(geolocation) {\n        browserContext_1.verifyGeolocation(geolocation);\n        this._options.geolocation = geolocation;\n        const payload = geolocation ? { ...geolocation, timestamp: Date.now() } : undefined;\n        await this._browser._browserSession.send('Playwright.setGeolocationOverride', { browserContextId: this._browserContextId, geolocation: payload });\n    }\n    async setExtraHTTPHeaders(headers) {\n        this._options.extraHTTPHeaders = headers;\n        for (const page of this.pages())\n            await page._delegate.updateExtraHTTPHeaders();\n    }\n    async setOffline(offline) {\n        this._options.offline = offline;\n        for (const page of this.pages())\n            await page._delegate.updateOffline();\n    }\n    async _doSetHTTPCredentials(httpCredentials) {\n        this._options.httpCredentials = httpCredentials;\n        for (const page of this.pages())\n            await page._delegate.updateHttpCredentials();\n    }\n    async _doAddInitScript(source) {\n        this._evaluateOnNewDocumentSources.push(source);\n        for (const page of this.pages())\n            await page._delegate._updateBootstrapScript();\n    }\n    async _doExposeBinding(binding) {\n        for (const page of this.pages())\n            await page._delegate.exposeBinding(binding);\n    }\n    async _doUpdateRequestInterception() {\n        for (const page of this.pages())\n            await page._delegate.updateRequestInterception();\n    }\n    async _doClose() {\n        utils_1.assert(this._browserContextId);\n        await this._browser._browserSession.send('Playwright.deleteContext', { browserContextId: this._browserContextId });\n        this._browser._contexts.delete(this._browserContextId);\n    }\n}\nexports.WKBrowserContext = WKBrowserContext;\n//# sourceMappingURL=wkBrowser.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSwappedOutError = exports.createProtocolError = exports.WKSession = exports.WKConnection = exports.kPageProxyMessageReceived = exports.kBrowserCloseMessageId = void 0;\nconst events_1 = require(\"events\");\nconst utils_1 = require(\"../../utils/utils\");\nconst stackTrace_1 = require(\"../../utils/stackTrace\");\nconst debugLogger_1 = require(\"../../utils/debugLogger\");\nconst helper_1 = require(\"../helper\");\n// WKPlaywright uses this special id to issue Browser.close command which we\n// should ignore.\nexports.kBrowserCloseMessageId = -9999;\n// We emulate kPageProxyMessageReceived message to unify it with Browser.pageProxyCreated\n// and Browser.pageProxyDestroyed for easier management.\nexports.kPageProxyMessageReceived = 'kPageProxyMessageReceived';\nclass WKConnection {\n    constructor(transport, onDisconnect, protocolLogger, browserLogsCollector) {\n        this._lastId = 0;\n        this._closed = false;\n        this._transport = transport;\n        this._transport.onmessage = this._dispatchMessage.bind(this);\n        this._transport.onclose = this._onClose.bind(this);\n        this._onDisconnect = onDisconnect;\n        this._protocolLogger = protocolLogger;\n        this._browserLogsCollector = browserLogsCollector;\n        this.browserSession = new WKSession(this, '', 'Browser has been closed.', (message) => {\n            this.rawSend(message);\n        });\n    }\n    nextMessageId() {\n        return ++this._lastId;\n    }\n    rawSend(message) {\n        this._protocolLogger('send', message);\n        this._transport.send(message);\n    }\n    _dispatchMessage(message) {\n        this._protocolLogger('receive', message);\n        if (message.id === exports.kBrowserCloseMessageId)\n            return;\n        if (message.pageProxyId) {\n            const payload = { message: message, pageProxyId: message.pageProxyId };\n            this.browserSession.dispatchMessage({ method: exports.kPageProxyMessageReceived, params: payload });\n            return;\n        }\n        this.browserSession.dispatchMessage(message);\n    }\n    _onClose() {\n        this._closed = true;\n        this._transport.onmessage = undefined;\n        this._transport.onclose = undefined;\n        this.browserSession.dispose(true);\n        this._onDisconnect();\n    }\n    isClosed() {\n        return this._closed;\n    }\n    close() {\n        if (!this._closed)\n            this._transport.close();\n    }\n}\nexports.WKConnection = WKConnection;\nclass WKSession extends events_1.EventEmitter {\n    constructor(connection, sessionId, errorText, rawSend) {\n        super();\n        this._disposed = false;\n        this._callbacks = new Map();\n        this._crashed = false;\n        this.setMaxListeners(0);\n        this.connection = connection;\n        this.sessionId = sessionId;\n        this._rawSend = rawSend;\n        this.errorText = errorText;\n        this.on = super.on;\n        this.off = super.removeListener;\n        this.addListener = super.addListener;\n        this.removeListener = super.removeListener;\n        this.once = super.once;\n    }\n    async send(method, params) {\n        if (this._crashed)\n            throw new Error('Target crashed');\n        if (this._disposed)\n            throw new Error(`Protocol error (${method}): ${this.errorText}`);\n        const id = this.connection.nextMessageId();\n        const messageObj = { id, method, params };\n        this._rawSend(messageObj);\n        return new Promise((resolve, reject) => {\n            this._callbacks.set(id, { resolve, reject, error: new Error(), method });\n        });\n    }\n    sendMayFail(method, params) {\n        return this.send(method, params).catch(error => debugLogger_1.debugLogger.log('error', error));\n    }\n    markAsCrashed() {\n        this._crashed = true;\n    }\n    isDisposed() {\n        return this._disposed;\n    }\n    dispose(disconnected) {\n        if (disconnected)\n            this.errorText = 'Browser closed.' + helper_1.helper.formatBrowserLogs(this.connection._browserLogsCollector.recentLogs());\n        for (const callback of this._callbacks.values())\n            callback.reject(stackTrace_1.rewriteErrorMessage(callback.error, `Protocol error (${callback.method}): ${this.errorText}`));\n        this._callbacks.clear();\n        this._disposed = true;\n    }\n    dispatchMessage(object) {\n        if (object.id && this._callbacks.has(object.id)) {\n            const callback = this._callbacks.get(object.id);\n            this._callbacks.delete(object.id);\n            if (object.error)\n                callback.reject(createProtocolError(callback.error, callback.method, object.error));\n            else\n                callback.resolve(object.result);\n        }\n        else if (object.id && !object.error) {\n            // Response might come after session has been disposed and rejected all callbacks.\n            utils_1.assert(this.isDisposed());\n        }\n        else {\n            Promise.resolve().then(() => this.emit(object.method, object.params));\n        }\n    }\n}\nexports.WKSession = WKSession;\nfunction createProtocolError(error, method, protocolError) {\n    let message = `Protocol error (${method}): ${protocolError.message}`;\n    if ('data' in protocolError)\n        message += ` ${JSON.stringify(protocolError.data)}`;\n    return stackTrace_1.rewriteErrorMessage(error, message);\n}\nexports.createProtocolError = createProtocolError;\nfunction isSwappedOutError(e) {\n    return e.message.includes('Target was swapped out.');\n}\nexports.isSwappedOutError = isSwappedOutError;\n//# sourceMappingURL=wkConnection.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKExecutionContext = void 0;\nconst wkConnection_1 = require(\"./wkConnection\");\nconst js = __importStar(require(\"../javascript\"));\nconst utilityScriptSerializers_1 = require(\"../common/utilityScriptSerializers\");\nclass WKExecutionContext {\n    constructor(session, contextId) {\n        this._contextDestroyedCallback = () => { };\n        this._session = session;\n        this._contextId = contextId;\n        this._executionContextDestroyedPromise = new Promise((resolve, reject) => {\n            this._contextDestroyedCallback = resolve;\n        });\n    }\n    _dispose() {\n        this._contextDestroyedCallback();\n    }\n    async rawEvaluate(expression) {\n        try {\n            const response = await this._session.send('Runtime.evaluate', {\n                expression,\n                contextId: this._contextId,\n                returnByValue: false\n            });\n            if (response.wasThrown)\n                throw new Error('Evaluation failed: ' + response.result.description);\n            return response.result.objectId;\n        }\n        catch (error) {\n            throw rewriteError(error);\n        }\n    }\n    rawCallFunctionNoReply(func, ...args) {\n        this._session.send('Runtime.callFunctionOn', {\n            functionDeclaration: func.toString(),\n            objectId: args.find(a => a instanceof js.JSHandle)._objectId,\n            arguments: args.map(a => a instanceof js.JSHandle ? { objectId: a._objectId } : { value: a }),\n            returnByValue: true,\n            emulateUserGesture: true\n        }).catch(() => { });\n    }\n    async evaluateWithArguments(expression, returnByValue, utilityScript, values, objectIds) {\n        try {\n            let response = await this._session.send('Runtime.callFunctionOn', {\n                functionDeclaration: expression,\n                objectId: utilityScript._objectId,\n                arguments: [\n                    { objectId: utilityScript._objectId },\n                    ...values.map(value => ({ value })),\n                    ...objectIds.map(objectId => ({ objectId })),\n                ],\n                returnByValue: false,\n                emulateUserGesture: true\n            });\n            if (response.result.objectId && response.result.className === 'Promise') {\n                response = await Promise.race([\n                    this._executionContextDestroyedPromise.then(() => contextDestroyedResult),\n                    this._session.send('Runtime.awaitPromise', {\n                        promiseObjectId: response.result.objectId,\n                        returnByValue: false\n                    })\n                ]);\n            }\n            if (response.wasThrown)\n                throw new Error('Evaluation failed: ' + response.result.description);\n            if (!returnByValue)\n                return utilityScript._context.createHandle(response.result);\n            if (response.result.objectId) {\n                // Avoid protocol round trip for evaluates that do not return anything.\n                // Otherwise, we can fail with 'execution context destroyed' without any reason.\n                if (response.result.type === 'undefined')\n                    return undefined;\n                return await this._returnObjectByValue(utilityScript, response.result.objectId);\n            }\n            return utilityScriptSerializers_1.parseEvaluationResultValue(response.result.value);\n        }\n        catch (error) {\n            throw rewriteError(error);\n        }\n    }\n    async _returnObjectByValue(utilityScript, objectId) {\n        try {\n            const serializeResponse = await this._session.send('Runtime.callFunctionOn', {\n                functionDeclaration: 'object => object',\n                objectId: utilityScript._objectId,\n                arguments: [{ objectId }],\n                returnByValue: true\n            });\n            if (serializeResponse.wasThrown)\n                throw new Error('Evaluation failed: ' + serializeResponse.result.description);\n            return utilityScriptSerializers_1.parseEvaluationResultValue(serializeResponse.result.value);\n        }\n        catch (error) {\n            throw rewriteError(error);\n        }\n    }\n    async getProperties(handle) {\n        const objectId = handle._objectId;\n        if (!objectId)\n            return new Map();\n        const response = await this._session.send('Runtime.getProperties', {\n            objectId,\n            ownProperties: true\n        });\n        const result = new Map();\n        for (const property of response.properties) {\n            if (!property.enumerable || !property.value)\n                continue;\n            result.set(property.name, handle._context.createHandle(property.value));\n        }\n        return result;\n    }\n    createHandle(context, remoteObject) {\n        const isPromise = remoteObject.className === 'Promise';\n        return new js.JSHandle(context, isPromise ? 'promise' : remoteObject.subtype || remoteObject.type, remoteObject.objectId, potentiallyUnserializableValue(remoteObject));\n    }\n    async releaseHandle(handle) {\n        if (!handle._objectId)\n            return;\n        await this._session.send('Runtime.releaseObject', { objectId: handle._objectId });\n    }\n}\nexports.WKExecutionContext = WKExecutionContext;\nconst contextDestroyedResult = {\n    wasThrown: true,\n    result: {\n        description: 'Protocol error: Execution context was destroyed, most likely because of a navigation.'\n    }\n};\nfunction potentiallyUnserializableValue(remoteObject) {\n    const value = remoteObject.value;\n    const isUnserializable = remoteObject.type === 'number' && ['NaN', '-Infinity', 'Infinity', '-0'].includes(remoteObject.description);\n    return isUnserializable ? js.parseUnserializableValue(remoteObject.description) : value;\n}\nfunction rewriteError(error) {\n    if (wkConnection_1.isSwappedOutError(error) || error.message.includes('Missing injected script for given'))\n        return new Error('Execution context was destroyed, most likely because of a navigation.');\n    return error;\n}\n//# sourceMappingURL=wkExecutionContext.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawTouchscreenImpl = exports.RawMouseImpl = exports.RawKeyboardImpl = void 0;\nconst input = __importStar(require(\"../input\"));\nconst macEditingCommands_1 = require(\"../macEditingCommands\");\nconst utils_1 = require(\"../../utils/utils\");\nfunction toModifiersMask(modifiers) {\n    // From Source/WebKit/Shared/WebEvent.h\n    let mask = 0;\n    if (modifiers.has('Shift'))\n        mask |= 1;\n    if (modifiers.has('Control'))\n        mask |= 2;\n    if (modifiers.has('Alt'))\n        mask |= 4;\n    if (modifiers.has('Meta'))\n        mask |= 8;\n    return mask;\n}\nclass RawKeyboardImpl {\n    constructor(session) {\n        this._pageProxySession = session;\n    }\n    setSession(session) {\n        this._session = session;\n    }\n    async keydown(modifiers, code, keyCode, keyCodeWithoutLocation, key, location, autoRepeat, text) {\n        const parts = [];\n        for (const modifier of (['Shift', 'Control', 'Alt', 'Meta'])) {\n            if (modifiers.has(modifier))\n                parts.push(modifier);\n        }\n        parts.push(code);\n        const shortcut = parts.join('+');\n        let commands = macEditingCommands_1.macEditingCommands[shortcut];\n        if (utils_1.isString(commands))\n            commands = [commands];\n        await this._pageProxySession.send('Input.dispatchKeyEvent', {\n            type: 'keyDown',\n            modifiers: toModifiersMask(modifiers),\n            windowsVirtualKeyCode: keyCode,\n            code,\n            key,\n            text,\n            unmodifiedText: text,\n            autoRepeat,\n            macCommands: commands,\n            isKeypad: location === input.keypadLocation\n        });\n    }\n    async keyup(modifiers, code, keyCode, keyCodeWithoutLocation, key, location) {\n        await this._pageProxySession.send('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            modifiers: toModifiersMask(modifiers),\n            key,\n            windowsVirtualKeyCode: keyCode,\n            code,\n            isKeypad: location === input.keypadLocation\n        });\n    }\n    async sendText(text) {\n        await this._session.send('Page.insertText', { text });\n    }\n}\nexports.RawKeyboardImpl = RawKeyboardImpl;\nclass RawMouseImpl {\n    constructor(session) {\n        this._pageProxySession = session;\n    }\n    async move(x, y, button, buttons, modifiers) {\n        await this._pageProxySession.send('Input.dispatchMouseEvent', {\n            type: 'move',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers)\n        });\n    }\n    async down(x, y, button, buttons, modifiers, clickCount) {\n        await this._pageProxySession.send('Input.dispatchMouseEvent', {\n            type: 'down',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n    async up(x, y, button, buttons, modifiers, clickCount) {\n        await this._pageProxySession.send('Input.dispatchMouseEvent', {\n            type: 'up',\n            button,\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n            clickCount\n        });\n    }\n}\nexports.RawMouseImpl = RawMouseImpl;\nclass RawTouchscreenImpl {\n    constructor(session) {\n        this._pageProxySession = session;\n    }\n    async tap(x, y, modifiers) {\n        await this._pageProxySession.send('Input.dispatchTapEvent', {\n            x,\n            y,\n            modifiers: toModifiersMask(modifiers),\n        });\n    }\n}\nexports.RawTouchscreenImpl = RawTouchscreenImpl;\n//# sourceMappingURL=wkInput.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKInterceptableRequest = void 0;\nconst network = __importStar(require(\"../network\"));\nconst utils_1 = require(\"../../utils/utils\");\nconst errorReasons = {\n    'aborted': 'Cancellation',\n    'accessdenied': 'AccessControl',\n    'addressunreachable': 'General',\n    'blockedbyclient': 'Cancellation',\n    'blockedbyresponse': 'General',\n    'connectionaborted': 'General',\n    'connectionclosed': 'General',\n    'connectionfailed': 'General',\n    'connectionrefused': 'General',\n    'connectionreset': 'General',\n    'internetdisconnected': 'General',\n    'namenotresolved': 'General',\n    'timedout': 'Timeout',\n    'failed': 'General',\n};\nclass WKInterceptableRequest {\n    constructor(session, allowInterception, frame, event, redirectedFrom, documentId) {\n        this._interceptedCallback = () => { };\n        this._session = session;\n        this._requestId = event.requestId;\n        this._allowInterception = allowInterception;\n        const resourceType = event.type ? event.type.toLowerCase() : (redirectedFrom ? redirectedFrom.resourceType() : 'other');\n        let postDataBuffer = null;\n        this._timestamp = event.timestamp;\n        this._wallTime = event.walltime * 1000;\n        if (event.request.postData)\n            postDataBuffer = Buffer.from(event.request.postData, 'base64');\n        this.request = new network.Request(allowInterception ? this : null, frame, redirectedFrom, documentId, event.request.url, resourceType, event.request.method, postDataBuffer, utils_1.headersObjectToArray(event.request.headers));\n        this._interceptedPromise = new Promise(f => this._interceptedCallback = f);\n    }\n    async abort(errorCode) {\n        const errorType = errorReasons[errorCode];\n        utils_1.assert(errorType, 'Unknown error code: ' + errorCode);\n        await this._interceptedPromise;\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        await this._session.sendMayFail('Network.interceptRequestWithError', { requestId: this._requestId, errorType });\n    }\n    async fulfill(response) {\n        if (300 <= response.status && response.status < 400)\n            throw new Error('Cannot fulfill with redirect status: ' + response.status);\n        await this._interceptedPromise;\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        let mimeType = response.isBase64 ? 'application/octet-stream' : 'text/plain';\n        const headers = utils_1.headersArrayToObject(response.headers, false /* lowerCase */);\n        const contentType = headers['content-type'];\n        if (contentType)\n            mimeType = contentType.split(';')[0].trim();\n        await this._session.sendMayFail('Network.interceptRequestWithResponse', {\n            requestId: this._requestId,\n            status: response.status,\n            statusText: network.STATUS_TEXTS[String(response.status)],\n            mimeType,\n            headers,\n            base64Encoded: response.isBase64,\n            content: response.body\n        });\n    }\n    async continue(overrides) {\n        await this._interceptedPromise;\n        // In certain cases, protocol will return error if the request was already canceled\n        // or the page was closed. We should tolerate these errors.\n        await this._session.sendMayFail('Network.interceptWithRequest', {\n            requestId: this._requestId,\n            url: overrides.url,\n            method: overrides.method,\n            headers: overrides.headers ? utils_1.headersArrayToObject(overrides.headers, false /* lowerCase */) : undefined,\n            postData: overrides.postData ? Buffer.from(overrides.postData).toString('base64') : undefined\n        });\n    }\n    createResponse(responsePayload) {\n        const getResponseBody = async () => {\n            const response = await this._session.send('Network.getResponseBody', { requestId: this._requestId });\n            return Buffer.from(response.body, response.base64Encoded ? 'base64' : 'utf8');\n        };\n        const timingPayload = responsePayload.timing;\n        const timing = {\n            startTime: this._wallTime,\n            domainLookupStart: timingPayload ? wkMillisToRoundishMillis(timingPayload.domainLookupStart) : -1,\n            domainLookupEnd: timingPayload ? wkMillisToRoundishMillis(timingPayload.domainLookupEnd) : -1,\n            connectStart: timingPayload ? wkMillisToRoundishMillis(timingPayload.connectStart) : -1,\n            secureConnectionStart: timingPayload ? wkMillisToRoundishMillis(timingPayload.secureConnectionStart) : -1,\n            connectEnd: timingPayload ? wkMillisToRoundishMillis(timingPayload.connectEnd) : -1,\n            requestStart: timingPayload ? wkMillisToRoundishMillis(timingPayload.requestStart) : -1,\n            responseStart: timingPayload ? wkMillisToRoundishMillis(timingPayload.responseStart) : -1,\n        };\n        return new network.Response(this.request, responsePayload.status, responsePayload.statusText, utils_1.headersObjectToArray(responsePayload.headers), timing, getResponseBody);\n    }\n}\nexports.WKInterceptableRequest = WKInterceptableRequest;\nfunction wkMillisToRoundishMillis(value) {\n    // WebKit uses -1000 for unavailable.\n    if (value === -1000)\n        return -1;\n    // WebKit has a bug, instead of -1 it sends -1000 to be in ms.\n    if (value <= 0) {\n        // DNS can start before request start on Mac Network Stack\n        return -1;\n    }\n    return ((value * 1000) | 0) / 1000;\n}\n//# sourceMappingURL=wkInterceptableRequest.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKPage = void 0;\nconst jpeg = __importStar(require(\"jpeg-js\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst png = __importStar(require(\"pngjs\"));\nconst utils_1 = require(\"../../utils/utils\");\nconst dialog = __importStar(require(\"../dialog\"));\nconst dom = __importStar(require(\"../dom\"));\nconst helper_1 = require(\"../helper\");\nconst network = __importStar(require(\"../network\"));\nconst page_1 = require(\"../page\");\nconst wkAccessibility_1 = require(\"./wkAccessibility\");\nconst wkConnection_1 = require(\"./wkConnection\");\nconst wkExecutionContext_1 = require(\"./wkExecutionContext\");\nconst wkInput_1 = require(\"./wkInput\");\nconst wkInterceptableRequest_1 = require(\"./wkInterceptableRequest\");\nconst wkProvisionalPage_1 = require(\"./wkProvisionalPage\");\nconst wkWorkers_1 = require(\"./wkWorkers\");\nconst UTILITY_WORLD_NAME = '__playwright_utility_world__';\nconst BINDING_CALL_MESSAGE = '__playwright_binding_call__';\nclass WKPage {\n    constructor(browserContext, pageProxySession, opener) {\n        this._provisionalPage = null;\n        this._pagePromiseCallback = () => { };\n        this._requestIdToRequest = new Map();\n        this._sessionListeners = [];\n        this._initializedPage = null;\n        this._firstNonInitialNavigationCommittedFulfill = () => { };\n        this._firstNonInitialNavigationCommittedReject = (e) => { };\n        this._lastConsoleMessage = null;\n        this._recordingVideoFile = null;\n        this._pageProxySession = pageProxySession;\n        this._opener = opener;\n        this.rawKeyboard = new wkInput_1.RawKeyboardImpl(pageProxySession);\n        this.rawMouse = new wkInput_1.RawMouseImpl(pageProxySession);\n        this.rawTouchscreen = new wkInput_1.RawTouchscreenImpl(pageProxySession);\n        this._contextIdToContext = new Map();\n        this._page = new page_1.Page(this, browserContext);\n        this._workers = new wkWorkers_1.WKWorkers(this._page);\n        this._session = undefined;\n        this._browserContext = browserContext;\n        this._page.on(page_1.Page.Events.FrameDetached, (frame) => this._removeContextsForFrame(frame, false));\n        this._eventListeners = [\n            helper_1.helper.addEventListener(this._pageProxySession, 'Target.targetCreated', this._onTargetCreated.bind(this)),\n            helper_1.helper.addEventListener(this._pageProxySession, 'Target.targetDestroyed', this._onTargetDestroyed.bind(this)),\n            helper_1.helper.addEventListener(this._pageProxySession, 'Target.dispatchMessageFromTarget', this._onDispatchMessageFromTarget.bind(this)),\n            helper_1.helper.addEventListener(this._pageProxySession, 'Target.didCommitProvisionalTarget', this._onDidCommitProvisionalTarget.bind(this)),\n        ];\n        this._pagePromise = new Promise(f => this._pagePromiseCallback = f);\n        this._firstNonInitialNavigationCommittedPromise = new Promise((f, r) => {\n            this._firstNonInitialNavigationCommittedFulfill = f;\n            this._firstNonInitialNavigationCommittedReject = r;\n        });\n        if (opener && !browserContext._options.noDefaultViewport && opener._nextWindowOpenPopupFeatures) {\n            const viewportSize = helper_1.helper.getViewportSizeFromWindowFeatures(opener._nextWindowOpenPopupFeatures);\n            opener._nextWindowOpenPopupFeatures = undefined;\n            if (viewportSize)\n                this._page._state.viewportSize = viewportSize;\n        }\n    }\n    async _initializePageProxySession() {\n        const promises = [\n            this._pageProxySession.send('Dialog.enable'),\n            this._pageProxySession.send('Emulation.setActiveAndFocused', { active: true }),\n        ];\n        const contextOptions = this._browserContext._options;\n        if (contextOptions.javaScriptEnabled === false)\n            promises.push(this._pageProxySession.send('Emulation.setJavaScriptEnabled', { enabled: false }));\n        promises.push(this._updateViewport());\n        promises.push(this.updateHttpCredentials());\n        if (this._browserContext._permissions.size) {\n            for (const [key, value] of this._browserContext._permissions)\n                promises.push(this._grantPermissions(key, value));\n        }\n        if (this._browserContext._options.recordVideo) {\n            const size = this._browserContext._options.recordVideo.size || this._browserContext._options.viewport || { width: 1280, height: 720 };\n            const outputFile = path_1.default.join(this._browserContext._options.recordVideo.dir, utils_1.createGuid() + '.webm');\n            promises.push(this._browserContext._ensureVideosPath().then(() => {\n                return this._startScreencast({\n                    ...size,\n                    outputFile,\n                });\n            }));\n        }\n        await Promise.all(promises);\n    }\n    _setSession(session) {\n        helper_1.helper.removeEventListeners(this._sessionListeners);\n        this._session = session;\n        this.rawKeyboard.setSession(session);\n        this._addSessionListeners();\n        this._workers.setSession(session);\n    }\n    // This method is called for provisional targets as well. The session passed as the parameter\n    // may be different from the current session and may be destroyed without becoming current.\n    async _initializeSession(session, provisional, resourceTreeHandler) {\n        await this._initializeSessionMayThrow(session, resourceTreeHandler).catch(e => {\n            // Provisional session can be disposed at any time, for example due to new navigation initiating\n            // a new provisional page.\n            if (provisional && session.isDisposed())\n                return;\n            // Swallow initialization errors due to newer target swap in,\n            // since we will reinitialize again.\n            if (this._session === session)\n                throw e;\n        });\n    }\n    async _initializeSessionMayThrow(session, resourceTreeHandler) {\n        const [, frameTree] = await Promise.all([\n            // Page agent must be enabled before Runtime.\n            session.send('Page.enable'),\n            session.send('Page.getResourceTree'),\n        ]);\n        resourceTreeHandler(frameTree);\n        const promises = [\n            // Resource tree should be received before first execution context.\n            session.send('Runtime.enable'),\n            session.send('Page.createUserWorld', { name: UTILITY_WORLD_NAME }).catch(_ => { }),\n            session.send('Console.enable'),\n            session.send('Network.enable'),\n            this._workers.initializeSession(session)\n        ];\n        if (this._page._needsRequestInterception()) {\n            promises.push(session.send('Network.setInterceptionEnabled', { enabled: true }));\n            promises.push(session.send('Network.addInterception', { url: '.*', stage: 'request', isRegex: true }));\n        }\n        const contextOptions = this._browserContext._options;\n        if (contextOptions.userAgent)\n            promises.push(session.send('Page.overrideUserAgent', { value: contextOptions.userAgent }));\n        if (this._page._state.mediaType || this._page._state.colorScheme)\n            promises.push(WKPage._setEmulateMedia(session, this._page._state.mediaType, this._page._state.colorScheme));\n        const bootstrapScript = this._calculateBootstrapScript();\n        promises.push(session.send('Page.setBootstrapScript', { source: bootstrapScript }));\n        this._page.frames().map(frame => frame.evaluateExpression(bootstrapScript, false, undefined, 'main').catch(e => { }));\n        if (contextOptions.bypassCSP)\n            promises.push(session.send('Page.setBypassCSP', { enabled: true }));\n        if (this._page._state.viewportSize) {\n            promises.push(session.send('Page.setScreenSizeOverride', {\n                width: this._page._state.viewportSize.width,\n                height: this._page._state.viewportSize.height,\n            }));\n        }\n        promises.push(this.updateEmulateMedia());\n        promises.push(session.send('Network.setExtraHTTPHeaders', { headers: utils_1.headersArrayToObject(this._calculateExtraHTTPHeaders(), false /* lowerCase */) }));\n        if (contextOptions.offline)\n            promises.push(session.send('Network.setEmulateOfflineState', { offline: true }));\n        promises.push(session.send('Page.setTouchEmulationEnabled', { enabled: !!contextOptions.hasTouch }));\n        if (contextOptions.timezoneId) {\n            promises.push(session.send('Page.setTimeZone', { timeZone: contextOptions.timezoneId }).\n                catch(e => { throw new Error(`Invalid timezone ID: ${contextOptions.timezoneId}`); }));\n        }\n        await Promise.all(promises);\n    }\n    _onDidCommitProvisionalTarget(event) {\n        const { oldTargetId, newTargetId } = event;\n        utils_1.assert(this._provisionalPage);\n        utils_1.assert(this._provisionalPage._session.sessionId === newTargetId, 'Unknown new target: ' + newTargetId);\n        utils_1.assert(this._session.sessionId === oldTargetId, 'Unknown old target: ' + oldTargetId);\n        this._session.errorText = 'Target was swapped out.';\n        const newSession = this._provisionalPage._session;\n        this._provisionalPage.commit();\n        this._provisionalPage.dispose();\n        this._provisionalPage = null;\n        this._setSession(newSession);\n    }\n    _onTargetDestroyed(event) {\n        const { targetId, crashed } = event;\n        if (this._provisionalPage && this._provisionalPage._session.sessionId === targetId) {\n            this._provisionalPage._session.dispose(false);\n            this._provisionalPage.dispose();\n            this._provisionalPage = null;\n        }\n        else if (this._session.sessionId === targetId) {\n            this._session.dispose(false);\n            helper_1.helper.removeEventListeners(this._sessionListeners);\n            if (crashed) {\n                this._session.markAsCrashed();\n                this._page._didCrash();\n            }\n        }\n    }\n    didClose() {\n        this._page._didClose();\n    }\n    dispose(disconnected) {\n        this._pageProxySession.dispose(disconnected);\n        helper_1.helper.removeEventListeners(this._sessionListeners);\n        helper_1.helper.removeEventListeners(this._eventListeners);\n        if (this._session)\n            this._session.dispose(disconnected);\n        if (this._provisionalPage) {\n            this._provisionalPage._session.dispose(disconnected);\n            this._provisionalPage.dispose();\n            this._provisionalPage = null;\n        }\n        this._page._didDisconnect();\n        this._firstNonInitialNavigationCommittedReject(new Error('Page closed'));\n    }\n    dispatchMessageToSession(message) {\n        this._pageProxySession.dispatchMessage(message);\n    }\n    handleProvisionalLoadFailed(event) {\n        if (!this._initializedPage) {\n            this._firstNonInitialNavigationCommittedReject(new Error('Initial load failed'));\n            return;\n        }\n        if (!this._provisionalPage)\n            return;\n        let errorText = event.error;\n        if (errorText.includes('cancelled'))\n            errorText += '; maybe frame was detached?';\n        this._page._frameManager.frameAbortedNavigation(this._page.mainFrame()._id, errorText, event.loaderId);\n    }\n    handleWindowOpen(event) {\n        utils_1.debugAssert(!this._nextWindowOpenPopupFeatures);\n        this._nextWindowOpenPopupFeatures = event.windowFeatures;\n    }\n    async pageOrError() {\n        return this._pagePromise;\n    }\n    openerDelegate() {\n        return this._opener;\n    }\n    async _onTargetCreated(event) {\n        const { targetInfo } = event;\n        const session = new wkConnection_1.WKSession(this._pageProxySession.connection, targetInfo.targetId, `The ${targetInfo.type} has been closed.`, (message) => {\n            this._pageProxySession.send('Target.sendMessageToTarget', {\n                message: JSON.stringify(message), targetId: targetInfo.targetId\n            }).catch(e => {\n                session.dispatchMessage({ id: message.id, error: { message: e.message } });\n            });\n        });\n        utils_1.assert(targetInfo.type === 'page', 'Only page targets are expected in WebKit, received: ' + targetInfo.type);\n        if (!targetInfo.isProvisional) {\n            utils_1.assert(!this._initializedPage);\n            let pageOrError;\n            try {\n                this._setSession(session);\n                await Promise.all([\n                    this._initializePageProxySession(),\n                    this._initializeSession(session, false, ({ frameTree }) => this._handleFrameTree(frameTree)),\n                ]);\n                pageOrError = this._page;\n            }\n            catch (e) {\n                pageOrError = e;\n            }\n            if (targetInfo.isPaused)\n                this._pageProxySession.sendMayFail('Target.resume', { targetId: targetInfo.targetId });\n            if ((pageOrError instanceof page_1.Page) && this._page.mainFrame().url() === '') {\n                try {\n                    // Initial empty page has an empty url. We should wait until the first real url has been loaded,\n                    // even if that url is about:blank. This is especially important for popups, where we need the\n                    // actual url before interacting with it.\n                    await this._firstNonInitialNavigationCommittedPromise;\n                }\n                catch (e) {\n                    pageOrError = e;\n                }\n            }\n            else {\n                // Avoid rejection on disconnect.\n                this._firstNonInitialNavigationCommittedPromise.catch(() => { });\n            }\n            this._initializedPage = pageOrError instanceof page_1.Page ? pageOrError : null;\n            this._pagePromiseCallback(pageOrError);\n        }\n        else {\n            utils_1.assert(targetInfo.isProvisional);\n            utils_1.assert(!this._provisionalPage);\n            this._provisionalPage = new wkProvisionalPage_1.WKProvisionalPage(session, this);\n            if (targetInfo.isPaused) {\n                this._provisionalPage.initializationPromise.then(() => {\n                    this._pageProxySession.sendMayFail('Target.resume', { targetId: targetInfo.targetId });\n                });\n            }\n        }\n    }\n    _onDispatchMessageFromTarget(event) {\n        const { targetId, message } = event;\n        if (this._provisionalPage && this._provisionalPage._session.sessionId === targetId)\n            this._provisionalPage._session.dispatchMessage(JSON.parse(message));\n        else if (this._session.sessionId === targetId)\n            this._session.dispatchMessage(JSON.parse(message));\n        else\n            throw new Error('Unknown target: ' + targetId);\n    }\n    _addSessionListeners() {\n        // TODO: remove Page.willRequestOpenWindow and Page.didRequestOpenWindow from the protocol.\n        this._sessionListeners = [\n            helper_1.helper.addEventListener(this._session, 'Page.frameNavigated', event => this._onFrameNavigated(event.frame, false)),\n            helper_1.helper.addEventListener(this._session, 'Page.navigatedWithinDocument', event => this._onFrameNavigatedWithinDocument(event.frameId, event.url)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameAttached', event => this._onFrameAttached(event.frameId, event.parentFrameId)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameDetached', event => this._onFrameDetached(event.frameId)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameScheduledNavigation', event => this._onFrameScheduledNavigation(event.frameId)),\n            helper_1.helper.addEventListener(this._session, 'Page.frameStoppedLoading', event => this._onFrameStoppedLoading(event.frameId)),\n            helper_1.helper.addEventListener(this._session, 'Page.loadEventFired', event => this._onLifecycleEvent(event.frameId, 'load')),\n            helper_1.helper.addEventListener(this._session, 'Page.domContentEventFired', event => this._onLifecycleEvent(event.frameId, 'domcontentloaded')),\n            helper_1.helper.addEventListener(this._session, 'Runtime.executionContextCreated', event => this._onExecutionContextCreated(event.context)),\n            helper_1.helper.addEventListener(this._session, 'Console.messageAdded', event => this._onConsoleMessage(event)),\n            helper_1.helper.addEventListener(this._session, 'Console.messageRepeatCountUpdated', event => this._onConsoleRepeatCountUpdated(event)),\n            helper_1.helper.addEventListener(this._pageProxySession, 'Dialog.javascriptDialogOpening', event => this._onDialog(event)),\n            helper_1.helper.addEventListener(this._session, 'Page.fileChooserOpened', event => this._onFileChooserOpened(event)),\n            helper_1.helper.addEventListener(this._session, 'Network.requestWillBeSent', e => this._onRequestWillBeSent(this._session, e)),\n            helper_1.helper.addEventListener(this._session, 'Network.requestIntercepted', e => this._onRequestIntercepted(e)),\n            helper_1.helper.addEventListener(this._session, 'Network.responseReceived', e => this._onResponseReceived(e)),\n            helper_1.helper.addEventListener(this._session, 'Network.loadingFinished', e => this._onLoadingFinished(e)),\n            helper_1.helper.addEventListener(this._session, 'Network.loadingFailed', e => this._onLoadingFailed(e)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketCreated', e => this._page._frameManager.onWebSocketCreated(e.requestId, e.url)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketWillSendHandshakeRequest', e => this._page._frameManager.onWebSocketRequest(e.requestId)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketHandshakeResponseReceived', e => this._page._frameManager.onWebSocketResponse(e.requestId, e.response.status, e.response.statusText)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketFrameSent', e => e.response.payloadData && this._page._frameManager.onWebSocketFrameSent(e.requestId, e.response.opcode, e.response.payloadData)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketFrameReceived', e => e.response.payloadData && this._page._frameManager.webSocketFrameReceived(e.requestId, e.response.opcode, e.response.payloadData)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketClosed', e => this._page._frameManager.webSocketClosed(e.requestId)),\n            helper_1.helper.addEventListener(this._session, 'Network.webSocketFrameError', e => this._page._frameManager.webSocketError(e.requestId, e.errorMessage)),\n        ];\n    }\n    async _updateState(method, params) {\n        await this._forAllSessions(session => session.send(method, params).then());\n    }\n    async _forAllSessions(callback) {\n        const sessions = [\n            this._session\n        ];\n        // If the state changes during provisional load, push it to the provisional page\n        // as well to always be in sync with the backend.\n        if (this._provisionalPage)\n            sessions.push(this._provisionalPage._session);\n        await Promise.all(sessions.map(session => callback(session).catch(e => { })));\n    }\n    _onFrameScheduledNavigation(frameId) {\n        this._page._frameManager.frameRequestedNavigation(frameId);\n    }\n    _onFrameStoppedLoading(frameId) {\n        this._page._frameManager.frameStoppedLoading(frameId);\n    }\n    _onLifecycleEvent(frameId, event) {\n        this._page._frameManager.frameLifecycleEvent(frameId, event);\n    }\n    _handleFrameTree(frameTree) {\n        this._onFrameAttached(frameTree.frame.id, frameTree.frame.parentId || null);\n        this._onFrameNavigated(frameTree.frame, true);\n        this._page._frameManager.frameLifecycleEvent(frameTree.frame.id, 'domcontentloaded');\n        this._page._frameManager.frameLifecycleEvent(frameTree.frame.id, 'load');\n        if (!frameTree.childFrames)\n            return;\n        for (const child of frameTree.childFrames)\n            this._handleFrameTree(child);\n    }\n    _onFrameAttached(frameId, parentFrameId) {\n        return this._page._frameManager.frameAttached(frameId, parentFrameId);\n    }\n    _onFrameNavigated(framePayload, initial) {\n        const frame = this._page._frameManager.frame(framePayload.id);\n        utils_1.assert(frame);\n        this._removeContextsForFrame(frame, true);\n        if (!framePayload.parentId)\n            this._workers.clear();\n        this._page._frameManager.frameCommittedNewDocumentNavigation(framePayload.id, framePayload.url, framePayload.name || '', framePayload.loaderId, initial);\n        if (!initial)\n            this._firstNonInitialNavigationCommittedFulfill();\n    }\n    _onFrameNavigatedWithinDocument(frameId, url) {\n        this._page._frameManager.frameCommittedSameDocumentNavigation(frameId, url);\n    }\n    _onFrameDetached(frameId) {\n        this._page._frameManager.frameDetached(frameId);\n    }\n    _removeContextsForFrame(frame, notifyFrame) {\n        for (const [contextId, context] of this._contextIdToContext) {\n            if (context.frame === frame) {\n                context._delegate._dispose();\n                this._contextIdToContext.delete(contextId);\n                if (notifyFrame)\n                    frame._contextDestroyed(context);\n            }\n        }\n    }\n    _onExecutionContextCreated(contextPayload) {\n        if (this._contextIdToContext.has(contextPayload.id))\n            return;\n        const frame = this._page._frameManager.frame(contextPayload.frameId);\n        if (!frame)\n            return;\n        const delegate = new wkExecutionContext_1.WKExecutionContext(this._session, contextPayload.id);\n        let worldName = null;\n        if (contextPayload.type === 'normal')\n            worldName = 'main';\n        else if (contextPayload.type === 'user' && contextPayload.name === UTILITY_WORLD_NAME)\n            worldName = 'utility';\n        const context = new dom.FrameExecutionContext(delegate, frame, worldName);\n        if (worldName)\n            frame._contextCreated(worldName, context);\n        if (contextPayload.type === 'normal' && frame === this._page.mainFrame())\n            this._mainFrameContextId = contextPayload.id;\n        this._contextIdToContext.set(contextPayload.id, context);\n    }\n    async navigateFrame(frame, url, referrer) {\n        if (this._pageProxySession.isDisposed())\n            throw new Error('Target closed');\n        const pageProxyId = this._pageProxySession.sessionId;\n        const result = await this._pageProxySession.connection.browserSession.send('Playwright.navigate', { url, pageProxyId, frameId: frame._id, referrer });\n        return { newDocumentId: result.loaderId };\n    }\n    _onConsoleMessage(event) {\n        // Note: do no introduce await in this function, otherwise we lose the ordering.\n        // For example, frame.setContent relies on this.\n        const { type, level, text, parameters, url, line: lineNumber, column: columnNumber, source } = event.message;\n        if (level === 'debug' && parameters && parameters[0].value === BINDING_CALL_MESSAGE) {\n            const parsedObjectId = JSON.parse(parameters[1].objectId);\n            const context = this._contextIdToContext.get(parsedObjectId.injectedScriptId);\n            this.pageOrError().then(pageOrError => {\n                if (!(pageOrError instanceof Error))\n                    this._page._onBindingCalled(parameters[2].value, context);\n            });\n            return;\n        }\n        if (level === 'error' && source === 'javascript') {\n            const message = text.startsWith('Error: ') ? text.substring(7) : text;\n            const error = new Error(message);\n            if (event.message.stackTrace) {\n                error.stack = event.message.stackTrace.map(callFrame => {\n                    return `${callFrame.functionName}@${callFrame.url}:${callFrame.lineNumber}:${callFrame.columnNumber}`;\n                }).join('\\n');\n            }\n            else {\n                error.stack = '';\n            }\n            this._page.emit(page_1.Page.Events.PageError, error);\n            return;\n        }\n        let derivedType = type || '';\n        if (type === 'log')\n            derivedType = level;\n        else if (type === 'timing')\n            derivedType = 'timeEnd';\n        const handles = (parameters || []).map(p => {\n            let context = null;\n            if (p.objectId) {\n                const objectId = JSON.parse(p.objectId);\n                context = this._contextIdToContext.get(objectId.injectedScriptId);\n            }\n            else {\n                context = this._contextIdToContext.get(this._mainFrameContextId);\n            }\n            return context.createHandle(p);\n        });\n        this._lastConsoleMessage = {\n            derivedType,\n            text,\n            handles,\n            count: 0,\n            location: {\n                url: url || '',\n                lineNumber: (lineNumber || 1) - 1,\n                columnNumber: (columnNumber || 1) - 1,\n            }\n        };\n        this._onConsoleRepeatCountUpdated({ count: 1 });\n    }\n    _onConsoleRepeatCountUpdated(event) {\n        if (this._lastConsoleMessage) {\n            const { derivedType, text, handles, count, location } = this._lastConsoleMessage;\n            for (let i = count; i < event.count; ++i)\n                this._page._addConsoleMessage(derivedType, handles, location, handles.length ? undefined : text);\n            this._lastConsoleMessage.count = event.count;\n        }\n    }\n    _onDialog(event) {\n        this._page.emit(page_1.Page.Events.Dialog, new dialog.Dialog(this._page, event.type, event.message, async (accept, promptText) => {\n            await this._pageProxySession.send('Dialog.handleJavaScriptDialog', { accept, promptText });\n        }, event.defaultPrompt));\n    }\n    async _onFileChooserOpened(event) {\n        let handle;\n        try {\n            const context = await this._page._frameManager.frame(event.frameId)._mainContext();\n            handle = context.createHandle(event.element).asElement();\n        }\n        catch (e) {\n            // During async processing, frame/context may go away. We should not throw.\n            return;\n        }\n        await this._page._onFileChooserOpened(handle);\n    }\n    static async _setEmulateMedia(session, mediaType, colorScheme) {\n        const promises = [];\n        promises.push(session.send('Page.setEmulatedMedia', { media: mediaType || '' }));\n        if (colorScheme !== null) {\n            let appearance = '';\n            switch (colorScheme) {\n                case 'light':\n                    appearance = 'Light';\n                    break;\n                case 'dark':\n                    appearance = 'Dark';\n                    break;\n            }\n            promises.push(session.send('Page.setForcedAppearance', { appearance }));\n        }\n        await Promise.all(promises);\n    }\n    async updateExtraHTTPHeaders() {\n        await this._updateState('Network.setExtraHTTPHeaders', { headers: utils_1.headersArrayToObject(this._calculateExtraHTTPHeaders(), false /* lowerCase */) });\n    }\n    _calculateExtraHTTPHeaders() {\n        const locale = this._browserContext._options.locale;\n        const headers = network.mergeHeaders([\n            this._browserContext._options.extraHTTPHeaders,\n            this._page._state.extraHTTPHeaders,\n            locale ? network.singleHeader('Accept-Language', locale) : undefined,\n        ]);\n        return headers;\n    }\n    async updateEmulateMedia() {\n        const colorScheme = this._page._state.colorScheme || this._browserContext._options.colorScheme || 'light';\n        await this._forAllSessions(session => WKPage._setEmulateMedia(session, this._page._state.mediaType, colorScheme));\n    }\n    async setViewportSize(viewportSize) {\n        utils_1.assert(this._page._state.viewportSize === viewportSize);\n        await this._updateViewport();\n    }\n    async bringToFront() {\n        this._pageProxySession.send('Target.activate', {\n            targetId: this._session.sessionId\n        });\n    }\n    async _updateViewport() {\n        const options = this._browserContext._options;\n        const viewportSize = this._page._state.viewportSize;\n        if (viewportSize === null)\n            return;\n        const promises = [\n            this._pageProxySession.send('Emulation.setDeviceMetricsOverride', {\n                width: viewportSize.width,\n                height: viewportSize.height,\n                fixedLayout: !!options.isMobile,\n                deviceScaleFactor: options.deviceScaleFactor || 1\n            }),\n            this._session.send('Page.setScreenSizeOverride', {\n                width: viewportSize.width,\n                height: viewportSize.height,\n            }),\n        ];\n        if (options.isMobile) {\n            const angle = viewportSize.width > viewportSize.height ? 90 : 0;\n            promises.push(this._session.send('Page.setOrientationOverride', { angle }));\n        }\n        await Promise.all(promises);\n    }\n    async updateRequestInterception() {\n        const enabled = this._page._needsRequestInterception();\n        await Promise.all([\n            this._updateState('Network.setInterceptionEnabled', { enabled }),\n            this._updateState('Network.addInterception', { url: '.*', stage: 'request', isRegex: true })\n        ]);\n    }\n    async updateOffline() {\n        await this._updateState('Network.setEmulateOfflineState', { offline: !!this._browserContext._options.offline });\n    }\n    async updateHttpCredentials() {\n        const credentials = this._browserContext._options.httpCredentials || { username: '', password: '' };\n        await this._pageProxySession.send('Emulation.setAuthCredentials', { username: credentials.username, password: credentials.password });\n    }\n    async setFileChooserIntercepted(enabled) {\n        await this._session.send('Page.setInterceptFileChooserDialog', { enabled }).catch(e => { }); // target can be closed.\n    }\n    async opener() {\n        if (!this._opener)\n            return null;\n        const openerPage = await this._opener.pageOrError();\n        if (openerPage instanceof page_1.Page && !openerPage.isClosed())\n            return openerPage;\n        return null;\n    }\n    async reload() {\n        await this._session.send('Page.reload');\n    }\n    goBack() {\n        return this._session.send('Page.goBack').then(() => true).catch(error => {\n            if (error instanceof Error && error.message.includes(`Protocol error (Page.goBack): Failed to go`))\n                return false;\n            throw error;\n        });\n    }\n    goForward() {\n        return this._session.send('Page.goForward').then(() => true).catch(error => {\n            if (error instanceof Error && error.message.includes(`Protocol error (Page.goForward): Failed to go`))\n                return false;\n            throw error;\n        });\n    }\n    async exposeBinding(binding) {\n        if (binding.world !== 'main')\n            throw new Error('Only main context bindings are supported in WebKit.');\n        await this._updateBootstrapScript();\n        await this._evaluateBindingScript(binding);\n    }\n    async _evaluateBindingScript(binding) {\n        if (binding.world !== 'main')\n            throw new Error('Only main context bindings are supported in WebKit.');\n        const script = this._bindingToScript(binding);\n        await Promise.all(this._page.frames().map(frame => frame.evaluateExpression(script, false, {}).catch(e => { })));\n    }\n    async evaluateOnNewDocument(script) {\n        await this._updateBootstrapScript();\n    }\n    _bindingToScript(binding) {\n        return `self.${binding.name} = (param) => console.debug('${BINDING_CALL_MESSAGE}', {}, param); ${binding.source}`;\n    }\n    _calculateBootstrapScript() {\n        const scripts = [];\n        for (const binding of this._page.allBindings())\n            scripts.push(this._bindingToScript(binding));\n        scripts.push(...this._browserContext._evaluateOnNewDocumentSources);\n        scripts.push(...this._page._evaluateOnNewDocumentSources);\n        return scripts.join(';');\n    }\n    async _updateBootstrapScript() {\n        await this._updateState('Page.setBootstrapScript', { source: this._calculateBootstrapScript() });\n    }\n    async closePage(runBeforeUnload) {\n        await this._stopScreencast();\n        await this._pageProxySession.sendMayFail('Target.close', {\n            targetId: this._session.sessionId,\n            runBeforeUnload\n        });\n    }\n    canScreenshotOutsideViewport() {\n        return true;\n    }\n    async setBackgroundColor(color) {\n        await this._session.send('Page.setDefaultBackgroundColorOverride', { color });\n    }\n    async _startScreencast(options) {\n        utils_1.assert(!this._recordingVideoFile);\n        const { screencastId } = await this._pageProxySession.send('Screencast.start', {\n            file: options.outputFile,\n            width: options.width,\n            height: options.height,\n        });\n        this._recordingVideoFile = options.outputFile;\n        this._browserContext._browser._videoStarted(this._browserContext, screencastId, options.outputFile, this.pageOrError());\n    }\n    async _stopScreencast() {\n        if (!this._recordingVideoFile)\n            return;\n        await this._pageProxySession.sendMayFail('Screencast.stop');\n        this._recordingVideoFile = null;\n    }\n    async takeScreenshot(format, documentRect, viewportRect, quality) {\n        const rect = (documentRect || viewportRect);\n        const result = await this._session.send('Page.snapshotRect', { ...rect, coordinateSystem: documentRect ? 'Page' : 'Viewport' });\n        const prefix = 'data:image/png;base64,';\n        let buffer = Buffer.from(result.dataURL.substr(prefix.length), 'base64');\n        if (format === 'jpeg')\n            buffer = jpeg.encode(png.PNG.sync.read(buffer), quality).data;\n        return buffer;\n    }\n    async resetViewport() {\n        utils_1.assert(false, 'Should not be called');\n    }\n    async getContentFrame(handle) {\n        const nodeInfo = await this._session.send('DOM.describeNode', {\n            objectId: handle._objectId\n        });\n        if (!nodeInfo.contentFrameId)\n            return null;\n        return this._page._frameManager.frame(nodeInfo.contentFrameId);\n    }\n    async getOwnerFrame(handle) {\n        if (!handle._objectId)\n            return null;\n        const nodeInfo = await this._session.send('DOM.describeNode', {\n            objectId: handle._objectId\n        });\n        return nodeInfo.ownerFrameId || null;\n    }\n    isElementHandle(remoteObject) {\n        return remoteObject.subtype === 'node';\n    }\n    async getBoundingBox(handle) {\n        const quads = await this.getContentQuads(handle);\n        if (!quads || !quads.length)\n            return null;\n        let minX = Infinity;\n        let maxX = -Infinity;\n        let minY = Infinity;\n        let maxY = -Infinity;\n        for (const quad of quads) {\n            for (const point of quad) {\n                minX = Math.min(minX, point.x);\n                maxX = Math.max(maxX, point.x);\n                minY = Math.min(minY, point.y);\n                maxY = Math.max(maxY, point.y);\n            }\n        }\n        return { x: minX, y: minY, width: maxX - minX, height: maxY - minY };\n    }\n    async scrollRectIntoViewIfNeeded(handle, rect) {\n        return await this._session.send('DOM.scrollIntoViewIfNeeded', {\n            objectId: handle._objectId,\n            rect,\n        }).then(() => 'done').catch(e => {\n            if (e instanceof Error && e.message.includes('Node does not have a layout object'))\n                return 'error:notvisible';\n            if (e instanceof Error && e.message.includes('Node is detached from document'))\n                return 'error:notconnected';\n            throw e;\n        });\n    }\n    rafCountForStablePosition() {\n        return process.platform === 'win32' ? 5 : 1;\n    }\n    async getContentQuads(handle) {\n        const result = await this._session.sendMayFail('DOM.getContentQuads', {\n            objectId: handle._objectId\n        });\n        if (!result)\n            return null;\n        return result.quads.map(quad => [\n            { x: quad[0], y: quad[1] },\n            { x: quad[2], y: quad[3] },\n            { x: quad[4], y: quad[5] },\n            { x: quad[6], y: quad[7] }\n        ]);\n    }\n    async setInputFiles(handle, files) {\n        const objectId = handle._objectId;\n        const protocolFiles = files.map(file => ({\n            name: file.name,\n            type: file.mimeType,\n            data: file.buffer,\n        }));\n        await this._session.send('DOM.setInputFiles', { objectId, files: protocolFiles });\n    }\n    async adoptElementHandle(handle, to) {\n        const result = await this._session.sendMayFail('DOM.resolveNode', {\n            objectId: handle._objectId,\n            executionContextId: to._delegate._contextId\n        });\n        if (!result || result.object.subtype === 'null')\n            throw new Error('Unable to adopt element handle from a different document');\n        return to.createHandle(result.object);\n    }\n    async getAccessibilityTree(needle) {\n        return wkAccessibility_1.getAccessibilityTree(this._session, needle);\n    }\n    async inputActionEpilogue() {\n    }\n    async getFrameElement(frame) {\n        const parent = frame.parentFrame();\n        if (!parent)\n            throw new Error('Frame has been detached.');\n        const handles = await this._page.selectors._queryAll(parent, 'iframe', undefined);\n        const items = await Promise.all(handles.map(async (handle) => {\n            const frame = await handle.contentFrame().catch(e => null);\n            return { handle, frame };\n        }));\n        const result = items.find(item => item.frame === frame);\n        items.map(item => item === result ? Promise.resolve() : item.handle.dispose());\n        if (!result)\n            throw new Error('Frame has been detached.');\n        return result.handle;\n    }\n    _onRequestWillBeSent(session, event) {\n        if (event.request.url.startsWith('data:'))\n            return;\n        let redirectedFrom = null;\n        if (event.redirectResponse) {\n            const request = this._requestIdToRequest.get(event.requestId);\n            // If we connect late to the target, we could have missed the requestWillBeSent event.\n            if (request) {\n                this._handleRequestRedirect(request, event.redirectResponse, event.timestamp);\n                redirectedFrom = request.request;\n            }\n        }\n        const frame = this._page._frameManager.frame(event.frameId);\n        // TODO(einbinder) this will fail if we are an XHR document request\n        const isNavigationRequest = event.type === 'Document';\n        const documentId = isNavigationRequest ? event.loaderId : undefined;\n        // We do not support intercepting redirects.\n        const allowInterception = this._page._needsRequestInterception() && !redirectedFrom;\n        const request = new wkInterceptableRequest_1.WKInterceptableRequest(session, allowInterception, frame, event, redirectedFrom, documentId);\n        this._requestIdToRequest.set(event.requestId, request);\n        this._page._frameManager.requestStarted(request.request);\n    }\n    _handleRequestRedirect(request, responsePayload, timestamp) {\n        const response = request.createResponse(responsePayload);\n        response._requestFinished(responsePayload.timing ? helper_1.helper.secondsToRoundishMillis(timestamp - request._timestamp) : -1, 'Response body is unavailable for redirect responses');\n        this._requestIdToRequest.delete(request._requestId);\n        this._page._frameManager.requestReceivedResponse(response);\n        this._page._frameManager.requestFinished(request.request);\n    }\n    _onRequestIntercepted(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        if (!request)\n            return;\n        if (!request._allowInterception) {\n            // Intercepted, although we do not intend to allow interception.\n            // Just continue.\n            this._session.sendMayFail('Network.interceptWithRequest', { requestId: request._requestId });\n        }\n        else {\n            request._interceptedCallback();\n        }\n    }\n    _onResponseReceived(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        // FileUpload sends a response without a matching request.\n        if (!request)\n            return;\n        const response = request.createResponse(event.response);\n        if (event.response.requestHeaders && Object.keys(event.response.requestHeaders).length)\n            request.request.updateWithRawHeaders(utils_1.headersObjectToArray(event.response.requestHeaders));\n        this._page._frameManager.requestReceivedResponse(response);\n        if (response.status() === 204) {\n            this._onLoadingFailed({\n                requestId: event.requestId,\n                errorText: 'Aborted: 204 No Content',\n                timestamp: event.timestamp\n            });\n        }\n    }\n    _onLoadingFinished(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request)\n            return;\n        // Under certain conditions we never get the Network.responseReceived\n        // event from protocol. @see https://crbug.com/883475\n        const response = request.request._existingResponse();\n        if (response)\n            response._requestFinished(helper_1.helper.secondsToRoundishMillis(event.timestamp - request._timestamp));\n        this._requestIdToRequest.delete(request._requestId);\n        this._page._frameManager.requestFinished(request.request);\n    }\n    _onLoadingFailed(event) {\n        const request = this._requestIdToRequest.get(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request)\n            return;\n        const response = request.request._existingResponse();\n        if (response)\n            response._requestFinished(helper_1.helper.secondsToRoundishMillis(event.timestamp - request._timestamp));\n        this._requestIdToRequest.delete(request._requestId);\n        request.request._setFailureText(event.errorText);\n        this._page._frameManager.requestFailed(request.request, event.errorText.includes('cancelled'));\n    }\n    async _grantPermissions(origin, permissions) {\n        const webPermissionToProtocol = new Map([\n            ['geolocation', 'geolocation'],\n        ]);\n        const filtered = permissions.map(permission => {\n            const protocolPermission = webPermissionToProtocol.get(permission);\n            if (!protocolPermission)\n                throw new Error('Unknown permission: ' + permission);\n            return protocolPermission;\n        });\n        await this._pageProxySession.send('Emulation.grantPermissions', { origin, permissions: filtered });\n    }\n    async _clearPermissions() {\n        await this._pageProxySession.send('Emulation.resetPermissions', {});\n    }\n}\nexports.WKPage = WKPage;\n//# sourceMappingURL=wkPage.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKProvisionalPage = void 0;\nconst helper_1 = require(\"../helper\");\nconst utils_1 = require(\"../../utils/utils\");\nclass WKProvisionalPage {\n    constructor(session, page) {\n        this._sessionListeners = [];\n        this._mainFrameId = null;\n        this._session = session;\n        this._wkPage = page;\n        const overrideFrameId = (handler) => {\n            return (payload) => {\n                // Pretend that the events happened in the same process.\n                if (payload.frameId)\n                    payload.frameId = this._wkPage._page._frameManager.mainFrame()._id;\n                handler(payload);\n            };\n        };\n        const wkPage = this._wkPage;\n        this._sessionListeners = [\n            helper_1.helper.addEventListener(session, 'Network.requestWillBeSent', overrideFrameId(e => wkPage._onRequestWillBeSent(session, e))),\n            helper_1.helper.addEventListener(session, 'Network.requestIntercepted', overrideFrameId(e => wkPage._onRequestIntercepted(e))),\n            helper_1.helper.addEventListener(session, 'Network.responseReceived', overrideFrameId(e => wkPage._onResponseReceived(e))),\n            helper_1.helper.addEventListener(session, 'Network.loadingFinished', overrideFrameId(e => wkPage._onLoadingFinished(e))),\n            helper_1.helper.addEventListener(session, 'Network.loadingFailed', overrideFrameId(e => wkPage._onLoadingFailed(e))),\n        ];\n        this.initializationPromise = this._wkPage._initializeSession(session, true, ({ frameTree }) => this._handleFrameTree(frameTree));\n    }\n    dispose() {\n        helper_1.helper.removeEventListeners(this._sessionListeners);\n    }\n    commit() {\n        utils_1.assert(this._mainFrameId);\n        this._wkPage._onFrameAttached(this._mainFrameId, null);\n    }\n    _handleFrameTree(frameTree) {\n        utils_1.assert(!frameTree.frame.parentId);\n        this._mainFrameId = frameTree.frame.id;\n    }\n}\nexports.WKProvisionalPage = WKProvisionalPage;\n//# sourceMappingURL=wkProvisionalPage.js.map","\"use strict\";\n/**\n * Copyright 2019 Microsoft Corporation All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WKWorkers = void 0;\nconst helper_1 = require(\"../helper\");\nconst page_1 = require(\"../page\");\nconst wkConnection_1 = require(\"./wkConnection\");\nconst wkExecutionContext_1 = require(\"./wkExecutionContext\");\nclass WKWorkers {\n    constructor(page) {\n        this._sessionListeners = [];\n        this._workerSessions = new Map();\n        this._page = page;\n    }\n    setSession(session) {\n        helper_1.helper.removeEventListeners(this._sessionListeners);\n        this.clear();\n        this._sessionListeners = [\n            helper_1.helper.addEventListener(session, 'Worker.workerCreated', (event) => {\n                const worker = new page_1.Worker(this._page, event.url);\n                const workerSession = new wkConnection_1.WKSession(session.connection, event.workerId, 'Most likely the worker has been closed.', (message) => {\n                    session.send('Worker.sendMessageToWorker', {\n                        workerId: event.workerId,\n                        message: JSON.stringify(message)\n                    }).catch(e => {\n                        workerSession.dispatchMessage({ id: message.id, error: { message: e.message } });\n                    });\n                });\n                this._workerSessions.set(event.workerId, workerSession);\n                worker._createExecutionContext(new wkExecutionContext_1.WKExecutionContext(workerSession, undefined));\n                this._page._addWorker(event.workerId, worker);\n                workerSession.on('Console.messageAdded', event => this._onConsoleMessage(worker, event));\n                Promise.all([\n                    workerSession.send('Runtime.enable'),\n                    workerSession.send('Console.enable'),\n                    session.send('Worker.initialized', { workerId: event.workerId })\n                ]).catch(e => {\n                    // Worker can go as we are initializing it.\n                    this._page._removeWorker(event.workerId);\n                });\n            }),\n            helper_1.helper.addEventListener(session, 'Worker.dispatchMessageFromWorker', (event) => {\n                const workerSession = this._workerSessions.get(event.workerId);\n                if (!workerSession)\n                    return;\n                workerSession.dispatchMessage(JSON.parse(event.message));\n            }),\n            helper_1.helper.addEventListener(session, 'Worker.workerTerminated', (event) => {\n                const workerSession = this._workerSessions.get(event.workerId);\n                if (!workerSession)\n                    return;\n                workerSession.dispose(false);\n                this._workerSessions.delete(event.workerId);\n                this._page._removeWorker(event.workerId);\n            })\n        ];\n    }\n    clear() {\n        this._page._clearWorkers();\n        this._workerSessions.clear();\n    }\n    async initializeSession(session) {\n        await session.send('Worker.enable');\n    }\n    async _onConsoleMessage(worker, event) {\n        const { type, level, text, parameters, url, line: lineNumber, column: columnNumber } = event.message;\n        let derivedType = type || '';\n        if (type === 'log')\n            derivedType = level;\n        else if (type === 'timing')\n            derivedType = 'timeEnd';\n        const handles = (parameters || []).map(p => {\n            return worker._existingExecutionContext.createHandle(p);\n        });\n        const location = {\n            url: url || '',\n            lineNumber: (lineNumber || 1) - 1,\n            columnNumber: (columnNumber || 1) - 1\n        };\n        this._page._addConsoleMessage(derivedType, handles, location, handles.length ? undefined : text);\n    }\n}\nexports.WKWorkers = WKWorkers;\n//# sourceMappingURL=wkWorkers.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.printDepsWindowsExecutable = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nfunction printDepsWindowsExecutable() {\n    return pathToExecutable(['bin', 'PrintDeps.exe']);\n}\nexports.printDepsWindowsExecutable = printDepsWindowsExecutable;\nfunction pathToExecutable(relative) {\n    try {\n        const defaultPath = path_1.default.join(__dirname, '..', '..', ...relative);\n        if (fs_1.default.existsSync(defaultPath))\n            return defaultPath;\n    }\n    catch (e) {\n    }\n}\n//# sourceMappingURL=binaryPaths.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecentLogsCollector = exports.debugLogger = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst debugLoggerColorMap = {\n    'api': 45,\n    'protocol': 34,\n    'browser': 0,\n    'error': 160,\n    'channel:command': 33,\n    'channel:response': 202,\n    'channel:event': 207,\n};\nclass DebugLogger {\n    constructor() {\n        this._debuggers = new Map();\n        if (process.env.DEBUG_FILE) {\n            const ansiRegex = new RegExp([\n                '[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:[a-zA-Z\\\\d]*(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)',\n                '(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-ntqry=><~]))'\n            ].join('|'), 'g');\n            const stream = fs_1.default.createWriteStream(process.env.DEBUG_FILE);\n            debug_1.default.log = (data) => {\n                stream.write(data.replace(ansiRegex, ''));\n                stream.write('\\n');\n            };\n        }\n    }\n    log(name, message) {\n        let cachedDebugger = this._debuggers.get(name);\n        if (!cachedDebugger) {\n            cachedDebugger = debug_1.default(`pw:${name}`);\n            this._debuggers.set(name, cachedDebugger);\n            cachedDebugger.color = debugLoggerColorMap[name];\n        }\n        cachedDebugger(message);\n    }\n    isEnabled(name) {\n        return debug_1.default.enabled(`pw:${name}`);\n    }\n}\nexports.debugLogger = new DebugLogger();\nconst kLogCount = 50;\nclass RecentLogsCollector {\n    constructor() {\n        this._logs = [];\n    }\n    log(message) {\n        this._logs.push(message);\n        if (this._logs.length === kLogCount * 2)\n            this._logs.splice(0, kLogCount);\n    }\n    recentLogs() {\n        if (this._logs.length > kLogCount)\n            return this._logs.slice(-kLogCount);\n        return this._logs;\n    }\n}\nexports.RecentLogsCollector = RecentLogsCollector;\n//# sourceMappingURL=debugLogger.js.map","\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSafeCloseError = exports.kBrowserOrContextClosedError = exports.kBrowserClosedError = exports.TimeoutError = void 0;\nclass CustomError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\nclass TimeoutError extends CustomError {\n}\nexports.TimeoutError = TimeoutError;\nexports.kBrowserClosedError = 'Browser has been closed';\nexports.kBrowserOrContextClosedError = 'Target page, context or browser has been closed';\nfunction isSafeCloseError(error) {\n    return error.message.endsWith(exports.kBrowserClosedError) || error.message.endsWith(exports.kBrowserOrContextClosedError);\n}\nexports.isSafeCloseError = isSafeCloseError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HttpServer = void 0;\nconst http = __importStar(require(\"http\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nclass HttpServer {\n    constructor() {\n        this._routes = [];\n        this._urlPrefix = '';\n    }\n    routePrefix(prefix, handler) {\n        this._routes.push({ prefix, handler });\n    }\n    routePath(path, handler) {\n        this._routes.push({ exact: path, handler });\n    }\n    async start(port) {\n        this._server = http.createServer(this._onRequest.bind(this));\n        this._server.listen(port);\n        await new Promise(cb => this._server.once('listening', cb));\n        const address = this._server.address();\n        this._urlPrefix = typeof address === 'string' ? address : `http://127.0.0.1:${address.port}`;\n        return this._urlPrefix;\n    }\n    async stop() {\n        await new Promise(cb => this._server.close(cb));\n    }\n    urlPrefix() {\n        return this._urlPrefix;\n    }\n    serveFile(response, absoluteFilePath, headers) {\n        try {\n            const content = fs_1.default.readFileSync(absoluteFilePath);\n            response.statusCode = 200;\n            const contentType = extensionToMime[path_1.default.extname(absoluteFilePath).substring(1)] || 'application/octet-stream';\n            response.setHeader('Content-Type', contentType);\n            response.setHeader('Content-Length', content.byteLength);\n            for (const [name, value] of Object.entries(headers || {}))\n                response.setHeader(name, value);\n            response.end(content);\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    _onRequest(request, response) {\n        request.on('error', () => response.end());\n        try {\n            if (!request.url) {\n                response.end();\n                return;\n            }\n            const url = new URL('http://localhost' + request.url);\n            for (const route of this._routes) {\n                if (route.exact && url.pathname === route.exact && route.handler(request, response))\n                    return;\n                if (route.prefix && url.pathname.startsWith(route.prefix) && route.handler(request, response))\n                    return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }\n        catch (e) {\n            response.end();\n        }\n    }\n}\nexports.HttpServer = HttpServer;\nconst extensionToMime = {\n    'css': 'text/css',\n    'html': 'text/html',\n    'jpeg': 'image/jpeg',\n    'jpg': 'image/jpeg',\n    'js': 'application/javascript',\n    'png': 'image/png',\n    'ttf': 'font/ttf',\n    'svg': 'image/svg+xml',\n    'webp': 'image/webp',\n    'woff': 'font/woff',\n    'woff2': 'font/woff2',\n};\n//# sourceMappingURL=httpServer.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Registry = exports.isBrowserDirectory = exports.registryDirectory = exports.hostPlatform = exports.allBrowserNames = void 0;\nconst child_process_1 = require(\"child_process\");\nconst fs_1 = __importDefault(require(\"fs\"));\nconst os = __importStar(require(\"os\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst util = __importStar(require(\"util\"));\nconst ubuntuVersion_1 = require(\"./ubuntuVersion\");\nconst utils_1 = require(\"./utils\");\nexports.allBrowserNames = ['chromium', 'webkit', 'firefox', 'ffmpeg'];\nconst PACKAGE_PATH = path_1.default.join(__dirname, '..', '..');\nconst EXECUTABLE_PATHS = {\n    chromium: {\n        'ubuntu18.04': ['chrome-linux', 'chrome'],\n        'ubuntu20.04': ['chrome-linux', 'chrome'],\n        'mac10.13': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n        'mac10.14': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n        'mac10.15': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n        'mac11': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n        'mac11-arm64': ['chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium'],\n        'win32': ['chrome-win', 'chrome.exe'],\n        'win64': ['chrome-win', 'chrome.exe'],\n    },\n    firefox: {\n        'ubuntu18.04': ['firefox', 'firefox'],\n        'ubuntu20.04': ['firefox', 'firefox'],\n        'mac10.13': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n        'mac10.14': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n        'mac10.15': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n        'mac11': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n        'mac11-arm64': ['firefox', 'Nightly.app', 'Contents', 'MacOS', 'firefox'],\n        'win32': ['firefox', 'firefox.exe'],\n        'win64': ['firefox', 'firefox.exe'],\n    },\n    webkit: {\n        'ubuntu18.04': ['pw_run.sh'],\n        'ubuntu20.04': ['pw_run.sh'],\n        'mac10.13': undefined,\n        'mac10.14': ['pw_run.sh'],\n        'mac10.15': ['pw_run.sh'],\n        'mac11': ['pw_run.sh'],\n        'mac11-arm64': ['pw_run.sh'],\n        'win32': ['Playwright.exe'],\n        'win64': ['Playwright.exe'],\n    },\n    ffmpeg: {\n        'ubuntu18.04': ['ffmpeg-linux'],\n        'ubuntu20.04': ['ffmpeg-linux'],\n        'mac10.13': ['ffmpeg-mac'],\n        'mac10.14': ['ffmpeg-mac'],\n        'mac10.15': ['ffmpeg-mac'],\n        'mac11': ['ffmpeg-mac'],\n        'mac11-arm64': ['ffmpeg-mac'],\n        'win32': ['ffmpeg-win32.exe'],\n        'win64': ['ffmpeg-win64.exe'],\n    },\n};\nconst DOWNLOAD_URLS = {\n    chromium: {\n        'ubuntu18.04': '%s/builds/chromium/%s/chromium-linux.zip',\n        'ubuntu20.04': '%s/builds/chromium/%s/chromium-linux.zip',\n        'mac10.13': '%s/builds/chromium/%s/chromium-mac.zip',\n        'mac10.14': '%s/builds/chromium/%s/chromium-mac.zip',\n        'mac10.15': '%s/builds/chromium/%s/chromium-mac.zip',\n        'mac11': '%s/builds/chromium/%s/chromium-mac.zip',\n        'mac11-arm64': '%s/builds/chromium/%s/chromium-mac-arm64.zip',\n        'win32': '%s/builds/chromium/%s/chromium-win32.zip',\n        'win64': '%s/builds/chromium/%s/chromium-win64.zip',\n    },\n    firefox: {\n        'ubuntu18.04': '%s/builds/firefox/%s/firefox-ubuntu-18.04.zip',\n        'ubuntu20.04': '%s/builds/firefox/%s/firefox-ubuntu-18.04.zip',\n        'mac10.13': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n        'mac10.14': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n        'mac10.15': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n        'mac11': '%s/builds/firefox/%s/firefox-mac-10.14.zip',\n        'mac11-arm64': '%s/builds/firefox/%s/firefox-mac-11.0-arm64.zip',\n        'win32': '%s/builds/firefox/%s/firefox-win32.zip',\n        'win64': '%s/builds/firefox/%s/firefox-win64.zip',\n    },\n    webkit: {\n        'ubuntu18.04': '%s/builds/webkit/%s/webkit-ubuntu-18.04.zip',\n        'ubuntu20.04': '%s/builds/webkit/%s/webkit-ubuntu-20.04.zip',\n        'mac10.13': undefined,\n        'mac10.14': '%s/builds/deprecated-webkit-mac-10.14/%s/deprecated-webkit-mac-10.14.zip',\n        'mac10.15': '%s/builds/webkit/%s/webkit-mac-10.15.zip',\n        'mac11': '%s/builds/webkit/%s/webkit-mac-10.15.zip',\n        'mac11-arm64': '%s/builds/webkit/%s/webkit-mac-11.0-arm64.zip',\n        'win32': '%s/builds/webkit/%s/webkit-win64.zip',\n        'win64': '%s/builds/webkit/%s/webkit-win64.zip',\n    },\n    ffmpeg: {\n        'ubuntu18.04': '%s/builds/ffmpeg/%s/ffmpeg-linux.zip',\n        'ubuntu20.04': '%s/builds/ffmpeg/%s/ffmpeg-linux.zip',\n        'mac10.13': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n        'mac10.14': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n        'mac10.15': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n        'mac11': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n        'mac11-arm64': '%s/builds/ffmpeg/%s/ffmpeg-mac.zip',\n        'win32': '%s/builds/ffmpeg/%s/ffmpeg-win32.zip',\n        'win64': '%s/builds/ffmpeg/%s/ffmpeg-win64.zip',\n    },\n};\nexports.hostPlatform = (() => {\n    const platform = os.platform();\n    if (platform === 'darwin') {\n        const [major, minor] = child_process_1.execSync('sw_vers -productVersion', {\n            stdio: ['ignore', 'pipe', 'ignore']\n        }).toString('utf8').trim().split('.').map(x => parseInt(x, 10));\n        let arm64 = false;\n        // BigSur is the first version that might run on Apple Silicon.\n        if (major >= 11) {\n            arm64 = child_process_1.execSync('/usr/sbin/sysctl -in hw.optional.arm64', {\n                stdio: ['ignore', 'pipe', 'ignore']\n            }).toString().trim() === '1';\n        }\n        // We do not want to differentiate between minor big sur releases\n        // since they don't change core APIs so far.\n        const macVersion = major === 10 ? `${major}.${minor}` : `${major}`;\n        const archSuffix = arm64 ? '-arm64' : '';\n        return `mac${macVersion}${archSuffix}`;\n    }\n    if (platform === 'linux') {\n        const ubuntuVersion = ubuntuVersion_1.getUbuntuVersionSync();\n        if (parseInt(ubuntuVersion, 10) <= 19)\n            return 'ubuntu18.04';\n        return 'ubuntu20.04';\n    }\n    if (platform === 'win32')\n        return os.arch() === 'x64' ? 'win64' : 'win32';\n    return platform;\n})();\nexports.registryDirectory = (() => {\n    let result;\n    const envDefined = utils_1.getFromENV('PLAYWRIGHT_BROWSERS_PATH');\n    if (envDefined === '0') {\n        result = path_1.default.join(__dirname, '..', '..', '.local-browsers');\n    }\n    else if (envDefined) {\n        result = envDefined;\n    }\n    else {\n        let cacheDirectory;\n        if (process.platform === 'linux')\n            cacheDirectory = process.env.XDG_CACHE_HOME || path_1.default.join(os.homedir(), '.cache');\n        else if (process.platform === 'darwin')\n            cacheDirectory = path_1.default.join(os.homedir(), 'Library', 'Caches');\n        else if (process.platform === 'win32')\n            cacheDirectory = process.env.LOCALAPPDATA || path_1.default.join(os.homedir(), 'AppData', 'Local');\n        else\n            throw new Error('Unsupported platform: ' + process.platform);\n        result = path_1.default.join(cacheDirectory, 'ms-playwright');\n    }\n    if (!path_1.default.isAbsolute(result)) {\n        // It is important to resolve to the absolute path:\n        //   - for unzipping to work correctly;\n        //   - so that registry directory matches between installation and execution.\n        // INIT_CWD points to the root of `npm/yarn install` and is probably what\n        // the user meant when typing the relative path.\n        result = path_1.default.resolve(utils_1.getFromENV('INIT_CWD') || process.cwd(), result);\n    }\n    return result;\n})();\nfunction isBrowserDirectory(browserDirectory) {\n    const baseName = path_1.default.basename(browserDirectory);\n    for (const browserName of exports.allBrowserNames) {\n        if (baseName.startsWith(browserName + '-'))\n            return true;\n    }\n    return false;\n}\nexports.isBrowserDirectory = isBrowserDirectory;\nlet currentPackageRegistry = undefined;\nclass Registry {\n    constructor(packagePath) {\n        const browsersJSON = JSON.parse(fs_1.default.readFileSync(path_1.default.join(packagePath, 'browsers.json'), 'utf8'));\n        this._descriptors = browsersJSON['browsers'].map((obj) => {\n            const name = obj.name;\n            const revisionOverride = (obj.revisionOverrides || {})[exports.hostPlatform];\n            const revision = revisionOverride || obj.revision;\n            const browserDirectory = revisionOverride ? `${name}-${exports.hostPlatform}-special-${revision}` : `${name}-${revision}`;\n            return {\n                name,\n                revision,\n                installByDefault: !!obj.installByDefault,\n                browserDirectory,\n            };\n        });\n    }\n    static currentPackageRegistry() {\n        if (!currentPackageRegistry)\n            currentPackageRegistry = new Registry(PACKAGE_PATH);\n        return currentPackageRegistry;\n    }\n    browserDirectory(browserName) {\n        const browser = this._descriptors.find(browser => browser.name === browserName);\n        utils_1.assert(browser, `ERROR: Playwright does not support ${browserName}`);\n        return path_1.default.join(exports.registryDirectory, browser.browserDirectory);\n    }\n    revision(browserName) {\n        const browser = this._descriptors.find(browser => browser.name === browserName);\n        utils_1.assert(browser, `ERROR: Playwright does not support ${browserName}`);\n        return parseInt(browser.revision, 10);\n    }\n    linuxLddDirectories(browserName) {\n        const browserDirectory = this.browserDirectory(browserName);\n        if (browserName === 'chromium')\n            return [path_1.default.join(browserDirectory, 'chrome-linux')];\n        if (browserName === 'firefox')\n            return [path_1.default.join(browserDirectory, 'firefox')];\n        if (browserName === 'webkit') {\n            return [\n                path_1.default.join(browserDirectory, 'minibrowser-gtk'),\n                path_1.default.join(browserDirectory, 'minibrowser-gtk', 'bin'),\n                path_1.default.join(browserDirectory, 'minibrowser-gtk', 'lib'),\n                path_1.default.join(browserDirectory, 'minibrowser-wpe'),\n                path_1.default.join(browserDirectory, 'minibrowser-wpe', 'bin'),\n                path_1.default.join(browserDirectory, 'minibrowser-wpe', 'lib'),\n            ];\n        }\n        return [];\n    }\n    windowsExeAndDllDirectories(browserName) {\n        const browserDirectory = this.browserDirectory(browserName);\n        if (browserName === 'chromium')\n            return [path_1.default.join(browserDirectory, 'chrome-win')];\n        if (browserName === 'firefox')\n            return [path_1.default.join(browserDirectory, 'firefox')];\n        if (browserName === 'webkit')\n            return [browserDirectory];\n        return [];\n    }\n    executablePath(browserName) {\n        const browserDirectory = this.browserDirectory(browserName);\n        const tokens = EXECUTABLE_PATHS[browserName][exports.hostPlatform];\n        return tokens ? path_1.default.join(browserDirectory, ...tokens) : undefined;\n    }\n    downloadURL(browserName) {\n        const browser = this._descriptors.find(browser => browser.name === browserName);\n        utils_1.assert(browser, `ERROR: Playwright does not support ${browserName}`);\n        const envDownloadHost = {\n            chromium: 'PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST',\n            firefox: 'PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST',\n            webkit: 'PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST',\n            ffmpeg: 'PLAYWRIGHT_FFMPEG_DOWNLOAD_HOST',\n        };\n        const downloadHost = utils_1.getFromENV(envDownloadHost[browserName]) ||\n            utils_1.getFromENV('PLAYWRIGHT_DOWNLOAD_HOST') ||\n            'https://playwright.azureedge.net';\n        const urlTemplate = DOWNLOAD_URLS[browserName][exports.hostPlatform];\n        utils_1.assert(urlTemplate, `ERROR: Playwright does not support ${browserName} on ${exports.hostPlatform}`);\n        return util.format(urlTemplate, downloadHost, browser.revision);\n    }\n    shouldRetain(browserName) {\n        // We retain browsers if they are found in the descriptor.\n        // Note, however, that there are older versions out in the wild that rely on\n        // the \"download\" field in the browser descriptor and use its value\n        // to retain and download browsers.\n        // As of v1.10, we decided to abandon \"download\" field.\n        const browser = this._descriptors.find(browser => browser.name === browserName);\n        return !!browser;\n    }\n    installByDefault() {\n        return this._descriptors.filter(browser => browser.installByDefault).map(browser => browser.name);\n    }\n}\nexports.Registry = Registry;\n//# sourceMappingURL=registry.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.captureStackTrace = exports.rewriteErrorMessage = exports.getCallerFilePath = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst stack_utils_1 = __importDefault(require(\"stack-utils\"));\nconst utils_1 = require(\"./utils\");\nconst stackUtils = new stack_utils_1.default();\nfunction getCallerFilePath(ignorePrefix) {\n    const frame = captureStackTrace().frames.find(f => !f.file.startsWith(ignorePrefix));\n    return frame ? frame.file : null;\n}\nexports.getCallerFilePath = getCallerFilePath;\nfunction rewriteErrorMessage(e, newMessage) {\n    if (e.stack) {\n        const index = e.stack.indexOf(e.message);\n        if (index !== -1)\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\n    }\n    e.message = newMessage;\n    return e;\n}\nexports.rewriteErrorMessage = rewriteErrorMessage;\nconst PW_LIB_DIRS = [\n    'playwright',\n    'playwright-chromium',\n    'playwright-firefox',\n    'playwright-webkit',\n].map(packageName => path_1.default.sep + path_1.default.join(packageName, 'lib'));\nfunction captureStackTrace() {\n    const stack = new Error().stack;\n    const frames = [];\n    for (const line of stack.split('\\n')) {\n        const frame = stackUtils.parseLine(line);\n        if (!frame || !frame.file)\n            continue;\n        if (frame.file.startsWith('internal'))\n            continue;\n        const fileName = path_1.default.resolve(process.cwd(), frame.file);\n        if (PW_LIB_DIRS.some(libDir => fileName.includes(libDir)))\n            continue;\n        // for tests.\n        if (utils_1.isUnderTest() && fileName.includes(path_1.default.join('playwright', 'src')))\n            continue;\n        if (utils_1.isUnderTest() && fileName.includes(path_1.default.join('playwright', 'test', 'coverage.js')))\n            continue;\n        frames.push({\n            file: fileName,\n            line: frame.line,\n            column: frame.column,\n            function: frame.function,\n        });\n    }\n    return { stack, frames };\n}\nexports.captureStackTrace = captureStackTrace;\n//# sourceMappingURL=stackTrace.js.map","\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TimeoutSettings = exports.DEFAULT_TIMEOUT = void 0;\nconst utils_1 = require(\"./utils\");\nexports.DEFAULT_TIMEOUT = 30000;\nconst TIMEOUT = utils_1.isDebugMode() ? 0 : exports.DEFAULT_TIMEOUT;\nclass TimeoutSettings {\n    constructor(parent) {\n        this._defaultTimeout = null;\n        this._defaultNavigationTimeout = null;\n        this._parent = parent;\n    }\n    setDefaultTimeout(timeout) {\n        this._defaultTimeout = timeout;\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._defaultNavigationTimeout = timeout;\n    }\n    navigationTimeout(options) {\n        if (typeof options.timeout === 'number')\n            return options.timeout;\n        if (this._defaultNavigationTimeout !== null)\n            return this._defaultNavigationTimeout;\n        if (this._defaultTimeout !== null)\n            return this._defaultTimeout;\n        if (this._parent)\n            return this._parent.navigationTimeout(options);\n        return TIMEOUT;\n    }\n    timeout(options) {\n        if (typeof options.timeout === 'number')\n            return options.timeout;\n        if (this._defaultTimeout !== null)\n            return this._defaultTimeout;\n        if (this._parent)\n            return this._parent.timeout(options);\n        return TIMEOUT;\n    }\n    static timeout(options) {\n        if (typeof options.timeout === 'number')\n            return options.timeout;\n        return TIMEOUT;\n    }\n}\nexports.TimeoutSettings = TimeoutSettings;\n//# sourceMappingURL=timeoutSettings.js.map","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getUbuntuVersionSync = exports.getUbuntuVersion = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\nconst os = __importStar(require(\"os\"));\nconst util = __importStar(require(\"util\"));\nconst readFileAsync = util.promisify(fs_1.default.readFile.bind(fs_1.default));\nasync function getUbuntuVersion() {\n    if (os.platform() !== 'linux')\n        return '';\n    const osReleaseText = await readFileAsync('/etc/os-release', 'utf8').catch(e => '');\n    if (!osReleaseText)\n        return '';\n    return getUbuntuVersionInternal(osReleaseText);\n}\nexports.getUbuntuVersion = getUbuntuVersion;\nfunction getUbuntuVersionSync() {\n    if (os.platform() !== 'linux')\n        return '';\n    try {\n        const osReleaseText = fs_1.default.readFileSync('/etc/os-release', 'utf8');\n        if (!osReleaseText)\n            return '';\n        return getUbuntuVersionInternal(osReleaseText);\n    }\n    catch (e) {\n        return '';\n    }\n}\nexports.getUbuntuVersionSync = getUbuntuVersionSync;\nfunction getUbuntuVersionInternal(osReleaseText) {\n    const fields = new Map();\n    for (const line of osReleaseText.split('\\n')) {\n        const tokens = line.split('=');\n        const name = tokens.shift();\n        let value = tokens.join('=').trim();\n        if (value.startsWith('\"') && value.endsWith('\"'))\n            value = value.substring(1, value.length - 1);\n        if (!name)\n            continue;\n        fields.set(name.toLowerCase(), value);\n    }\n    if (!fields.get('name') || fields.get('name').toLowerCase() !== 'ubuntu')\n        return '';\n    return fields.get('version_id') || '';\n}\n//# sourceMappingURL=ubuntuVersion.js.map","\"use strict\";\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canAccessFile = exports.removeFolders = exports.createGuid = exports.calculateSha1 = exports.monotonicTime = exports.headersArrayToObject = exports.headersObjectToArray = exports.mkdirIfNeeded = exports.getAsBooleanFromENV = exports.getFromENV = exports.isUnderTest = exports.setUnderTest = exports.isDebugMode = exports.isError = exports.isObject = exports.isRegExp = exports.isString = exports.debugAssert = exports.assert = exports.makeWaitForNextTask = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst rimraf_1 = __importDefault(require(\"rimraf\"));\nconst util = __importStar(require(\"util\"));\nconst crypto = __importStar(require(\"crypto\"));\nconst mkdirAsync = util.promisify(fs_1.default.mkdir.bind(fs_1.default));\n// See https://joel.tools/microtasks/\nfunction makeWaitForNextTask() {\n    // As of Mar 2021, Electorn v12 doesn't create new task with `setImmediate` despite\n    // using Node 14 internally, so we fallback to `setTimeout(0)` instead.\n    // @see https://github.com/electron/electron/issues/28261\n    if (process.versions.electron)\n        return (callback) => setTimeout(callback, 0);\n    if (parseInt(process.versions.node, 10) >= 11)\n        return setImmediate;\n    // Unlike Node 11, Node 10 and less have a bug with Task and MicroTask execution order:\n    // - https://github.com/nodejs/node/issues/22257\n    //\n    // So we can't simply run setImmediate to dispatch code in a following task.\n    // However, we can run setImmediate from-inside setImmediate to make sure we're getting\n    // in the following task.\n    let spinning = false;\n    const callbacks = [];\n    const loop = () => {\n        const callback = callbacks.shift();\n        if (!callback) {\n            spinning = false;\n            return;\n        }\n        setImmediate(loop);\n        // Make sure to call callback() as the last thing since it's\n        // untrusted code that might throw.\n        callback();\n    };\n    return (callback) => {\n        callbacks.push(callback);\n        if (!spinning) {\n            spinning = true;\n            setImmediate(loop);\n        }\n    };\n}\nexports.makeWaitForNextTask = makeWaitForNextTask;\nfunction assert(value, message) {\n    if (!value)\n        throw new Error(message);\n}\nexports.assert = assert;\nfunction debugAssert(value, message) {\n    if (isUnderTest() && !value)\n        throw new Error(message);\n}\nexports.debugAssert = debugAssert;\nfunction isString(obj) {\n    return typeof obj === 'string' || obj instanceof String;\n}\nexports.isString = isString;\nfunction isRegExp(obj) {\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nfunction isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n}\nexports.isObject = isObject;\nfunction isError(obj) {\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\nexports.isError = isError;\nconst isInDebugMode = !!getFromENV('PWDEBUG');\nfunction isDebugMode() {\n    return isInDebugMode;\n}\nexports.isDebugMode = isDebugMode;\nlet _isUnderTest = false;\nfunction setUnderTest() {\n    _isUnderTest = true;\n}\nexports.setUnderTest = setUnderTest;\nfunction isUnderTest() {\n    return _isUnderTest;\n}\nexports.isUnderTest = isUnderTest;\nfunction getFromENV(name) {\n    let value = process.env[name];\n    value = value === undefined ? process.env[`npm_config_${name.toLowerCase()}`] : value;\n    value = value === undefined ? process.env[`npm_package_config_${name.toLowerCase()}`] : value;\n    return value;\n}\nexports.getFromENV = getFromENV;\nfunction getAsBooleanFromENV(name) {\n    const value = getFromENV(name);\n    return !!value && value !== 'false' && value !== '0';\n}\nexports.getAsBooleanFromENV = getAsBooleanFromENV;\nasync function mkdirIfNeeded(filePath) {\n    // This will harmlessly throw on windows if the dirname is the root directory.\n    await mkdirAsync(path_1.default.dirname(filePath), { recursive: true }).catch(() => { });\n}\nexports.mkdirIfNeeded = mkdirIfNeeded;\nfunction headersObjectToArray(headers) {\n    const result = [];\n    for (const name in headers) {\n        if (!Object.is(headers[name], undefined))\n            result.push({ name, value: headers[name] });\n    }\n    return result;\n}\nexports.headersObjectToArray = headersObjectToArray;\nfunction headersArrayToObject(headers, lowerCase) {\n    const result = {};\n    for (const { name, value } of headers)\n        result[lowerCase ? name.toLowerCase() : name] = value;\n    return result;\n}\nexports.headersArrayToObject = headersArrayToObject;\nfunction monotonicTime() {\n    const [seconds, nanoseconds] = process.hrtime();\n    return seconds * 1000 + (nanoseconds / 1000 | 0) / 1000;\n}\nexports.monotonicTime = monotonicTime;\nfunction calculateSha1(buffer) {\n    const hash = crypto.createHash('sha1');\n    hash.update(buffer);\n    return hash.digest('hex');\n}\nexports.calculateSha1 = calculateSha1;\nfunction createGuid() {\n    return crypto.randomBytes(16).toString('hex');\n}\nexports.createGuid = createGuid;\nasync function removeFolders(dirs) {\n    await Promise.all(dirs.map((dir) => {\n        return new Promise(fulfill => {\n            rimraf_1.default(dir, { maxBusyTries: 10 }, error => {\n                if (error)\n                    console.error(error); // eslint-disable no-console\n                fulfill();\n            });\n        });\n    }));\n}\nexports.removeFolders = removeFolders;\nfunction canAccessFile(file) {\n    if (!file)\n        return false;\n    try {\n        fs_1.default.accessSync(file);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\nexports.canAccessFile = canAccessFile;\n//# sourceMappingURL=utils.js.map","\"use strict\";\n\nlet interlaceUtils = require(\"./interlace\");\n\nlet pixelBppMapper = [\n  // 0 - dummy entry\n  function () {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos === data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    let pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 1 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    let pixel = data[rawPos];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = data[rawPos + 1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 2 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = 0xff;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function (pxData, data, pxPos, rawPos) {\n    if (rawPos + 3 >= data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n\n    pxData[pxPos] = data[rawPos];\n    pxData[pxPos + 1] = data[rawPos + 1];\n    pxData[pxPos + 2] = data[rawPos + 2];\n    pxData[pxPos + 3] = data[rawPos + 3];\n  },\n];\n\nlet pixelBppCustomMapper = [\n  // 0 - dummy entry\n  function () {},\n\n  // 1 - L\n  // 0: 0, 1: 0, 2: 0, 3: 0xff\n  function (pxData, pixelData, pxPos, maxBit) {\n    let pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 2 - LA\n  // 0: 0, 1: 0, 2: 0, 3: 1\n  function (pxData, pixelData, pxPos) {\n    let pixel = pixelData[0];\n    pxData[pxPos] = pixel;\n    pxData[pxPos + 1] = pixel;\n    pxData[pxPos + 2] = pixel;\n    pxData[pxPos + 3] = pixelData[1];\n  },\n\n  // 3 - RGB\n  // 0: 0, 1: 1, 2: 2, 3: 0xff\n  function (pxData, pixelData, pxPos, maxBit) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = maxBit;\n  },\n\n  // 4 - RGBA\n  // 0: 0, 1: 1, 2: 2, 3: 3\n  function (pxData, pixelData, pxPos) {\n    pxData[pxPos] = pixelData[0];\n    pxData[pxPos + 1] = pixelData[1];\n    pxData[pxPos + 2] = pixelData[2];\n    pxData[pxPos + 3] = pixelData[3];\n  },\n];\n\nfunction bitRetriever(data, depth) {\n  let leftOver = [];\n  let i = 0;\n\n  function split() {\n    if (i === data.length) {\n      throw new Error(\"Ran out of data\");\n    }\n    let byte = data[i];\n    i++;\n    let byte8, byte7, byte6, byte5, byte4, byte3, byte2, byte1;\n    switch (depth) {\n      default:\n        throw new Error(\"unrecognised depth\");\n      case 16:\n        byte2 = data[i];\n        i++;\n        leftOver.push((byte << 8) + byte2);\n        break;\n      case 4:\n        byte2 = byte & 0x0f;\n        byte1 = byte >> 4;\n        leftOver.push(byte1, byte2);\n        break;\n      case 2:\n        byte4 = byte & 3;\n        byte3 = (byte >> 2) & 3;\n        byte2 = (byte >> 4) & 3;\n        byte1 = (byte >> 6) & 3;\n        leftOver.push(byte1, byte2, byte3, byte4);\n        break;\n      case 1:\n        byte8 = byte & 1;\n        byte7 = (byte >> 1) & 1;\n        byte6 = (byte >> 2) & 1;\n        byte5 = (byte >> 3) & 1;\n        byte4 = (byte >> 4) & 1;\n        byte3 = (byte >> 5) & 1;\n        byte2 = (byte >> 6) & 1;\n        byte1 = (byte >> 7) & 1;\n        leftOver.push(byte1, byte2, byte3, byte4, byte5, byte6, byte7, byte8);\n        break;\n    }\n  }\n\n  return {\n    get: function (count) {\n      while (leftOver.length < count) {\n        split();\n      }\n      let returner = leftOver.slice(0, count);\n      leftOver = leftOver.slice(count);\n      return returner;\n    },\n    resetAfterLine: function () {\n      leftOver.length = 0;\n    },\n    end: function () {\n      if (i !== data.length) {\n        throw new Error(\"extra data found\");\n      }\n    },\n  };\n}\n\nfunction mapImage8Bit(image, pxData, getPxPos, bpp, data, rawPos) {\n  // eslint-disable-line max-params\n  let imageWidth = image.width;\n  let imageHeight = image.height;\n  let imagePass = image.index;\n  for (let y = 0; y < imageHeight; y++) {\n    for (let x = 0; x < imageWidth; x++) {\n      let pxPos = getPxPos(x, y, imagePass);\n      pixelBppMapper[bpp](pxData, data, pxPos, rawPos);\n      rawPos += bpp; //eslint-disable-line no-param-reassign\n    }\n  }\n  return rawPos;\n}\n\nfunction mapImageCustomBit(image, pxData, getPxPos, bpp, bits, maxBit) {\n  // eslint-disable-line max-params\n  let imageWidth = image.width;\n  let imageHeight = image.height;\n  let imagePass = image.index;\n  for (let y = 0; y < imageHeight; y++) {\n    for (let x = 0; x < imageWidth; x++) {\n      let pixelData = bits.get(bpp);\n      let pxPos = getPxPos(x, y, imagePass);\n      pixelBppCustomMapper[bpp](pxData, pixelData, pxPos, maxBit);\n    }\n    bits.resetAfterLine();\n  }\n}\n\nexports.dataToBitMap = function (data, bitmapInfo) {\n  let width = bitmapInfo.width;\n  let height = bitmapInfo.height;\n  let depth = bitmapInfo.depth;\n  let bpp = bitmapInfo.bpp;\n  let interlace = bitmapInfo.interlace;\n  let bits;\n\n  if (depth !== 8) {\n    bits = bitRetriever(data, depth);\n  }\n  let pxData;\n  if (depth <= 8) {\n    pxData = Buffer.alloc(width * height * 4);\n  } else {\n    pxData = new Uint16Array(width * height * 4);\n  }\n  let maxBit = Math.pow(2, depth) - 1;\n  let rawPos = 0;\n  let images;\n  let getPxPos;\n\n  if (interlace) {\n    images = interlaceUtils.getImagePasses(width, height);\n    getPxPos = interlaceUtils.getInterlaceIterator(width, height);\n  } else {\n    let nonInterlacedPxPos = 0;\n    getPxPos = function () {\n      let returner = nonInterlacedPxPos;\n      nonInterlacedPxPos += 4;\n      return returner;\n    };\n    images = [{ width: width, height: height }];\n  }\n\n  for (let imageIndex = 0; imageIndex < images.length; imageIndex++) {\n    if (depth === 8) {\n      rawPos = mapImage8Bit(\n        images[imageIndex],\n        pxData,\n        getPxPos,\n        bpp,\n        data,\n        rawPos\n      );\n    } else {\n      mapImageCustomBit(\n        images[imageIndex],\n        pxData,\n        getPxPos,\n        bpp,\n        bits,\n        maxBit\n      );\n    }\n  }\n  if (depth === 8) {\n    if (rawPos !== data.length) {\n      throw new Error(\"extra data found\");\n    }\n  } else {\n    bits.end();\n  }\n\n  return pxData;\n};\n","\"use strict\";\n\nlet constants = require(\"./constants\");\n\nmodule.exports = function (dataIn, width, height, options) {\n  let outHasAlpha =\n    [constants.COLORTYPE_COLOR_ALPHA, constants.COLORTYPE_ALPHA].indexOf(\n      options.colorType\n    ) !== -1;\n  if (options.colorType === options.inputColorType) {\n    let bigEndian = (function () {\n      let buffer = new ArrayBuffer(2);\n      new DataView(buffer).setInt16(0, 256, true /* littleEndian */);\n      // Int16Array uses the platform's endianness.\n      return new Int16Array(buffer)[0] !== 256;\n    })();\n    // If no need to convert to grayscale and alpha is present/absent in both, take a fast route\n    if (options.bitDepth === 8 || (options.bitDepth === 16 && bigEndian)) {\n      return dataIn;\n    }\n  }\n\n  // map to a UInt16 array if data is 16bit, fix endianness below\n  let data = options.bitDepth !== 16 ? dataIn : new Uint16Array(dataIn.buffer);\n\n  let maxValue = 255;\n  let inBpp = constants.COLORTYPE_TO_BPP_MAP[options.inputColorType];\n  if (inBpp === 4 && !options.inputHasAlpha) {\n    inBpp = 3;\n  }\n  let outBpp = constants.COLORTYPE_TO_BPP_MAP[options.colorType];\n  if (options.bitDepth === 16) {\n    maxValue = 65535;\n    outBpp *= 2;\n  }\n  let outData = Buffer.alloc(width * height * outBpp);\n\n  let inIndex = 0;\n  let outIndex = 0;\n\n  let bgColor = options.bgColor || {};\n  if (bgColor.red === undefined) {\n    bgColor.red = maxValue;\n  }\n  if (bgColor.green === undefined) {\n    bgColor.green = maxValue;\n  }\n  if (bgColor.blue === undefined) {\n    bgColor.blue = maxValue;\n  }\n\n  function getRGBA() {\n    let red;\n    let green;\n    let blue;\n    let alpha = maxValue;\n    switch (options.inputColorType) {\n      case constants.COLORTYPE_COLOR_ALPHA:\n        alpha = data[inIndex + 3];\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_COLOR:\n        red = data[inIndex];\n        green = data[inIndex + 1];\n        blue = data[inIndex + 2];\n        break;\n      case constants.COLORTYPE_ALPHA:\n        alpha = data[inIndex + 1];\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      case constants.COLORTYPE_GRAYSCALE:\n        red = data[inIndex];\n        green = red;\n        blue = red;\n        break;\n      default:\n        throw new Error(\n          \"input color type:\" +\n            options.inputColorType +\n            \" is not supported at present\"\n        );\n    }\n\n    if (options.inputHasAlpha) {\n      if (!outHasAlpha) {\n        alpha /= maxValue;\n        red = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.red + alpha * red), 0),\n          maxValue\n        );\n        green = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.green + alpha * green), 0),\n          maxValue\n        );\n        blue = Math.min(\n          Math.max(Math.round((1 - alpha) * bgColor.blue + alpha * blue), 0),\n          maxValue\n        );\n      }\n    }\n    return { red: red, green: green, blue: blue, alpha: alpha };\n  }\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let rgba = getRGBA(data, inIndex);\n\n      switch (options.colorType) {\n        case constants.COLORTYPE_COLOR_ALPHA:\n        case constants.COLORTYPE_COLOR:\n          if (options.bitDepth === 8) {\n            outData[outIndex] = rgba.red;\n            outData[outIndex + 1] = rgba.green;\n            outData[outIndex + 2] = rgba.blue;\n            if (outHasAlpha) {\n              outData[outIndex + 3] = rgba.alpha;\n            }\n          } else {\n            outData.writeUInt16BE(rgba.red, outIndex);\n            outData.writeUInt16BE(rgba.green, outIndex + 2);\n            outData.writeUInt16BE(rgba.blue, outIndex + 4);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 6);\n            }\n          }\n          break;\n        case constants.COLORTYPE_ALPHA:\n        case constants.COLORTYPE_GRAYSCALE: {\n          // Convert to grayscale and alpha\n          let grayscale = (rgba.red + rgba.green + rgba.blue) / 3;\n          if (options.bitDepth === 8) {\n            outData[outIndex] = grayscale;\n            if (outHasAlpha) {\n              outData[outIndex + 1] = rgba.alpha;\n            }\n          } else {\n            outData.writeUInt16BE(grayscale, outIndex);\n            if (outHasAlpha) {\n              outData.writeUInt16BE(rgba.alpha, outIndex + 2);\n            }\n          }\n          break;\n        }\n        default:\n          throw new Error(\"unrecognised color Type \" + options.colorType);\n      }\n\n      inIndex += inBpp;\n      outIndex += outBpp;\n    }\n  }\n\n  return outData;\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\n\nlet ChunkStream = (module.exports = function () {\n  Stream.call(this);\n\n  this._buffers = [];\n  this._buffered = 0;\n\n  this._reads = [];\n  this._paused = false;\n\n  this._encoding = \"utf8\";\n  this.writable = true;\n});\nutil.inherits(ChunkStream, Stream);\n\nChunkStream.prototype.read = function (length, callback) {\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback,\n  });\n\n  process.nextTick(\n    function () {\n      this._process();\n\n      // its paused and there is not enought data then ask for more\n      if (this._paused && this._reads && this._reads.length > 0) {\n        this._paused = false;\n\n        this.emit(\"drain\");\n      }\n    }.bind(this)\n  );\n};\n\nChunkStream.prototype.write = function (data, encoding) {\n  if (!this.writable) {\n    this.emit(\"error\", new Error(\"Stream not writable\"));\n    return false;\n  }\n\n  let dataBuffer;\n  if (Buffer.isBuffer(data)) {\n    dataBuffer = data;\n  } else {\n    dataBuffer = Buffer.from(data, encoding || this._encoding);\n  }\n\n  this._buffers.push(dataBuffer);\n  this._buffered += dataBuffer.length;\n\n  this._process();\n\n  // ok if there are no more read requests\n  if (this._reads && this._reads.length === 0) {\n    this._paused = true;\n  }\n\n  return this.writable && !this._paused;\n};\n\nChunkStream.prototype.end = function (data, encoding) {\n  if (data) {\n    this.write(data, encoding);\n  }\n\n  this.writable = false;\n\n  // already destroyed\n  if (!this._buffers) {\n    return;\n  }\n\n  // enqueue or handle end\n  if (this._buffers.length === 0) {\n    this._end();\n  } else {\n    this._buffers.push(null);\n    this._process();\n  }\n};\n\nChunkStream.prototype.destroySoon = ChunkStream.prototype.end;\n\nChunkStream.prototype._end = function () {\n  if (this._reads.length > 0) {\n    this.emit(\"error\", new Error(\"Unexpected end of input\"));\n  }\n\n  this.destroy();\n};\n\nChunkStream.prototype.destroy = function () {\n  if (!this._buffers) {\n    return;\n  }\n\n  this.writable = false;\n  this._reads = null;\n  this._buffers = null;\n\n  this.emit(\"close\");\n};\n\nChunkStream.prototype._processReadAllowingLess = function (read) {\n  // ok there is any data so that we can satisfy this request\n  this._reads.shift(); // == read\n\n  // first we need to peek into first buffer\n  let smallerBuf = this._buffers[0];\n\n  // ok there is more data than we need\n  if (smallerBuf.length > read.length) {\n    this._buffered -= read.length;\n    this._buffers[0] = smallerBuf.slice(read.length);\n\n    read.func.call(this, smallerBuf.slice(0, read.length));\n  } else {\n    // ok this is less than maximum length so use it all\n    this._buffered -= smallerBuf.length;\n    this._buffers.shift(); // == smallerBuf\n\n    read.func.call(this, smallerBuf);\n  }\n};\n\nChunkStream.prototype._processRead = function (read) {\n  this._reads.shift(); // == read\n\n  let pos = 0;\n  let count = 0;\n  let data = Buffer.alloc(read.length);\n\n  // create buffer for all data\n  while (pos < read.length) {\n    let buf = this._buffers[count++];\n    let len = Math.min(buf.length, read.length - pos);\n\n    buf.copy(data, pos, 0, len);\n    pos += len;\n\n    // last buffer wasn't used all so just slice it and leave\n    if (len !== buf.length) {\n      this._buffers[--count] = buf.slice(len);\n    }\n  }\n\n  // remove all used buffers\n  if (count > 0) {\n    this._buffers.splice(0, count);\n  }\n\n  this._buffered -= read.length;\n\n  read.func.call(this, data);\n};\n\nChunkStream.prototype._process = function () {\n  try {\n    // as long as there is any data and read requests\n    while (this._buffered > 0 && this._reads && this._reads.length > 0) {\n      let read = this._reads[0];\n\n      // read any data (but no more than length)\n      if (read.allowLess) {\n        this._processReadAllowingLess(read);\n      } else if (this._buffered >= read.length) {\n        // ok we can meet some expectations\n\n        this._processRead(read);\n      } else {\n        // not enought data to satisfy first request in queue\n        // so we need to wait for more\n        break;\n      }\n    }\n\n    if (this._buffers && !this.writable) {\n      this._end();\n    }\n  } catch (ex) {\n    this.emit(\"error\", ex);\n  }\n};\n","\"use strict\";\n\nmodule.exports = {\n  PNG_SIGNATURE: [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a],\n\n  TYPE_IHDR: 0x49484452,\n  TYPE_IEND: 0x49454e44,\n  TYPE_IDAT: 0x49444154,\n  TYPE_PLTE: 0x504c5445,\n  TYPE_tRNS: 0x74524e53, // eslint-disable-line camelcase\n  TYPE_gAMA: 0x67414d41, // eslint-disable-line camelcase\n\n  // color-type bits\n  COLORTYPE_GRAYSCALE: 0,\n  COLORTYPE_PALETTE: 1,\n  COLORTYPE_COLOR: 2,\n  COLORTYPE_ALPHA: 4, // e.g. grayscale and alpha\n\n  // color-type combinations\n  COLORTYPE_PALETTE_COLOR: 3,\n  COLORTYPE_COLOR_ALPHA: 6,\n\n  COLORTYPE_TO_BPP_MAP: {\n    0: 1,\n    2: 3,\n    3: 1,\n    4: 2,\n    6: 4,\n  },\n\n  GAMMA_DIVISION: 100000,\n};\n","\"use strict\";\n\nlet crcTable = [];\n\n(function () {\n  for (let i = 0; i < 256; i++) {\n    let currentCrc = i;\n    for (let j = 0; j < 8; j++) {\n      if (currentCrc & 1) {\n        currentCrc = 0xedb88320 ^ (currentCrc >>> 1);\n      } else {\n        currentCrc = currentCrc >>> 1;\n      }\n    }\n    crcTable[i] = currentCrc;\n  }\n})();\n\nlet CrcCalculator = (module.exports = function () {\n  this._crc = -1;\n});\n\nCrcCalculator.prototype.write = function (data) {\n  for (let i = 0; i < data.length; i++) {\n    this._crc = crcTable[(this._crc ^ data[i]) & 0xff] ^ (this._crc >>> 8);\n  }\n  return true;\n};\n\nCrcCalculator.prototype.crc32 = function () {\n  return this._crc ^ -1;\n};\n\nCrcCalculator.crc32 = function (buf) {\n  let crc = -1;\n  for (let i = 0; i < buf.length; i++) {\n    crc = crcTable[(crc ^ buf[i]) & 0xff] ^ (crc >>> 8);\n  }\n  return crc ^ -1;\n};\n","\"use strict\";\n\nlet paethPredictor = require(\"./paeth-predictor\");\n\nfunction filterNone(pxData, pxPos, byteWidth, rawData, rawPos) {\n  for (let x = 0; x < byteWidth; x++) {\n    rawData[rawPos + x] = pxData[pxPos + x];\n  }\n}\n\nfunction filterSumNone(pxData, pxPos, byteWidth) {\n  let sum = 0;\n  let length = pxPos + byteWidth;\n\n  for (let i = pxPos; i < length; i++) {\n    sum += Math.abs(pxData[i]);\n  }\n  return sum;\n}\n\nfunction filterSub(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let val = pxData[pxPos + x] - left;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumSub(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let val = pxData[pxPos + x] - left;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterUp(pxData, pxPos, byteWidth, rawData, rawPos) {\n  for (let x = 0; x < byteWidth; x++) {\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - up;\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumUp(pxData, pxPos, byteWidth) {\n  let sum = 0;\n  let length = pxPos + byteWidth;\n  for (let x = pxPos; x < length; x++) {\n    let up = pxPos > 0 ? pxData[x - byteWidth] : 0;\n    let val = pxData[x] - up;\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterAvg(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumAvg(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let val = pxData[pxPos + x] - ((left + up) >> 1);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nfunction filterPaeth(pxData, pxPos, byteWidth, rawData, rawPos, bpp) {\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let upleft =\n      pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    let val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    rawData[rawPos + x] = val;\n  }\n}\n\nfunction filterSumPaeth(pxData, pxPos, byteWidth, bpp) {\n  let sum = 0;\n  for (let x = 0; x < byteWidth; x++) {\n    let left = x >= bpp ? pxData[pxPos + x - bpp] : 0;\n    let up = pxPos > 0 ? pxData[pxPos + x - byteWidth] : 0;\n    let upleft =\n      pxPos > 0 && x >= bpp ? pxData[pxPos + x - (byteWidth + bpp)] : 0;\n    let val = pxData[pxPos + x] - paethPredictor(left, up, upleft);\n\n    sum += Math.abs(val);\n  }\n\n  return sum;\n}\n\nlet filters = {\n  0: filterNone,\n  1: filterSub,\n  2: filterUp,\n  3: filterAvg,\n  4: filterPaeth,\n};\n\nlet filterSums = {\n  0: filterSumNone,\n  1: filterSumSub,\n  2: filterSumUp,\n  3: filterSumAvg,\n  4: filterSumPaeth,\n};\n\nmodule.exports = function (pxData, width, height, options, bpp) {\n  let filterTypes;\n  if (!(\"filterType\" in options) || options.filterType === -1) {\n    filterTypes = [0, 1, 2, 3, 4];\n  } else if (typeof options.filterType === \"number\") {\n    filterTypes = [options.filterType];\n  } else {\n    throw new Error(\"unrecognised filter types\");\n  }\n\n  if (options.bitDepth === 16) {\n    bpp *= 2;\n  }\n  let byteWidth = width * bpp;\n  let rawPos = 0;\n  let pxPos = 0;\n  let rawData = Buffer.alloc((byteWidth + 1) * height);\n\n  let sel = filterTypes[0];\n\n  for (let y = 0; y < height; y++) {\n    if (filterTypes.length > 1) {\n      // find best filter for this line (with lowest sum of values)\n      let min = Infinity;\n\n      for (let i = 0; i < filterTypes.length; i++) {\n        let sum = filterSums[filterTypes[i]](pxData, pxPos, byteWidth, bpp);\n        if (sum < min) {\n          sel = filterTypes[i];\n          min = sum;\n        }\n      }\n    }\n\n    rawData[rawPos] = sel;\n    rawPos++;\n    filters[sel](pxData, pxPos, byteWidth, rawData, rawPos, bpp);\n    rawPos += byteWidth;\n    pxPos += byteWidth;\n  }\n  return rawData;\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet ChunkStream = require(\"./chunkstream\");\nlet Filter = require(\"./filter-parse\");\n\nlet FilterAsync = (module.exports = function (bitmapInfo) {\n  ChunkStream.call(this);\n\n  let buffers = [];\n  let that = this;\n  this._filter = new Filter(bitmapInfo, {\n    read: this.read.bind(this),\n    write: function (buffer) {\n      buffers.push(buffer);\n    },\n    complete: function () {\n      that.emit(\"complete\", Buffer.concat(buffers));\n    },\n  });\n\n  this._filter.start();\n});\nutil.inherits(FilterAsync, ChunkStream);\n","\"use strict\";\n\nlet SyncReader = require(\"./sync-reader\");\nlet Filter = require(\"./filter-parse\");\n\nexports.process = function (inBuffer, bitmapInfo) {\n  let outBuffers = [];\n  let reader = new SyncReader(inBuffer);\n  let filter = new Filter(bitmapInfo, {\n    read: reader.read.bind(reader),\n    write: function (bufferPart) {\n      outBuffers.push(bufferPart);\n    },\n    complete: function () {},\n  });\n\n  filter.start();\n  reader.process();\n\n  return Buffer.concat(outBuffers);\n};\n","\"use strict\";\n\nlet interlaceUtils = require(\"./interlace\");\nlet paethPredictor = require(\"./paeth-predictor\");\n\nfunction getByteWidth(width, bpp, depth) {\n  let byteWidth = width * bpp;\n  if (depth !== 8) {\n    byteWidth = Math.ceil(byteWidth / (8 / depth));\n  }\n  return byteWidth;\n}\n\nlet Filter = (module.exports = function (bitmapInfo, dependencies) {\n  let width = bitmapInfo.width;\n  let height = bitmapInfo.height;\n  let interlace = bitmapInfo.interlace;\n  let bpp = bitmapInfo.bpp;\n  let depth = bitmapInfo.depth;\n\n  this.read = dependencies.read;\n  this.write = dependencies.write;\n  this.complete = dependencies.complete;\n\n  this._imageIndex = 0;\n  this._images = [];\n  if (interlace) {\n    let passes = interlaceUtils.getImagePasses(width, height);\n    for (let i = 0; i < passes.length; i++) {\n      this._images.push({\n        byteWidth: getByteWidth(passes[i].width, bpp, depth),\n        height: passes[i].height,\n        lineIndex: 0,\n      });\n    }\n  } else {\n    this._images.push({\n      byteWidth: getByteWidth(width, bpp, depth),\n      height: height,\n      lineIndex: 0,\n    });\n  }\n\n  // when filtering the line we look at the pixel to the left\n  // the spec also says it is done on a byte level regardless of the number of pixels\n  // so if the depth is byte compatible (8 or 16) we subtract the bpp in order to compare back\n  // a pixel rather than just a different byte part. However if we are sub byte, we ignore.\n  if (depth === 8) {\n    this._xComparison = bpp;\n  } else if (depth === 16) {\n    this._xComparison = bpp * 2;\n  } else {\n    this._xComparison = 1;\n  }\n});\n\nFilter.prototype.start = function () {\n  this.read(\n    this._images[this._imageIndex].byteWidth + 1,\n    this._reverseFilterLine.bind(this)\n  );\n};\n\nFilter.prototype._unFilterType1 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f1Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    unfilteredLine[x] = rawByte + f1Left;\n  }\n};\n\nFilter.prototype._unFilterType2 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f2Up = lastLine ? lastLine[x] : 0;\n    unfilteredLine[x] = rawByte + f2Up;\n  }\n};\n\nFilter.prototype._unFilterType3 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f3Up = lastLine ? lastLine[x] : 0;\n    let f3Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    let f3Add = Math.floor((f3Left + f3Up) / 2);\n    unfilteredLine[x] = rawByte + f3Add;\n  }\n};\n\nFilter.prototype._unFilterType4 = function (\n  rawData,\n  unfilteredLine,\n  byteWidth\n) {\n  let xComparison = this._xComparison;\n  let xBiggerThan = xComparison - 1;\n  let lastLine = this._lastLine;\n\n  for (let x = 0; x < byteWidth; x++) {\n    let rawByte = rawData[1 + x];\n    let f4Up = lastLine ? lastLine[x] : 0;\n    let f4Left = x > xBiggerThan ? unfilteredLine[x - xComparison] : 0;\n    let f4UpLeft = x > xBiggerThan && lastLine ? lastLine[x - xComparison] : 0;\n    let f4Add = paethPredictor(f4Left, f4Up, f4UpLeft);\n    unfilteredLine[x] = rawByte + f4Add;\n  }\n};\n\nFilter.prototype._reverseFilterLine = function (rawData) {\n  let filter = rawData[0];\n  let unfilteredLine;\n  let currentImage = this._images[this._imageIndex];\n  let byteWidth = currentImage.byteWidth;\n\n  if (filter === 0) {\n    unfilteredLine = rawData.slice(1, byteWidth + 1);\n  } else {\n    unfilteredLine = Buffer.alloc(byteWidth);\n\n    switch (filter) {\n      case 1:\n        this._unFilterType1(rawData, unfilteredLine, byteWidth);\n        break;\n      case 2:\n        this._unFilterType2(rawData, unfilteredLine, byteWidth);\n        break;\n      case 3:\n        this._unFilterType3(rawData, unfilteredLine, byteWidth);\n        break;\n      case 4:\n        this._unFilterType4(rawData, unfilteredLine, byteWidth);\n        break;\n      default:\n        throw new Error(\"Unrecognised filter type - \" + filter);\n    }\n  }\n\n  this.write(unfilteredLine);\n\n  currentImage.lineIndex++;\n  if (currentImage.lineIndex >= currentImage.height) {\n    this._lastLine = null;\n    this._imageIndex++;\n    currentImage = this._images[this._imageIndex];\n  } else {\n    this._lastLine = unfilteredLine;\n  }\n\n  if (currentImage) {\n    // read, using the byte width that may be from the new current image\n    this.read(currentImage.byteWidth + 1, this._reverseFilterLine.bind(this));\n  } else {\n    this._lastLine = null;\n    this.complete();\n  }\n};\n","\"use strict\";\n\nfunction dePalette(indata, outdata, width, height, palette) {\n  let pxPos = 0;\n  // use values from palette\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let color = palette[indata[pxPos]];\n\n      if (!color) {\n        throw new Error(\"index \" + indata[pxPos] + \" not in palette\");\n      }\n\n      for (let i = 0; i < 4; i++) {\n        outdata[pxPos + i] = color[i];\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction replaceTransparentColor(indata, outdata, width, height, transColor) {\n  let pxPos = 0;\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let makeTrans = false;\n\n      if (transColor.length === 1) {\n        if (transColor[0] === indata[pxPos]) {\n          makeTrans = true;\n        }\n      } else if (\n        transColor[0] === indata[pxPos] &&\n        transColor[1] === indata[pxPos + 1] &&\n        transColor[2] === indata[pxPos + 2]\n      ) {\n        makeTrans = true;\n      }\n      if (makeTrans) {\n        for (let i = 0; i < 4; i++) {\n          outdata[pxPos + i] = 0;\n        }\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nfunction scaleDepth(indata, outdata, width, height, depth) {\n  let maxOutSample = 255;\n  let maxInSample = Math.pow(2, depth) - 1;\n  let pxPos = 0;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      for (let i = 0; i < 4; i++) {\n        outdata[pxPos + i] = Math.floor(\n          (indata[pxPos + i] * maxOutSample) / maxInSample + 0.5\n        );\n      }\n      pxPos += 4;\n    }\n  }\n}\n\nmodule.exports = function (indata, imageData) {\n  let depth = imageData.depth;\n  let width = imageData.width;\n  let height = imageData.height;\n  let colorType = imageData.colorType;\n  let transColor = imageData.transColor;\n  let palette = imageData.palette;\n\n  let outdata = indata; // only different for 16 bits\n\n  if (colorType === 3) {\n    // paletted\n    dePalette(indata, outdata, width, height, palette);\n  } else {\n    if (transColor) {\n      replaceTransparentColor(indata, outdata, width, height, transColor);\n    }\n    // if it needs scaling\n    if (depth !== 8) {\n      // if we need to change the buffer size\n      if (depth === 16) {\n        outdata = Buffer.alloc(width * height * 4);\n      }\n      scaleDepth(indata, outdata, width, height, depth);\n    }\n  }\n  return outdata;\n};\n","\"use strict\";\n\n// Adam 7\n//   0 1 2 3 4 5 6 7\n// 0 x 6 4 6 x 6 4 6\n// 1 7 7 7 7 7 7 7 7\n// 2 5 6 5 6 5 6 5 6\n// 3 7 7 7 7 7 7 7 7\n// 4 3 6 4 6 3 6 4 6\n// 5 7 7 7 7 7 7 7 7\n// 6 5 6 5 6 5 6 5 6\n// 7 7 7 7 7 7 7 7 7\n\nlet imagePasses = [\n  {\n    // pass 1 - 1px\n    x: [0],\n    y: [0],\n  },\n  {\n    // pass 2 - 1px\n    x: [4],\n    y: [0],\n  },\n  {\n    // pass 3 - 2px\n    x: [0, 4],\n    y: [4],\n  },\n  {\n    // pass 4 - 4px\n    x: [2, 6],\n    y: [0, 4],\n  },\n  {\n    // pass 5 - 8px\n    x: [0, 2, 4, 6],\n    y: [2, 6],\n  },\n  {\n    // pass 6 - 16px\n    x: [1, 3, 5, 7],\n    y: [0, 2, 4, 6],\n  },\n  {\n    // pass 7 - 32px\n    x: [0, 1, 2, 3, 4, 5, 6, 7],\n    y: [1, 3, 5, 7],\n  },\n];\n\nexports.getImagePasses = function (width, height) {\n  let images = [];\n  let xLeftOver = width % 8;\n  let yLeftOver = height % 8;\n  let xRepeats = (width - xLeftOver) / 8;\n  let yRepeats = (height - yLeftOver) / 8;\n  for (let i = 0; i < imagePasses.length; i++) {\n    let pass = imagePasses[i];\n    let passWidth = xRepeats * pass.x.length;\n    let passHeight = yRepeats * pass.y.length;\n    for (let j = 0; j < pass.x.length; j++) {\n      if (pass.x[j] < xLeftOver) {\n        passWidth++;\n      } else {\n        break;\n      }\n    }\n    for (let j = 0; j < pass.y.length; j++) {\n      if (pass.y[j] < yLeftOver) {\n        passHeight++;\n      } else {\n        break;\n      }\n    }\n    if (passWidth > 0 && passHeight > 0) {\n      images.push({ width: passWidth, height: passHeight, index: i });\n    }\n  }\n  return images;\n};\n\nexports.getInterlaceIterator = function (width) {\n  return function (x, y, pass) {\n    let outerXLeftOver = x % imagePasses[pass].x.length;\n    let outerX =\n      ((x - outerXLeftOver) / imagePasses[pass].x.length) * 8 +\n      imagePasses[pass].x[outerXLeftOver];\n    let outerYLeftOver = y % imagePasses[pass].y.length;\n    let outerY =\n      ((y - outerYLeftOver) / imagePasses[pass].y.length) * 8 +\n      imagePasses[pass].y[outerYLeftOver];\n    return outerX * 4 + outerY * width * 4;\n  };\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nlet PackerAsync = (module.exports = function (opt) {\n  Stream.call(this);\n\n  let options = opt || {};\n\n  this._packer = new Packer(options);\n  this._deflate = this._packer.createDeflate();\n\n  this.readable = true;\n});\nutil.inherits(PackerAsync, Stream);\n\nPackerAsync.prototype.pack = function (data, width, height, gamma) {\n  // Signature\n  this.emit(\"data\", Buffer.from(constants.PNG_SIGNATURE));\n  this.emit(\"data\", this._packer.packIHDR(width, height));\n\n  if (gamma) {\n    this.emit(\"data\", this._packer.packGAMA(gamma));\n  }\n\n  let filteredData = this._packer.filterData(data, width, height);\n\n  // compress it\n  this._deflate.on(\"error\", this.emit.bind(this, \"error\"));\n\n  this._deflate.on(\n    \"data\",\n    function (compressedData) {\n      this.emit(\"data\", this._packer.packIDAT(compressedData));\n    }.bind(this)\n  );\n\n  this._deflate.on(\n    \"end\",\n    function () {\n      this.emit(\"data\", this._packer.packIEND());\n      this.emit(\"end\");\n    }.bind(this)\n  );\n\n  this._deflate.end(filteredData);\n};\n","\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet constants = require(\"./constants\");\nlet Packer = require(\"./packer\");\n\nmodule.exports = function (metaData, opt) {\n  if (!hasSyncZlib) {\n    throw new Error(\n      \"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\"\n    );\n  }\n\n  let options = opt || {};\n\n  let packer = new Packer(options);\n\n  let chunks = [];\n\n  // Signature\n  chunks.push(Buffer.from(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  let filteredData = packer.filterData(\n    metaData.data,\n    metaData.width,\n    metaData.height\n  );\n\n  // compress it\n  let compressedData = zlib.deflateSync(\n    filteredData,\n    packer.getDeflateOptions()\n  );\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error(\"bad png - invalid compressed data response\");\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n","\"use strict\";\n\nlet constants = require(\"./constants\");\nlet CrcStream = require(\"./crc\");\nlet bitPacker = require(\"./bitpacker\");\nlet filter = require(\"./filter-pack\");\nlet zlib = require(\"zlib\");\n\nlet Packer = (module.exports = function (options) {\n  this._options = options;\n\n  options.deflateChunkSize = options.deflateChunkSize || 32 * 1024;\n  options.deflateLevel =\n    options.deflateLevel != null ? options.deflateLevel : 9;\n  options.deflateStrategy =\n    options.deflateStrategy != null ? options.deflateStrategy : 3;\n  options.inputHasAlpha =\n    options.inputHasAlpha != null ? options.inputHasAlpha : true;\n  options.deflateFactory = options.deflateFactory || zlib.createDeflate;\n  options.bitDepth = options.bitDepth || 8;\n  // This is outputColorType\n  options.colorType =\n    typeof options.colorType === \"number\"\n      ? options.colorType\n      : constants.COLORTYPE_COLOR_ALPHA;\n  options.inputColorType =\n    typeof options.inputColorType === \"number\"\n      ? options.inputColorType\n      : constants.COLORTYPE_COLOR_ALPHA;\n\n  if (\n    [\n      constants.COLORTYPE_GRAYSCALE,\n      constants.COLORTYPE_COLOR,\n      constants.COLORTYPE_COLOR_ALPHA,\n      constants.COLORTYPE_ALPHA,\n    ].indexOf(options.colorType) === -1\n  ) {\n    throw new Error(\n      \"option color type:\" + options.colorType + \" is not supported at present\"\n    );\n  }\n  if (\n    [\n      constants.COLORTYPE_GRAYSCALE,\n      constants.COLORTYPE_COLOR,\n      constants.COLORTYPE_COLOR_ALPHA,\n      constants.COLORTYPE_ALPHA,\n    ].indexOf(options.inputColorType) === -1\n  ) {\n    throw new Error(\n      \"option input color type:\" +\n        options.inputColorType +\n        \" is not supported at present\"\n    );\n  }\n  if (options.bitDepth !== 8 && options.bitDepth !== 16) {\n    throw new Error(\n      \"option bit depth:\" + options.bitDepth + \" is not supported at present\"\n    );\n  }\n});\n\nPacker.prototype.getDeflateOptions = function () {\n  return {\n    chunkSize: this._options.deflateChunkSize,\n    level: this._options.deflateLevel,\n    strategy: this._options.deflateStrategy,\n  };\n};\n\nPacker.prototype.createDeflate = function () {\n  return this._options.deflateFactory(this.getDeflateOptions());\n};\n\nPacker.prototype.filterData = function (data, width, height) {\n  // convert to correct format for filtering (e.g. right bpp and bit depth)\n  let packedData = bitPacker(data, width, height, this._options);\n\n  // filter pixel data\n  let bpp = constants.COLORTYPE_TO_BPP_MAP[this._options.colorType];\n  let filteredData = filter(packedData, width, height, this._options, bpp);\n  return filteredData;\n};\n\nPacker.prototype._packChunk = function (type, data) {\n  let len = data ? data.length : 0;\n  let buf = Buffer.alloc(len + 12);\n\n  buf.writeUInt32BE(len, 0);\n  buf.writeUInt32BE(type, 4);\n\n  if (data) {\n    data.copy(buf, 8);\n  }\n\n  buf.writeInt32BE(\n    CrcStream.crc32(buf.slice(4, buf.length - 4)),\n    buf.length - 4\n  );\n  return buf;\n};\n\nPacker.prototype.packGAMA = function (gamma) {\n  let buf = Buffer.alloc(4);\n  buf.writeUInt32BE(Math.floor(gamma * constants.GAMMA_DIVISION), 0);\n  return this._packChunk(constants.TYPE_gAMA, buf);\n};\n\nPacker.prototype.packIHDR = function (width, height) {\n  let buf = Buffer.alloc(13);\n  buf.writeUInt32BE(width, 0);\n  buf.writeUInt32BE(height, 4);\n  buf[8] = this._options.bitDepth; // Bit depth\n  buf[9] = this._options.colorType; // colorType\n  buf[10] = 0; // compression\n  buf[11] = 0; // filter\n  buf[12] = 0; // interlace\n\n  return this._packChunk(constants.TYPE_IHDR, buf);\n};\n\nPacker.prototype.packIDAT = function (data) {\n  return this._packChunk(constants.TYPE_IDAT, data);\n};\n\nPacker.prototype.packIEND = function () {\n  return this._packChunk(constants.TYPE_IEND, null);\n};\n","\"use strict\";\n\nmodule.exports = function paethPredictor(left, above, upLeft) {\n  let paeth = left + above - upLeft;\n  let pLeft = Math.abs(paeth - left);\n  let pAbove = Math.abs(paeth - above);\n  let pUpLeft = Math.abs(paeth - upLeft);\n\n  if (pLeft <= pAbove && pLeft <= pUpLeft) {\n    return left;\n  }\n  if (pAbove <= pUpLeft) {\n    return above;\n  }\n  return upLeft;\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet zlib = require(\"zlib\");\nlet ChunkStream = require(\"./chunkstream\");\nlet FilterAsync = require(\"./filter-parse-async\");\nlet Parser = require(\"./parser\");\nlet bitmapper = require(\"./bitmapper\");\nlet formatNormaliser = require(\"./format-normaliser\");\n\nlet ParserAsync = (module.exports = function (options) {\n  ChunkStream.call(this);\n\n  this._parser = new Parser(options, {\n    read: this.read.bind(this),\n    error: this._handleError.bind(this),\n    metadata: this._handleMetaData.bind(this),\n    gamma: this.emit.bind(this, \"gamma\"),\n    palette: this._handlePalette.bind(this),\n    transColor: this._handleTransColor.bind(this),\n    finished: this._finished.bind(this),\n    inflateData: this._inflateData.bind(this),\n    simpleTransparency: this._simpleTransparency.bind(this),\n    headersFinished: this._headersFinished.bind(this),\n  });\n  this._options = options;\n  this.writable = true;\n\n  this._parser.start();\n});\nutil.inherits(ParserAsync, ChunkStream);\n\nParserAsync.prototype._handleError = function (err) {\n  this.emit(\"error\", err);\n\n  this.writable = false;\n\n  this.destroy();\n\n  if (this._inflate && this._inflate.destroy) {\n    this._inflate.destroy();\n  }\n\n  if (this._filter) {\n    this._filter.destroy();\n    // For backward compatibility with Node 7 and below.\n    // Suppress errors due to _inflate calling write() even after\n    // it's destroy()'ed.\n    this._filter.on(\"error\", function () {});\n  }\n\n  this.errord = true;\n};\n\nParserAsync.prototype._inflateData = function (data) {\n  if (!this._inflate) {\n    if (this._bitmapInfo.interlace) {\n      this._inflate = zlib.createInflate();\n\n      this._inflate.on(\"error\", this.emit.bind(this, \"error\"));\n      this._filter.on(\"complete\", this._complete.bind(this));\n\n      this._inflate.pipe(this._filter);\n    } else {\n      let rowSize =\n        ((this._bitmapInfo.width *\n          this._bitmapInfo.bpp *\n          this._bitmapInfo.depth +\n          7) >>\n          3) +\n        1;\n      let imageSize = rowSize * this._bitmapInfo.height;\n      let chunkSize = Math.max(imageSize, zlib.Z_MIN_CHUNK);\n\n      this._inflate = zlib.createInflate({ chunkSize: chunkSize });\n      let leftToInflate = imageSize;\n\n      let emitError = this.emit.bind(this, \"error\");\n      this._inflate.on(\"error\", function (err) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        emitError(err);\n      });\n      this._filter.on(\"complete\", this._complete.bind(this));\n\n      let filterWrite = this._filter.write.bind(this._filter);\n      this._inflate.on(\"data\", function (chunk) {\n        if (!leftToInflate) {\n          return;\n        }\n\n        if (chunk.length > leftToInflate) {\n          chunk = chunk.slice(0, leftToInflate);\n        }\n\n        leftToInflate -= chunk.length;\n\n        filterWrite(chunk);\n      });\n\n      this._inflate.on(\"end\", this._filter.end.bind(this._filter));\n    }\n  }\n  this._inflate.write(data);\n};\n\nParserAsync.prototype._handleMetaData = function (metaData) {\n  this._metaData = metaData;\n  this._bitmapInfo = Object.create(metaData);\n\n  this._filter = new FilterAsync(this._bitmapInfo);\n};\n\nParserAsync.prototype._handleTransColor = function (transColor) {\n  this._bitmapInfo.transColor = transColor;\n};\n\nParserAsync.prototype._handlePalette = function (palette) {\n  this._bitmapInfo.palette = palette;\n};\n\nParserAsync.prototype._simpleTransparency = function () {\n  this._metaData.alpha = true;\n};\n\nParserAsync.prototype._headersFinished = function () {\n  // Up until this point, we don't know if we have a tRNS chunk (alpha)\n  // so we can't emit metadata any earlier\n  this.emit(\"metadata\", this._metaData);\n};\n\nParserAsync.prototype._finished = function () {\n  if (this.errord) {\n    return;\n  }\n\n  if (!this._inflate) {\n    this.emit(\"error\", \"No Inflate block\");\n  } else {\n    // no more data to inflate\n    this._inflate.end();\n  }\n};\n\nParserAsync.prototype._complete = function (filteredData) {\n  if (this.errord) {\n    return;\n  }\n\n  let normalisedBitmapData;\n\n  try {\n    let bitmapData = bitmapper.dataToBitMap(filteredData, this._bitmapInfo);\n\n    normalisedBitmapData = formatNormaliser(bitmapData, this._bitmapInfo);\n    bitmapData = null;\n  } catch (ex) {\n    this._handleError(ex);\n    return;\n  }\n\n  this.emit(\"parsed\", normalisedBitmapData);\n};\n","\"use strict\";\n\nlet hasSyncZlib = true;\nlet zlib = require(\"zlib\");\nlet inflateSync = require(\"./sync-inflate\");\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nlet SyncReader = require(\"./sync-reader\");\nlet FilterSync = require(\"./filter-parse-sync\");\nlet Parser = require(\"./parser\");\nlet bitmapper = require(\"./bitmapper\");\nlet formatNormaliser = require(\"./format-normaliser\");\n\nmodule.exports = function (buffer, options) {\n  if (!hasSyncZlib) {\n    throw new Error(\n      \"To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0\"\n    );\n  }\n\n  let err;\n  function handleError(_err_) {\n    err = _err_;\n  }\n\n  let metaData;\n  function handleMetaData(_metaData_) {\n    metaData = _metaData_;\n  }\n\n  function handleTransColor(transColor) {\n    metaData.transColor = transColor;\n  }\n\n  function handlePalette(palette) {\n    metaData.palette = palette;\n  }\n\n  function handleSimpleTransparency() {\n    metaData.alpha = true;\n  }\n\n  let gamma;\n  function handleGamma(_gamma_) {\n    gamma = _gamma_;\n  }\n\n  let inflateDataList = [];\n  function handleInflateData(inflatedData) {\n    inflateDataList.push(inflatedData);\n  }\n\n  let reader = new SyncReader(buffer);\n\n  let parser = new Parser(options, {\n    read: reader.read.bind(reader),\n    error: handleError,\n    metadata: handleMetaData,\n    gamma: handleGamma,\n    palette: handlePalette,\n    transColor: handleTransColor,\n    inflateData: handleInflateData,\n    simpleTransparency: handleSimpleTransparency,\n  });\n\n  parser.start();\n  reader.process();\n\n  if (err) {\n    throw err;\n  }\n\n  //join together the inflate datas\n  let inflateData = Buffer.concat(inflateDataList);\n  inflateDataList.length = 0;\n\n  let inflatedData;\n  if (metaData.interlace) {\n    inflatedData = zlib.inflateSync(inflateData);\n  } else {\n    let rowSize =\n      ((metaData.width * metaData.bpp * metaData.depth + 7) >> 3) + 1;\n    let imageSize = rowSize * metaData.height;\n    inflatedData = inflateSync(inflateData, {\n      chunkSize: imageSize,\n      maxLength: imageSize,\n    });\n  }\n  inflateData = null;\n\n  if (!inflatedData || !inflatedData.length) {\n    throw new Error(\"bad png - invalid inflate data response\");\n  }\n\n  let unfilteredData = FilterSync.process(inflatedData, metaData);\n  inflateData = null;\n\n  let bitmapData = bitmapper.dataToBitMap(unfilteredData, metaData);\n  unfilteredData = null;\n\n  let normalisedBitmapData = formatNormaliser(bitmapData, metaData);\n\n  metaData.data = normalisedBitmapData;\n  metaData.gamma = gamma || 0;\n\n  return metaData;\n};\n","\"use strict\";\n\nlet constants = require(\"./constants\");\nlet CrcCalculator = require(\"./crc\");\n\nlet Parser = (module.exports = function (options, dependencies) {\n  this._options = options;\n  options.checkCRC = options.checkCRC !== false;\n\n  this._hasIHDR = false;\n  this._hasIEND = false;\n  this._emittedHeadersFinished = false;\n\n  // input flags/metadata\n  this._palette = [];\n  this._colorType = 0;\n\n  this._chunks = {};\n  this._chunks[constants.TYPE_IHDR] = this._handleIHDR.bind(this);\n  this._chunks[constants.TYPE_IEND] = this._handleIEND.bind(this);\n  this._chunks[constants.TYPE_IDAT] = this._handleIDAT.bind(this);\n  this._chunks[constants.TYPE_PLTE] = this._handlePLTE.bind(this);\n  this._chunks[constants.TYPE_tRNS] = this._handleTRNS.bind(this);\n  this._chunks[constants.TYPE_gAMA] = this._handleGAMA.bind(this);\n\n  this.read = dependencies.read;\n  this.error = dependencies.error;\n  this.metadata = dependencies.metadata;\n  this.gamma = dependencies.gamma;\n  this.transColor = dependencies.transColor;\n  this.palette = dependencies.palette;\n  this.parsed = dependencies.parsed;\n  this.inflateData = dependencies.inflateData;\n  this.finished = dependencies.finished;\n  this.simpleTransparency = dependencies.simpleTransparency;\n  this.headersFinished = dependencies.headersFinished || function () {};\n});\n\nParser.prototype.start = function () {\n  this.read(constants.PNG_SIGNATURE.length, this._parseSignature.bind(this));\n};\n\nParser.prototype._parseSignature = function (data) {\n  let signature = constants.PNG_SIGNATURE;\n\n  for (let i = 0; i < signature.length; i++) {\n    if (data[i] !== signature[i]) {\n      this.error(new Error(\"Invalid file signature\"));\n      return;\n    }\n  }\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._parseChunkBegin = function (data) {\n  // chunk content length\n  let length = data.readUInt32BE(0);\n\n  // chunk type\n  let type = data.readUInt32BE(4);\n  let name = \"\";\n  for (let i = 4; i < 8; i++) {\n    name += String.fromCharCode(data[i]);\n  }\n\n  //console.log('chunk ', name, length);\n\n  // chunk flags\n  let ancillary = Boolean(data[4] & 0x20); // or critical\n  //    priv = Boolean(data[5] & 0x20), // or public\n  //    safeToCopy = Boolean(data[7] & 0x20); // or unsafe\n\n  if (!this._hasIHDR && type !== constants.TYPE_IHDR) {\n    this.error(new Error(\"Expected IHDR on beggining\"));\n    return;\n  }\n\n  this._crc = new CrcCalculator();\n  this._crc.write(Buffer.from(name));\n\n  if (this._chunks[type]) {\n    return this._chunks[type](length);\n  }\n\n  if (!ancillary) {\n    this.error(new Error(\"Unsupported critical chunk type \" + name));\n    return;\n  }\n\n  this.read(length + 4, this._skipChunk.bind(this));\n};\n\nParser.prototype._skipChunk = function (/*data*/) {\n  this.read(8, this._parseChunkBegin.bind(this));\n};\n\nParser.prototype._handleChunkEnd = function () {\n  this.read(4, this._parseChunkEnd.bind(this));\n};\n\nParser.prototype._parseChunkEnd = function (data) {\n  let fileCrc = data.readInt32BE(0);\n  let calcCrc = this._crc.crc32();\n\n  // check CRC\n  if (this._options.checkCRC && calcCrc !== fileCrc) {\n    this.error(new Error(\"Crc error - \" + fileCrc + \" - \" + calcCrc));\n    return;\n  }\n\n  if (!this._hasIEND) {\n    this.read(8, this._parseChunkBegin.bind(this));\n  }\n};\n\nParser.prototype._handleIHDR = function (length) {\n  this.read(length, this._parseIHDR.bind(this));\n};\nParser.prototype._parseIHDR = function (data) {\n  this._crc.write(data);\n\n  let width = data.readUInt32BE(0);\n  let height = data.readUInt32BE(4);\n  let depth = data[8];\n  let colorType = data[9]; // bits: 1 palette, 2 color, 4 alpha\n  let compr = data[10];\n  let filter = data[11];\n  let interlace = data[12];\n\n  // console.log('    width', width, 'height', height,\n  //     'depth', depth, 'colorType', colorType,\n  //     'compr', compr, 'filter', filter, 'interlace', interlace\n  // );\n\n  if (\n    depth !== 8 &&\n    depth !== 4 &&\n    depth !== 2 &&\n    depth !== 1 &&\n    depth !== 16\n  ) {\n    this.error(new Error(\"Unsupported bit depth \" + depth));\n    return;\n  }\n  if (!(colorType in constants.COLORTYPE_TO_BPP_MAP)) {\n    this.error(new Error(\"Unsupported color type\"));\n    return;\n  }\n  if (compr !== 0) {\n    this.error(new Error(\"Unsupported compression method\"));\n    return;\n  }\n  if (filter !== 0) {\n    this.error(new Error(\"Unsupported filter method\"));\n    return;\n  }\n  if (interlace !== 0 && interlace !== 1) {\n    this.error(new Error(\"Unsupported interlace method\"));\n    return;\n  }\n\n  this._colorType = colorType;\n\n  let bpp = constants.COLORTYPE_TO_BPP_MAP[this._colorType];\n\n  this._hasIHDR = true;\n\n  this.metadata({\n    width: width,\n    height: height,\n    depth: depth,\n    interlace: Boolean(interlace),\n    palette: Boolean(colorType & constants.COLORTYPE_PALETTE),\n    color: Boolean(colorType & constants.COLORTYPE_COLOR),\n    alpha: Boolean(colorType & constants.COLORTYPE_ALPHA),\n    bpp: bpp,\n    colorType: colorType,\n  });\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handlePLTE = function (length) {\n  this.read(length, this._parsePLTE.bind(this));\n};\nParser.prototype._parsePLTE = function (data) {\n  this._crc.write(data);\n\n  let entries = Math.floor(data.length / 3);\n  // console.log('Palette:', entries);\n\n  for (let i = 0; i < entries; i++) {\n    this._palette.push([data[i * 3], data[i * 3 + 1], data[i * 3 + 2], 0xff]);\n  }\n\n  this.palette(this._palette);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleTRNS = function (length) {\n  this.simpleTransparency();\n  this.read(length, this._parseTRNS.bind(this));\n};\nParser.prototype._parseTRNS = function (data) {\n  this._crc.write(data);\n\n  // palette\n  if (this._colorType === constants.COLORTYPE_PALETTE_COLOR) {\n    if (this._palette.length === 0) {\n      this.error(new Error(\"Transparency chunk must be after palette\"));\n      return;\n    }\n    if (data.length > this._palette.length) {\n      this.error(new Error(\"More transparent colors than palette size\"));\n      return;\n    }\n    for (let i = 0; i < data.length; i++) {\n      this._palette[i][3] = data[i];\n    }\n    this.palette(this._palette);\n  }\n\n  // for colorType 0 (grayscale) and 2 (rgb)\n  // there might be one gray/color defined as transparent\n  if (this._colorType === constants.COLORTYPE_GRAYSCALE) {\n    // grey, 2 bytes\n    this.transColor([data.readUInt16BE(0)]);\n  }\n  if (this._colorType === constants.COLORTYPE_COLOR) {\n    this.transColor([\n      data.readUInt16BE(0),\n      data.readUInt16BE(2),\n      data.readUInt16BE(4),\n    ]);\n  }\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleGAMA = function (length) {\n  this.read(length, this._parseGAMA.bind(this));\n};\nParser.prototype._parseGAMA = function (data) {\n  this._crc.write(data);\n  this.gamma(data.readUInt32BE(0) / constants.GAMMA_DIVISION);\n\n  this._handleChunkEnd();\n};\n\nParser.prototype._handleIDAT = function (length) {\n  if (!this._emittedHeadersFinished) {\n    this._emittedHeadersFinished = true;\n    this.headersFinished();\n  }\n  this.read(-length, this._parseIDAT.bind(this, length));\n};\nParser.prototype._parseIDAT = function (length, data) {\n  this._crc.write(data);\n\n  if (\n    this._colorType === constants.COLORTYPE_PALETTE_COLOR &&\n    this._palette.length === 0\n  ) {\n    throw new Error(\"Expected palette not found\");\n  }\n\n  this.inflateData(data);\n  let leftOverLength = length - data.length;\n\n  if (leftOverLength > 0) {\n    this._handleIDAT(leftOverLength);\n  } else {\n    this._handleChunkEnd();\n  }\n};\n\nParser.prototype._handleIEND = function (length) {\n  this.read(length, this._parseIEND.bind(this));\n};\nParser.prototype._parseIEND = function (data) {\n  this._crc.write(data);\n\n  this._hasIEND = true;\n  this._handleChunkEnd();\n\n  if (this.finished) {\n    this.finished();\n  }\n};\n","\"use strict\";\n\nlet parse = require(\"./parser-sync\");\nlet pack = require(\"./packer-sync\");\n\nexports.read = function (buffer, options) {\n  return parse(buffer, options || {});\n};\n\nexports.write = function (png, options) {\n  return pack(png, options);\n};\n","\"use strict\";\n\nlet util = require(\"util\");\nlet Stream = require(\"stream\");\nlet Parser = require(\"./parser-async\");\nlet Packer = require(\"./packer-async\");\nlet PNGSync = require(\"./png-sync\");\n\nlet PNG = (exports.PNG = function (options) {\n  Stream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  this.width = options.width | 0;\n  this.height = options.height | 0;\n\n  this.data =\n    this.width > 0 && this.height > 0\n      ? Buffer.alloc(4 * this.width * this.height)\n      : null;\n\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n\n  this.gamma = 0;\n  this.readable = this.writable = true;\n\n  this._parser = new Parser(options);\n\n  this._parser.on(\"error\", this.emit.bind(this, \"error\"));\n  this._parser.on(\"close\", this._handleClose.bind(this));\n  this._parser.on(\"metadata\", this._metadata.bind(this));\n  this._parser.on(\"gamma\", this._gamma.bind(this));\n  this._parser.on(\n    \"parsed\",\n    function (data) {\n      this.data = data;\n      this.emit(\"parsed\", data);\n    }.bind(this)\n  );\n\n  this._packer = new Packer(options);\n  this._packer.on(\"data\", this.emit.bind(this, \"data\"));\n  this._packer.on(\"end\", this.emit.bind(this, \"end\"));\n  this._parser.on(\"close\", this._handleClose.bind(this));\n  this._packer.on(\"error\", this.emit.bind(this, \"error\"));\n});\nutil.inherits(PNG, Stream);\n\nPNG.sync = PNGSync;\n\nPNG.prototype.pack = function () {\n  if (!this.data || !this.data.length) {\n    this.emit(\"error\", \"No data provided\");\n    return this;\n  }\n\n  process.nextTick(\n    function () {\n      this._packer.pack(this.data, this.width, this.height, this.gamma);\n    }.bind(this)\n  );\n\n  return this;\n};\n\nPNG.prototype.parse = function (data, callback) {\n  if (callback) {\n    let onParsed, onError;\n\n    onParsed = function (parsedData) {\n      this.removeListener(\"error\", onError);\n\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n\n    onError = function (err) {\n      this.removeListener(\"parsed\", onParsed);\n\n      callback(err, null);\n    }.bind(this);\n\n    this.once(\"parsed\", onParsed);\n    this.once(\"error\", onError);\n  }\n\n  this.end(data);\n  return this;\n};\n\nPNG.prototype.write = function (data) {\n  this._parser.write(data);\n  return true;\n};\n\nPNG.prototype.end = function (data) {\n  this._parser.end(data);\n};\n\nPNG.prototype._metadata = function (metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n\n  this.emit(\"metadata\", metadata);\n};\n\nPNG.prototype._gamma = function (gamma) {\n  this.gamma = gamma;\n};\n\nPNG.prototype._handleClose = function () {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit(\"close\");\n  }\n};\n\nPNG.bitblt = function (src, dst, srcX, srcY, width, height, deltaX, deltaY) {\n  // eslint-disable-line max-params\n  // coerce pixel dimensions to integers (also coerces undefined -> 0):\n  /* eslint-disable no-param-reassign */\n  srcX |= 0;\n  srcY |= 0;\n  width |= 0;\n  height |= 0;\n  deltaX |= 0;\n  deltaY |= 0;\n  /* eslint-enable no-param-reassign */\n\n  if (\n    srcX > src.width ||\n    srcY > src.height ||\n    srcX + width > src.width ||\n    srcY + height > src.height\n  ) {\n    throw new Error(\"bitblt reading outside image\");\n  }\n\n  if (\n    deltaX > dst.width ||\n    deltaY > dst.height ||\n    deltaX + width > dst.width ||\n    deltaY + height > dst.height\n  ) {\n    throw new Error(\"bitblt writing outside image\");\n  }\n\n  for (let y = 0; y < height; y++) {\n    src.data.copy(\n      dst.data,\n      ((deltaY + y) * dst.width + deltaX) << 2,\n      ((srcY + y) * src.width + srcX) << 2,\n      ((srcY + y) * src.width + srcX + width) << 2\n    );\n  }\n};\n\nPNG.prototype.bitblt = function (\n  dst,\n  srcX,\n  srcY,\n  width,\n  height,\n  deltaX,\n  deltaY\n) {\n  // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\n\nPNG.adjustGamma = function (src) {\n  if (src.gamma) {\n    for (let y = 0; y < src.height; y++) {\n      for (let x = 0; x < src.width; x++) {\n        let idx = (src.width * y + x) << 2;\n\n        for (let i = 0; i < 3; i++) {\n          let sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\n\nPNG.prototype.adjustGamma = function () {\n  PNG.adjustGamma(this);\n};\n","\"use strict\";\n\nlet assert = require(\"assert\").ok;\nlet zlib = require(\"zlib\");\nlet util = require(\"util\");\n\nlet kMaxLength = require(\"buffer\").kMaxLength;\n\nfunction Inflate(opts) {\n  if (!(this instanceof Inflate)) {\n    return new Inflate(opts);\n  }\n\n  if (opts && opts.chunkSize < zlib.Z_MIN_CHUNK) {\n    opts.chunkSize = zlib.Z_MIN_CHUNK;\n  }\n\n  zlib.Inflate.call(this, opts);\n\n  // Node 8 --> 9 compatibility check\n  this._offset = this._offset === undefined ? this._outOffset : this._offset;\n  this._buffer = this._buffer || this._outBuffer;\n\n  if (opts && opts.maxLength != null) {\n    this._maxLength = opts.maxLength;\n  }\n}\n\nfunction createInflate(opts) {\n  return new Inflate(opts);\n}\n\nfunction _close(engine, callback) {\n  if (callback) {\n    process.nextTick(callback);\n  }\n\n  // Caller may invoke .close after a zlib error (which will null _handle).\n  if (!engine._handle) {\n    return;\n  }\n\n  engine._handle.close();\n  engine._handle = null;\n}\n\nInflate.prototype._processChunk = function (chunk, flushFlag, asyncCb) {\n  if (typeof asyncCb === \"function\") {\n    return zlib.Inflate._processChunk.call(this, chunk, flushFlag, asyncCb);\n  }\n\n  let self = this;\n\n  let availInBefore = chunk && chunk.length;\n  let availOutBefore = this._chunkSize - this._offset;\n  let leftToInflate = this._maxLength;\n  let inOff = 0;\n\n  let buffers = [];\n  let nread = 0;\n\n  let error;\n  this.on(\"error\", function (err) {\n    error = err;\n  });\n\n  function handleChunk(availInAfter, availOutAfter) {\n    if (self._hadError) {\n      return;\n    }\n\n    let have = availOutBefore - availOutAfter;\n    assert(have >= 0, \"have should not go down\");\n\n    if (have > 0) {\n      let out = self._buffer.slice(self._offset, self._offset + have);\n      self._offset += have;\n\n      if (out.length > leftToInflate) {\n        out = out.slice(0, leftToInflate);\n      }\n\n      buffers.push(out);\n      nread += out.length;\n      leftToInflate -= out.length;\n\n      if (leftToInflate === 0) {\n        return false;\n      }\n    }\n\n    if (availOutAfter === 0 || self._offset >= self._chunkSize) {\n      availOutBefore = self._chunkSize;\n      self._offset = 0;\n      self._buffer = Buffer.allocUnsafe(self._chunkSize);\n    }\n\n    if (availOutAfter === 0) {\n      inOff += availInBefore - availInAfter;\n      availInBefore = availInAfter;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  assert(this._handle, \"zlib binding closed\");\n  let res;\n  do {\n    res = this._handle.writeSync(\n      flushFlag,\n      chunk, // in\n      inOff, // in_off\n      availInBefore, // in_len\n      this._buffer, // out\n      this._offset, //out_off\n      availOutBefore\n    ); // out_len\n    // Node 8 --> 9 compatibility check\n    res = res || this._writeState;\n  } while (!this._hadError && handleChunk(res[0], res[1]));\n\n  if (this._hadError) {\n    throw error;\n  }\n\n  if (nread >= kMaxLength) {\n    _close(this);\n    throw new RangeError(\n      \"Cannot create final Buffer. It would be larger than 0x\" +\n        kMaxLength.toString(16) +\n        \" bytes\"\n    );\n  }\n\n  let buf = Buffer.concat(buffers, nread);\n  _close(this);\n\n  return buf;\n};\n\nutil.inherits(Inflate, zlib.Inflate);\n\nfunction zlibBufferSync(engine, buffer) {\n  if (typeof buffer === \"string\") {\n    buffer = Buffer.from(buffer);\n  }\n  if (!(buffer instanceof Buffer)) {\n    throw new TypeError(\"Not a string or buffer\");\n  }\n\n  let flushFlag = engine._finishFlushFlag;\n  if (flushFlag == null) {\n    flushFlag = zlib.Z_FINISH;\n  }\n\n  return engine._processChunk(buffer, flushFlag);\n}\n\nfunction inflateSync(buffer, opts) {\n  return zlibBufferSync(new Inflate(opts), buffer);\n}\n\nmodule.exports = exports = inflateSync;\nexports.Inflate = Inflate;\nexports.createInflate = createInflate;\nexports.inflateSync = inflateSync;\n","\"use strict\";\n\nlet SyncReader = (module.exports = function (buffer) {\n  this._buffer = buffer;\n  this._reads = [];\n});\n\nSyncReader.prototype.read = function (length, callback) {\n  this._reads.push({\n    length: Math.abs(length), // if length < 0 then at most this length\n    allowLess: length < 0,\n    func: callback,\n  });\n};\n\nSyncReader.prototype.process = function () {\n  // as long as there is any data and read requests\n  while (this._reads.length > 0 && this._buffer.length) {\n    let read = this._reads[0];\n\n    if (\n      this._buffer.length &&\n      (this._buffer.length >= read.length || read.allowLess)\n    ) {\n      // ok there is any data so that we can satisfy this request\n      this._reads.shift(); // == read\n\n      let buf = this._buffer;\n\n      this._buffer = buf.slice(read.length);\n\n      read.func.call(this, buf.slice(0, read.length));\n    } else {\n      break;\n    }\n  }\n\n  if (this._reads.length > 0) {\n    return new Error(\"There are some read requests waitng on finished stream\");\n  }\n\n  if (this._buffer.length > 0) {\n    return new Error(\"unrecognised content at end of stream\");\n  }\n};\n","const assert = require(\"assert\")\nconst path = require(\"path\")\nconst fs = require(\"fs\")\nlet glob = undefined\ntry {\n  glob = require(\"glob\")\n} catch (_err) {\n  // treat glob as optional.\n}\n\nconst defaultGlobOpts = {\n  nosort: true,\n  silent: true\n}\n\n// for EMFILE handling\nlet timeout = 0\n\nconst isWindows = (process.platform === \"win32\")\n\nconst defaults = options => {\n  const methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(m => {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n  options.emfileWait = options.emfileWait || 1000\n  if (options.glob === false) {\n    options.disableGlob = true\n  }\n  if (options.disableGlob !== true && glob === undefined) {\n    throw Error('glob dependency not found, set `options.disableGlob = true` if intentional')\n  }\n  options.disableGlob = options.disableGlob || false\n  options.glob = options.glob || defaultGlobOpts\n}\n\nconst rimraf = (p, options, cb) => {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert.equal(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  let busyTries = 0\n  let errState = null\n  let n = 0\n\n  const next = (er) => {\n    errState = errState || er\n    if (--n === 0)\n      cb(errState)\n  }\n\n  const afterGlob = (er, results) => {\n    if (er)\n      return cb(er)\n\n    n = results.length\n    if (n === 0)\n      return cb()\n\n    results.forEach(p => {\n      const CB = (er) => {\n        if (er) {\n          if ((er.code === \"EBUSY\" || er.code === \"ENOTEMPTY\" || er.code === \"EPERM\") &&\n              busyTries < options.maxBusyTries) {\n            busyTries ++\n            // try again, with the same exact callback as this one.\n            return setTimeout(() => rimraf_(p, options, CB), busyTries * 100)\n          }\n\n          // this one won't happen if graceful-fs is used.\n          if (er.code === \"EMFILE\" && timeout < options.emfileWait) {\n            return setTimeout(() => rimraf_(p, options, CB), timeout ++)\n          }\n\n          // already gone\n          if (er.code === \"ENOENT\") er = null\n        }\n\n        timeout = 0\n        next(er)\n      }\n      rimraf_(p, options, CB)\n    })\n  }\n\n  if (options.disableGlob || !glob.hasMagic(p))\n    return afterGlob(null, [p])\n\n  options.lstat(p, (er, stat) => {\n    if (!er)\n      return afterGlob(null, [p])\n\n    glob(p, options.glob, afterGlob)\n  })\n\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nconst rimraf_ = (p, options, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, (er, st) => {\n    if (er && er.code === \"ENOENT\")\n      return cb(null)\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === \"EPERM\" && isWindows)\n      fixWinEPERM(p, options, er, cb)\n\n    if (st && st.isDirectory())\n      return rmdir(p, options, er, cb)\n\n    options.unlink(p, er => {\n      if (er) {\n        if (er.code === \"ENOENT\")\n          return cb(null)\n        if (er.code === \"EPERM\")\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        if (er.code === \"EISDIR\")\n          return rmdir(p, options, er, cb)\n      }\n      return cb(er)\n    })\n  })\n}\n\nconst fixWinEPERM = (p, options, er, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.chmod(p, 0o666, er2 => {\n    if (er2)\n      cb(er2.code === \"ENOENT\" ? null : er)\n    else\n      options.stat(p, (er3, stats) => {\n        if (er3)\n          cb(er3.code === \"ENOENT\" ? null : er)\n        else if (stats.isDirectory())\n          rmdir(p, options, er, cb)\n        else\n          options.unlink(p, cb)\n      })\n  })\n}\n\nconst fixWinEPERMSync = (p, options, er) => {\n  assert(p)\n  assert(options)\n\n  try {\n    options.chmodSync(p, 0o666)\n  } catch (er2) {\n    if (er2.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  let stats\n  try {\n    stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  if (stats.isDirectory())\n    rmdirSync(p, options, er)\n  else\n    options.unlinkSync(p)\n}\n\nconst rmdir = (p, options, originalEr, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, er => {\n    if (er && (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\"))\n      rmkids(p, options, cb)\n    else if (er && er.code === \"ENOTDIR\")\n      cb(originalEr)\n    else\n      cb(er)\n  })\n}\n\nconst rmkids = (p, options, cb) => {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, (er, files) => {\n    if (er)\n      return cb(er)\n    let n = files.length\n    if (n === 0)\n      return options.rmdir(p, cb)\n    let errState\n    files.forEach(f => {\n      rimraf(path.join(p, f), options, er => {\n        if (errState)\n          return\n        if (er)\n          return cb(errState = er)\n        if (--n === 0)\n          options.rmdir(p, cb)\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nconst rimrafSync = (p, options) => {\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  let results\n\n  if (options.disableGlob || !glob.hasMagic(p)) {\n    results = [p]\n  } else {\n    try {\n      options.lstatSync(p)\n      results = [p]\n    } catch (er) {\n      results = glob.sync(p, options.glob)\n    }\n  }\n\n  if (!results.length)\n    return\n\n  for (let i = 0; i < results.length; i++) {\n    const p = results[i]\n\n    let st\n    try {\n      st = options.lstatSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n\n      // Windows can EPERM on stat.  Life is suffering.\n      if (er.code === \"EPERM\" && isWindows)\n        fixWinEPERMSync(p, options, er)\n    }\n\n    try {\n      // sunos lets the root user unlink directories, which is... weird.\n      if (st && st.isDirectory())\n        rmdirSync(p, options, null)\n      else\n        options.unlinkSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n      if (er.code === \"EPERM\")\n        return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n      if (er.code !== \"EISDIR\")\n        throw er\n\n      rmdirSync(p, options, er)\n    }\n  }\n}\n\nconst rmdirSync = (p, options, originalEr) => {\n  assert(p)\n  assert(options)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === \"ENOENT\")\n      return\n    if (er.code === \"ENOTDIR\")\n      throw originalEr\n    if (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\")\n      rmkidsSync(p, options)\n  }\n}\n\nconst rmkidsSync = (p, options) => {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options))\n\n  // We only end up here once we got ENOTEMPTY at least once, and\n  // at this point, we are guaranteed to have removed all the kids.\n  // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n  // try really hard to delete stuff on windows, because it has a\n  // PROFOUNDLY annoying habit of not closing handles promptly when\n  // files are deleted, resulting in spurious ENOTEMPTY errors.\n  const retries = isWindows ? 100 : 1\n  let i = 0\n  do {\n    let threw = true\n    try {\n      const ret = options.rmdirSync(p, options)\n      threw = false\n      return ret\n    } finally {\n      if (++i < retries && threw)\n        continue\n    }\n  } while (true)\n}\n\nmodule.exports = rimraf\nrimraf.sync = rimrafSync\n","'use strict';\n\nconst escapeStringRegexp = require('escape-string-regexp');\n\nconst natives = [].concat(\n  require('module').builtinModules,\n  'bootstrap_node',\n  'node',\n).map(n => new RegExp(`(?:\\\\((?:node:)?${n}(?:\\\\.js)?:\\\\d+:\\\\d+\\\\)$|^\\\\s*at (?:node:)?${n}(?:\\\\.js)?:\\\\d+:\\\\d+$)`));\n\nnatives.push(\n  /\\((?:node:)?internal\\/[^:]+:\\d+:\\d+\\)$/,\n  /\\s*at (?:node:)?internal\\/[^:]+:\\d+:\\d+$/,\n  /\\/\\.node-spawn-wrap-\\w+-\\w+\\/node:\\d+:\\d+\\)?$/\n);\n\nclass StackUtils {\n  constructor (opts) {\n    opts = {\n      ignoredPackages: [],\n      ...opts\n    };\n\n    if ('internals' in opts === false) {\n      opts.internals = StackUtils.nodeInternals();\n    }\n\n    if ('cwd' in opts === false) {\n      opts.cwd = process.cwd()\n    }\n\n    this._cwd = opts.cwd.replace(/\\\\/g, '/');\n    this._internals = [].concat(\n      opts.internals,\n      ignoredPackagesRegExp(opts.ignoredPackages)\n    );\n\n    this._wrapCallSite = opts.wrapCallSite || false;\n  }\n\n  static nodeInternals () {\n    return [...natives];\n  }\n\n  clean (stack, indent = 0) {\n    indent = ' '.repeat(indent);\n\n    if (!Array.isArray(stack)) {\n      stack = stack.split('\\n');\n    }\n\n    if (!(/^\\s*at /.test(stack[0])) && (/^\\s*at /.test(stack[1]))) {\n      stack = stack.slice(1);\n    }\n\n    let outdent = false;\n    let lastNonAtLine = null;\n    const result = [];\n\n    stack.forEach(st => {\n      st = st.replace(/\\\\/g, '/');\n\n      if (this._internals.some(internal => internal.test(st))) {\n        return;\n      }\n\n      const isAtLine = /^\\s*at /.test(st);\n\n      if (outdent) {\n        st = st.trimEnd().replace(/^(\\s+)at /, '$1');\n      } else {\n        st = st.trim();\n        if (isAtLine) {\n          st = st.slice(3);\n        }\n      }\n\n      st = st.replace(`${this._cwd}/`, '');\n\n      if (st) {\n        if (isAtLine) {\n          if (lastNonAtLine) {\n            result.push(lastNonAtLine);\n            lastNonAtLine = null;\n          }\n\n          result.push(st);\n        } else {\n          outdent = true;\n          lastNonAtLine = st;\n        }\n      }\n    });\n\n    return result.map(line => `${indent}${line}\\n`).join('');\n  }\n\n  captureString (limit, fn = this.captureString) {\n    if (typeof limit === 'function') {\n      fn = limit;\n      limit = Infinity;\n    }\n\n    const {stackTraceLimit} = Error;\n    if (limit) {\n      Error.stackTraceLimit = limit;\n    }\n\n    const obj = {};\n\n    Error.captureStackTrace(obj, fn);\n    const {stack} = obj;\n    Error.stackTraceLimit = stackTraceLimit;\n\n    return this.clean(stack);\n  }\n\n  capture (limit, fn = this.capture) {\n    if (typeof limit === 'function') {\n      fn = limit;\n      limit = Infinity;\n    }\n\n    const {prepareStackTrace, stackTraceLimit} = Error;\n    Error.prepareStackTrace = (obj, site) => {\n      if (this._wrapCallSite) {\n        return site.map(this._wrapCallSite);\n      }\n\n      return site;\n    };\n\n    if (limit) {\n      Error.stackTraceLimit = limit;\n    }\n\n    const obj = {};\n    Error.captureStackTrace(obj, fn);\n    const { stack } = obj;\n    Object.assign(Error, {prepareStackTrace, stackTraceLimit});\n\n    return stack;\n  }\n\n  at (fn = this.at) {\n    const [site] = this.capture(1, fn);\n\n    if (!site) {\n      return {};\n    }\n\n    const res = {\n      line: site.getLineNumber(),\n      column: site.getColumnNumber()\n    };\n\n    setFile(res, site.getFileName(), this._cwd);\n\n    if (site.isConstructor()) {\n      res.constructor = true;\n    }\n\n    if (site.isEval()) {\n      res.evalOrigin = site.getEvalOrigin();\n    }\n\n    // Node v10 stopped with the isNative() on callsites, apparently\n    /* istanbul ignore next */\n    if (site.isNative()) {\n      res.native = true;\n    }\n\n    let typename;\n    try {\n      typename = site.getTypeName();\n    } catch (_) {\n    }\n\n    if (typename && typename !== 'Object' && typename !== '[object Object]') {\n      res.type = typename;\n    }\n\n    const fname = site.getFunctionName();\n    if (fname) {\n      res.function = fname;\n    }\n\n    const meth = site.getMethodName();\n    if (meth && fname !== meth) {\n      res.method = meth;\n    }\n\n    return res;\n  }\n\n  parseLine (line) {\n    const match = line && line.match(re);\n    if (!match) {\n      return null;\n    }\n\n    const ctor = match[1] === 'new';\n    let fname = match[2];\n    const evalOrigin = match[3];\n    const evalFile = match[4];\n    const evalLine = Number(match[5]);\n    const evalCol = Number(match[6]);\n    let file = match[7];\n    const lnum = match[8];\n    const col = match[9];\n    const native = match[10] === 'native';\n    const closeParen = match[11] === ')';\n    let method;\n\n    const res = {};\n\n    if (lnum) {\n      res.line = Number(lnum);\n    }\n\n    if (col) {\n      res.column = Number(col);\n    }\n\n    if (closeParen && file) {\n      // make sure parens are balanced\n      // if we have a file like \"asdf) [as foo] (xyz.js\", then odds are\n      // that the fname should be += \" (asdf) [as foo]\" and the file\n      // should be just \"xyz.js\"\n      // walk backwards from the end to find the last unbalanced (\n      let closes = 0;\n      for (let i = file.length - 1; i > 0; i--) {\n        if (file.charAt(i) === ')') {\n          closes++;\n        } else if (file.charAt(i) === '(' && file.charAt(i - 1) === ' ') {\n          closes--;\n          if (closes === -1 && file.charAt(i - 1) === ' ') {\n            const before = file.slice(0, i - 1);\n            const after = file.slice(i + 1);\n            file = after;\n            fname += ` (${before}`;\n            break;\n          }\n        }\n      }\n    }\n\n    if (fname) {\n      const methodMatch = fname.match(methodRe);\n      if (methodMatch) {\n        fname = methodMatch[1];\n        method = methodMatch[2];\n      }\n    }\n\n    setFile(res, file, this._cwd);\n\n    if (ctor) {\n      res.constructor = true;\n    }\n\n    if (evalOrigin) {\n      res.evalOrigin = evalOrigin;\n      res.evalLine = evalLine;\n      res.evalColumn = evalCol;\n      res.evalFile = evalFile && evalFile.replace(/\\\\/g, '/');\n    }\n\n    if (native) {\n      res.native = true;\n    }\n\n    if (fname) {\n      res.function = fname;\n    }\n\n    if (method && fname !== method) {\n      res.method = method;\n    }\n\n    return res;\n  }\n}\n\nfunction setFile (result, filename, cwd) {\n  if (filename) {\n    filename = filename.replace(/\\\\/g, '/');\n    if (filename.startsWith(`${cwd}/`)) {\n      filename = filename.slice(cwd.length + 1);\n    }\n\n    result.file = filename;\n  }\n}\n\nfunction ignoredPackagesRegExp(ignoredPackages) {\n  if (ignoredPackages.length === 0) {\n    return [];\n  }\n\n  const packages = ignoredPackages.map(mod => escapeStringRegexp(mod));\n\n  return new RegExp(`[\\/\\\\\\\\]node_modules[\\/\\\\\\\\](?:${packages.join('|')})[\\/\\\\\\\\][^:]+:\\\\d+:\\\\d+`)\n}\n\nconst re = new RegExp(\n  '^' +\n    // Sometimes we strip out the '    at' because it's noisy\n  '(?:\\\\s*at )?' +\n    // $1 = ctor if 'new'\n  '(?:(new) )?' +\n    // $2 = function name (can be literally anything)\n    // May contain method at the end as [as xyz]\n  '(?:(.*?) \\\\()?' +\n    // (eval at <anonymous> (file.js:1:1),\n    // $3 = eval origin\n    // $4:$5:$6 are eval file/line/col, but not normally reported\n  '(?:eval at ([^ ]+) \\\\((.+?):(\\\\d+):(\\\\d+)\\\\), )?' +\n    // file:line:col\n    // $7:$8:$9\n    // $10 = 'native' if native\n  '(?:(.+?):(\\\\d+):(\\\\d+)|(native))' +\n    // maybe close the paren, then end\n    // if $11 is ), then we only allow balanced parens in the filename\n    // any imbalance is placed on the fname.  This is a heuristic, and\n    // bound to be incorrect in some edge cases.  The bet is that\n    // having weird characters in method names is more common than\n    // having weird characters in filenames, which seems reasonable.\n  '(\\\\)?)$'\n);\n\nconst methodRe = /^(.*?) \\[as (.*?)\\]$/;\n\nmodule.exports = StackUtils;\n","'use strict';\n\nconst matchOperatorsRegex = /[|\\\\{}()[\\]^$+*?.-]/g;\n\nmodule.exports = string => {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\treturn string.replace(matchOperatorsRegex, '\\\\$&');\n};\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","module.exports = require('./lib/tunnel');\n","'use strict';\n\nvar net = require('net');\nvar tls = require('tls');\nvar http = require('http');\nvar https = require('https');\nvar events = require('events');\nvar assert = require('assert');\nvar util = require('util');\n\n\nexports.httpOverHttp = httpOverHttp;\nexports.httpsOverHttp = httpsOverHttp;\nexports.httpOverHttps = httpOverHttps;\nexports.httpsOverHttps = httpsOverHttps;\n\n\nfunction httpOverHttp(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = http.request;\n  return agent;\n}\n\nfunction httpsOverHttp(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = http.request;\n  agent.createSocket = createSecureSocket;\n  agent.defaultPort = 443;\n  return agent;\n}\n\nfunction httpOverHttps(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = https.request;\n  return agent;\n}\n\nfunction httpsOverHttps(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = https.request;\n  agent.createSocket = createSecureSocket;\n  agent.defaultPort = 443;\n  return agent;\n}\n\n\nfunction TunnelingAgent(options) {\n  var self = this;\n  self.options = options || {};\n  self.proxyOptions = self.options.proxy || {};\n  self.maxSockets = self.options.maxSockets || http.Agent.defaultMaxSockets;\n  self.requests = [];\n  self.sockets = [];\n\n  self.on('free', function onFree(socket, host, port, localAddress) {\n    var options = toOptions(host, port, localAddress);\n    for (var i = 0, len = self.requests.length; i < len; ++i) {\n      var pending = self.requests[i];\n      if (pending.host === options.host && pending.port === options.port) {\n        // Detect the request to connect same origin server,\n        // reuse the connection.\n        self.requests.splice(i, 1);\n        pending.request.onSocket(socket);\n        return;\n      }\n    }\n    socket.destroy();\n    self.removeSocket(socket);\n  });\n}\nutil.inherits(TunnelingAgent, events.EventEmitter);\n\nTunnelingAgent.prototype.addRequest = function addRequest(req, host, port, localAddress) {\n  var self = this;\n  var options = mergeOptions({request: req}, self.options, toOptions(host, port, localAddress));\n\n  if (self.sockets.length >= this.maxSockets) {\n    // We are over limit so we'll add it to the queue.\n    self.requests.push(options);\n    return;\n  }\n\n  // If we are under maxSockets create a new one.\n  self.createSocket(options, function(socket) {\n    socket.on('free', onFree);\n    socket.on('close', onCloseOrRemove);\n    socket.on('agentRemove', onCloseOrRemove);\n    req.onSocket(socket);\n\n    function onFree() {\n      self.emit('free', socket, options);\n    }\n\n    function onCloseOrRemove(err) {\n      self.removeSocket(socket);\n      socket.removeListener('free', onFree);\n      socket.removeListener('close', onCloseOrRemove);\n      socket.removeListener('agentRemove', onCloseOrRemove);\n    }\n  });\n};\n\nTunnelingAgent.prototype.createSocket = function createSocket(options, cb) {\n  var self = this;\n  var placeholder = {};\n  self.sockets.push(placeholder);\n\n  var connectOptions = mergeOptions({}, self.proxyOptions, {\n    method: 'CONNECT',\n    path: options.host + ':' + options.port,\n    agent: false,\n    headers: {\n      host: options.host + ':' + options.port\n    }\n  });\n  if (options.localAddress) {\n    connectOptions.localAddress = options.localAddress;\n  }\n  if (connectOptions.proxyAuth) {\n    connectOptions.headers = connectOptions.headers || {};\n    connectOptions.headers['Proxy-Authorization'] = 'Basic ' +\n        new Buffer(connectOptions.proxyAuth).toString('base64');\n  }\n\n  debug('making CONNECT request');\n  var connectReq = self.request(connectOptions);\n  connectReq.useChunkedEncodingByDefault = false; // for v0.6\n  connectReq.once('response', onResponse); // for v0.6\n  connectReq.once('upgrade', onUpgrade);   // for v0.6\n  connectReq.once('connect', onConnect);   // for v0.7 or later\n  connectReq.once('error', onError);\n  connectReq.end();\n\n  function onResponse(res) {\n    // Very hacky. This is necessary to avoid http-parser leaks.\n    res.upgrade = true;\n  }\n\n  function onUpgrade(res, socket, head) {\n    // Hacky.\n    process.nextTick(function() {\n      onConnect(res, socket, head);\n    });\n  }\n\n  function onConnect(res, socket, head) {\n    connectReq.removeAllListeners();\n    socket.removeAllListeners();\n\n    if (res.statusCode !== 200) {\n      debug('tunneling socket could not be established, statusCode=%d',\n        res.statusCode);\n      socket.destroy();\n      var error = new Error('tunneling socket could not be established, ' +\n        'statusCode=' + res.statusCode);\n      error.code = 'ECONNRESET';\n      options.request.emit('error', error);\n      self.removeSocket(placeholder);\n      return;\n    }\n    if (head.length > 0) {\n      debug('got illegal response body from proxy');\n      socket.destroy();\n      var error = new Error('got illegal response body from proxy');\n      error.code = 'ECONNRESET';\n      options.request.emit('error', error);\n      self.removeSocket(placeholder);\n      return;\n    }\n    debug('tunneling connection has established');\n    self.sockets[self.sockets.indexOf(placeholder)] = socket;\n    return cb(socket);\n  }\n\n  function onError(cause) {\n    connectReq.removeAllListeners();\n\n    debug('tunneling socket could not be established, cause=%s\\n',\n          cause.message, cause.stack);\n    var error = new Error('tunneling socket could not be established, ' +\n                          'cause=' + cause.message);\n    error.code = 'ECONNRESET';\n    options.request.emit('error', error);\n    self.removeSocket(placeholder);\n  }\n};\n\nTunnelingAgent.prototype.removeSocket = function removeSocket(socket) {\n  var pos = this.sockets.indexOf(socket)\n  if (pos === -1) {\n    return;\n  }\n  this.sockets.splice(pos, 1);\n\n  var pending = this.requests.shift();\n  if (pending) {\n    // If we have pending requests and a socket gets closed a new one\n    // needs to be created to take over in the pool for the one that closed.\n    this.createSocket(pending, function(socket) {\n      pending.request.onSocket(socket);\n    });\n  }\n};\n\nfunction createSecureSocket(options, cb) {\n  var self = this;\n  TunnelingAgent.prototype.createSocket.call(self, options, function(socket) {\n    var hostHeader = options.request.getHeader('host');\n    var tlsOptions = mergeOptions({}, self.options, {\n      socket: socket,\n      servername: hostHeader ? hostHeader.replace(/:.*$/, '') : options.host\n    });\n\n    // 0 is dummy port for v0.6\n    var secureSocket = tls.connect(0, tlsOptions);\n    self.sockets[self.sockets.indexOf(socket)] = secureSocket;\n    cb(secureSocket);\n  });\n}\n\n\nfunction toOptions(host, port, localAddress) {\n  if (typeof host === 'string') { // since v0.10\n    return {\n      host: host,\n      port: port,\n      localAddress: localAddress\n    };\n  }\n  return host; // for v0.11 or later\n}\n\nfunction mergeOptions(target) {\n  for (var i = 1, len = arguments.length; i < len; ++i) {\n    var overrides = arguments[i];\n    if (typeof overrides === 'object') {\n      var keys = Object.keys(overrides);\n      for (var j = 0, keyLen = keys.length; j < keyLen; ++j) {\n        var k = keys[j];\n        if (overrides[k] !== undefined) {\n          target[k] = overrides[k];\n        }\n      }\n    }\n  }\n  return target;\n}\n\n\nvar debug;\nif (process.env.NODE_DEBUG && /\\btunnel\\b/.test(process.env.NODE_DEBUG)) {\n  debug = function() {\n    var args = Array.prototype.slice.call(arguments);\n    if (typeof args[0] === 'string') {\n      args[0] = 'TUNNEL: ' + args[0];\n    } else {\n      args.unshift('TUNNEL:');\n    }\n    console.error.apply(console, args);\n  }\n} else {\n  debug = function() {};\n}\nexports.debug = debug; // for test\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction getUserAgent() {\n  if (typeof navigator === \"object\" && \"userAgent\" in navigator) {\n    return navigator.userAgent;\n  }\n\n  if (typeof process === \"object\" && \"version\" in process) {\n    return `Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`;\n  }\n\n  return \"<environment undetectable>\";\n}\n\nexports.getUserAgent = getUserAgent;\n//# sourceMappingURL=index.js.map\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends stream.Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(RangeError, 'RSV2 and RSV3 must be clear', true, 1002);\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(RangeError, 'RSV1 must be clear', true, 1002);\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(RangeError, 'invalid opcode 0', true, 1002);\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(RangeError, 'FIN must be set', true, 1002);\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(RangeError, 'MASK must be set', true, 1002);\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(RangeError, 'MASK must be clear', true, 1002);\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(RangeError, 'Max payload size exceeded', false, 1009);\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(RangeError, 'Max payload size exceeded', false, 1009)\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(RangeError, 'invalid payload length 1', true, 1002);\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(RangeError, `invalid status code ${code}`, true, 1002);\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {(Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","'use strict';\n\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {net.Socket} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {stream.Duplex} The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {stream.Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n    ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.readyState === ws.OPEN && !resumeOnReceiverDrain) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if (buf[i] < 0x80) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      } else {\n        i += 2;\n      }\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      } else {\n        i += 3;\n      }\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      } else {\n        i += 4;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { createHash } = require('crypto');\nconst { createServer, STATUS_CODES } = require('http');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {http.Server} [options.server] A pre-created HTTP/S server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (options.port == null && !options.server && !options.noServer) {\n      throw new TypeError(\n        'One of the \"port\", \"server\", or \"noServer\" options must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = createServer((req, res) => {\n        const body = STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(() => this.emit('close'));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.trim().split(/ *, */);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {net.Socket} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n","'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|url.URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n      if (this._closeFrameReceived) this._socket.end();\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\nreadyStates.forEach((readyState, i) => {\n  const descriptor = { enumerable: true, value: i };\n\n  Object.defineProperty(WebSocket.prototype, readyState, descriptor);\n  Object.defineProperty(WebSocket, readyState, descriptor);\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    configurable: true,\n    enumerable: true,\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|url.URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    throw new Error(`Invalid URL: ${websocket.url}`);\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    websocket._readyState = WebSocket.CLOSING;\n    websocket.emit('error', err);\n    websocket.emitClose();\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      const addr = new URL(location, address);\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const extensions = parse(res.headers['sec-websocket-extensions']);\n\n        if (extensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n          websocket._extensions[\n            PerMessageDeflate.extensionName\n          ] = perMessageDeflate;\n        }\n      } catch (err) {\n        abortHandshake(\n          websocket,\n          socket,\n          'Invalid Sec-WebSocket-Extensions header'\n        );\n        return;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket)} stream The request to abort or the\n *     socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n  websocket._socket.resume();\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._closeCode = err[kStatusCode];\n  websocket.emit('error', err);\n  websocket._socket.destroy();\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk and emitted synchronously in a single\n  // `'data'` event.\n  //\n  websocket._socket.read();\n  websocket._receiver.end();\n\n  this.removeListener('data', socketOnData);\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n",null,"module.exports = require(\"assert\");;","module.exports = require(\"buffer\");;","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"module\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"querystring\");;","module.exports = require(\"readline\");;","module.exports = require(\"stream\");;","module.exports = require(\"tls\");;","module.exports = require(\"tty\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","module.exports = require(\"zlib\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\tvar threw = true;\n\ttry {\n\t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t\tthrew = false;\n\t} finally {\n\t\tif(threw) delete __webpack_module_cache__[moduleId];\n\t}\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\n__webpack_require__.ab = __dirname + \"/\";","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(3109);\n"],"mappings":";;;;;;;;;;A;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9sCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACrDA;AACA;A;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC9QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACtQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC9gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACvxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACveA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACnnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACLA;AACA;A;;;;;ACDA;AACA;A;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC55BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AClnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A;;;;;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC39BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACt8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC31BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACt5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACndA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACllCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;;;;;;;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A;;;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC54BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACnMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC/UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACxIA;AACA;AACA;A;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;AC5fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;;ACvZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;;ACh7BA;AACA;AACA;A;;;;;AAFA;AACA;AACA;A;;;;;AAFA;AACA;AACA;A;;;;;AAFA;AACA;AACA;A;;;;;;;;A;;;;;;;;A;;;;;;ACFA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;;;ACDA;AACA;A;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5BA;AACA;ACDA;AACA;AACA;AACA;;A","sourceRoot":""}